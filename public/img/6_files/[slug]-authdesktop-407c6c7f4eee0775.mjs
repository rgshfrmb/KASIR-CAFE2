(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[11450,23279,48035,50157,12548,54674,68743,59798,67133,41990,28818,89734,91871,47315,18764,56103],{641661:(e,t,n)=>{var i={"./":[318205,9],"./CZ":[706711,9,6711],"./CZ.js":[706711,9,6711],"./DA":[377333,9,77333],"./DA.js":[377333,9,77333],"./DE":[498302,9,98302],"./DE.js":[498302,9,98302],"./ENUK":[15662,9,15662],"./ENUK.js":[15662,9,15662],"./ENUS":[658213,9,58213],"./ENUS.js":[658213,9,58213],"./ESAR":[534894,9,34894],"./ESAR.js":[534894,9,34894],"./ESES":[195798,9,95798],"./ESES.js":[195798,9,95798],"./ESMX":[291024,9,91024],"./ESMX.js":[291024,9,91024],"./FI":[554886,9,54886],"./FI.js":[554886,9,54886],"./FR":[8218,9,8218],"./FR.js":[8218,9,8218],"./GR":[564236,9,64236],"./GR.js":[564236,9,64236],"./HI":[605117,9,5117],"./HI.js":[605117,9,5117],"./HU":[88880,9,88880],"./HU.js":[88880,9,88880],"./ID":[188428,9,88428],"./ID.js":[188428,9,88428],"./IT":[881997,9,81997],"./IT.js":[881997,9,81997],"./JP":[372456,9,72456],"./JP.js":[372456,9,72456],"./KR":[849295,9,49295],"./KR.js":[849295,9,49295],"./MS":[564142,9,64142],"./MS.js":[564142,9,64142],"./NL":[607081,9,7081],"./NL.js":[607081,9,7081],"./NO":[574849,9,74849],"./NO.js":[574849,9,74849],"./PL":[858892,9,58892],"./PL.js":[858892,9,58892],"./PTBR":[204798,9,4798],"./PTBR.js":[204798,9,4798],"./PTPT":[367343,9,67343],"./PTPT.js":[367343,9,67343],"./RO":[765171,9,65171],"./RO.js":[765171,9,65171],"./RU":[390988,9,90988],"./RU.js":[390988,9,90988],"./SK":[532792,9,32792],"./SK.js":[532792,9,32792],"./SV":[772853,9,72853],"./SV.js":[772853,9,72853],"./TH":[213755,9,13755],"./TH.js":[213755,9,13755],"./TL":[551618,9,51618],"./TL.js":[551618,9,51618],"./TR":[400571,9,571],"./TR.js":[400571,9,571],"./UA":[874132,9,74132],"./UA.js":[874132,9,74132],"./VT":[700762,9,762],"./VT.js":[700762,9,762],"./ZHCN":[28240,9,28240],"./ZHCN.js":[28240,9,28240],"./ZHTW":[859490,9,59490],"./ZHTW.js":[859490,9,59490],"./index":[318205,9],"./index.js":[318205,9],"./localeToFilename":[932466,9],"./localeToFilename.js":[932466,9],"./types":[695846,7,95846],"./types.js":[695846,7,95846]};function o(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(o,16|t[1])))}o.keys=()=>Object.keys(i),o.id=641661,e.exports=o},263116:(e,t,n)=>{n.d(t,{ZP:()=>T,TA:()=>I});var i=n(667294);function o(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=n(659864),d=n(108679),l=n.n(d);function c(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function u(e){console.warn("loadable: "+e)}var h=i.createContext();function p(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var g={initialChunks:{}},m="PENDING",f="REJECTED";var b=function(e){return e};function v(e){var t=e.defaultResolveComponent,n=void 0===t?b:t,d=e.render,u=e.onLoad;function p(e,t){void 0===t&&(t={});var p=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),b={};function v(e){return t.cacheKey?t.cacheKey(e):p.resolve?p.resolve(e):"static"}function x(e,i,o){var r=t.resolveComponent?t.resolveComponent(e,i):n(e);if(t.resolveComponent&&!(0,a.isValidElementType)(r))throw new Error("resolveComponent returned something that is not a React component!");return l()(o,r,{preload:!0}),r}var y,_=function(e){var n,i;function a(n){var i;return(i=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:v(n)},c(!n.__chunkExtractor||p.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(p.requireAsync(n).catch((function(){return null})),i.loadSync(),n.__chunkExtractor.addChunk(p.chunkName(n))),s(i)):(!1!==t.ssr&&(p.isReady&&p.isReady(n)||p.chunkName&&g.initialChunks[p.chunkName(n)])&&i.loadSync(),i)}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,a.getDerivedStateFromProps=function(e,t){var n=v(e);return r({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var l=a.prototype;return l.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},l.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},l.componentWillUnmount=function(){this.mounted=!1},l.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},l.getCacheKey=function(){return v(this.props)},l.getCache=function(){return b[this.getCacheKey()]},l.setCache=function(e){void 0===e&&(e=void 0),b[this.getCacheKey()]=e},l.triggerOnLoad=function(){var e=this;u&&setTimeout((function(){u(e.state.result,e.props)}))},l.loadSync=function(){if(this.state.loading)try{var e=x(p.requireSync(this.props),this.props,C);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:p.resolve(this.props),chunkName:p.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},l.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=x(t,e.props,{Loadable:C});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},l.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,o(t,["__chunkExtractor","forwardedRef"])),i=this.getCache();return i||((i=p.requireAsync(n)).status=m,this.setCache(i),i.then((function(){i.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:p.resolve(e.props),chunkName:p.chunkName(e.props),error:t?t.message:t}),i.status=f}))),i},l.render=function(){var e=this.props,n=e.forwardedRef,i=e.fallback,s=(e.__chunkExtractor,o(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,l=a.error,c=a.loading,u=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(l)throw l;var h=i||t.fallback||null;return c?h:d({fallback:h,result:u,options:t,props:r({},s,{ref:n})})},a}(i.Component),w=(y=_,function(e){return i.createElement(h.Consumer,null,(function(t){return i.createElement(y,Object.assign({__chunkExtractor:t},e))}))}),C=i.forwardRef((function(e,t){return i.createElement(w,Object.assign({forwardedRef:t},e))}));return C.preload=function(e){p.requireAsync(e)},C.load=function(e){return p.requireAsync(e)},C}return{loadable:p,lazy:function(e,t){return p(e,r({},t,{suspense:!0}))}}}var x=v({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return i.createElement(t,n)}}),y=x.loadable,_=x.lazy,w=v({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),C=w.loadable,S=w.lazy,j="undefined"!=typeof window;function I(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,i=void 0===n?"":n;if(!j)return u("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(j){var r=p(i),s=document.getElementById(r);if(s){o=JSON.parse(s.textContent);var a=document.getElementById(r+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){g.initialChunks[e]=!0}))}}if(!o)return u("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var d=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function i(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(d||(d=!0,e()))}t.push=function(){n.apply(void 0,arguments),i()},i()})).then(e)}var E=y;E.lib=C,_.lib=S;const T=E},169272:(e,t,n)=>{var i=n(310723),o=[],r=[],s=i.makeRequestCallFromTimer((function(){if(r.length)throw r.shift()}));function a(e){var t;(t=o.length?o.pop():new d).task=e,i(t)}function d(){this.task=null}e.exports=a,d.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(r.push(e),s())}finally{this.task=null,o[o.length]=this}}},310723:(e,t,n)=>{function i(e){r.length||(o(),!0),r[r.length]=e}e.exports=i;var o,r=[],s=0;function a(){for(;s<r.length;){var e=s;if(s+=1,r[e].call(),s>1024){for(var t=0,n=r.length-s;t<n;t++)r[t]=r[t+s];r.length-=s,s=0}}r.length=0,s=0,!1}var d,l,c,u=void 0!==n.g?n.g:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof h?(d=1,l=new h(a),c=document.createTextNode(""),l.observe(c,{characterData:!0}),o=function(){d=-d,c.data=d}):o=p(a),i.requestFlush=o,i.makeRequestCallFromTimer=p},294184:(e,t)=>{var n;!function(){var i={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var s=o.apply(null,n);s&&e.push(s)}else if("object"===r)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},538334:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(120975),o=n(649610),r=n(116434),s=n(325921),a=n(284125);var d=function(){function e(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=r.store.getState().refCount>0;e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1)};var d=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return i.createStore(o.default,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=d,this.monitor=new s.default(d,new a.default(d)),this.backend=e(this),d.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch;var n=r.default(this);return Object.keys(n).reduce((function(i,o){var r,s=n[o];return i[o]=(r=s,function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(e,n);void 0!==o&&t(o)}),i}),{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=d},325921:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(640809),o=n(952705),r=n(442520),s=n(441143),a=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var n=this;void 0===t&&(t={handlerIds:void 0});var i=t.handlerIds;s("function"==typeof e,"listener must be a function."),s(void 0===i||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId;return this.store.subscribe((function(){var t=n.store.getState(),s=t.stateId;try{s===o||s===o+1&&!r.areDirty(t.dirtyHandlerIds,i)||e()}finally{o=s}}))},e.prototype.subscribeToOffsetChange=function(e){var t=this;s("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var i=t.store.getState().dragOffset;i!==n&&(n=i,e())}))},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return s(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(s(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),o=this.getItemType();return i.default(n,o)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return Boolean(this.getItemType())},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return s(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(e),r=this.getItemType();if(r&&!i.default(o,r))return!1;var s=this.getTargetIds();if(!s.length)return!1;var a=s.indexOf(e);return n?a===s.length-1:a>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return o.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return o.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=a},284125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(4963),o=n(547227),r=n(556141),s=n(834314),a=n(441143),d=n(169272);function l(e){switch(e[0]){case"S":return r.HandlerRole.SOURCE;case"T":return r.HandlerRole.TARGET;default:a(!1,"Cannot parse handler ID: "+e)}}function c(e,t){var n=e.entries(),i=!1;do{var o=n.next(),r=o.done;if(o.value[1]===t)return!0;i=r}while(!i);return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){s.validateType(e),s.validateSourceContract(t);var n=this.addHandler(r.HandlerRole.SOURCE,e,t);return this.store.dispatch(i.addSource(n)),n},e.prototype.addTarget=function(e,t){s.validateType(e,!0),s.validateTargetContract(t);var n=this.addHandler(r.HandlerRole.TARGET,e,t);return this.store.dispatch(i.addTarget(n)),n},e.prototype.containsHandler=function(e){return c(this.dragSources,e)||c(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),a(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return a(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return l(e)===r.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return l(e)===r.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;a(this.getSource(e),"Expected an existing source."),this.store.dispatch(i.removeSource(e)),d((function(){t.dragSources.delete(e),t.types.delete(e)}))},e.prototype.removeTarget=function(e){a(this.getTarget(e),"Expected an existing target."),this.store.dispatch(i.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);a(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){a(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,n){var i=function(e){var t=o.default().toString();switch(e){case r.HandlerRole.SOURCE:return"S"+t;case r.HandlerRole.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}(e);return this.types.set(i,t),e===r.HandlerRole.SOURCE?this.dragSources.set(i,n):e===r.HandlerRole.TARGET&&this.dropTargets.set(i,n),i},e}();t.default=u},84554:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(446714),o=n(315033),r=n(441143),s=n(59980),a={type:s.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,n){void 0===t&&(t=[]),void 0===n&&(n={publishSource:!0});var d=n.publishSource,l=void 0===d||d,c=n.clientOffset,u=n.getSourceClientOffset,h=e.getMonitor(),p=e.getRegistry();e.dispatch(i.setClientOffset(c)),function(e,t,n){r(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var i=0,o=e;i<o.length;i++){var s=o[i];r(n.getSource(s),"Expected sourceIds to be registered.")}}(t,h,p);var g=function(e,t){for(var n=null,i=e.length-1;i>=0;i--)if(t.canDragSource(e[i])){n=e[i];break}return n}(t,h);if(null!==g){var m=null;c&&(!function(e){r("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(u),m=u(g)),e.dispatch(i.setClientOffset(c,m));var f=p.getSource(g).beginDrag(h,g);!function(e){r(o.isObject(e),"Item must be an object.")}(f),p.pinSource(g);var b=p.getSourceType(g);return{type:s.BEGIN_DRAG,payload:{itemType:b,item:f,sourceId:g,clientOffset:c||null,sourceClientOffset:m||null,isSourcePublic:!!l}}}e.dispatch(a)}}},676402:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(59980),r=n(315033),s=n(441143);t.default=function(e){return function(t){void 0===t&&(t={});var n=e.getMonitor(),a=e.getRegistry();!function(e){s(e.isDragging(),"Cannot call drop while not dragging."),s(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n),function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n).forEach((function(d,l){var c=function(e,t,n,i){var o=n.getTarget(e),a=o?o.drop(i,e):void 0;(function(e){s(void 0===e||r.isObject(e),"Drop result must either be an object or undefined.")})(a),void 0===a&&(a=0===t?{}:i.getDropResult());return a}(d,l,a,n),u={type:o.DROP,payload:{dropResult:i({},t,c)}};e.dispatch(u)}))}}},852126:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980),o=n(441143);t.default=function(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){o(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();return n.getSource(r,!0).endDrag(t,r),n.unpinSource(),{type:i.END_DRAG}}}},645140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(640809),o=n(59980),r=n(441143);t.default=function(e){return function(t,n){var s=(void 0===n?{}:n).clientOffset;!function(e){r(Array.isArray(e),"Expected targetIds to be an array.")}(t);var a=t.slice(0),d=e.getMonitor(),l=e.getRegistry();return function(e,t,n){r(t.isDragging(),"Cannot call hover while not dragging."),r(!t.didDrop(),"Cannot call hover after drop.");for(var i=0;i<e.length;i++){var o=e[i];r(e.lastIndexOf(o)===i,"Expected targetIds to be unique in the passed array.");var s=n.getTarget(o);r(s,"Expected targetIds to be registered.")}}(a,d,l),function(e,t,n){for(var o=e.length-1;o>=0;o--){var r=e[o],s=t.getTargetType(r);i.default(s,n)||e.splice(o,1)}}(a,l,d.getItemType()),function(e,t,n){for(var i=0,o=e;i<o.length;i++){var r=o[i];n.getTarget(r).hover(t,r)}}(a,d,l),{type:o.HOVER,payload:{targetIds:a,clientOffset:s||null}}}}},116434:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(84554),o=n(86045),r=n(645140),s=n(676402),a=n(852126);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(59980)),t.default=function(e){return{beginDrag:i.default(e),publishDragSource:o.default(e),hover:r.default(e),drop:s.default(e),endDrag:a.default(e)}}},446714:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980);t.setClientOffset=function(e,t){return{type:i.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},86045:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980);t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:i.PUBLISH_DRAG_SOURCE}}}},59980:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},4963:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},834314:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(441143);t.validateSourceContract=function(e){i("function"==typeof e.canDrag,"Expected canDrag to be a function."),i("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),i("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){i("function"==typeof e.canDrop,"Expected canDrop to be a function."),i("function"==typeof e.hover,"Expected hover to be a function."),i("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,n){n&&Array.isArray(t)?t.forEach((function(t){return e(t,!1)})):i("string"==typeof t||"symbol"==typeof t,n?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},294662:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(538334);t.createDragDropManager=function(e,t,n){return new i.default(e,t,n)}},720369:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(556141)),i(n(294662))},556141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(t.HandlerRole||(t.HandlerRole={}))},354014:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(116434),o=n(4963),r=n(171939),s=n(442520),a=n(315033);t.default=function(e,t){switch(void 0===e&&(e=s.NONE),t.type){case i.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return s.NONE;case i.BEGIN_DRAG:case i.PUBLISH_DRAG_SOURCE:case i.END_DRAG:case i.DROP:default:return s.ALL}var n=t.payload,d=n.targetIds,l=void 0===d?[]:d,c=n.prevTargetIds,u=void 0===c?[]:c,h=a.xor(l,u);if(!(h.length>0||!r.areArraysEqual(l,u)))return s.NONE;var p=u[u.length-1],g=l[l.length-1];return p!==g&&(p&&h.push(p),g&&h.push(g)),h}},14095:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(116434),r=n(171939),s={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=s);var n=t.payload;switch(t.type){case o.INIT_COORDS:case o.BEGIN_DRAG:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case o.HOVER:return r.areCoordsEqual(e.clientOffset,n.clientOffset)?e:i({},e,{clientOffset:n.clientOffset});case o.END_DRAG:case o.DROP:return s;default:return e}}},345596:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(116434),r=n(4963),s=n(315033),a={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=a);var n=t.payload;switch(t.type){case o.BEGIN_DRAG:return i({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return i({},e,{isSourcePublic:!0});case o.HOVER:return i({},e,{targetIds:n.targetIds});case r.REMOVE_TARGET:return-1===e.targetIds.indexOf(n.targetId)?e:i({},e,{targetIds:s.without(e.targetIds,n.targetId)});case o.DROP:return i({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return i({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},649610:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(14095),r=n(345596),s=n(378508),a=n(354014),d=n(938910),l=n(315033);t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:a.default(e.dirtyHandlerIds,{type:t.type,payload:i({},t.payload,{prevTargetIds:l.get(e,"dragOperation.targetIds",[])})}),dragOffset:o.default(e.dragOffset,t),refCount:s.default(e.refCount,t),dragOperation:r.default(e.dragOperation,t),stateId:d.default(e.stateId)}}},378508:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(4963);t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case i.ADD_SOURCE:case i.ADD_TARGET:return e+1;case i.REMOVE_SOURCE:case i.REMOVE_TARGET:return e-1;default:return e}}},938910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},952705:(e,t)=>{function n(e,t){return{x:e.x+t.x,y:e.y+t.y}}function i(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=n,t.subtract=i,t.getSourceClientOffset=function(e){var t=e.clientOffset,o=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&o&&r?i(n(t,r),o):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?i(t,n):null}},442520:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(315033);t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,n){return e!==t.NONE&&(e===t.ALL||void 0===n||i.intersection(n,e).length>0)}},315033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var n=new Map,i=function(e){return n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e,t){1===e&&o.push(t)})),o},t.intersection=function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}},171939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)},t.areArraysEqual=function(e,n,i){if(void 0===i&&(i=t.strictEquality),e.length!==n.length)return!1;for(var o=0;o<e.length;++o)if(!i(e[o],n[o]))return!1;return!0}},547227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.default=function(){return n++}},640809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}},120975:(e,t,n)=>{n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:()=>r,applyMiddleware:()=>f,bindActionCreators:()=>u,combineReducers:()=>l,compose:()=>m,createStore:()=>a});var i=n(98123),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},r={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var d=e,l=t,c=[],u=c,h=!1;function p(){u===c&&(u=c.slice())}function g(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),u.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=u.indexOf(e);u.splice(n,1),c=null}}}function f(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,l=d(l,e)}finally{h=!1}for(var t=c=u,n=0;n<t.length;n++){(0,t[n])()}return e}function b(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,f({type:r.REPLACE})}function v(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[i.Z]=function(){return this},e}return f({type:r.INIT}),(o={dispatch:f,subscribe:m,getState:g,replaceReducer:b})[i.Z]=v,o}function d(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];0,"function"==typeof e[o]&&(n[o]=e[o])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:r.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:r.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(l){s=l}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var i=!1,o={},r=0;r<a.length;r++){var l=a[r],c=n[l],u=e[l],h=c(u,t);if(void 0===h){var p=d(l,t);throw new Error(p)}o[l]=h,i=i||h!==u}return(i=i||a.length!==Object.keys(e).length)?o:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var i in e){var o=e[i];"function"==typeof o&&(n[i]=c(o,t))}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},r=t.map((function(e){return e(o)}));return g({},n,{dispatch:i=m.apply(void 0,r)(n.dispatch)})}}}},288668:(e,t,n)=>{var i=n(883369),o=n(90619),r=n(572385);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=r,e.exports=s},477412:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},234963:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[o++]=s)}return r}},829932:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}},862488:e=>{e.exports=function(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}},282908:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},744037:(e,t,n)=>{var i=n(698363),o=n(3674);e.exports=function(e,t){return e&&i(t,o(t),e)}},163886:(e,t,n)=>{var i=n(698363),o=n(481704);e.exports=function(e,t){return e&&i(t,o(t),e)}},285990:(e,t,n)=>{var i=n(646384),o=n(477412),r=n(234865),s=n(744037),a=n(163886),d=n(364626),l=n(200278),c=n(318805),u=n(201911),h=n(458234),p=n(946904),g=n(664160),m=n(43824),f=n(529148),b=n(738517),v=n(701469),x=n(644144),y=n(356688),_=n(513218),w=n(472928),C=n(3674),S=n(481704),j="[object Arguments]",I="[object Function]",E="[object Object]",T={};T[j]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[E]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[I]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,P,D,k,O){var R,B=1&n,A=2&n,M=4&n;if(P&&(R=k?P(t,D,k,O):P(t)),void 0!==R)return R;if(!_(t))return t;var L=v(t);if(L){if(R=m(t),!B)return l(t,R)}else{var Z=g(t),N=Z==I||"[object GeneratorFunction]"==Z;if(x(t))return d(t,B);if(Z==E||Z==j||N&&!k){if(R=A||N?{}:b(t),!B)return A?u(t,a(R,t)):c(t,s(R,t))}else{if(!T[Z])return k?t:{};R=f(t,Z,B)}}O||(O=new i);var F=O.get(t);if(F)return F;O.set(t,R),w(t)?t.forEach((function(i){R.add(e(i,n,P,i,t,O))})):y(t)&&t.forEach((function(i,o){R.set(o,e(i,n,P,o,t,O))}));var U=L?void 0:(M?A?p:h:A?S:C)(t);return o(U||t,(function(i,o){U&&(i=t[o=i]),r(R,o,e(i,n,P,o,t,O))})),R}},989881:(e,t,n)=>{var i=n(247816),o=n(899291)(i);e.exports=o},121078:(e,t,n)=>{var i=n(862488),o=n(137285);e.exports=function e(t,n,r,s,a){var d=-1,l=t.length;for(r||(r=o),a||(a=[]);++d<l;){var c=t[d];n>0&&r(c)?n>1?e(c,n-1,r,s,a):i(a,c):s||(a[a.length]=c)}return a}},247816:(e,t,n)=>{var i=n(228483),o=n(3674);e.exports=function(e,t){return e&&i(e,t,o)}},297786:(e,t,n)=>{var i=n(671811),o=n(240327);e.exports=function(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},868866:(e,t,n)=>{var i=n(862488),o=n(701469);e.exports=function(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}},200013:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},690939:(e,t,n)=>{var i=n(902492),o=n(637005);e.exports=function e(t,n,r,s,a){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:i(t,n,r,s,e,a))}},902492:(e,t,n)=>{var i=n(646384),o=n(967114),r=n(518351),s=n(916096),a=n(664160),d=n(701469),l=n(644144),c=n(936719),u="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,f,b){var v=d(e),x=d(t),y=v?h:a(e),_=x?h:a(t),w=(y=y==u?p:y)==p,C=(_=_==u?p:_)==p,S=y==_;if(S&&l(e)){if(!l(t))return!1;v=!0,w=!1}if(S&&!w)return b||(b=new i),v||c(e)?o(e,t,n,m,f,b):r(e,t,y,n,m,f,b);if(!(1&n)){var j=w&&g.call(e,"__wrapped__"),I=C&&g.call(t,"__wrapped__");if(j||I){var E=j?e.value():e,T=I?t.value():t;return b||(b=new i),f(E,T,n,m,b)}}return!!S&&(b||(b=new i),s(e,t,n,m,f,b))}},225588:(e,t,n)=>{var i=n(664160),o=n(637005);e.exports=function(e){return o(e)&&"[object Map]"==i(e)}},702958:(e,t,n)=>{var i=n(646384),o=n(690939);e.exports=function(e,t,n,r){var s=n.length,a=s,d=!r;if(null==e)return!a;for(e=Object(e);s--;){var l=n[s];if(d&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var c=(l=n[s])[0],u=e[c],h=l[1];if(d&&l[2]){if(void 0===u&&!(c in e))return!1}else{var p=new i;if(r)var g=r(u,h,c,e,t,p);if(!(void 0===g?o(h,u,3,r,p):g))return!1}}return!0}},829221:(e,t,n)=>{var i=n(664160),o=n(637005);e.exports=function(e){return o(e)&&"[object Set]"==i(e)}},267206:(e,t,n)=>{var i=n(191573),o=n(716432),r=n(406557),s=n(701469),a=n(139601);e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):a(e)}},269199:(e,t,n)=>{var i=n(989881),o=n(498612);e.exports=function(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}},191573:(e,t,n)=>{var i=n(702958),o=n(301499),r=n(542634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},716432:(e,t,n)=>{var i=n(690939),o=n(227361),r=n(379095),s=n(115403),a=n(689162),d=n(542634),l=n(240327);e.exports=function(e,t){return s(e)&&a(t)?d(l(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?r(n,e):i(t,s,3)}}},882689:(e,t,n)=>{var i=n(829932),o=n(297786),r=n(267206),s=n(269199),a=n(571131),d=n(307518),l=n(285022),c=n(406557),u=n(701469);e.exports=function(e,t,n){t=t.length?i(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=i(t,d(r));var p=s(e,(function(e,n,o){return{criteria:i(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return l(e,t,n)}))}},325970:(e,t,n)=>{var i=n(863012),o=n(379095);e.exports=function(e,t){return i(e,t,(function(t,n){return o(e,n)}))}},863012:(e,t,n)=>{var i=n(297786),o=n(10611),r=n(671811);e.exports=function(e,t,n){for(var s=-1,a=t.length,d={};++s<a;){var l=t[s],c=i(e,l);n(c,l)&&o(d,r(l,e),c)}return d}},840371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},379152:(e,t,n)=>{var i=n(297786);e.exports=function(e){return function(t){return i(t,e)}}},618674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},540098:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,i,o,r){for(var s=-1,a=n(t((i-e)/(o||1)),0),d=Array(a);a--;)d[r?a:++s]=e,e+=o;return d}},10611:(e,t,n)=>{var i=n(234865),o=n(671811),r=n(565776),s=n(513218),a=n(240327);e.exports=function(e,t,n,d){if(!s(e))return e;for(var l=-1,c=(t=o(t,e)).length,u=c-1,h=e;null!=h&&++l<c;){var p=a(t[l]),g=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=u){var m=h[p];void 0===(g=d?d(m,p,h):void 0)&&(g=s(m)?m:r(t[l+1])?[]:{})}i(h,p,g),h=h[p]}return e}},571131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},880531:(e,t,n)=>{var i=n(562705),o=n(829932),r=n(701469),s=n(733448),a=i?i.prototype:void 0,d=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return o(t,e)+"";if(s(t))return d?d.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},727561:(e,t,n)=>{var i=n(567990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},274757:e=>{e.exports=function(e,t){return e.has(t)}},671811:(e,t,n)=>{var i=n(701469),o=n(115403),r=n(555514),s=n(479833);e.exports=function(e,t){return i(e)?e:o(e,t)?[e]:r(s(e))}},257157:(e,t,n)=>{var i=n(274318);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},593147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},540419:(e,t,n)=>{var i=n(562705),o=i?i.prototype:void 0,r=o?o.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},626393:(e,t,n)=>{var i=n(733448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e==e,s=i(e),a=void 0!==t,d=null===t,l=t==t,c=i(t);if(!d&&!c&&!s&&e>t||s&&a&&l&&!d&&!c||o&&a&&l||!n&&l||!r)return 1;if(!o&&!s&&!c&&e<t||c&&n&&r&&!o&&!s||d&&n&&r||!a&&r||!l)return-1}return 0}},285022:(e,t,n)=>{var i=n(626393);e.exports=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,a=r.length,d=n.length;++o<a;){var l=i(r[o],s[o]);if(l)return o>=d?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},318805:(e,t,n)=>{var i=n(698363),o=n(799551);e.exports=function(e,t){return i(e,o(e),t)}},201911:(e,t,n)=>{var i=n(698363),o=n(151442);e.exports=function(e,t){return i(e,o(e),t)}},899291:(e,t,n)=>{var i=n(498612);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!i(n))return e(n,o);for(var r=n.length,s=t?r:-1,a=Object(n);(t?s--:++s<r)&&!1!==o(a[s],s,a););return n}}},747445:(e,t,n)=>{var i=n(540098),o=n(816612),r=n(418601);e.exports=function(e){return function(t,n,s){return s&&"number"!=typeof s&&o(t,n,s)&&(n=s=void 0),t=r(t),void 0===n?(n=t,t=0):n=r(n),s=void 0===s?t<n?1:-1:r(s),i(t,n,s,e)}}},967114:(e,t,n)=>{var i=n(288668),o=n(282908),r=n(274757);e.exports=function(e,t,n,s,a,d){var l=1&n,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var h=d.get(e),p=d.get(t);if(h&&p)return h==t&&p==e;var g=-1,m=!0,f=2&n?new i:void 0;for(d.set(e,t),d.set(t,e);++g<c;){var b=e[g],v=t[g];if(s)var x=l?s(v,b,g,t,e,d):s(b,v,g,e,t,d);if(void 0!==x){if(x)continue;m=!1;break}if(f){if(!o(t,(function(e,t){if(!r(f,t)&&(b===e||a(b,e,n,s,d)))return f.push(t)}))){m=!1;break}}else if(b!==v&&!a(b,v,n,s,d)){m=!1;break}}return d.delete(e),d.delete(t),m}},518351:(e,t,n)=>{var i=n(562705),o=n(611149),r=n(977813),s=n(967114),a=n(668776),d=n(321814),l=i?i.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,i,l,u,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var g=1&i;if(p||(p=d),e.size!=t.size&&!g)return!1;var m=h.get(e);if(m)return m==t;i|=2,h.set(e,t);var f=s(p(e),p(t),i,l,u,h);return h.delete(e),f;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},916096:(e,t,n)=>{var i=n(458234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,s,a){var d=1&n,l=i(e),c=l.length;if(c!=i(t).length&&!d)return!1;for(var u=c;u--;){var h=l[u];if(!(d?h in t:o.call(t,h)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var f=d;++u<c;){var b=e[h=l[u]],v=t[h];if(r)var x=d?r(v,b,h,t,e,a):r(b,v,h,e,t,a);if(!(void 0===x?b===v||s(b,v,n,r,a):x)){m=!1;break}f||(f="constructor"==h)}if(m&&!f){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(t),m}},889464:(e,t,n)=>{var i=n(618674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=i},499021:(e,t,n)=>{var i=n(385564),o=n(545357),r=n(430061);e.exports=function(e){return r(o(e,void 0,i),e+"")}},458234:(e,t,n)=>{var i=n(868866),o=n(799551),r=n(3674);e.exports=function(e){return i(e,r,o)}},946904:(e,t,n)=>{var i=n(868866),o=n(151442),r=n(481704);e.exports=function(e){return i(e,r,o)}},301499:(e,t,n)=>{var i=n(689162),o=n(3674);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,i(s)]}return t}},799551:(e,t,n)=>{var i=n(234963),o=n(770479),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),i(s(e),(function(t){return r.call(e,t)})))}:o;e.exports=a},151442:(e,t,n)=>{var i=n(862488),o=n(385924),r=n(799551),s=n(770479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,r(e)),e=o(e);return t}:s;e.exports=a},900222:(e,t,n)=>{var i=n(671811),o=n(135694),r=n(701469),s=n(565776),a=n(541780),d=n(240327);e.exports=function(e,t,n){for(var l=-1,c=(t=i(t,e)).length,u=!1;++l<c;){var h=d(t[l]);if(!(u=null!=e&&n(e,h)))break;e=e[h]}return u||++l!=c?u:!!(c=null==e?0:e.length)&&a(c)&&s(h,c)&&(r(e)||o(e))}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},529148:(e,t,n)=>{var i=n(274318),o=n(257157),r=n(593147),s=n(540419),a=n(477133);e.exports=function(e,t,n){var d=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new d(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":return new d;case"[object Number]":case"[object String]":return new d(e);case"[object RegExp]":return r(e);case"[object Set]":return new d;case"[object Symbol]":return s(e)}}},137285:(e,t,n)=>{var i=n(562705),o=n(135694),r=n(701469),s=i?i.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||o(e)||!!(s&&e&&e[s])}},115403:(e,t,n)=>{var i=n(701469),o=n(733448),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!r.test(e)||null!=t&&e in Object(t))}},689162:(e,t,n)=>{var i=n(513218);e.exports=function(e){return e==e&&!i(e)}},668776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}},542634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},624523:(e,t,n)=>{var i=n(288306);e.exports=function(e){var t=i(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},572385:e=>{e.exports=function(e){return this.__data__.has(e)}},321814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},555514:(e,t,n)=>{var i=n(624523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,i,o){t.push(i?o.replace(r,"$1"):n||e)})),t}));e.exports=s},240327:(e,t,n)=>{var i=n(733448);e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},567990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},150361:(e,t,n)=>{var i=n(285990);e.exports=function(e){return i(e,5)}},23279:(e,t,n)=>{var i=n(513218),o=n(707771),r=n(14841),s=Math.max,a=Math.min;e.exports=function(e,t,n){var d,l,c,u,h,p,g=0,m=!1,f=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=d,i=l;return d=l=void 0,g=t,u=e.apply(i,n)}function x(e){return g=e,h=setTimeout(_,t),m?v(e):u}function y(e){var n=e-p;return void 0===p||n>=t||n<0||f&&e-g>=c}function _(){var e=o();if(y(e))return w(e);h=setTimeout(_,function(e){var n=t-(e-p);return f?a(n,c-(e-g)):n}(e))}function w(e){return h=void 0,b&&d?v(e):(d=l=void 0,u)}function C(){var e=o(),n=y(e);if(d=arguments,l=this,p=e,n){if(void 0===h)return x(p);if(f)return clearTimeout(h),h=setTimeout(_,t),v(p)}return void 0===h&&(h=setTimeout(_,t)),u}return t=r(t)||0,i(n)&&(m=!!n.leading,c=(f="maxWait"in n)?s(r(n.maxWait)||0,t):c,b="trailing"in n?!!n.trailing:b),C.cancel=function(){void 0!==h&&clearTimeout(h),g=0,d=p=l=h=void 0},C.flush=function(){return void 0===h?u:w(o())},C}},607187:(e,t,n)=>{var i=n(889464),o=n(479833),r=/[&<>"']/g,s=RegExp(r.source);e.exports=function(e){return(e=o(e))&&s.test(e)?e.replace(r,i):e}},227361:(e,t,n)=>{var i=n(297786);e.exports=function(e,t,n){var o=null==e?void 0:i(e,t);return void 0===o?n:o}},379095:(e,t,n)=>{var i=n(200013),o=n(900222);e.exports=function(e,t){return null!=e&&o(e,t,i)}},618446:(e,t,n)=>{var i=n(690939);e.exports=function(e,t){return i(e,t)}},356688:(e,t,n)=>{var i=n(225588),o=n(307518),r=n(531167),s=r&&r.isMap,a=s?o(s):i;e.exports=a},472928:(e,t,n)=>{var i=n(829221),o=n(307518),r=n(531167),s=r&&r.isSet,a=s?o(s):i;e.exports=a},733448:(e,t,n)=>{var i=n(644239),o=n(637005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},3674:(e,t,n)=>{var i=n(14636),o=n(400280),r=n(498612);e.exports=function(e){return r(e)?i(e):o(e)}},288306:(e,t,n)=>{var i=n(883369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(o.Cache||i),n}o.Cache=i,e.exports=o},707771:(e,t,n)=>{var i=n(555639);e.exports=function(){return i.Date.now()}},478718:(e,t,n)=>{var i=n(325970),o=n(499021)((function(e,t){return null==e?{}:i(e,t)}));e.exports=o},139601:(e,t,n)=>{var i=n(840371),o=n(379152),r=n(115403),s=n(240327);e.exports=function(e){return r(e)?i(s(e)):o(e)}},396026:(e,t,n)=>{var i=n(747445)();e.exports=i},189734:(e,t,n)=>{var i=n(121078),o=n(882689),r=n(105976),s=n(816612),a=r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),o(e,i(t,1),[])}));e.exports=a},770479:e=>{e.exports=function(){return[]}},823493:(e,t,n)=>{var i=n(23279),o=n(513218);e.exports=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}},418601:(e,t,n)=>{var i=n(14841),o=1/0;e.exports=function(e){return e?(e=i(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},640554:(e,t,n)=>{var i=n(418601);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var i=n(727561),o=n(513218),r=n(733448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||d.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},479833:(e,t,n)=>{var i=n(880531);e.exports=function(e){return null==e?"":i(e)}},860682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(946580);t.isFirefox=i.memoize((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=i.memoize((function(){return Boolean(window.safari)}))},527594:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(946580),o=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,n=this.entered.length;return this.entered=i.union(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=i.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=o},613087:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(527594),r=n(860682),s=n(796538),a=n(36076),d=n(278201),l=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return s.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;t.isNodeInDocument(e)||t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var n=t.dragStartSourceIds;t.dragStartSourceIds=null;var i=s.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(n||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:i});var o=e.dataTransfer,r=a.matchNativeItemType(o);if(t.monitor.isDragging()){if(o&&"function"==typeof o.setDragImage){var d=t.monitor.getSourceId(),l=t.sourceNodes.get(d),c=t.sourcePreviewNodes.get(d)||l;if(c){var u=t.getCurrentSourcePreviewNodeOptions(),h={anchorX:u.anchorX,anchorY:u.anchorY},p={offsetX:u.offsetX,offsetY:u.offsetY},g=s.getDragPreviewOffset(l,c,i,h,p);o.setDragImage(c,g.x,g.y)}}try{o.setData("application/json",{})}catch(m){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(r)t.beginDragNativeItem(r);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],t.enterLeaveCounter.enter(e.target)&&!t.monitor.isDragging()){var n=e.dataTransfer,i=a.matchNativeItemType(n);i&&t.beginDragNativeItem(i)}},this.handleTopDragEnter=function(e){var n=t.dragEnterTargetIds;(t.dragEnterTargetIds=[],t.monitor.isDragging())&&(t.altKeyPressed=e.altKey,r.isFirefox()||t.actions.hover(n,{clientOffset:s.getEventClientOffset(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var n=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));t.altKeyPressed=e.altKey,t.actions.hover(n||[],{clientOffset:s.getEventClientOffset(e)}),(n||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var n=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(n,{clientOffset:s.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new o.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,n){var i=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,n){var i=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return i.handleDragStart(t,e)},r=function(e){return i.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",r),function(){i.sourceNodes.delete(e),i.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",r),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var n=this,i=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},r=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",i),t.addEventListener("dragover",o),t.addEventListener("drop",r),function(){t.removeEventListener("dragenter",i),t.removeEventListener("dragover",o),t.removeEventListener("drop",r)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return i({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return i({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(d).some((function(t){return d[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=a.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=l},328775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=e.length,i=[],o=0;o<n;o++)i.push(o);i.sort((function(t,n){return e[t]<e[n]?-1:1}));var r,s,a=[],d=[],l=[];for(o=0;o<n-1;o++)r=e[o+1]-e[o],s=t[o+1]-t[o],d.push(r),a.push(s),l.push(s/r);var c=[l[0]];for(o=0;o<d.length-1;o++){var u=l[o],h=l[o+1];if(u*h<=0)c.push(0);else{r=d[o];var p=d[o+1],g=r+p;c.push(3*g/((g+p)/u+(g+r)/h))}}c.push(l[l.length-1]);var m,f=[],b=[];for(o=0;o<c.length-1;o++){m=l[o];var v=c[o],x=1/d[o];g=v+c[o+1]-m-m;f.push((m-v-g)*x),b.push(g*x*x)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=f,this.c3s=b}return e.prototype.interpolate=function(e){var t=this,n=t.xs,i=t.ys,o=t.c1s,r=t.c2s,s=t.c3s,a=n.length-1;if(e===n[a])return i[a];for(var d,l=0,c=s.length-1;l<=c;){var u=n[d=Math.floor(.5*(l+c))];if(u<e)l=d+1;else{if(!(u>e))return i[d];c=d-1}}var h=e-n[a=Math.max(0,c)],p=h*h;return i[a]+o[a]*h+r[a]*p+s[a]*h*p},e}();t.default=n},50013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach((function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})}))}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,n={};e&&Object.keys(this.config.exposeProperties).forEach((function(i){n[i]={value:t.config.exposeProperties[i](e,t.config.matchesTypes)}})),Object.defineProperties(this.item,n)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=n},345349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,n){var i=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=i?i:n}},36076:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(226851),o=n(50013);t.createNativeDragSource=function(e){return new o.NativeDragSource(i.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(i.nativeTypesConfig).filter((function(e){return i.nativeTypesConfig[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},226851:(e,t,n)=>{var i;Object.defineProperty(t,"__esModule",{value:!0});var o=n(278201),r=n(345349);t.nativeTypesConfig=((i={})[o.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},i[o.URL]={exposeProperties:{urls:function(e,t){return r.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},i[o.TEXT]={exposeProperties:{text:function(e,t){return r.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},i)},278201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},796538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(860682),o=n(328775);function r(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),i=n.top;return{x:n.left,y:i}}t.getNodeClientOffset=r,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,s,a){var d,l,c="IMG"===(d=t).nodeName&&(i.isFirefox()||!document.documentElement.contains(d)),u=r(c?e:t),h={x:n.x-u.x,y:n.y-u.y},p=e.offsetWidth,g=e.offsetHeight,m=s.anchorX,f=s.anchorY,b=function(e,t,n,o){var r=e?t.width:n,s=e?t.height:o;return i.isSafari()&&e&&(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}(c,t,p,g),v=b.dragPreviewWidth,x=b.dragPreviewHeight,y=a.offsetX,_=a.offsetY,w=0===_||_;return{x:0===y||y?y:new o.default([0,.5,1],[h.x,h.x/p*v,h.x+v-p]).interpolate(m),y:w?_:(l=new o.default([0,.5,1],[h.y,h.y/g*x,h.y+x-g]).interpolate(f),i.isSafari()&&c&&(l+=(window.devicePixelRatio-1)*x),l)}}},19402:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n||((n=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n}},395141:(e,t,n)=>{var i=n(613087);n(19402).default;var o=n(278201);t.hm=o,t.ZP=function(e){return new i.default(e)}},946580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.union=function(e,t){var n=new Set,i=function(e){return n.add(e)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e){return o.push(e)})),o}},925237:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(667294),d=n(720369),l=n(496395),c=n(489745),u=n(114774),h=n(215956);function p(e,t,n){return{dragDropManager:d.createDragDropManager(e,t,n)}}t.context=a.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=p,t.DragDropContextProvider=function(e){var n=e.children,i=s(e,["children"]),o="manager"in i?{dragDropManager:i.manager}:p(i.backend,i.context,i.debugMode);return a.createElement(t.Provider,{value:o},n)},t.DragDropContext=function(e,n,i){l.default("DragDropContext","backend",e);var s=p(e,n,i);return function(e){var n=e,i=n.displayName||n.name||"Component",d=function(d){function l(){var e=null!==d&&d.apply(this,arguments)||this;return e.ref=a.createRef(),e.getManager=function(){return s.dragDropManager},e}return o(l,d),l.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},l.prototype.render=function(){return a.createElement(t.Provider,{value:s},a.createElement(n,r({},this.props,{ref:c.isRefable(n)?this.ref:null})))},l.DecoratedComponent=e,l.displayName="DragDropContext("+i+")",l}(a.Component);return h(d,e)}}},328202:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(667294),a=n(496395),d=n(925237),l=n(489745),c=n(353924),u=n(215956),h=n(114774),p=n(596774);t.default=function(e,t){return void 0===t&&(t={}),a.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(c.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var i=n,a=t.arePropsEqual,c=void 0===a?p:a,g=i.displayName||i.name||"Component",m=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=s.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();p(t,e.state)||e.setState(t)}},e}return o(a,t),a.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},a.prototype.shouldComponentUpdate=function(e,t){return!c(e,this.props)||!p(t,this.state)},a.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},a.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},a.prototype.render=function(){var e=this;return s.createElement(d.Consumer,null,(function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?s.createElement(i,r({},e.props,e.state,{ref:l.isRefable(i)?e.ref:null})):null)}))},a.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",g,g);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},a.prototype.getCurrentState=function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)},a.displayName="DragLayer("+g+")",a.DecoratedComponent=n,a}(s.Component);return u(m,n)}}},344319:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294).memo((function(e){var t=e.connect,n=e.src;if("undefined"!=typeof Image){var i=new Image;i.src=n,i.onload=function(){return t(i)}}return null}));i.displayName="DragPreviewImage",t.default=i},450793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(496395),o=n(42742),r=n(910513),s=n(626706),a=n(391081),d=n(147277),l=n(270942),c=n(353924),u=n(114774);t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DragSource","type, spec, collect[, options]",e,t,n,h);var p=e;"function"!=typeof e&&(u(l.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var g=s.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return o.default({containerDisplayName:"DragSource",createHandler:g,registerHandler:r.default,createConnector:function(e){return new d.default(e)},createMonitor:function(e){return new a.default(e)},DecoratedComponent:e,getType:p,collect:n,options:h})}}},391081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(114774),o=!1,r=!1,s=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){i(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;i(!r,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return r=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{r=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=s},206059:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(496395),o=n(42742),r=n(548537),s=n(329492),a=n(270942),d=n(596177),l=n(750986),c=n(353924),u=n(114774);t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DropTarget","type, spec, collect[, options]",e,t,n,h);var p=e;"function"!=typeof e&&(u(a.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var g=s.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return o.default({containerDisplayName:"DropTarget",createHandler:g,registerHandler:r.default,createMonitor:function(e){return new d.default(e)},createConnector:function(e){return new l.default(e)},DecoratedComponent:e,getType:p,collect:n,options:h})}}},596177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(114774),o=!1,r=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;i(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=r},147277:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(65435),o=n(965525),r=n(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dragSource:function(e,n){t.dragSourceOptions=n||null,o.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,n){t.dragPreviewOptions=n||null,o.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!r(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!r(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},750986:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(65435),o=n(965525),r=n(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dropTarget:function(e,n){t.dropTargetOptions=n,o.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!r(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},626706:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(487943),o=(n(353924),n(114774)),r=["canDrag","beginDrag","isDragging","endDrag"],s=["beginDrag"],a=function(){function e(e,t,n){var i=this;this.spec=e,this.monitor=t,this.ref=n,this.props=null,this.beginDrag=function(){if(i.props)return i.spec.beginDrag(i.props,i.monitor,i.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),s.forEach((function(t){o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,n){return new a(e,t,n)}}},329492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(487943),o=(n(353924),n(114774)),r=["canDrop","hover","drop"],s=function(){function e(e,t,n){this.spec=e,this.monitor=t,this.ref=n,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,n){return new s(e,t,n)}}},42742:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(667294),a=n(925237),d=n(386998),l=n(489745),c=(n(353924),n(114774)),u=n(215956),h=n(596774);t.default=function(e){var t=e.DecoratedComponent,n=e.createHandler,i=e.createMonitor,p=e.createConnector,g=e.registerHandler,m=e.containerDisplayName,f=e.getType,b=e.collect,v=e.options.arePropsEqual,x=void 0===v?h:v,y=t,_=t.displayName||t.name||"Component",w=function(e){function u(t){var n=e.call(this,t)||this;return n.decoratedRef=s.createRef(),n.handleChange=function(){var e=n.getCurrentState();h(e,n.state)||n.setState(e)},n.disposable=new d.SerialDisposable,n.receiveProps(t),n.dispose(),n}return o(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return c(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!x(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new d.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){x(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(f(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=g(e,this.handler,this.manager),n=t[0],i=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new d.CompositeDisposable(new d.Disposable(o),new d.Disposable(i)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?b(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return s.createElement(a.Consumer,null,(function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),s.createElement(y,r({},e.props,e.getCurrentState(),{ref:l.isRefable(y)?e.decoratedRef:null}))}))},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(c(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",_,_),void 0!==e&&(this.manager=e,this.handlerMonitor=i(e),this.handlerConnector=p(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=m+"("+_+")",u}(s.Component);return u(w,t)}},76108:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(774399)),i(n(387559)),i(n(459296))},741365:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(910513),r=n(998008),s=n(391081),a=n(147277),d=n(114774);t.useDragSourceMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new s.default(e)}),[e]),i.useMemo((function(){return new a.default(e.getBackend())}),[e])]},t.useDragHandler=function(e,t,n){var s=r.useDragDropManager(),a=i.useMemo((function(){return{beginDrag:function(){var n=e.current,i=n.begin,o=n.item;if(i){var r=i(t);return d(null==r||"object"==typeof r,"dragSpec.begin() must either return an object, undefined, or null"),r||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,i){var o=e.current.isDragging;return o?o(t):i===n.getSourceId()},endDrag:function(){var i=e.current.end;i&&i(t.getItem(),t),n.reconnect()}}}),[]);i.useEffect((function(){var i=o.default(e.current.item.type,a,s),r=i[0],d=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),d}),[])}},787458:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(548537),r=n(998008),s=n(750986),a=n(596177);t.useDropTargetMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new a.default(e)}),[e]),i.useMemo((function(){return new s.default(e.getBackend())}),[e])]},t.useDropHandler=function(e,t,n){var s=r.useDragDropManager(),a=i.useMemo((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);i.useEffect((function(){var i=o.default(e.current.accept,a,s),r=i[0],d=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),d}),[t,n])}},365353:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(596774),o=n(667294);t.useCollector=function(e,t,n){var r=o.useState((function(){return t(e)})),s=r[0],a=r[1],d=o.useCallback((function(){var o=t(e);i(s,o)||(a(o),n&&n())}),[s,e,n]);return[s,d]}},998008:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(925237),r=n(114774);t.useDragDropManager=function(){var e=i.useContext(o.context).dragDropManager;return r(null!=e,"Expected drag drop context"),e}},179411:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(365353);t.useMonitorOutput=function(e,t,n){var r=o.useCollector(e,t,n),s=r[0],a=r[1];return i.useEffect((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})}),[e,a]),s}},774399:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(179411),o=n(741365),r=n(667294),s=n(114774);t.useDrag=function(e){var t=r.useRef(e);t.current=e,s(null!=e.item,"item must be defined"),s(null!=e.item.type,"item type must be defined");var n=o.useDragSourceMonitor(),a=n[0],d=n[1];o.useDragHandler(t,a,d);var l=i.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return d.reconnect()})),c=r.useMemo((function(){return d.hooks.dragSource()}),[d]),u=r.useMemo((function(){return d.hooks.dragPreview()}),[d]);return r.useEffect((function(){d.dragSourceOptions=t.current.options||null,d.reconnect()}),[d]),r.useEffect((function(){d.dragPreviewOptions=t.current.previewOptions||null,d.reconnect()}),[d]),[l,c,u]}},459296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(998008),r=n(365353);t.useDragLayer=function(e){var t=o.useDragDropManager().getMonitor(),n=r.useCollector(t,e),s=n[0],a=n[1];return i.useEffect((function(){return t.subscribeToOffsetChange(a)})),i.useEffect((function(){return t.subscribeToStateChange(a)})),s}},387559:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(179411),o=n(787458),r=n(667294),s=n(114774);t.useDrop=function(e){var t=r.useRef(e);t.current=e,s(null!=e.accept,"accept must be defined");var n=o.useDropTargetMonitor(),a=n[0],d=n[1];o.useDropHandler(t,a,d);var l=i.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return d.reconnect()})),c=r.useMemo((function(){return d.hooks.dropTarget()}),[d]);return r.useEffect((function(){d.dropTargetOptions=e.options||null,d.reconnect()}),[e.options]),[l,c]}},60598:(e,t,n)=>{var i=n(925237);t.Z5=i.DragDropContext,i.DragDropContextProvider,i.Consumer,n(328202).default;var o=n(450793);t.Ej=o.default;var r=n(206059);t.GR=r.default,n(344319).default;var s=n(76108);s.useDrag,s.useDragLayer,s.useDrop},910513:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addSource(e,t);return[o,function(){return i.removeSource(o)}]}},548537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addTarget(e,t);return[o,function(){return i.removeTarget(o)}]}},496395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]}},957523:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(114774);function r(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var n=e.ref;return o("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?i.cloneElement(e,{ref:function(e){r(t,e),n&&r(n,e)}}):i.cloneElement(e,{ref:t})}},353924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},590539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e}();t.CompositeDisposable=n},653473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(353924),o=function(){function e(e){this.isDisposed=!1,this.action=i.isFunction(e)?e:i.noop}return e.isDisposable=function(e){return e&&i.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:i.noop},e}();t.Disposable=o},409591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=n},386998:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(653473)),i(n(409591)),i(n(590539))},487943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},965525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},489745:(e,t)=>{function n(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=n,t.isRefable=function(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||n(e);var t}},270942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){return"string"==typeof t||"symbol"==typeof t||!!n&&Array.isArray(t)&&t.every((function(t){return e(t,!1)}))}},152548:()=>{String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},65435:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(957523);function r(e){return function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!i.isValidElement(t)){var r=t;return e(r,n),r}var s=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(s);var a=n?function(t){return e(t,n)}:e;return o.default(s,a)}}n(152548),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var o=r(i);t[n]=function(){return o}}})),t}},215956:(e,t,n)=>{var i=n(876618),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function d(e){return i.isMemo(e)?s:a[e.$$typeof]||o}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(g){var o=p(n);o&&o!==g&&e(t,o,i)}var s=c(n);u&&(s=s.concat(u(n)));for(var a=d(t),m=d(n),f=0;f<s.length;++f){var b=s[f];if(!(r[b]||i&&i[b]||m&&m[b]||a&&a[b])){var v=h(n,b);try{l(t,b,v)}catch(x){}}}return t}return t}},114774:e=>{e.exports=function(e,t,n,i,o,r,s,a){if(!e){var d;if(void 0===t)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,r,s,a],c=0;(d=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw d.framesToPop=1,d}}},121255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,d=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function f(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case u:case r:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case d:return e;default:return t}}case m:case g:case o:return t}}}function b(e){return f(e)===u}t.typeOf=f,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=d,t.Element=i,t.ForwardRef=h,t.Fragment=r,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===a||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===d||e.$$typeof===l||e.$$typeof===h)},t.isAsyncMode=function(e){return b(e)||f(e)===c},t.isConcurrentMode=b,t.isContextConsumer=function(e){return f(e)===l},t.isContextProvider=function(e){return f(e)===d},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return f(e)===h},t.isFragment=function(e){return f(e)===r},t.isLazy=function(e){return f(e)===m},t.isMemo=function(e){return f(e)===g},t.isPortal=function(e){return f(e)===o},t.isProfiler=function(e){return f(e)===a},t.isStrictMode=function(e){return f(e)===s},t.isSuspense=function(e){return f(e)===p}},876618:(e,t,n)=>{e.exports=n(121255)},560053:(e,t)=>{var n,i,o,r;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,d=a.now();t.unstable_now=function(){return a.now()-d}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,c=null,u=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(n){throw setTimeout(u,0),n}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(u,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},r=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,f=null,b=-1,v=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},r=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var y=new MessageChannel,_=y.port2;y.port1.onmessage=function(){if(null!==f){var e=t.unstable_now();x=e+v;try{f(!0,e)?_.postMessage(null):(m=!1,f=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){f=e,m||(m=!0,_.postMessage(null))},i=function(e,n){b=h((function(){e(t.unstable_now())}),n)},o=function(){p(b),b=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,o=e[i];if(!(void 0!==o&&0<j(o,t)))break e;e[i]=t,e[n]=o,n=i}}function C(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length;i<o;){var r=2*(i+1)-1,s=e[r],a=r+1,d=e[a];if(void 0!==s&&0>j(s,n))void 0!==d&&0>j(d,s)?(e[i]=d,e[a]=n,i=a):(e[i]=s,e[r]=n,i=r);else{if(!(void 0!==d&&0>j(d,n)))break e;e[i]=d,e[a]=n,i=a}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],E=[],T=1,P=null,D=3,k=!1,O=!1,R=!1;function B(e){for(var t=C(E);null!==t;){if(null===t.callback)S(E);else{if(!(t.startTime<=e))break;S(E),t.sortIndex=t.expirationTime,w(I,t)}t=C(E)}}function A(e){if(R=!1,B(e),!O)if(null!==C(I))O=!0,n(M);else{var t=C(E);null!==t&&i(A,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,o()),k=!0;var r=D;try{for(B(n),P=C(I);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=P.callback;if("function"==typeof s){P.callback=null,D=P.priorityLevel;var a=s(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?P.callback=a:P===C(I)&&S(I),B(n)}else S(I);P=C(I)}if(null!==P)var d=!0;else{var l=C(E);null!==l&&i(A,l.startTime-n),d=!1}return d}finally{P=null,D=r,k=!1}}var L=r;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||k||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return C(I)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var d=-1;break;case 2:d=250;break;case 5:d=1073741823;break;case 4:d=1e4;break;default:d=5e3}return e={id:T++,callback:r,priorityLevel:e,startTime:s,expirationTime:d=s+d,sortIndex:-1},s>a?(e.sortIndex=s,w(E,e),null===C(I)&&e===C(E)&&(R?o():R=!0,i(A,s-a))):(e.sortIndex=d,w(I,e),O||k||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},363840:(e,t,n)=>{e.exports=n(560053)},596774:e=>{e.exports=function(e,t,n,i){var o=n?n.call(i,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),d=0;d<r.length;d++){var l=r[d];if(!a(l))return!1;var c=e[l],u=t[l];if(!1===(o=n?n.call(i,c,u,l):void 0)||void 0===o&&c!==u)return!1}return!0}},98123:(e,t,n)=>{n.d(t,{Z:()=>i}),e=n.hmd(e);const i=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},17314:(e,t,n)=>{n.d(t,{Z:()=>l});var i,o,r=n(813653),s=n(861470),a=0,d=0;const l=function(e,t,n){var l=t&&n||0,c=t||new Array(16),u=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:o;if(null==u||null==h){var p=e.random||(e.rng||r.Z)();null==u&&(u=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=o=16383&(p[6]<<8|p[7]))}var g=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:d+1,f=g-a+(m-d)/1e4;if(f<0&&void 0===e.clockseq&&(h=h+1&16383),(f<0||g>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=g,d=m,o=h;var b=(1e4*(268435455&(g+=122192928e5))+m)%4294967296;c[l++]=b>>>24&255,c[l++]=b>>>16&255,c[l++]=b>>>8&255,c[l++]=255&b;var v=g/4294967296*1e4&268435455;c[l++]=v>>>8&255,c[l++]=255&v,c[l++]=v>>>24&15|16,c[l++]=v>>>16&255,c[l++]=h>>>8|128,c[l++]=255&h;for(var x=0;x<6;++x)c[l+x]=u[x];return t||(0,s.Z)(c)}},482131:(e,t,n)=>{n.d(t,{kz:()=>x,Y:()=>f,Tx:()=>I,Tb:()=>T});var i,o,r,s,a=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},d=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},l=function(e,t){var n=function n(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},u=function(e,t,n){var i;return function(o){t.value>=0&&(o||n)&&(t.delta=t.value-(i||0),(t.delta||void 0===i)&&(i=t.value,e(t)))}},h=-1,p=function(){return"hidden"===document.visibilityState?0:1/0},g=function(){l((function(e){var t=e.timeStamp;h=t}),!0)},m=function(){return h<0&&(h=p(),g(),c((function(){setTimeout((function(){h=p(),g()}),0)}))),{get firstHiddenTime(){return h}}},f=function(e,t){var n,i=m(),o=a("FCP"),r=function(e){"first-contentful-paint"===e.name&&(l&&l.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=e.startTime,o.entries.push(e),n(!0)))},s=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],l=s?null:d("paint",r);(s||l)&&(n=u(e,o,t),s&&r(s),c((function(i){o=a("FCP"),n=u(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,n(!0)}))}))})))},b=!1,v=-1,x=function(e,t){b||(f((function(e){v=e.value})),b=!0);var n,i=function(t){v>-1&&e(t)},o=a("CLS",0),r=0,s=[],h=function(e){if(!e.hadRecentInput){var t=s[0],i=s[s.length-1];r&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,s.push(e)):(r=e.value,s=[e]),r>o.value&&(o.value=r,o.entries=s,n())}},p=d("layout-shift",h);p&&(n=u(i,o,t),l((function(){p.takeRecords().map(h),n(!0)})),c((function(){r=0,v=-1,o=a("CLS",0),n=u(i,o,t)})))},y={passive:!0,capture:!0},_=new Date,w=function(e,t){i||(i=t,o=e,r=new Date,j(removeEventListener),C())},C=function(){if(o>=0&&o<r-_){var e={entryType:"first-input",name:i.type,target:i.target,cancelable:i.cancelable,startTime:i.timeStamp,processingStart:i.timeStamp+o};s.forEach((function(t){t(e)})),s=[]}},S=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){w(e,t),o()},i=function(){o()},o=function(){removeEventListener("pointerup",n,y),removeEventListener("pointercancel",i,y)};addEventListener("pointerup",n,y),addEventListener("pointercancel",i,y)}(t,e):w(t,e)}},j=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,S,y)}))},I=function(e,t){var n,r=m(),h=a("FID"),p=function(e){e.startTime<r.firstHiddenTime&&(h.value=e.processingStart-e.startTime,h.entries.push(e),n(!0))},g=d("first-input",p);n=u(e,h,t),g&&l((function(){g.takeRecords().map(p),g.disconnect()}),!0),g&&c((function(){var r;h=a("FID"),n=u(e,h,t),s=[],o=-1,i=null,j(addEventListener),r=p,s.push(r),C()}))},E=new Set,T=function(e,t){var n,i=m(),o=a("LCP"),r=function(e){var t=e.startTime;t<i.firstHiddenTime&&(o.value=t,o.entries.push(e)),n()},s=d("largest-contentful-paint",r);if(s){n=u(e,o,t);var h=function(){E.has(o.id)||(s.takeRecords().map(r),s.disconnect(),E.add(o.id),n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,h,{once:!0,capture:!0})})),l(h,!0),c((function(i){o=a("LCP"),n=u(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,E.add(o.id),n(!0)}))}))}))}}},733237:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]"]=function(){return n(737989).Z}},227608:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/invite"]=function(){return n(737989).Z}},617911:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/more_ideas"]=function(){return n(737989).Z}},484898:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(737614),o=n(966427);const r={getBrowser:()=>(0,o.u)(i.Z.instance.browser_name||""),isSafari(){return this.getBrowser()===o.o.SAFARI},isChrome(){return this.getBrowser()===o.o.CHROME},isFirefox(){return this.getBrowser()===o.o.FIREFOX},isEdge(){return this.getBrowser()===o.o.EDGE}}},418102:(e,t,n)=>{n.d(t,{eE:()=>a,ZP:()=>d});let i=0;class o{constructor(e,t,n){this.pubsub=e,this.target=t,this.subscriberOptions=n,this.topics={}}publish(e,t,n){return n?this.getHandler()(this.target,e,t,n):this.getHandler()(this.target,e,t),this}subscribe(...e){return this.getChannel().addSubscriber(this,e),e.forEach((e=>{this.topics[e]=!0})),this}unsubscribe(...e){return 0===e.length&&(e=this.getTopics()),e.forEach((e=>delete this.topics[e])),this.getChannel().removeSubscriber(this,e),this}getChannel(){return this.pubsub.getChannel(this.target)}getHandler(){return this.subscriberOptions.handler}getId(){return this.id||(this.id=i,i+=1),this.id}getTopics(){return Object.keys(this.topics)}}class r{constructor(e,t){this.pubsub=e,this.target=t,this.subscribers=[],this.filters={},this.messages={}}addSubscriber(e,t){const n=e.getId();return this.subscribers[n]=e,t.forEach((t=>{this.filters[t]||(this.filters[t]={}),this.filters[t][n]||(this.filters[t][n]=e)})),e}removeSubscriber(e,t){const n=e.getId();t.forEach((e=>{this.filters[e]&&delete this.filters[e][n]})),this.subscribers.length<1&&this.pubsub.clearChannel(this.target)}publish(e,t){Object.values(this.filters[e]||{}).forEach((n=>{n.publish(e,t)})),"*"!==e&&this.publish("*",t),this.messages[e]=t}unsubscribeAll(){this.subscribers.forEach((e=>{e.unsubscribe()}))}}const s={Subscriber:o,Channel:r,instance:new class{constructor(e){this.ns=e,this.channels={}}_subscribe(e,t,n){const i=new o(this,e,{handler:n});return i.subscribe(t),i}subscribe(e,t,n){return this._subscribe(e,t,n)}publish(e,t,n){this.getChannel(e).publish(t,n)}getChannel(e){return this.channels[e]||(this.channels[e]=new r(this,e)),this.channels[e]}clearChannel(e){const t=this.channels[e];t&&(t.unsubscribeAll(),delete this.channels[e])}}("local")},a=s.instance,d=s},447186:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(85038),o=n(799881),r=n(737614),s=n(730762),a=n(241933),d=n(311866),l=n(233088),c=n(773559),u=n(804652),h=n(641483),p=n(858875);const g=new class{constructor(){var e,t,n;n={},(t="attributes")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}get(e){return e in this.attributes?this.attributes[e]:void 0}set(e,t){"object"==typeof e?Object.assign(this.attributes,e):this.attributes[e]=t}isAuthenticated(){return!!r.Z.instance.is_authenticated}isLimitedLogin(){return!!this.attributes.login_state&&2===this.attributes.login_state}attemptCrossDomainAutologin(){-1===c.Z.settings.CORS_HANDSHAKE_DOMAINS.indexOf(window.location.origin)||i.U2(p.x3)||n.e(12749).then(n.bind(n,697974)).then((({verifyLoggedInStatus:e})=>{e(r.Z.instance.unauth_id)}))}flushContextLogs(){a.Z.pause(),s.Z.getInstance().flushEvents(void 0,void 0)}logoutWithOptions(e,t,n){return(0,h.yl)(!0),this.flushContextLogs(),d.ZP.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then((()=>{(0,h.tj)("logout",{tags:{app:7===r.Z.instance.app_type_detailed?"windows_desktop":"web_denzel",reason:"user_initiated",source:t}}),l.ZP.sessionStorage.clear(),l.ZP.localStorage.clear(),i.t8(p.e7,"True",(0,i.kZ)(p.e7))})).then((()=>(0,u.D)("logoutWithOptions"))).then((()=>{if(n)for(const e in n)l.ZP.localStorage.setItem(e,n[e]);null!==e&&(0,o.Z)(e)}))}isWriteBanned(){if(this.attributes.nags&&Array.isArray(this.attributes.nags)){const e=this.attributes.nags;return e.length>0&&"write_banned"===e[0].type}return!1}}},930090:(e,t,n)=>{n.d(t,{W$:()=>i,Df:()=>o,f4:()=>r});const i=(e,t)=>{var n;const i="object"==typeof t.owner?null===(n=t.owner)||void 0===n?void 0:n.id:t.owner;return e.isAuth&&i===e.id},o=(e,t)=>Boolean(e.isAuth&&t.collaborated_by_me),r=(e,t)=>i(e,t)?3069:3070},622400:(e,t,n)=>{n.d(t,{e:()=>s,v:()=>a});var i=n(441143),o=n.n(i);class r{constructor(e,t){o()(e,"You must pass a requestContext to check an Experiment"),o()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_getGroup(e){return e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class s extends r{getGroup(e=!1){return this._getGroup(e)}}class a extends r{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},627578:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(607187),o=n.n(i);const r={};r._showErrorCallback=r._showErrorCallback||null,r.setShowHtmlErrorCallback=function(e){r._showErrorCallback=e},r.showError=function(e,t,n){const i=o()(e);return r.showHtmlError(i,t,n)},r.showHtmlError=function(e,t,n){"function"==typeof r._showErrorCallback&&r._showErrorCallback(e,t,n)};const s=r},230457:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(447186);const o=()=>i.Z.isAuthenticated()&&!!i.Z.attributes.facebook_id&&!i.Z.isLimitedLogin()},282972:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(561077);const o=/\{\s*(\w+)\s*\}/g,r=(e,t)=>(0,i.Z)(o,e,t);function s({args:e,format:t}){const n=(e||[]).reduce(((e,t,n)=>({...e,[n]:t.text})),{});return r(t,n)}},640027:(e,t,n)=>{function i(e){let t=!1;return{promise:new Promise(((n,i)=>{e.then((e=>t?i({isCanceled:!0}):n(e)),(e=>i(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}n.d(t,{Z:()=>i})},279890:(e,t,n)=>{n.d(t,{Z:()=>o});const i="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),o=({window:e,duration:t,run:n})=>{const o=i();let r=0,s=null;const a=()=>{const d=i()-o,l=d-r;if(t===1/0)n(0,d,l);else{const e=d/t;if(e>=1)return void n(1,d,l);n(e,d,l)}r=d,s=e.requestAnimationFrame(a)};return{start:()=>{s=e.requestAnimationFrame(a)},cancel:()=>{s&&(e.cancelAnimationFrame(s),s=null)}}}},624500:(e,t,n)=>{n.d(t,{Z:()=>c,w:()=>u});var i=n(946753);const o=e=>e._("{{ first }}","Generic message that lists 1 item","Generic message that lists 1 item (ex: Stevie)"),r=e=>e._("{{ first }} and {{ second }}","Generic message that lists 2 items","Generic message that lists 2 items (ex: Stevie and Michael)"),s=e=>e._("{{ first }}, {{ second }} and {{ third }}","Generic message that lists 3 items","Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)"),a=e=>e._("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}","Generic message that lists 4 items","Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)"),d=e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}","Generic message that lists 5 items","Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)"),l=e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}","Generic message that lists 6 items","Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)");function c(e,t){const n={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,i.nk)(o(t),n);case 2:return(0,i.nk)(r(t),n);case 3:return(0,i.nk)(s(t),n);case 4:return(0,i.nk)(a(t),n);case 5:return(0,i.nk)(d(t),n);case 6:return(0,i.nk)(l(t),n);default:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others","Generic message that lists more than 6 items","Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)"))(t),n)}}function u(e,t){const n={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,i.nk)(o(t),n);case 2:return(0,i.nk)(r(t),n);case 3:return(0,i.nk)(s(t),n);case 4:return(0,i.nk)(a(t),n);case 5:return(0,i.nk)(d(t),n);case 6:return(0,i.nk)(l(t),n);case 7:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}","Generic message that lists 7 items","Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)"))(t),n);default:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others","Generic message that lists more than 7 items","Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)"))(t),n)}}},778527:(e,t,n)=>{n.d(t,{ZP:()=>g});var i=n(667294),o=n(40142),r=n(618446),s=n.n(r),a=n(85831),d=n(505343),l=n(910289),c=n(387987),u=n(785893);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},g=(e,t={},n)=>r=>{const g=function(e){return t=>({experience:t.experiences[e],experiencesMulti:t.experiencesMulti?t.experiencesMulti[e]:void 0})}(e);n={...p,...n};const m=function(e,t,n=!0,r=!0,p=!1,g){class m extends i.Component{constructor(e){super(e),h(this,"state",{extraContext:void 0}),h(this,"setExtraContextState",(e=>{s()(this.state.extraContext,e)||this.setState({extraContext:e})}))}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,i){const{dispatch:o,experience:r,requestContext:a}=this.props;let d=i.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(d=t(n,i.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!s()(d,c)&&o((0,l.pz)([e],a.isBot,c)),!r||n.experience&&r.id===n.experience.id||o((0,l.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){const n="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},i=p&&null!=n&&n.advertiser_id?{advertiserId:n.advertiser_id}:void 0;this.props.mountPlacement(e,n,i)}render(){const{experience:e,experiencesMulti:t}=this.props,n={[p?"advertiserExperience":"experience"]:(0,a.E3)(e)?e:null};return(0,u.jsx)(g,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}}function f(e){const t=(0,c.B)(),n=(0,o.useDispatch)(),{mountPlacement:i,unmountPlacement:r}=(0,d.M)();return(0,u.jsx)(m,{...e,dispatch:n,mountPlacement:i,requestContext:t,unmountPlacement:r})}return f.displayName=`withPlacement(${g.displayName||g.name||"Component"})`,f}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,n.isAdvertiserPlacement,r);return(0,o.connect)(g)(m)}},512806:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(640027);function r(){const e=(0,i.useRef)([]),t=(0,i.useRef)({});return(0,i.useEffect)((()=>()=>{[...Object.keys(t.current).map((e=>t.current[e])),...e.current].forEach((e=>e()))}),[]),function(n,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:r,promise:s}=(0,o.Z)(n);return i?t.current[i]=r:e.current.push(r),s}}},602033:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(535718),o=n(387987),r=n(221469);var s=n(855168);function a({checkExperiments:e,disableFetch:t,viewer:n}){const i=(0,s.TH)(),a=(0,s.$B)(),d=(0,o.B)(),l=function({location:{pathname:e,search:t},match:{params:n,path:i},viewer:o}){return{routeData:{matchPath:i,params:n,parsedSearch:(0,r.mB)(t),pathname:e,search:t},user:{country:o.country||void 0,id:o.id||void 0,isAuth:o.isAuth,isEmployee:!!o.isEmployee||!1,isPartner:!!o.isPartner||!1,username:o.username||void 0}}}({location:i,match:a,viewer:n}),c=!!t&&t(l),u=!(!c&&e)||e(d.experiments);return{args:l,fetchDisabled:c||!u}}var d=n(34411);function l({getOptions:e,checkExperiments:t,disableFetch:n,...o}){const r=function(){const e=(0,d.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0}}(),{args:s,fetchDisabled:l}=a({checkExperiments:t,disableFetch:n,viewer:r}),c=e?e(s):void 0;return(0,i.Z)({dangerouslyDisableFetch:l,options:c,...o})}},528818:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(60598),o=n(395141);const r=(0,i.Z5)(o.ZP)},194620:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(60598),o=(n(297633),n(528818)),r=n(708206);const s=e=>t=>(0,r.compose)(o.Z,(0,i.GR)(e,{},((e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}))))(t)},610062:(e,t,n)=>{n.d(t,{Z:()=>a,l:()=>d});var i=n(40142);const o=[1000069,1000075],r={};function s(e){return o.forEach((t=>{!e[t]||void 0!==r[t]&&r[t].id===e[t].id||(r[t]=e[t])})),r}function a(e){return(0,i.connect)((e=>({lfvExperiences:s(e.experiences)})))(e)}function d(){return s((0,i.useSelector)((({experiences:e})=>e)))}},151106:(e,t,n)=>{n.r(t),n.d(t,{BoardCollabFlyout:()=>S,default:()=>j});var i=n(667294),o=n(760001),r=n(494715),s=n(653827),a=n(174523),d=n(535718),l=n(883119),c=n(785893);function u({board:e,scrollInfo:t}){const n=(0,a.ZP)(),o=(0,d.Z)({name:"BoardCollaboratorsResource",options:{board_id:e.id},noCache:!0});if(o.isLoaded){const{owner:n}=e,{data:a,isAtEnd:d,isFetching:l,fetchMore:u}=o,h=[n,...a||[]];return(0,c.jsxs)(i.Fragment,{children:[t?(0,c.jsx)(s.Z,{scrollBuffer:3*t.container.clientHeight,scrollHeight:t.container.scrollHeight,scrollTop:t.top,isAtEnd:d,isFetching:l,fetchMore:u}):null,h.map((e=>{const{full_name:t,id:n,image_medium_url:i,username:o}=e;return(0,c.jsx)(r.Z,{imageUrl:i,linkURL:`/${o}/`,name:t,subtitle:o,title:t},n)}))]})}return(0,c.jsx)(l.$j,{accessibilityLabel:n._("Loading","Loading spinner when rendering users","Loading spinner when rendering users"),show:!0})}var h=n(40142);const p=({heading:e,description:t,disabled:n=!1,id:i,onChange:o,switched:r})=>(0,c.jsxs)(l.xu,{display:"flex",direction:"column",width:"100%",paddingX:6,paddingY:4,children:[(0,c.jsx)(l.xv,{weight:"bold",children:e}),(0,c.jsxs)(l.xu,{display:"flex",direction:"row",alignItems:"center",marginTop:3,children:[(0,c.jsx)(l.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(l.xv,{children:t})}),(0,c.jsx)(l.rs,{id:i,onChange:o,disabled:n,switched:r})]})]});var g=n(631739),m=n(451190),f=n(164756);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends i.Component{constructor(...e){super(...e),b(this,"state",{invitesEnabled:Boolean(this.props.board.collaborator_invites_enabled),requestsEnabled:Boolean(this.props.board.collaborator_requests_enabled),emailEnabled:Boolean(this.props.board.collab_board_email)}),b(this,"handleInvitesToggle",(()=>this.setState((e=>({invitesEnabled:!e.invitesEnabled}))))),b(this,"handleRequestsToggle",(()=>this.setState((e=>({requestsEnabled:!e.requestsEnabled}))))),b(this,"handleEmailToggle",(()=>this.setState((e=>({emailEnabled:!e.emailEnabled}))))),b(this,"handleSubmit",(()=>{const{onDismiss:e,board:t,updateBoard:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state;n({...t,collaborator_invites_enabled:i,collaborator_requests_enabled:o,collab_board_email:r}).then((()=>e()))}))}render(){const{board:{privacy:e},onDismiss:t,isViewerOwner:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state,s=[{heading:this.props.i18n._("Email notifications","Sub-heading for email notifications group board setting","Sub-heading for email notifications group board setting"),description:this.props.i18n._("Receive emails when Pins are added to this board","Description of email notifications setting","Description of email notifications setting"),disabled:!1,onChange:this.handleEmailToggle,id:"email",switched:r}],a=[...s,{heading:this.props.i18n._("Group requests","Sub-heading for group requests group board setting","Sub-heading for group requests group board setting"),description:this.props.i18n._("People can request to join this board","Description of group requests setting","Description of group requests setting"),disabled:e===g.Z.BoardPrivacy.SECRET,onChange:this.handleRequestsToggle,id:"requests",switched:o},{heading:this.props.i18n._("Group members","Sub-heading for group members group board setting","Sub-heading for group members group board setting"),description:this.props.i18n._("Group members can invite others","Description of group members setting","Description of group members setting"),disabled:!1,onChange:this.handleInvitesToggle,id:"invites",switched:i}],d=n?a:s;return(0,c.jsx)(m.Z,{accessibilityModalLabel:this.props.i18n._("Edit group settings","Label for editing group settings","Label for editing group settings"),heading:this.props.i18n._("Group board settings","Modal header for editing settings for a group board","Modal header for editing settings for a group board"),footer:(0,c.jsx)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{color:"red",onClick:this.handleSubmit,text:this.props.i18n._("Done","Button text for being finished with editing group board settings","Button text for being finished with editing group board settings")})})}),onDismiss:t,size:"md",children:d.map((e=>{const{description:t,disabled:n,heading:i,id:o,onChange:r,switched:s}=e;return(0,c.jsx)(p,{description:t,disabled:n,heading:i,id:o,onChange:r,switched:s},o)}))})}}const x=(0,h.connect)(((e,t)=>({board:e.boards&&e.boards.content[t.boardId]})),(e=>({updateBoard:t=>e((0,f.wN)(t))})))((function(e){const t=(0,a.ZP)();return(0,c.jsx)(v,{...e,i18n:t})}));var y=n(26629),_=n(34411),w=n(855168);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends i.Component{constructor(...e){super(...e),C(this,"state",{contentRef:null,currentModal:null,scrollContainer:null,scrollTop:null}),C(this,"handleBoardLeave",(()=>{const{history:e,viewer:t}=this.props,n=t.isAuth?`/${t.username}`:"/";e.replace(n)})),C(this,"handleContentRef",(e=>{const{contentRef:t}=this.state;!t&&e&&(this.setState({contentRef:e}),e.focus())})),C(this,"handleScrollContainer",(e=>{const{scrollContainer:t}=this.state;!t&&e&&this.setState({scrollContainer:e})})),C(this,"handleScroll",(()=>{const{scrollContainer:e}=this.state;e&&this.setState({scrollTop:e.scrollTop})})),C(this,"handleConfirmationModalOpen",(()=>this.setState({currentModal:"confirmation"}))),C(this,"handleSettingsModalOpen",(()=>this.setState({currentModal:"settings"}))),C(this,"handleCloseModal",(()=>this.setState({currentModal:null}))),C(this,"renderCurrentModal",(()=>{const{board:{id:e,owner:t},viewer:n}=this.props,{currentModal:i}=this.state,o=n.isAuth&&n.username===t.username;switch(i){case"settings":return(0,c.jsx)(x,{boardId:e,isViewerOwner:o,onDismiss:this.handleCloseModal});default:return null}}))}renderInvite(e,t,n){if(!e.invited_user)return null;const i={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(o.Z,{...i})}render(){const{anchor:e,board:t,onDismiss:n}=this.props,{currentModal:o,scrollContainer:r,scrollTop:s}=this.state,a=r?{container:r,top:s||0}:null,d=(t.access||[]).includes("write");return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.mh,{children:(0,c.jsx)(l.xu,{position:"absolute",top:!0,zIndex:new l.Ry(1),children:(0,c.jsx)(l.J2,{anchor:e,onDismiss:o?()=>{}:n,idealDirection:"down",size:"xl",positionRelativeToAnchor:!1,children:(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxHeight:500,minWidth:360,width:"100%",children:[(0,c.jsx)(l.Le,{top:0,children:(0,c.jsxs)(l.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:64,paddingX:4,paddingY:4,children:[(0,c.jsx)("div",{ref:this.handleContentRef,tabIndex:"0",children:(0,c.jsx)(l.xv,{size:"lg",weight:"bold",children:this.props.i18n._("Group members","boardCollabFlyout.header","Heading for the group members flyout")})}),d&&(0,c.jsx)(l.xu,{right:!0,top:!0,position:"absolute",marginTop:2,marginEnd:2,children:(0,c.jsx)(l.hU,{accessibilityLabel:this.props.i18n._("Group board settings","boardCollabFlyout.settings.button","Icon for accessing settings on a group board"),icon:"cog",size:"lg",iconColor:"darkGray",onClick:this.handleSettingsModalOpen})})]})}),(0,c.jsx)(l.xu,{overflow:"scrollY",children:(0,c.jsx)(l.xu,{onScroll:this.handleScroll,ref:this.handleScrollContainer,children:d?(0,c.jsx)(y.Z,{board:t,scrollInfo:a,onBoardLeave:this.handleBoardLeave,renderInvite:this.renderInvite,onModalOpen:this.handleConfirmationModalOpen}):(0,c.jsx)(u,{board:t,scrollInfo:a})})})]})})})}),this.renderCurrentModal()]})}}function j(e){const t=(0,a.ZP)(),n=(0,_.Z)(),i=(0,w.k6)();return(0,c.jsx)(S,{...e,history:i,viewer:n,i18n:t})}},760001:(e,t,n)=>{n.d(t,{Z:()=>T});var i=n(667294),o=n(40142),r=n(451190),s=n(174523),a=n(946753),d=n(387987),l=n(883119),c=n(785893);function u({boardName:e,collaboratorName:t,onCancelTransferRequest:n,onDismiss:i}){const o=(0,s.ZP)(),u=(0,d.B)();return(0,c.jsx)(r.Z,{accessibilityModalLabel:o._("Board ownership transfer modal","boardCollabOwnershipTransferModal.accessibilityModalLabel","Accessibility label on board ownership transfer modal"),heading:(0,c.jsxs)(l.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(l.X6,{align:"center",size:"md",children:o._("Collaborators","boardCollabOwnershipTransferModal.heading","Heading for board ownership transfer modal")}),(0,c.jsx)(l.xu,{position:"absolute",top:!0,left:u.isRTL,right:!u.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(l.hU,{accessibilityLabel:o._("Close","boardCollabOwnershipTransferModal.iconAccessibilityLabel","Accessibility label on cancel icon button"),icon:"cancel",iconColor:"darkGray",onClick:i})})]}),footer:(0,c.jsxs)(l.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(l.iP,{fullWidth:!1,onTap:n,children:(0,c.jsx)(l.xv,{weight:"bold",children:o._("Cancel request","boardCollabOwnershipTransferModal.cancelRequest","Option to cancel board ownership transfer request")})}),(0,c.jsx)(l.zx,{color:"red",onClick:i,size:"lg",text:o._("Got it","boardCollabOwnershipTransferModal.confirmationButton","Button confirming board ownership transfer action")})]}),onDismiss:i,children:(0,c.jsx)(l.xu,{paddingX:8,children:(0,c.jsx)(l.xv,{align:"center",children:(0,a.nk)(o._("We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pins—but you won’t be able to manage collaborators, change the name, cover photo, or description of this board.","boardCollabOwnershipTransferModal.descriptionText","Explanation of transfer request and potential permissions changes"),{collaboratorName:t,boardName:(0,c.jsx)(l.xv,{inline:!0,weight:"bold",children:e})})})})})}var h=n(629318),p=n(163880);function g({boardId:e,collaboratorId:t,collaboratorName:n,isAcceptedCollaborator:r,onDelete:a}){const d=(0,o.useDispatch)(),g=(0,s.ZP)(),m=(0,i.useRef)(null),[f,b]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1),{boardName:y,pendingOwnershipTransfer:_}=(0,h.Z)(),w=()=>{d((0,p.xx)(e,t)),b(!1)},C=function({i18n:e,isAcceptedCollaborator:t,onCancelTransferRequest:n,onDelete:i,onRequestTransfer:o,showCancelRequestOption:r,showRequestTransferOption:s}){const a=[{onSelect:i,option:{value:"Remove from board",label:e._("Remove from board","getCollaboratorDropdownItems.removeText","Text for option to remove collaborator from board")}}];return t&&(r&&a.push({onSelect:n,option:{value:"Cancel request",label:e._("Cancel request","getCollaboratorDropdownItems.cancelText","Text for option to cancel ownership transfer request")}}),s&&a.push({onSelect:o,option:{value:"Request as board owner",label:e._("Request as board owner","getCollaboratorDropdownItems.requestText","Text for option to request ownership transfer")}})),a}({i18n:g,isAcceptedCollaborator:r,onCancelTransferRequest:w,onDelete:a,onRequestTransfer:()=>{(async()=>{b(!1),await d((0,p.Cf)(e,t)),x(!0)})()},showCancelRequestOption:_===t,showRequestTransferOption:!_});return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(l.kC,{justifyContent:"center",children:[(0,c.jsx)(l.hU,{accessibilityLabel:g._("Collaborator options","boardCollabInviteOverflowButton.accessibilityLabel","Accessibility label for overflow icon button"),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>b(!f),ref:m,selected:f}),f&&(0,c.jsx)(l.Lt,{anchor:m.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>b(!1),zIndex:new l.Ry(1e3),children:(0,c.jsx)(l.Lt.Section,{label:g._("Options","boardCollabInviteOverflowButton.dropdownSection","Options section in dropdown menu"),children:C.map((e=>(0,c.jsx)(l.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),v&&(0,c.jsx)(u,{boardName:y,collaboratorName:n,onCancelTransferRequest:()=>{w(),x(!1)},onDismiss:()=>{x(!1)}})]})}var m=n(494715),f=n(925265),b=n(34411),v=n(181307);function x({actionsDisabled:e,invite:t,invitedUser:n,isDim:i,onApprove:o,onDelete:r}){const a=(0,s.ZP)(),d=(0,b.Z)(),{access:u,board:p,status:x,invited_by_user:y}=t,{pendingOwnershipTransfer:_,viewerIsOwner:w}=(0,h.Z)(),C=d.isAuth&&n.id===d.id,S=d.isAuth&&y.id===d.id,j=n.id===y.id,I="accepted"===x,E=u.includes("approve"),T=u.includes("delete"),P=a._("Approve","[button] approve another pinner's request to join the board as a collaborator","[button] approve another pinner's request to join the board as a collaborator"),D=((e,t,n)=>e?a._("Leave","[button] for a collaborator to leave a group board","[button] for a collaborator to leave a group board"):t&&!n?a._("Decline","[button] decline another pinner's request to join board as a collaborator","[button] decline another pinner's request to join board as a collaborator"):a._("Remove","[button] remove a collaborator from the board]","[button] remove a collaborator from the board]"))(C,j,I),k=T&&!E,O=T&&E,R=`/${n.username}/`,B=(0,v.tc)("web_board_ownership_transfer"),A=w&&B().anyEnabled,M=A?(0,c.jsx)(g,{boardId:p.id,collaboratorId:n.id,collaboratorName:n.full_name,onDelete:r||(()=>{}),isAcceptedCollaborator:I}):(0,c.jsx)(l.zx,{disabled:e,onClick:r,text:D,size:"lg"}),L=_===n.id,Z=A&&(void 0!==i?i:!I);return(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(m.Z,{imageUrl:n.image_medium_url||"",name:n.full_name,title:n.full_name,subtitle:((e,n,i,o,r)=>{const s=t.invited_by_user.full_name;let d;return d=n?a._("Invitation pending","boardCollabInviteCell.pendingInvitationText","Subtext for collaborator with pending invitation"):i?a._("That's you","subtext for current user who requested to join this board","subtext for current user who requested to join this board"):o?a._("Invited by you","subtext for a pending collaborator who was invited by the current viewer","subtext for a pending collaborator who was invited by the current viewer"):r?a._("Requested to join","The subtext that identifies a pending collaborator has personally requested to join the board","The subtext that identifies a pending collaborator has personally requested to join the board"):(0,f.Z)(a._("Invited by {{ user_full_name }}","The subtext that identifies a pending collaborator who was invited to collaborate on the board","The subtext that identifies a pending collaborator who was invited to collaborate on the board"),{user_full_name:s}),e&&(d=d.concat(a._(" · Ownership pending","boardCollabInviteCell.pendingOwnershipText","Additional subtext for collaborator who has a pending board ownership transfer invitation"))),d})(L,Z,C,S,j),linkURL:R,isDim:!A&&(void 0!==i?i:!I),accessory:k&&M}),O&&(0,c.jsxs)(l.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,c.jsx)(l.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(l.zx,{fullWidth:!0,disabled:e,onClick:r,text:D,size:"lg"})}),(0,c.jsx)(l.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(l.zx,{fullWidth:!0,color:"red",disabled:e,onClick:o,text:P,size:"lg"})})]})]})}var y=n(881220),_=n(159617);function w(e){const t=(0,s.ZP)(),{onCancel:n,onRemove:i,useGestaltModal:o}=e,a=t._("Are you sure you want to leave this group board and remove it from your profile?"," - "," -- "),d=o?l.u_:r.Z;return(0,c.jsx)(d,{accessibilityModalLabel:t._("Leave board?"," - "," -- "),heading:t._("Leave board?"," - "," -- "),onDismiss:n,size:"sm",footer:(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{onClick:n,text:t._("Cancel"," - "," -- ")})}),(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{color:"red",onClick:i,text:t._("Leave"," - "," -- ")})})]}),children:(0,c.jsx)(l.xu,{padding:5,children:(0,c.jsx)(l.xv,{children:a})})})}class C extends i.Component{constructor(...e){var t,n,i;super(...e),i={shouldBlock:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}getBlockDescription(e,t){return"declineRequest"===e?t?(0,a.nk)(this.props.i18n._("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.","decline another pinner's request to join board as a collaborator and block them","decline another pinner's request to join board as a collaborator and block them"),{invited_user_first_name:t}):this.props.i18n._("This will decline this person from joining this board and block them from subsequent collaboration requests.","message that explains consequences of declining a request to join board as a collaborator","message that explains consequences of declining a request to join board as a collaborator"):t?(0,a.nk)(this.props.i18n._("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins."," - "," -- "),{invited_user_first_name:t}):this.props.i18n._("This will remove this person, people they invited, and all their Pins.","message that explains consequences of removing a collaborator","message that explains consequences of removing a collaborator")}render(){const{removeType:e,firstName:t,fullName:n,onCancel:o,onRemove:s,onRemoveAndBlock:d,useGestaltModal:u}=this.props,h="declineRequest"===e?(0,a.nk)(this.props.i18n._("Decline {{ invited_user_name }}?","[button] to decline a pinner's request to join a board as a collaborator","[button] to decline a pinner's request to join a board as a collaborator"),{invited_user_name:n}).join(""):(0,a.nk)(this.props.i18n._("Remove {{ invited_user_name }}?","[button] to remove a pinner as a collaborator from a group board","[button] to remove a pinner as a collaborator from a group board"),{invited_user_name:n}).join(""),p=this.props.i18n._("This will keep them from saving Pins to this board. You can also:","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user."),g=this.getBlockDescription(e,t),m=this.state.shouldBlock?this.props.i18n._("Block","block another pinner after denying their request to collaborate on a board","block another pinner after denying their request to collaborate on a board"):this.props.i18n._("Remove","decline another pinner's request to collaborate on a board","decline another pinner's request to collaborate on a board"),f=(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.xu,{padding:5,children:(0,c.jsx)(l.xv,{children:p})}),(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{padding:5,display:"flex",children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsxs)(l.__,{htmlFor:"banUser",children:[(0,c.jsx)(l.xv,{weight:"bold",children:(0,a.nk)(this.props.i18n._("Block {{ name }}"," - "," -- "),{name:t||""})}),(0,c.jsx)(l.xv,{size:"md",children:g})]})})]})]}),b=u?l.u_:r.Z;return(0,c.jsx)(b,{accessibilityModalLabel:h,heading:h,onDismiss:o,size:"sm",footer:(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{onClick:o,text:this.props.i18n._("Cancel"," - "," -- ")})}),(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{color:"red",onClick:this.state.shouldBlock?d:s,text:m})})]}),children:f})}}function S(e){const t=(0,s.ZP)();return(0,c.jsx)(C,{...e,i18n:t})}var j=n(880841);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends i.Component{constructor(...e){super(...e),I(this,"state",{currentModal:null,loading:!1}),I(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,t=this.props.i18n._("Collaborator removed","BoardCollabInviteCellContainer.toast","Toast for removing a collaborator from a board");e.showOneToast((({onHide:e})=>(0,c.jsx)(y.ZP,{duration:3e3,onHide:e,text:t})))})),I(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),I(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally((()=>{this.setState({loading:!1})}))})),I(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:n,onInviteDidUpdate:i}=this.props,o=this.isViewerInvitedUser;this.setState({currentModal:null,loading:!0}),t(o,e).then((()=>{i(),this.showRemoveSuccessToast(),o&&n()})).catch((()=>{})).finally((()=>{this.setState({loading:!1})}))})),I(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),I(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),I(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invitedUser:t}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invitedUser:e,invite:{invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invitedUser:e,useGestaltModal:t=!1}=this.props,{currentModal:n}=this.state;return"delete"===n?this.isViewerInvitedUser?(0,c.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:_.fe+1}},children:(0,c.jsx)(w,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):(0,c.jsx)(l.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:_.fe+1}},children:(0,c.jsx)(S,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,invitedUser:t,isDim:n}=this.props,{loading:i}=this.state;return(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(x,{invite:e,invitedUser:t,isDim:n&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:i}),this.renderCurrentModal()]})}}const T=(0,o.connect)((()=>({})),((e,t)=>{const{invite:n,invitedUser:{id:i},invite:{board:{id:o}}}=t;return{approveBoardCollabInvite:()=>e((0,p.q1)(o,i)),deleteBoardCollabInvite:(t,i)=>e((0,p.Jn)(n,t,i))}}))((function(e){const t=(0,s.ZP)();return(0,c.jsx)(E,{...e,toastManagerContext:(0,j.F9)(),viewer:(0,b.Z)(),i18n:t})}))},26629:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(760001),r=n(653827),s=n(174523),a=n(883119),d=n(785893);function l({fetchMore:e,invites:t,isAtEnd:n,isFetching:i,onBoardLeave:o,refreshData:l,renderInvite:c,scroll:u}){const h=(0,s.ZP)();return(0,d.jsxs)(a.xu,{children:[u&&(0,d.jsx)(r.Z,{scrollBuffer:3*u.container.clientHeight,scrollHeight:u.container.scrollHeight,scrollTop:u.top,isAtEnd:n,isFetching:i,fetchMore:e}),t.map(((e,t)=>e&&e.invited_user&&e.invited_user.id?(0,d.jsx)(a.xu,{children:c(e,o,l)},t):null)),i&&!n&&(0,d.jsx)(a.$j,{accessibilityLabel:h._("loading board invites","accessibility label for board collaborator invites loading spinner","accessibility label for board collaborator invites loading spinner"),show:!0})]})}var c=n(494715),u=n(955801),h=n(629318),p=n(535718),g=n(946753);class m extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refresh(),t.refresh()},(n="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}shouldComponentUpdate(e){const{invites:{data:t},pendingOwnershipTransfer:n}=e,{invites:{data:i},pendingOwnershipTransfer:o}=this.props;return!(i&&!(o!==n))||!!t&&i.length!==t.length}render(){var e,t;const{board:n,invites:r,invitesPendingApproval:s,scrollInfo:h,onBoardLeave:p,onModalOpen:m,pendingOwnershipTransfer:f,renderInvite:b}=this.props,{full_name:v,image_medium_url:x,username:y}=n.owner,_=null===(e=(r.data||[]).find((e=>{var t;return(null===(t=e.invited_user)||void 0===t?void 0:t.id)===f})))||void 0===e||null===(t=e.invited_user)||void 0===t?void 0:t.full_name,w=f&&_?(0,g.nk)(this.props.i18n._("Requested {{ collaboratorName }} to change to board owner","boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle","Subtext for an owner of board who has sent an ownership transfer request"),{collaboratorName:_}).join(""):this.props.i18n._("Owner of this board","boardInviteSheet.CollaboratorList.boardOwner.subtitle","The subtext that identifies the owner of a board");return(0,d.jsx)(i.Fragment,{children:r.isLoaded||s.isLoaded?(0,d.jsx)(u.Z,{fetchMore:r.fetchMore,children:({onScroll:e,setRef:t})=>(0,d.jsxs)(a.xu,{width:"100%",onScroll:e,ref:t,children:[(0,d.jsx)(l,{fetchMore:s.fetchMore,invites:s.data||[],isAtEnd:s.isAtEnd,isFetching:s.isFetching,onBoardLeave:p,refreshData:this.handleInvitesDidUpdate,scroll:h,renderInvite:b}),(s.data||[]).length>0?(0,d.jsx)(a.xu,{paddingY:3,children:(0,d.jsx)(a.iz,{})}):null,(0,d.jsxs)(a.xu,{paddingY:1,children:[(0,d.jsx)(c.Z,{imageUrl:x,linkURL:`/${y}/`,name:v,subtitle:w,title:v}),(r.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,d.jsx)(o.Z,{invite:e,invitedUser:e.invited_user,onBoardLeave:p,onModalOpen:m,onInviteDidUpdate:r.refresh},e.invited_user.id):null))]})]})}):(0,d.jsx)(a.$j,{show:!0,accessibilityLabel:this.props.i18n._("Loading","Loading state for showing board collaborators","Loading state for showing board collaborators")})})}}function f(e){const t=(0,s.ZP)(),{pendingOwnershipTransfer:n}=(0,h.Z)(),i=(0,p.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),o=(0,p.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return(0,d.jsx)(m,{...e,invites:i,invitesPendingApproval:o,i18n:t,pendingOwnershipTransfer:n})}},494715:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(151101),r=n(539484),s=n(883119),a=n(785893);function d(e){const{imageUrl:t,name:n,title:d,subtitle:l,accessory:c,linkURL:u,isDim:h}=e,p={__style:{opacity:h?.5:1}},g=(0,r.Z)({url:null!=u?u:""})?"nofollow":"none";return(0,a.jsx)(i.Fragment,{children:n&&d&&(0,a.jsxs)(s.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,a.jsx)(s.xu,{marginEnd:2,dangerouslySetInlineStyle:p,children:(0,a.jsx)(s.iP,{role:"link",rel:g,href:u||"",rounding:"circle",children:(0,a.jsx)(o.Z,{outline:!0,size:"md",name:n,src:t})})}),(0,a.jsxs)(s.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:p,children:[(0,a.jsx)(s.xv,{color:"darkGray",size:"lg",lineClamp:1,weight:"bold",children:(0,a.jsx)(s.rU,{rel:g,href:u||"",children:d})}),(0,a.jsx)(s.xv,{lineClamp:1,size:"sm",color:"gray",children:l})]}),c&&(0,a.jsx)(s.xu,{marginStart:4,children:c})]})})}},33076:(e,t,n)=>{n.d(t,{tk:()=>h,VV:()=>m,ZP:()=>b});var i=n(667294),o=n(233088),r=n(930090),s=n(883119),a=n(457175),d=n(174523),l=n(785893);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u="GroupBoardContentViewSwitcher_Settings",h=e=>e<=500,p=Object.freeze({}),g={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561},m=(e,t)=>{const n=o.ZP.localStorage.getItem(u)||p;return(e.isAuth&&n[e.id]||{})[t.id]||null};class f extends i.Component{constructor(...e){super(...e),c(this,"handleChange",(({event:e,value:t})=>{const n=t,{onChange:i,viewer:s,board:a}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,n)=>{if(!e.isAuth)return;const i=o.ZP.localStorage.getItem(u)||p,r=i[e.id]||{},s={...i,[e.id]:{...r,[t.id]:n}};o.ZP.localStorage.setItem(u,s)})(s,a,n),i&&i(n),this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,r.f4)(s,a),component:13475,element:g[n],aux_data:{board_id:a.id}})})),c(this,"logDropdownClick",(()=>{const{board:e,viewer:t}=this.props;this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,r.f4)(t,e),component:13486,element:11567,aux_data:{board_id:e.id}})})),c(this,"handleKeyPress",(e=>{const{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())}))}render(){const{currentView:e}=this.props,t=[{value:"custom",label:this.props.i18n._("Custom","Option for users to filter their Pins in a custom order (as it currently is)","Option for users to filter their Pins in a custom order (as it currently is)")},{value:"most_reactions",label:this.props.i18n._("Most reactions","Option for users to filter their Pins by the most reactions","Option for users to filter their Pins by the most reactions")}];return(0,l.jsx)("div",{role:"listbox",tabIndex:0,onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,children:(0,l.jsx)(s.EI,{id:"gbFilterSelectlist",onChange:this.handleChange,options:t,size:"lg",value:e})})}}const b=function(e){const{logContextEvent:t}=(0,a.v)(),n=(0,d.ZP)();return(0,l.jsx)(f,{...e,i18n:n,logContextEvent:t})}},497199:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{iconNode:t,title:n,subtitle:r,accessory:s}=e;return(0,o.jsxs)(i.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,o.jsx)(i.xu,{marginEnd:2,children:t}),(0,o.jsxs)(i.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,o.jsx)(i.xv,{color:"darkGray",size:"lg",lineClamp:1,weight:"bold",children:n}),(0,o.jsx)(i.xv,{lineClamp:1,size:"sm",color:"gray",children:r})]}),s&&(0,o.jsx)(i.xu,{children:s})]})}},629318:(e,t,n)=>{n.d(t,{k:()=>a,Z:()=>d});var i=n(762803),o=n(785893);const{Provider:r,useHook:s}=(0,i.Z)("BoardOwnershipTransferContext");function a({boardName:e="",children:t,pendingOwnershipTransfer:n=null,viewerIsOwner:i}){return(0,o.jsx)(r,{value:{boardName:e,pendingOwnershipTransfer:n,viewerIsOwner:i},children:t})}const d=s},483957:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(451190),o=n(174523),r=n(883119),s=n(785893);function a({cancelButtonLabel:e,confirmButtonLabel:t,heading:n,message:a,onCancel:d,onConfirm:l}){const c=(0,o.ZP)(),u=n||c._("Are you sure?"," - "," -- "),h=e||c._("Cancel"," - "," -- ");return(0,s.jsx)(i.Z,{accessibilityModalLabel:u,footer:(0,s.jsxs)(r.xu,{marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(r.xu,{"data-test-id":"cancel-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:d,size:"lg",text:h})}),(0,s.jsx)(r.xu,{"data-test-id":"confirm-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",onClick:l,size:"lg",text:t})})]}),heading:u,onDismiss:d,role:"alertdialog",children:(0,s.jsx)(r.xu,{padding:4,children:(0,s.jsx)(r.xv,{children:a})})})}},497231:(e,t,n)=>{n.d(t,{Z:()=>j});var i=n(667294),o=n(40142),r=n(483957),s=n(311866),a=n(881220),d=n(34411),l=n(367599),c=n(380322),u=n(174523),h=n(767523),p=n(164756),g=n(159276),m=n(387987),f=n(880841),b=n(883119),v=n(708206),x=n(785893);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends i.Component{constructor(...e){super(...e),y(this,"state",{editMode:"main"}),y(this,"handleBoardLeave",(()=>{const{board:e,onBoardLeave:t,onClose:n}=this.props;n(),t&&t(e.id)})),y(this,"returnToMainEditMode",(()=>this.setState({editMode:"main"}))),y(this,"handleDelete",(()=>{const{board:e,deleteBoard:t,onBoardDelete:n,onClose:i,toastManagerContext:o,viewer:r,orbacActingAs:s}=this.props;t((0,g.lJ)(r,s)).then((()=>{o.showToast((({onHide:e})=>(0,x.jsx)(a.ZP,{onHide:e,text:this.props.i18n._("Board deleted!","User deleted their board","User deleted their board")})))})),this.returnToMainEditMode(),i(),n&&n(e)})),y(this,"handleShowDeleteModal",(()=>{this.setState({editMode:"confirmDelete"})})),y(this,"handleSubmit",(e=>{var t;const{viewer:n,orbacActingAs:i,board:o,updateBoard:r,onBoardPrivacyChange:a,onBoardUpdate:d,onClose:l}=this.props,c=this.props.board.id;if((0,g.D3)(n,(null===(t=o.owner)||void 0===t?void 0:t.id)||"",i)){const t={id:c,...e};return r(t,(0,g.lJ)(n,i)).then((()=>{o.privacy!==e.privacy&&a?a():d&&d(c,t),l()}))}{const{allow_homefeed_recommendations:t,collab_board_email:n}=e;t!==o.allow_homefeed_recommendations&&r({id:c,allow_homefeed_recommendations:t});return s.ZP.create("BoardSettingsResource",{board_id:c,collab_board_email:n}).callUpdate({showError:!1}).then((()=>l())).catch((e=>{throw e.message}))}}))}render(){var e;const{board:t,categories:n,viewer:o,orbacActingAs:s,onCropChange:a,onClose:d,onToggleFlyout:l,requestContext:u}=this.props,{editMode:h}=this.state,p=this.props.i18n._("Edit your board","BoardEdit.Heading.Text","edit board heading"),m=(0,g.D3)(o,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",s),f=(0,x.jsxs)(b.xu,{paddingY:8,position:"relative",children:[(0,x.jsx)(b.X6,{align:"center",size:"md",children:p}),(0,x.jsx)(b.xu,{position:"absolute",top:!0,left:u.isRTL,right:!u.isRTL,paddingY:8,paddingX:6,children:(0,x.jsx)(b.hU,{accessibilityLabel:this.props.i18n._("Close","BoardEdit.icon.cancel","Icon to close board edit modal"),icon:"cancel",iconColor:"darkGray",onClick:d})})]});return(0,x.jsxs)(i.Fragment,{children:["main"===h&&(0,x.jsx)(c.Z,{board:t,categories:n,currentUserIsOwner:m,handleBoardLeave:this.handleBoardLeave,isArchivable:!0,isDeletable:m,isEditable:m,onClose:d,onCropChange:a,onDeleteButtonClick:this.handleShowDeleteModal,onSubmit:this.handleSubmit,onToggleFlyout:l,submitText:this.props.i18n._("Done","BoardEdit.BoardEdit","Submit button text"),title:f}),"confirmDelete"===h&&(0,x.jsx)(r.Z,{confirmButtonLabel:this.props.i18n._("Delete forever","Confirms the user wants to permanently delete the board","Confirms the user wants to permanently delete the board"),cancelButtonLabel:this.props.i18n._("Cancel"," - "," -- "),message:this.props.i18n._("Once you delete a board and all its Pins, you can't undo it!"," - "," -- "),onConfirm:this.handleDelete,onCancel:this.returnToMainEditMode})]})}}const w=(0,v.compose)(f.Cl,l.ZP,(0,o.connect)(null,((e,t)=>({deleteBoard:n=>e((0,p.L1)(t.board.id,n)),updateBoard:(t,n)=>e((0,p.wN)(t,n))}))))((function(e){const t=(0,u.ZP)();return(0,x.jsx)(_,{...e,requestContext:(0,m.B)(),viewer:(0,d.Z)(),orbacActingAs:(0,h.Z)(),i18n:t})}));var C=n(451190),S=n(535718);function j({boardId:e,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:s,onBoardLeave:a,onBoardDelete:d,onBoardUpdate:l,onClose:c,onCropChange:h}){const p=(0,u.ZP)(),[g,m]=(0,i.useState)(!1),{data:f}=(0,S.Z)({name:"CategoriesResource",noCache:!0});(0,S.Z)({name:"BoardResource",options:{field_set_key:"edit",board_id:e},noCache:!0});const v=(0,o.useSelector)((({boards:t})=>t.content[e]));if(!!(!v||!f))return(0,x.jsx)(C.Z,{accessibilityModalLabel:p._("Board edit","BoardEdit.BoardEditModal","Accessibility label on modal"),onDismiss:c,size:"sm",children:(0,x.jsx)(b.xu,{padding:12,children:(0,x.jsx)(b.$j,{accessibilityLabel:p._("Board edit","BoardEdit.BoardEditModal","Accessibility label on loading spinner"),show:!0})})});return(0,x.jsx)(w,{board:v,categories:f,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:s,onBoardLeave:a,onBoardDelete:d,onBoardUpdate:l,onClose:()=>{g||c()},onCropChange:h,onToggleFlyout:()=>m(!g)})}},653827:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);class o extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=()=>{const{isAtEnd:e,isFetching:t,fetchMore:n,scrollBuffer:i,scrollHeight:o,scrollTop:r}=this.props;e||t||r+i>o&&n()},(n="check")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},380322:(e,t,n)=>{n.d(t,{Z:()=>se});var i=n(667294),o=n(815671),r=n(40142),s=n(476865),a=n(451875),d=n(883119),l=n(785893);function c({handleTogglePinSelection:e,index:t,isSelected:n,pin:i}){return(0,l.jsx)(d.iP,{onTap:()=>{e(t)},rounding:a.mv,children:(0,l.jsx)(s.default,{attributionOption:"hide",blockClickEvents:!0,pin:i,pinId:i.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:n?"selected":"no-selection",surface:"BoardCoverSelectablePin",trackingParameters:{slotIndex:t}})})}var u=n(174523);const h=({boardPins:e,coverPinIndex:t,fetchMore:n,isLoaded:i,handleTogglePinSelection:o})=>{const r=(0,u.ZP)();return i?(0,l.jsx)(d.xu,{paddingY:4,children:(0,l.jsx)(d.Rk,{columnWidth:152,comp:({data:e,itemIdx:n})=>(0,l.jsx)(c,{handleTogglePinSelection:o,index:n,isSelected:t===n,pin:e}),gutterWidth:16,items:e||[],loadItems:n})}):(0,l.jsx)(d.xu,{padding:6,children:(0,l.jsx)(d.$j,{show:!0,accessibilityLabel:r._("Loading","BoardCoverEdit.Accessibility.Label","accessibility label for loading spinner")})})};var p=n(451190),g=n(311866),m=n(535718),f=n(34411),b=n(40197),v=n(159276),x=n(925265),y=n(387987);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={border:0,top:120};class C extends i.Component{constructor(...e){super(...e),_(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),_(this,"handleUpdateImage",(()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,n=e.offsetWidth;this.setState((({holderHeight:e,holderWidth:i})=>({isSpinnerShown:!1,startBgPos:{left:-(n-i)/2,top:-(t-e)/2}})))})),_(this,"handleOnMouseUp",(()=>{this.isDragging&&(this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData()))})),_(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth})}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:n,holderWidth:i}=this.state;return{left:i/2-t/2,width:t,height:e,top:n/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let s=0;return o&&r&&(s=this.state.startBgPos.left+this.state.deltaX,s+r-e<t.left&&(s=t.left-r+e),s>t.left&&(s=t.left)),s}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let s=0;return o&&r&&(s=this.state.startBgPos.top+this.state.deltaY,s+o-e<t.top&&(s=t.top-o+e),s>t.top&&(s=t.top)),s}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:n,imgWidth:i}=this._getImageDimensions(),o=this.getFrameBounds();if(n&&i){let r=n/i;return r=r>=o.height/o.width?t/i:e/n,r}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let n={};if(e&&t){const i=this.getImgScale();n={width:i*t,height:i*e}}return n}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,n=this.getFrameBounds(),i=this.getBgBounds(),o=this.getImgScale();return{cropX:Math.round(-(i.left-n.left)/o),cropY:Math.round(-(i.top-n.top)/o),height:Math.round(e/o),width:Math.round(t/o),scale:o}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){var e,t,n;const{pin:i}=this.props,o=null===(e=i.images)||void 0===e?void 0:e["236x"];return{imgHeight:null!==(t=null==o?void 0:o.height)&&void 0!==t?t:1,imgWidth:null!==(n=null==o?void 0:o.width)&&void 0!==n?n:1}}render(){var e,t;const{boardName:n,frameHeight:o,frameWidth:r,hideCoverNavigation:s,isFirst:a,isLast:c,isRTL:u,pin:h,showNextPin:p,showPrevPin:g}=this.props,{isSpinnerShown:m}=this.state,{imgHeight:f,imgWidth:b}=this._getImageDimensions(),v=this.getFrameBounds(),y=this.getImageBounds(),_=this.getBgBounds();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(d.xu,{height:300,overflow:"hidden",position:"relative",dangerouslySetInlineStyle:{__style:{margin:"15px"}},ref:e=>{this.holder=e},children:[(0,l.jsx)(d.xu,{left:!0,overflow:"hidden",position:"absolute",top:!0,dangerouslySetInlineStyle:{__style:{..._}},children:(0,l.jsx)("img",{alt:(0,x.Z)(this.props.i18n._("Board cover for {{ boardName }}"," - "," -- "),{boardName:n}),onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:null===(e=h.images)||void 0===e||null===(t=e["236x"])||void 0===t?void 0:t.url,style:{maxWidth:"none",opacity:f&&b?1:.01,transitionDuration:"0.4s",transitionProperty:"opacity",imageBounds:y}})}),(0,l.jsxs)(d.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,l.jsx)("span",{style:{background:"#fff",opacity:.9,position:"absolute",top:0,left:0,right:0,height:v.top}}),(0,l.jsx)("span",{style:{background:"#fff",opacity:.9,position:"absolute",top:v.top,left:v.left+r,right:0,height:o}}),(0,l.jsx)("span",{style:{top:o+v.top,left:0,right:0,bottom:0}}),(0,l.jsx)("span",{style:{top:v.top,left:0,width:v.left,height:o}})]}),(0,l.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{boxShadow:"0 2px 3px rgba(#221919, 0.3), inset 0 0 0 1px rgba(#000, 0.3)",...v}}}),(0,l.jsx)("div",{style:{background:"#fff",bottom:0,cursor:"move",left:0,opacity:0,position:"absolute",right:0,top:0,zIndex:0},onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)},onMouseUp:()=>{this.handleOnMouseUp()},role:"presentation"}),(0,l.jsx)(d.xu,{height:30,left:!0,position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{bottom:"5px",display:m?"":"none",background:"url('~app/common/images/spinner.gif') no-repeat center"}}})]}),a||s?null:(0,l.jsx)(d.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...w,left:u?void 0:100,right:u?100:void 0}},children:(0,l.jsx)(d.hU,{icon:"arrow-back",accessibilityLabel:this.props.i18n._("Previous","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:g})}),c||s?null:(0,l.jsx)(d.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...w,left:u?100:void 0,right:u?void 0:100}},children:(0,l.jsx)(d.hU,{icon:"arrow-forward",accessibilityLabel:this.props.i18n._("Next","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:p})})]})}}function S(e){const t=(0,u.ZP)(),{isRTL:n}=(0,y.B)();return(0,l.jsx)(C,{...e,isRTL:!!n,i18n:t})}var j=n(767523);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return e.reduce(((e,t)=>("pin"===t.type&&e.push(t),e)),[])}function T({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,E(e||[]).findIndex((e=>e.id===t)))}class P extends i.Component{constructor(...e){super(...e),I(this,"state",{coverPinIndex:T(this.props),imgCropData:null,selectedCoverPin:null,previousBoardFeedResourceData:null}),I(this,"handleSave",(()=>{var e,t,n;const{boardId:i,dispatch:o,viewer:r,orbacActingAs:s}=this.props,{coverPinIndex:a,imgCropData:d}=this.state,l=(this.pins||[])[a],c=(0,v.lJ)(r,s);if(!l)return;const u=null===(e=l.images)||void 0===e?void 0:e["236x"],h=null==u?void 0:u.url,p=d?{crop_x:d.cropX,crop_y:d.cropY,height:d.height,width:d.width,scale:d.scale}:{crop_x:0,crop_y:0,height:null==u?void 0:u.height,width:null==u?void 0:u.width,scale:1},m={board_id:i,url:h,pin_id:l.id,pin_image_url:h,...p,...c?{orbac_subject_id:c}:Object.freeze({})},f={height:null!==(t=null==u?void 0:u.height)&&void 0!==t?t:0,width:null!==(n=null==u?void 0:u.width)&&void 0!==n?n:0,x:d?d.cropX:0,y:d?d.cropY:0};g.ZP.create("BoardResource",m).callUpdate().then((()=>{this.props.onSave(null!=h?h:""),o((0,b.Cr)(i,{custom_cover:!0,scale:d?d.scale:1,pin_id:l.id,crop:f,image_url:null!=h?h:""}))}))})),I(this,"updateImgCrop",(e=>this.setState({imgCropData:e}))),I(this,"handleShowNextPin",(()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:n}}=this.props,i=(this.pins||[]).length;i&&this.setState((({coverPinIndex:e})=>({coverPinIndex:(e+1)%i})),(()=>{this.pins&&this.state.coverPinIndex+5>=this.pins.length&&!e&&!t&&n()}))})),I(this,"handleShowPrevPin",(()=>{const e=(this.pins||[]).length;e&&this.setState((({coverPinIndex:t})=>({coverPinIndex:(t||e)-1})))})),I(this,"handleTogglePinSelection",(e=>{const t=this.pins||[];this.setState({coverPinIndex:e,selectedCoverPin:t[e]})})),I(this,"handleCoverEditBackButtonClick",(()=>{this.setState({selectedCoverPin:null})})),I(this,"renderBoardCoverMasonry",(()=>{const{coverPinIndex:e,selectedCoverPin:t}=this.state,{boardName:n,boardFeedResource:i,frameHeight:o,frameWidth:r}=this.props,s=this.pins||[],{data:a,fetchMore:d,isLoaded:c}=i;return t?(0,l.jsx)(S,{boardName:n,frameHeight:null!=o?o:236,frameWidth:null!=r?r:236,isFirst:!e,isLast:e===s.length-1,pin:t,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop,hideCoverNavigation:!0}):(0,l.jsx)(h,{boardPins:a,coverPinIndex:e,fetchMore:d,handleTogglePinSelection:this.handleTogglePinSelection,isLoaded:c})})),I(this,"renderCoverEditHeader",(()=>(0,l.jsx)(d.kC,{alignItems:"center",justifyContent:"center",height:80,children:(0,l.jsx)(d.xu,{width:"100%",padding:4,children:(0,l.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(d.hU,{accessibilityLabel:this.props.i18n._("Navigate to cover picker","BoardEdit.back.button","Cover picker navigate back button"),icon:"arrow-back",iconColor:"darkGray",onClick:this.handleCoverEditBackButtonClick}),(0,l.jsx)(d.X6,{size:"md",children:this.props.i18n._("Move and scale to crop","BoardEdit.Heading.Experiment.Text","edit board heading")}),(0,l.jsx)(d.hU,{accessibilityLabel:this.props.i18n._("Cancel change board cover","BoardCoverEdit.icon.cancel","Cancel board cover edit"),icon:"cancel",iconColor:"darkGray",onClick:this.props.onCancel})]})})})))}static getDerivedStateFromProps(e,t){const n=e.boardFeedResource.data,{previousBoardFeedResourceData:i}=t;return!i&&n?{previousBoardFeedResourceData:n,coverPinIndex:T(e)}:{previousBoardFeedResourceData:n}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,n=e.boardFeedResource.data;(t&&n!==t&&t.length||t&&n&&t.length!==n.length)&&t.forEach((e=>{if("pin"===e.type){(new Image).src=e.url}}))}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?E(e):void 0}render(){const{heading:e,onCancel:t}=this.props,{coverPinIndex:n,selectedCoverPin:i}=this.state,o=(this.pins||[])[n];return(0,l.jsx)(p.Z,{accessibilityModalLabel:this.props.i18n._("Change Board Cover","accessible label for modal to change board cover image","accessible label for modal to change board cover image"),size:"lg",heading:i?this.renderCoverEditHeader():e,onDismiss:t,footer:i&&(0,l.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,l.jsx)(d.xu,{padding:2,children:(0,l.jsx)(d.zx,{disabled:!o,onClick:this.handleSave,text:this.props.i18n._("Done","BoardCoverEdit.Button.Submit.Exp","Button for saving board cover edit")})})}),children:this.renderBoardCoverMasonry()})}}function D(e){const t=(0,u.ZP)(),n=(0,r.useDispatch)(),i=(0,m.Z)({name:"BoardFeedResource",options:{board_id:e.boardId,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}});return(0,l.jsx)(P,{...e,boardFeedResource:i,dispatch:n,i18n:t,viewer:(0,f.Z)(),orbacActingAs:(0,j.Z)()})}var k=n(483957);const O=({label:e,labelId:t})=>t?(0,l.jsx)(d.__,{htmlFor:t,children:(0,l.jsx)(d.xv,{size:"sm",children:e})}):(0,l.jsx)(d.xv,{size:"sm",children:e});function R(e){const{children:t,label:n,labelId:o}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(d.xu,{marginBottom:2,children:(0,l.jsx)(O,{label:n,labelId:o})}),t]})}const B=138;function A({coverPin:e,handleShowBoardCoverEditModal:t}){const n=(0,u.ZP)(),[o,r]=(0,i.useState)(!1),{isRTL:s}=(0,y.B)();return(0,l.jsx)(R,{label:n._("Board cover","BoardForm.BoardFormCoverButton","Form label for updating board cover"),children:(0,l.jsx)(d.xu,{width:B,position:"relative",children:(0,l.jsx)(d.iP,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(d.zd,{height:B,rounding:4,width:B,children:(0,l.jsx)(d.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||B,naturalWidth:e.size&&e.size[0]||B,src:e.image_url})}),(0,l.jsx)(d.xu,{position:"absolute",left:s,right:!s,bottom:!0,padding:2,children:(0,l.jsx)(d.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:o?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,l.jsx)(d.JO,{accessibilityLabel:n._("Edit board cover","BoardForm.BoardFormBoardCoverButton","Accessibility label on icon"),icon:"edit",color:"darkGray",size:16})})})]}):(0,l.jsx)(d.xu,{alignItems:"center",color:o?"darkWash":"lightGray",display:"flex",height:B,justifyContent:"center",rounding:4,width:B,children:(0,l.jsx)(d.JO,{accessibilityLabel:n._("Add cover photo","BoardForm.BoardFormCoverButton","Accessibility label on icon"),color:"darkGray",icon:"add",size:24})})})})})}function M({children:e,label:t,labelId:n,subtext:o}){return(0,l.jsx)(i.Fragment,{children:(0,l.jsxs)(d.xu,{alignItems:"start",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,l.jsx)(d.xu,{marginStart:2,children:(0,l.jsxs)(d.__,{htmlFor:n,children:[(0,l.jsx)(d.xv,{size:"lg",weight:"bold",children:t}),o]})})]})})}function L({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:n}){const i=(0,u.ZP)();return t&&(0,l.jsx)(M,{label:i._("Email notifications","BoardForm.BoardFormCollaboratorsEmailCheckbox","Form label"),labelId:"emailNotificationsCheckbox",subtext:(0,l.jsx)(d.xv,{color:"gray",size:"lg",children:i._("Get an email when someone saves Pins to this board","BoardForm.BoardFormCollaboratorsEmailCheckbox","Text explaing field on board form")}),children:(0,l.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:(0,l.jsx)(d.xu,{marginEnd:1,children:(0,l.jsx)(d.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:n})})})})}var Z=n(16719),N=n(946753);function F({board:e,onCollaboratorInviteClick:t}){const n=(0,u.ZP)(),i=(0,Z.Z)({boardId:e.id,ownerName:e.owner.full_name,ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_key||e.owner.image_medium_url||e.owner.image_small_url||""}),o=i.slice(0,3).map((e=>e.name));let r="";switch(i.length){case 3:r=(0,N.Wc)(`${n._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${o[0]}`,second:`${o[1]}`,last:`${o[2]}`});break;case 2:r=(0,N.Wc)(`${n._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${o[0]}`,second:`${o[1]}`});break;default:r=o.join(", ")}const s=i.length>3?(0,N.Wc)(n.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",i.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:r,leftCount:""+(i.length-3)}):(0,N.Wc)(`${n._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:r});return(0,l.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(d.HE,{accessibilityLabel:s,collaborators:i.map((({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e}))),size:"md"}),(0,l.jsx)(d.hU,{accessibilityLabel:n._("Invite collaborators","BoardEdit.BoardCollaboratorsAndInviteSection","Accessibility label on button"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}var U=n(702922),H=n(773559);function z({board:e,onCollaboratorInviteClick:t}){const n=(0,u.ZP)(),i=(0,l.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(d.xv,{size:"sm",inline:!0,children:n._("Collaborators"," - "," -- ")}),(0,l.jsx)(U.Z,{}),(0,l.jsx)(d.xv,{inline:!0,size:"sm",weight:"bold",children:(0,l.jsx)(d.rU,{inline:!0,target:"blank",href:H.Z.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE,children:n._("Learn more"," - "," -- ")})})]});return(0,l.jsx)(R,{alignTop:!0,label:i,labelId:"collaborators",children:(0,l.jsx)(F,{board:e,onCollaboratorInviteClick:t})})}function W({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:n}){const i=(0,u.ZP)();return t&&(0,l.jsx)(M,{label:i._("Let collaborators add people","BoardForm.BoardFormCollaboratorsInviteToggle","Form label"),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,l.jsx)(d.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:n})})}function $({description:e,descriptionValidatorErrors:t,onChange:n}){const i=(0,u.ZP)(),o="boardEditDescription";return(0,l.jsx)(R,{alignTop:!0,label:i._("Description","BoardForm.BoardFormDescription"," Form field label"),labelId:o,children:(0,l.jsx)(d.Kx,{errorMessage:t.join(", "),id:o,name:"description",onChange:n,placeholder:i._("What's your board about?"," - "," -- "),value:e})})}const G=({children:e})=>(0,l.jsx)(d.xu,{paddingX:8,role:"list",children:i.Children.map(e,((t,n)=>t&&(0,l.jsx)(d.xu,{role:"listitem",marginBottom:n===i.Children.count(e)-1?1:8,children:t},n)))});var V=n(631739);function q({isProtectedToggler:e,isToggleDisable:t,onChange:n,onCheckboxChange:o,privacy:r}){const s=(0,u.ZP)();if(!0===e)return(0,l.jsx)(M,{label:s._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected",children:(0,l.jsx)(d.xu,{paddingY:2,children:(0,l.jsx)(d.rs,{onChange:n,switched:r===V.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(r!==V.Z.BoardPrivacy.PROTECTED){const e=s._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),n=(0,l.jsx)(i.Fragment,{children:(0,l.jsxs)(d.xv,{color:"gray",size:"lg",children:[s._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",(0,l.jsx)(d.rU,{inline:!0,target:"blank",href:H.Z.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,children:s._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards")})]})});return(0,l.jsx)(M,{label:e,labelId:"secret",subtext:n,children:(0,l.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:(0,l.jsx)(d.XZ,{checked:r===V.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:o,disabled:t})})})}return null}function Y({allowHomefeedRecommendations:e,onCheckboxChange:t}){const n=(0,u.ZP)();return(0,l.jsx)(M,{label:n._("Personalization","BoardForm.BoardFormRecommendationToggle","form label"),labelId:"recommendation",subtext:(0,l.jsx)(d.xv,{color:"gray",size:"lg",children:n._("Show Pins inspired by this board in your home feed.","BoardForm.BoardFormRecommendationToggle","Caption for board settings to set visibility")}),children:(0,l.jsx)(d.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function X({name:e,nameValidatorErrors:t,onChange:n}){const i=(0,u.ZP)();return(0,l.jsx)(R,{label:i._("Name","BoardForm.BoardFormTitleInput","Form field label"),labelId:"boardEditName",children:(0,l.jsx)(d.nv,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:n,placeholder:i._('Like "Places to Go" or "Recipes to Make"'," - "," -- "),size:"lg",value:e})})}var J=n(754999),K=n(880841),Q=n(997993);function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const te=(e,t)=>(0,Q.Gy)({max:e,maxErrorString:(0,J.Z)(t._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long","Validation error when a string is too long"),{maxLength:e})}),ne=e=>[te(V.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],ie=e=>[(0,Q.aH)({message:e._("Don't forget to name your board!"," - "," -- ")}),te(V.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],oe=({condition:e,children:t})=>e?(0,l.jsx)(d.xu,{position:"absolute",zIndex:p.b,children:t}):t;class re extends i.Component{constructor(e){super(e),ee(this,"handleChangeName",(({value:e})=>{const t=(0,Q.FU)(ie(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})})),ee(this,"handleChangeDescription",(({value:e})=>{const t=(0,Q.FU)(ne(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})})),ee(this,"handleChangePrivacyToggle",(({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})})),ee(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),ee(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),ee(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),ee(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),ee(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),ee(this,"handleCheckboxChange",(e=>({event:t,checked:n})=>e({event:t,value:n}))),ee(this,"handleSubmit",(e=>{const{onSubmit:t}=this.props,{collab_board_email:n,collaboratorInvitesEnabled:i,description:o,name:r,privacy:s,allowHomefeedRecommendations:a}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const d=r.trim(),l=o.trim();this.setState({submitting:!0,submitError:""}),t({name:d,collab_board_email:n,collaborator_invites_enabled:i,description:l,privacy:s,allow_homefeed_recommendations:a}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let t=this.props.i18n._("Uh oh! Something went wrong."," - "," -- ");if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})}))})),ee(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),ee(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),ee(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),ee(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),ee(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)}));const{board:{collab_board_email:t,collaborator_invites_enabled:n,description:i,name:o,pin_count:r,privacy:s,allow_homefeed_recommendations:a}}=e;this.state={collab_board_email:t,description:i,name:o,pin_count:r,privacy:s,allowHomefeedRecommendations:a,collaboratorInvitesEnabled:n,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:o,previousDescription:i,previousPrivacy:s}}static getDerivedStateFromProps(e,t){const n={};return e.board.name!==t.previousName&&(n.previousName=e.board.name,n.nameValidatorErrors=(0,Q.FU)(ie(e.i18n),e.board.name)),e.board.description!==t.previousDescription&&(n.previousDescription=e.board.description,n.descriptionValidatorErrors=(0,Q.FU)(ne(e.i18n),e.board.description)),e.board.privacy!==t.previousPrivacy&&(n.previousPrivacy=e.board.privacy),n}getFormFooter(){const{submitText:e}=this.props,{submitError:t}=this.state;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(d.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,l.jsx)(d.xu,{children:(0,l.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",children:(0,l.jsx)(d.xu,{height:48,children:(0,l.jsx)(d.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,l.jsx)(d.xu,{paddingX:1,children:(0,l.jsx)(d.xv,{color:"red",children:t})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:n,submitting:i}=this.state;return!t||n.length>0||e.length>0||i}render(){const{board:e,board:{archived_by_me_at:t,cover_pin:n,id:r,is_collaborative:s},coverImageHeight:a,coverImageWidth:c,currentUserIsOwner:u,handleBoardLeave:h,isAdAccount:g,isAdAccountOwner:m,isDeletable:f,isEditable:b,isNameAndSecretView:v,onClose:x,onDeleteButtonClick:y,requestContext:_,title:w,useModalWithNoLayer:C}=this.props,{allowHomefeedRecommendations:S,collab_board_email:j,collaboratorInvitesEnabled:I,description:E,descriptionValidatorErrors:T,name:P,nameValidatorErrors:O,pin_count:R,privacy:B,showBoardCoverEdit:M,showCollaboratorsModal:Z,showSecretConfirmation:F}=this.state,U=b&&R>0;let H=(0,l.jsxs)(G,{children:[U&&(0,l.jsx)(A,{coverPin:n,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,l.jsx)(X,{name:P,nameValidatorErrors:O,onChange:this.handleChangeName}),(0,l.jsx)($,{description:E,descriptionValidatorErrors:T,onChange:this.handleChangeDescription}),u&&!!h&&(0,l.jsx)(z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,l.jsx)(d.xu,{marginBottom:-7,children:(0,l.jsx)(d.xv,{size:"sm",children:this.props.i18n._("Settings","BoardForm.BoardForm","Section heading in board edit form")})}),(0,l.jsx)(q,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:B}),!t&&(0,l.jsx)(Y,{allowHomefeedRecommendations:S,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,l.jsx)(L,{hasCollabBoardEmail:j,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,l.jsx)(W,{collaboratorInvitesEnabled:I,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),f&&(0,l.jsxs)(d.xu,{marginTop:-6,paddingY:4,children:[(0,l.jsx)(d.xv,{size:"sm",children:this.props.i18n._("Action","BoardForm.BoardForm.Action","Section heading in board edit form")}),(0,l.jsxs)(d.iP,{onTap:y,children:[(0,l.jsx)(d.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,l.jsx)(d.X6,{size:"sm",children:this.props.i18n._("Delete board","BoardForm.Delete","Delete board label")})}),(0,l.jsx)(d.xv,{size:"lg",color:"gray",children:this.props.i18n._("Delete this board and all its Pins forever.","BoardForm.BoardForm.Delete.Label","Delete board warning text")}),(0,l.jsx)(d.xv,{size:"lg",color:"gray",children:this.props.i18n._("You can't undo this!","BoardForm.BoardForm.Delete.LabelTwo","Delete board warning text")})]})]})]});u?v&&(H=(0,l.jsxs)(G,{children:[(0,l.jsx)(X,{name:P,nameValidatorErrors:O,onChange:this.handleChangeName}),(0,l.jsx)(q,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,privacy:B,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):H=(0,l.jsxs)(G,{children:[!!h&&(0,l.jsx)(z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,l.jsx)(L,{hasCollabBoardEmail:j,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&(0,l.jsx)(Y,{allowHomefeedRecommendations:S,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,l.jsx)(d.xv,{color:"gray",size:"lg",children:(0,N.nk)(this.props.i18n._("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features","BoardForm.CollaboratorPermissionsCopy","Copy on board edit form letting collaborators know of their permissions on a board"),{boardOwner:(0,l.jsx)(d.xv,{color:"gray",inline:!0,size:"lg",weight:"bold",children:e.owner.full_name})})})]});const V=C?d.u_:p.Z,J=this.props.i18n._("Change board cover","BoardForm.BoardCoverEdit.heading","Change board cover heading"),K=(0,l.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,l.jsx)(d.X6,{align:"center",size:"md",children:J}),(0,l.jsx)(d.xu,{position:"absolute",top:!0,left:_.isRTL,right:!_.isRTL,paddingY:8,paddingX:6,children:(0,l.jsx)(d.hU,{accessibilityLabel:this.props.i18n._("Cancel change board cover","BoardForm.BoardCoverEdit.cancel","Cancel change board cover heading"),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal})})]});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(oe,{condition:!!C,children:!M&&!Z&&(0,l.jsx)(V,{accessibilityModalLabel:this.props.i18n._("Board form","BoardForm.BoardForm","Accessibility label on board form"),size:"sm",onDismiss:x,footer:this.getFormFooter(),heading:w,children:(0,l.jsx)(d.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,l.jsx)("form",{method:"post",onSubmit:this.handleSubmit,children:H})})})}),M&&(0,l.jsx)(D,{boardId:r,boardName:P,coverPinId:null==n?void 0:n.pin_id,frameHeight:a,frameWidth:c,heading:K,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),F&&(0,l.jsx)(k.Z,{confirmButtonLabel:this.props.i18n._("Make secret","Setting the boards visibility to secret","Setting the boards visibility to secret"),heading:this.props.i18n._("Are you sure?","Warning label asking users to be sure of their action","Warning label asking users to be sure of their action"),message:this.props.i18n._("If you make this board secret, some active ads will stop running","Explicitly warning users of the board visibility action they are doing","Explicitly warning users of the board visibility action they are doing"),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),Z&&(0,l.jsx)(o.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}ee(re,"defaultProps",{isNameAndSecretView:!1});const se=(0,K.Cl)((function(e){const t=(0,u.ZP)();return(0,l.jsx)(re,{...e,i18n:t,requestContext:(0,y.B)()})}))},254821:(e,t,n)=>{n.d(t,{Z:()=>m,T:()=>g});var i=n(667294),o=n(539484),r=n(883119),s=n(785893);function a({action:e,alignCenter:t}){const{title:n,description:i,button:a}=e,d=n&&n.text,l=i&&i.text,c=a&&a.text||"",u=a&&a.link||"",h=a&&a.link?a.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"",p=a&&c&&u.startsWith("http"),g=(0,o.Z)({url:u}),m=p&&g?"nofollow":"none";return p?(0,s.jsxs)(r.xu,{children:[(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",weight:"bold",children:""!==c?c:"Visit"})}),(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.rU,{rel:m,href:u,children:(0,s.jsx)(r.xv,{align:t?"center":"start",lineClamp:1,weight:"normal",underline:!0,children:h})})})]}):(0,s.jsxs)(r.xu,{children:[!!d&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",weight:"bold",children:d})}),!!l&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",children:l})})]})}const d={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},l={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function c({inModal:e,notice:t}){const{title:n,description:i,actions:o=[]}=t,c=i&&i.text||"",u=i&&i.text_tags||[],h=1===o.length,p=g(c,u);return(0,s.jsxs)(r.xu,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?l:d},children:[!!n&&!e&&(0,s.jsx)(r.xu,{marginBottom:2,display:"flex",children:(0,s.jsx)(r.X6,{size:"md",children:n})}),!!c&&(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,s.jsx)(r.xv,{overflow:"normal",align:e?"center":"start",children:p})})}),!!o.length&&(0,s.jsx)(r.xu,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row",children:o.map((t=>(0,s.jsx)(r.xu,{column:e||h?12:6,paddingY:1,paddingX:2,children:(0,s.jsx)(a,{action:t,alignCenter:e||h})},JSON.stringify(t))))})]})}function u({notice:e}){const{actions:t=[],description:n,footer:i}=e,o=g(n&&n.text||"",n&&n.text_tags||[]),a={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,s.jsxs)(r.xu,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3,children:[(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8,children:(0,s.jsxs)(r.xu,{height:"100%",width:"100%",padding:10,children:[(0,s.jsx)("span",{style:a,children:o}),(0,s.jsx)(r.xu,{marginTop:6,children:t.map((e=>{var t;const n=null===(t=e.button)||void 0===t?void 0:t.link;var i,o,d;return n&&n.startsWith("tel")?(0,s.jsxs)(r.xu,{children:[(0,s.jsx)("span",{style:{fontWeight:"600",...a},children:null===(i=e.title)||void 0===i?void 0:i.text}),(0,s.jsx)("span",{style:a,children:null===(o=e.description)||void 0===o?void 0:o.text})]}):(0,s.jsx)(r.rU,{href:n||"",children:(0,s.jsx)(r.xu,{display:"inlineBlock",children:(0,s.jsx)(r.xu,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:44,rounding:"pill",paddingX:12,children:(0,s.jsx)(r.xv,{color:"white",weight:"bold",children:(null===(d=e.button)||void 0===d?void 0:d.text)||""})})})})}))})]})}),!!i&&(0,s.jsx)(r.xu,{paddingY:2,width:540,children:(0,s.jsx)(r.rU,{inline:!0,target:"blank",href:i.link,children:(0,s.jsx)(r.xv,{align:"center",color:"gray",size:"sm",children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i.text}})})},i.link)})]})}var h=n(500953),p=n(457175);function g(e,t){const n=[];let i=0;for(let o=0;o<t.length;o+=1){const a=t[o];if(5===a.tag_type&&a.link){const t=e.substring(a.offset,a.offset+a.length),o=(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:(0,s.jsx)(r.rU,{inline:!0,target:"blank",href:a.link,children:t},t)});n.push((0,s.jsx)("span",{children:e.substring(i,a.offset)})),n.push(o),i=a.offset+a.length}}return i>0&&n.push((0,s.jsx)("span",{children:e.substring(i)})),0===n.length?[(0,s.jsx)("span",{children:e})]:n}function m({inModal:e,notices:t,viewType:n,query:o,sensitivity:r}){const{logContextEvent:a}=(0,p.v)();return(0,h.Z)((()=>{n&&a({event_type:120,component:13367,view_type:n,aux_data:{entered_query:o,advisory_details:null==r?void 0:r.advisory_details,advisory_level:null==r?void 0:r.advisory,severity_level:null==r?void 0:r.severity}})})),(0,s.jsx)(i.Fragment,{children:t.map((t=>2===t.style?(0,s.jsx)(u,{notice:t}):(0,s.jsx)(c,{notice:t,inModal:e})))})}},869950:(e,t,n)=>{n.d(t,{St:()=>i,IR:()=>o,Fx:()=>r,Uz:()=>s});const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){if(null==e)return!1;let t=!!e.notices&&e.notices.length>0;var n;e.notices&&e.notices.length>0&&(null===(null===(n=e.notices[0])||void 0===n?void 0:n.title)&&(t=!1));return!!e.notice||t}function s(e){return!!e&&e.severity===o.ABUSIVE}},366787:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(51610),r=n(159617),s=n(279890),a=n(883119),d=n(785893);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(...e){super(...e),l(this,"state",{animation:null,visible:!1}),l(this,"setRef",(e=>{this.element||(this.element=e,null==e||e.addEventListener("dragover",this.handleDragOver),null==e||e.addEventListener("dragleave",this.handleDragLeave))})),l(this,"handleDragOver",(()=>{const{placement:e}=this.props;if(!this.state.animation){const t="top"===e?-1:1,n=(0,s.Z)({window,duration:1/0,run:(e,n,i)=>{const o=n<500?.8:1.2000000000000002;window.scrollTo(0,window.scrollY+o*t*i)}});n.start(),this.setState({animation:n})}})),l(this,"handleDragLeave",(()=>{const{animation:e}=this.state;e&&(e.cancel(),this.setState({animation:null}))})),l(this,"element",null),l(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout((()=>this.setState({visible:!0})),500)}componentWillUnmount(){const e=this.element,{animation:t}=this.state;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),t&&t.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){const{height:e,placement:t}=this.props,{visible:n}=this.state;return(0,d.jsx)(a.xu,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:16777271,visibility:n?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:(0,d.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function u({noStickyHeader:e}){const t=e?0:r.hu;return(0,d.jsx)(o.Z,{children:(0,d.jsx)(a.mh,{children:(0,d.jsxs)(a.xu,{children:[(0,d.jsx)(c,{placement:"top",height:120+t}),(0,d.jsx)(c,{placement:"bottom",height:120})]})})})}},297633:(e,t,n)=>{n.d(t,{y:()=>a,Z:()=>c});var i=n(667294),o=n(60598),r=n(708206),s=n(785893);const a={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const d={hover:({index:e,onDragHover:t},n,i)=>{t(e,function(e,t){const n=t.targetEl;if(!(n&&n instanceof HTMLElement))return null;const{x:i,y:o}=e.getClientOffset(),{left:r,right:s,top:a,bottom:d,width:l,height:c}=n.getBoundingClientRect();return{positionRelativeToCenter:{x:i-(r+s)/2,y:o-(a+d)/2},boundingBox:{width:l,height:c}}}(n,i))}};class l extends i.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:n,isDragging:i,isDraggingInternal:o}=this.props;return t(n((0,s.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:i||o?0:1},children:e})))}}const c=(0,r.compose)((0,o.GR)((e=>e.type),d,(e=>({connectDropTarget:e.dropTarget()}))),(0,o.Ej)((e=>e.type),{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},((e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()}))))(l)},470848:(e,t,n)=>{n.d(t,{Lz:()=>i,TI:()=>o,X3:()=>r});function i(e,t){return e.itemIndex===t.itemIndex&&e.regionWithinItem===t.regionWithinItem}function o({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:n}){const i=n?.5*t:0;return Math.abs(e)<i/2?"center":e<0?"left":"right"}function r({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:n}){if("center"===t||e===n)return e;const i="left"===t;return e<n===i?e:i?e-1:e+1}},308125:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(747033),o=n(263116),r=n(785893);const s=(0,o.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>Promise.all([n.e(89333),n.e(35978)]).then(n.bind(n,473749)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return 473749}});function a(e){return(0,r.jsx)(s,{...e,fallback:(0,r.jsx)(i.Z,{})})}},747033:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s(){const e=(0,i.ZP)();return(0,r.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(o.$j,{accessibilityLabel:e._("Loading editor","EditorWithMentionsFallback.loading","Message shown while waiting for the editor to load"),show:!0})})}},189509:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{htmlFor:t,errorMessage:n}=e;return(0,o.jsx)(i.__,{htmlFor:t,children:(0,o.jsx)(i.xu,{marginTop:1,children:(0,o.jsx)(i.xv,{color:"red",size:"md",children:n})})})}},754674:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(667294),o=n(551687),r=n(255038),s=n(883119);const a={},d=e=>{if(null!=e)return a[e]&&a[e].screenWidth===window.innerWidth||(a[e]={screenWidth:window.innerWidth,cache:s.Rk.createMeasurementStore()}),a[e].cache};var l=n(442028),c=n(351288),u=n(155656),h=n(535258),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends i.Component{constructor(...e){super(...e),g(this,"masonryRef",(0,i.createRef)()),g(this,"renderItem",(e=>{const{comp:t}=this.props,{gutterWidth:n,paddingBottom:i}=this.getGutters();return(0,p.jsx)("div",{style:{paddingBottom:i,paddingLeft:n/2,paddingRight:n/2},children:(0,p.jsx)(t,{...e})})}))}componentDidUpdate(e){const{widthOffset:t}=this.props;t!==e.widthOffset&&this.masonryRef.current&&this.masonryRef.current.handleResize()}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,n="simplified"===t;return{gutterWidth:n?h.oX:e,paddingBottom:n?16:6}}render(){const{columnWidth:e,flexible:t,items:n,layout:i,loadItems:o,masonryRef:r,measurementStore:a,scrollContainer:d,serverRender:g,virtualize:m,isGridCentered:f,minCols:b}=this.props,{gutterWidth:v}=this.getGutters(),x=(0,p.jsx)(s.Rk,{columnWidth:e+v,gutterWidth:0,comp:this.renderItem,minCols:b,ref:e=>{this.masonryRef.current=e,r&&(r.current=e)},items:n,flexible:t,layout:i||"basic",loadItems:o,measurementStore:a,scrollContainer:d,virtualize:m});let y;return f&&(y="gridCentered"),(0,p.jsxs)("div",{className:y,children:[g&&(0,p.jsx)(u.Z,{unsafeCSS:t?(0,c.Z)((e||h.xf)+v,n.length||h.g5,b||h.yc):(0,l.Z)((e||h.xf)+v,n.length||h.g5,b||h.yc)}),(0,p.jsx)("div",{children:x})]})}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g(m,"defaultProps",{gutterWidth:14,isGridCentered:!0,minCols:h.yc,paddingStyle:"simplified"});const b="undefined"!=typeof window?()=>window:void 0;class v extends i.Component{constructor(...e){super(...e),f(this,"renderItem",(e=>{const{comp:t}=this.props;return(0,p.jsx)(o.Z,{name:"MasonryPerfTimingItem",children:(0,p.jsx)(t,{...e})})})),f(this,"loadItems",(()=>{const{isFetching:e,loadItems:t}=this.props;e||t()}))}render(){const{cacheKey:e,columnWidth:t,flexible:n,gutterWidth:i,isGridCentered:o,items:r,layout:s,masonryRef:a,minCols:l,paddingStyle:c,scrollContainer:u,serverRender:h,virtualize:g,widthOffset:f}=this.props;return(0,p.jsx)(m,{columnWidth:t,comp:this.renderItem,flexible:n,gutterWidth:i,isGridCentered:o,items:r,layout:s,loadItems:this.loadItems,masonryRef:a,measurementStore:d(e),minCols:l,paddingStyle:c,scrollContainer:u||b,serverRender:h,virtualize:g,widthOffset:f})}}function x({cacheKey:e,columnWidth:t,comp:n,flexible:i,gutterWidth:o,isAtEnd:s,isFetching:a,isGridCentered:d=!0,isLoaded:l,items:c,pinData:u,layout:h,loadItems:g,masonryRef:m,minCols:f,paddingStyle:x,scrollContainer:y,serverRender:_=!0,virtualize:w,widthOffset:C,includeBackgroundImages:S,includeVideos:j}){return(0,p.jsx)(r.Z,{isAtEndOfFeed:s,pinData:u,itemCount:c.length,includeBackgroundImages:S,includeVideos:j,children:(0,p.jsx)(v,{cacheKey:e,columnWidth:t,comp:n,flexible:i,gutterWidth:o,isFetching:a,isGridCentered:d,items:c,layout:h,loadItems:g,masonryRef:m,minCols:f,paddingStyle:x,scrollContainer:y||b,serverRender:_,virtualize:w,widthOffset:C})})}},442028:(e,t,n)=>{function i(e=236,t=16,n=2){let i="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let o=n;o<t+1;o+=1){i+=`\n@media (min-width: ${o===n?0:o*e}px) and (max-width: ${(o+1)*e-1}px) {\n  .gridCentered {\n    width: ${o*e}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${o}),\n  .gridCentered .static:nth-child(-n+${o}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return i}n.d(t,{Z:()=>i})},351288:(e,t,n)=>{function i(e=300,t=16,n=2){let i=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${t*e}\n}\n\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n\n@media (min-width: ${t*e}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${t}),\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: ${e}px !important;\n  }\n}\n`;for(let o=n;o<t+1;o+=1){i+=`\n@media (min-width: ${o===n?0:(o-1)*e}px) and (max-width: ${o*e-1}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${o}),\n  .gridCentered .static:nth-child(-n+${o}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: calc(100% / ${o}) !important;\n  }\n}\n`}return i}n.d(t,{Z:()=>i})},395553:(e,t,n)=>{n.r(t),n.d(t,{PinRepEditButton:()=>a,default:()=>d});var i=n(174523),o=n(582418),r=n(883119),s=n(785893);function a({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:a,shouldUseLegoStyles:d,onDelete:l}){const c=(0,i.ZP)(),u=(0,s.jsx)(r.hU,{accessibilityLabel:c._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return d?(0,s.jsx)(r.zx,{fullWidth:!0,size:"lg",color:"gray",text:c._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:l,accessibilityLabel:c._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?(0,s.jsx)("div",{style:{...a||{}},children:u}):u}const d=(0,o.Z)(a)},476865:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(667294),o=n(304385),r=n(439887),s=n(154436),a=n(432921),d=n(904126),l=n(883119),c=n(785893);const u={overlay:{__style:{backgroundColor:"#000"}}};function h(e){var t,n,o,r;const{pin:{id:s,images:h,title:p,videos:g,video_status_message:m}}=e,f=m||{},b=h&&h["236x"],v=g&&(null===(t=g.video_list)||void 0===t?void 0:t[d.K.V_HLSV4]),{duration:x}=v||{};return(0,c.jsx)(i.Fragment,{children:(0,c.jsx)(l.Zb,{children:(0,c.jsxs)(l.iP,{role:"link",href:`/pin/${s}`,rounding:2,children:[(0,c.jsxs)(l.xu,{overflow:"hidden",position:"relative",rounding:2,children:[b&&(0,c.jsx)(l.Ee,{alt:p||"",color:"lightGray",naturalHeight:null!==(n=b.height)&&void 0!==n?n:1,naturalWidth:null!==(o=b.width)&&void 0!==o?o:1,src:null!==(r=b.url)&&void 0!==r?r:""}),!!x&&(0,c.jsx)(l.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,c.jsx)(a.Z,{duration:x})}),(0,c.jsx)(l.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:u.overlay}),(0,c.jsxs)(l.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,c.jsx)(l.X6,{color:"white",overflow:"normal",size:"sm",children:f.title}),(0,c.jsx)(l.xu,{marginTop:4,children:(0,c.jsx)(l.xv,{color:"white",size:"md",overflow:"normal",children:f.subtitle})})]})]}),(0,c.jsx)(l.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,c.jsx)(l.xu,{flex:"grow",children:p&&(0,c.jsx)(l.xu,{paddingY:1,children:(0,c.jsx)(l.xv,{inline:!0,size:"md",weight:"bold",children:p})})})})]})})})}var p=n(493858),g=n(181307),m=n(149674),f=n(855168),b=n(655414),v=n(825709),x=n(560133);function y({trackingParameters:e,pin:t,pinId:n,...a}){var d,l,u,y;const _=(0,f.TH)(),w=(0,m.tk)(),C=(n?w(n):null)||t,S=(0,g.aq)("web_deleted_idea_pins",!(null===(d=C.story_pin_data)||void 0===d||!d.is_deleted)).anyEnabled,j=(0,r.Z)(C,_),I=(0,s.Z)(C),E=!!(I&&I.url&&I.height&&I.width)||void 0,T=I&&C.videos?C.videos.id:void 0,[P,D]=(0,i.useState)(!1),k=(0,i.useCallback)((()=>D(!S)),[S]),O=(0,i.useCallback)((()=>D(!1)),[]),R=(0,b.yz)(),{componentType:B,contextLogData:A,impressionAuxFields:M,slotIndex:L,viewData:Z,viewParameter:N,viewType:F}=e;return(0,c.jsx)(o.Z,{componentType:B,contextLogData:{pwa_type:R,...A,...(0,x.Kl)(C,A)},impressionAuxFields:{...M||{},isNativeVideoAndWatchable:E,videoIdStr:T,clientTrackingParams:j||`${C.tracking_params||""}-0`,imageURL:null!==(l=null===(u=C.images)||void 0===u||null===(y=u["236x"])||void 0===y?void 0:y.url)&&void 0!==l?l:"",richTypes:(0,x.GT)(C)},impressionType:"Pin",isPaused:!P,loggingId:C.id,slotIndex:L,viewData:Z,viewParameter:N,viewType:F,children:(0,p._J)(C)?(0,c.jsx)(h,{pin:C}):(0,c.jsx)(v.Z,{...a,debugImpressionState:P?"started":"paused",onError:O,onLoad:k,pin:C,pinId:n,trackingParameters:{componentType:B,contextLogData:A,slotIndex:L,viewParameter:N,viewType:F}})})}},530197:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),o=n(40142),r=n(209067),s=n(631739),a=n(523890),d=n(767523),l=n(535718),c=n(34411),u=n(178862),h=n(223419),p=n(159276),g=n(301314),m=n(174523),f=n(883119),b=n(164756),v=n(785893);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y({board:e,hovered:t,searchQuery:n}){const i=e.privacy===s.Z.BoardPrivacy.SECRET;return(0,v.jsxs)(f.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:[(0,v.jsx)(f.xu,{flex:"grow",children:(0,v.jsx)(f.xv,{weight:"bold",children:(0,h.W)(n,e.name)})}),(0,v.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",flex:"none",children:[i&&(0,v.jsx)(r.Z,{type:"secret"}),e.is_collaborative&&(0,v.jsx)(r.Z,{type:"group"})]})]})}class _ extends i.Component{constructor(e){super(e),x(this,"getSections",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return[];const{searchQuery:t}=this.state,{boardResource:{data:{all_boards:n}}}=this.props;return t.length>=2?[{items:(0,u.j)(n,t)}]:[{items:n}]})),x(this,"createBtnDisabled",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return!1;const{boardResource:{data:{all_boards:t}}}=this.props,{searchQuery:n}=this.state;return t.some((e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===n.toLowerCase()}))})),x(this,"handleBoardCreate",(e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then((e=>{const{onBoardChosen:t}=this.props;t(e)}))})),x(this,"handleBoardSelected",(e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})})),x(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),x(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return(0,v.jsx)(y,{board:e,hovered:t,searchQuery:n})})),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isBoardlessPinsBoard:n,isQuickCreatesBoard:i,isStoryPin:o,viewer:r}=this.props,{searchQuery:s,selectedBoard:d}=this.state;let l=this.props.i18n._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?l=i?this.props.i18n._("Choose board","BoardPickerFlyout.displayBoardName.quickCreatesBoard","Title for board picker when current board is a quick creates board"):n?this.props.i18n._("Profile","BoardPickerFlyout.displayBoarName.boardlessPins","Title indicating the pin is saved to profile"):t.name:d&&(l=d.name),(0,v.jsxs)(f.xu,{children:[(0,v.jsx)(f.$j,{accessibilityLabel:this.props.i18n._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&(0,v.jsx)(a.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:l||"",isStoryPin:o,onCreate:this.handleBoardCreate(r),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getSections()})]})}}function w(e){const t=(0,m.ZP)(),n=(0,o.useDispatch)(),i=(0,c.Z)(),r=i.isAuth?i.username:"",s=(0,o.useSelector)((({advertiser:e})=>e)),a=i.isAuth&&s&&s.owner_user_id!==i.id,u=a?s.id:null,h=a?s.owner_user_id:null,f=(0,d.Z)(),x=(0,p.Ms)(i,f),y=x||h,w=(0,l.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:y,...u&&h?{advertiser_id:u,filter:"protected",username:h}:{}},noCache:!0});return(0,v.jsx)(_,{...e,advertiser_id:u,boardResource:w,createBoard:e=>n((0,b.aX)(e,void 0,r)),invalidateBoardPickerBoardsResource:()=>{n((0,g.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker",...x?{username:x}:{username:h}}))},username:h,viewer:i,i18n:t})}},523890:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(667294),o=n(645871),r=n(354707),s=n(745252),a=n(920228),d=n(174523),l=n(883119),c=n(785893);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",(e=>{this.containerRef=e})),u(this,"handleCreate",(()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()})),u(this,"handleSelectItem",(e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()})),u(this,"handleDropdownTouch",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),u(this,"handleHideFlyout",(e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()})),u(this,"hideFlyout",(()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})}))}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:i},isHovering:a,isStoryPin:d,onCreate:u,onSearchQueryUpdate:h,renderRow:p,searchQuery:g,sections:m,createBtnDisabled:f}=this.props,{showFlyout:b}=this.state;this.indexManager=new o.Z(m.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem);const v=!g.trim()||!!f;return(0,c.jsxs)(l.xu,{ref:this.setContainerRef,flex:d?"grow":void 0,children:[(0,c.jsx)(l.iP,{fullWidth:!!d,onMouseEnter:n,onMouseLeave:i,onTap:this.handleDropdownTouch,rounding:2,children:(0,c.jsxs)(l.xu,{alignItems:"center",color:a?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:d?4:3,rounding:d?4:2,children:[(0,c.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:(0,c.jsx)(l.xv,{weight:"bold",children:e})}),(0,c.jsx)(l.JO,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14})]})}),b&&(0,c.jsx)(l.xu,{position:"relative",children:(0,c.jsxs)(l.xu,{borderStyle:"sm",color:"white",direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:d?4:2,width:"100%",zIndex:new l.Ry(1),children:[(0,c.jsx)(l.xu,{children:(0,c.jsxs)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,padding:2,children:[(0,c.jsx)(l.xu,{display:"flex",flex:"grow",paddingX:1,children:(0,c.jsx)(r.Z,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:g})}),u&&(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{disabled:v,onClick:this.handleCreate,text:this.props.i18n._("Create","board or section dropdown create button","board or section dropdown create button")})})]})}),(0,c.jsx)(s.Z,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:p,sections:m})]})})]})}}function p(e){const t=(0,d.ZP)(),{isHovering:n,hoverHandlers:i}=(0,a.Z)();return(0,c.jsx)(h,{...e,i18n:t,isHovering:n,hoverHandlers:i})}},221487:(e,t,n)=>{n.d(t,{x:()=>b,Z:()=>v});var i=n(667294),o=n(40142),r=n(234316),s=n(523890),a=n(535718),d=n(178862),l=n(223419),c=n(174523),u=n(883119),h=n(785893);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g="NO_SECTION_VALUE";function m({section:e,hovered:t,searchQuery:n}){return(0,h.jsxs)(u.xu,{children:[(0,h.jsx)(u.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:(0,h.jsx)(u.xu,{flex:"grow",children:(0,h.jsx)(u.xv,{weight:"bold",children:(0,l.W)(n,e.title)})})}),e.id===g&&(0,h.jsx)(u.iz,{})]})}class f extends i.Component{constructor(...e){super(...e),p(this,"state",{searchQuery:""}),p(this,"getPickerSections",(()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter((e=>e.id!==n)):[{id:g,title:this.props.i18n._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=2&&(i=(0,d.j)(i,e,"title")),[{items:i}]})),p(this,"createBtnDisabled",(()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some((e=>{var n;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase())===t.toLocaleLowerCase()}))})),p(this,"handleSectionCreate",(()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:o}=this.props,{searchQuery:s}=this.state;o?o(s):i&&e.id&&i((0,r.Z)({boardId:e.id,name:s},this.props.i18n)).then((e=>{n&&n.refresh(),this.setState({searchQuery:""}),t(e)}))})),p(this,"handleSectionSelected",(e=>{const{onSectionChange:t}=this.props;e.id===g?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))})),p(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),p(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return(0,h.jsx)(m,{hovered:t,searchQuery:n,section:e})}))}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refresh()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:n,mergingFromSectionId:i,selectedSectionName:o}=this.props,{searchQuery:r}=this.state;let a=i?this.props.i18n._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):this.props.i18n._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find((e=>e.id===n))),a=e&&e.title||a}else o&&(a=o);return(0,h.jsxs)(u.xu,{children:[(0,h.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&(0,h.jsx)(s.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:a,isStoryPin:e,onCreate:i?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections()})]})}}function b(e){const t=(0,c.ZP)();return(0,h.jsx)(f,{...e,dispatch:(0,o.useDispatch)(),i18n:t})}function v(e){const t=(0,a.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id},noCache:!0});return(0,h.jsx)(b,{...e,sectionsResource:t})}},354707:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=(n(645871),n(588527)),r=n(883119),s=n(174523),a=n(785893);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),d(this,"setInputRef",(e=>{e&&(this._input=e)})),d(this,"handleKeyDown",(e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case o.Z.ENTER:case o.Z.NUMPAD_ENTER:e.preventDefault(),n.select();break;case o.Z.UP:e.preventDefault(),n.prev();break;case o.Z.DOWN:e.preventDefault(),n.next()}}))}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return(0,a.jsx)("div",{onKeyDown:this.handleKeyDown,role:"presentation",style:{width:"100%"},children:(0,a.jsx)(r.Um,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:this.props.i18n._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}const c=function(e){const t=(0,s.ZP)();return(0,a.jsx)(l,{...e,i18n:t})}},63447:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(667294),o=n(223419),r=n(189552),s=n(920228),a=n(174523),d=n(883119),l=n(785893);function c(e){const t=(0,a.ZP)(),{buttonLabel:n,hasHoverState:i,name:o,onClick:r}=e,{isHovering:c,hoverHandlers:u}=(0,s.Z)(),h=o||n||t._("Create board"," - "," -- ");return(0,l.jsx)(d.iP,{onMouseEnter:u.onMouseOver,onMouseLeave:u.onMouseLeave,onTap:r,children:(0,l.jsxs)(d.xu,{alignItems:"center",color:i&&c?"lightGray":"white",display:"flex",padding:4,height:"100%",width:"100%",children:[(0,l.jsx)(d.xu,{rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,color:"lightGray",children:(0,l.jsx)(d.JO,{accessibilityLabel:"",size:20,icon:"add",color:"darkGray"})}),o?(0,l.jsx)(d.xu,{margin:1,children:(0,l.jsxs)(d.xv,{inline:!0,overflow:"normal",children:[" ",t._("Create: "," - "," -- ")," "]})}):null,(0,l.jsxs)(d.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",h," "]})]})})}var u=n(645871),h=n(354707),p=n(745252),g=n(670473);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends i.Component{constructor(...e){super(...e),m(this,"state",{searchQuery:""}),m(this,"handleSelectItem",(e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})})),m(this,"handleSearchQueryInput",(e=>{this.setState({searchQuery:e})})),m(this,"renderSectionHeader",(e=>e.title?(0,l.jsx)(d.xu,{children:(0,l.jsx)(d.xu,{paddingX:3,paddingY:1,children:(0,l.jsx)(d.xv,{size:"md",children:e.title})})}):null)),m(this,"renderRow",(({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:i,isSelectMode:r,disabledRowId:s}=this.props,{searchQuery:a}=this.state,{inSectionSelection:d=!1}=n,c=i&&i.board===e.id?i&&i.state:null,u="board_section"===e.type;return(0,l.jsx)(o.Z,{disabled:e.id===s&&d,isSection:u,isSelectMode:r,isWithinSectionPicker:d,item:e,saveState:c,searchQuery:a,selected:t})}))}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:i,isLoaded:o,onCreate:s,pinId:a}=this.props;if(o){const{searchQuery:o}=this.state,g=i(o);return this.indexManager=new u.Z(g.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem),(0,l.jsxs)(d.xu,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&(0,l.jsx)(d.xu,{children:(0,l.jsx)(d.xu,{paddingX:3,marginBottom:4,marginTop:1,children:(0,l.jsx)(h.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:o})})}),(0,l.jsx)(p.Z,{disabled:!!e,grow:!n&&!o,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:g}),s&&(0,l.jsx)(d.xu,{borderStyle:g.length>1?"shadow":"none",children:(0,l.jsx)(c,{buttonLabel:t,hasHoverState:!0,name:o,onClick:()=>s(o)})}),n&&s&&a&&(0,l.jsx)(r.Z,{onBoardSelected:s,pinId:a})]})}return(0,l.jsx)(d.xu,{paddingY:5,children:(0,l.jsx)(d.$j,{accessibilityLabel:this.props.i18n._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function b(e){const t=(0,a.ZP)(),n=(0,g.iN)();return(0,l.jsx)(f,{...e,boardPickerStopwatch:n,i18n:t})}},178862:(e,t,n)=>{n.d(t,{j:()=>r});const i={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},r=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter((e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let r=0;for(let s=0;s<i.length;s+=1)(o(i[s]).includes(n[r])||i[s].includes(n[r]))&&(r+=1);return r===n.length})(e[n].toLowerCase(),i)))}},904126:(e,t,n)=>{n.d(t,{K:()=>i});const i={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},955801:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(823493),r=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",(e=>{this.containerRef=e})),s(this,"fetchMoreIfNecessary",r()((()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},i)=>e+t+(i?i(t):2*t)>n)(this.containerRef,t)&&e()}),200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},204891:(e,t,n)=>{n.d(t,{cB:()=>o,bD:()=>r,u_:()=>s,bz:()=>a,Y_:()=>d,Nw:()=>l,DY:()=>c,nx:()=>u,d9:()=>h,RJ:()=>g});var i=n(280313);n(883119);const o=408,r=16,s=2*(o+r),a=e=>{const{article_creator_user:t,display_type:n,feed_source:o,header_pin_id:r,id:s,title:a,video_pin:d}=e;switch(n){case 0:case 1:return a?(0,i.T7)(o,a,s):"";case 8:return null!=t&&t.username?`/${encodeURIComponent(t.username)}/`:"";case 3:case 6:return r?`/pin/${r}/`:"";case 2:return null!=d&&d.id?`/pin/${d.id}/`:"";default:return""}},d=e=>"todayarticle"===e.type,l=e=>"story"===(null==e?void 0:e.type)&&"today_tab_footer"===(null==e?void 0:e.story_type),c=e=>"story"===(null==e?void 0:e.type)&&("today_tab_header"===(null==e?void 0:e.story_type)||"today_tab_date_header"===(null==e?void 0:e.story_type)),u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),h=e=>{var t,n;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(n=e.width)&&void 0!==n?n:1)},p=["736x","236x","170x"],g=e=>{for(const n of p){var t;if(null!==(t=e.images)&&void 0!==t&&t[n])return e.images[n]}return null}},500115:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(382745),o=n(855168);function r(e){const t=(0,o.TH)(),n=(0,o.UO)(),r=(0,o.k6)();return()=>{if(e&&(0,i.L6)(t)&&n.id===e.id){var o,s,a,d;const t="quick_saves"===(null===(o=e.board)||void 0===o?void 0:o.layout)||"quick_creates"===(null===(s=e.board)||void 0===s?void 0:s.layout)?"/me/":null!==(a=null===(d=e.board)||void 0===d?void 0:d.url)&&void 0!==a?a:"/";r.replace(t)}}}},860179:(e,t,n)=>{n.d(t,{bI:()=>o,Fk:()=>r,lJ:()=>s,lI:()=>a,qW:()=>d,mS:()=>l,gw:()=>c,Uo:()=>u,j1:()=>h,fS:()=>p,Cq:()=>g,km:()=>m,Dk:()=>f});var i=n(883119);const o=new i.Ry(0),r=new i.Ry(1),s=3,a=new i.Ry(s),d=2,l=new i.Ry(d),c=new i.Ry(3),u=new i.Ry(1),h=new i.Ry(3),p=3,g=4,m=new i.Ry(5),f=new i.Ry(100)},606657:(e,t,n)=>{n.r(t),n.d(t,{CarouselSliders:()=>h,default:()=>p});var i=n(40142),o=n(224982),r=n(589444),s=n(174523),a=n(560133),d=n(457175),l=n(883119),c=n(785893);const u={slider:{cursor:"pointer",padding:"30px 16px",position:"relative",zIndex:"105",pointerEvents:"auto"}},h=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pin:o,pinId:r,contextLogData:h,viewParameter:p,viewType:g,componentType:m,isEditMode:f,forwardNode:b,backNode:v})=>{const x=(0,s.ZP)(),{logContextEvent:y}=(0,d.v)();if(!t)return null;const{carousel_slots:_=[],index:w=0}=t,C=void 0!==e?e:w,S=Math.max(0,C-1),j=Math.min(_.length-1,C+1),I=0===C,E=C===_.length-1,T=(e,s)=>{((e,t,n,i,o,r)=>{r||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==o&&o(n)})(e,r,s,n,i,f),((e,t,n,i,o,r,s,d,l,c,u)=>{if(!u||!r){const{carousel_slots:u,id:h}=r;e({event_type:108,object_id_str:n,component:l,view_type:d,view_parameter:s,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[i])&&Number(u[i].id),carouselDataId:Number(h),carouselSlotIndex:i,toCarouselSlotIndex:o}},aux_data:{...c,...(0,a.Kl)(t)||{}}})}})(y,o,r,C,s,t,p,g,m,h,f)};return(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"between",position:"absolute",alignItems:"center",left:!0,right:!0,bottom:!0,top:!0,children:[(0,c.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{T(e,S)},onKeyUp:e=>{T(e,S)},style:u.slider,children:!I&&(0,c.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:v||(0,c.jsx)(l.JO,{color:"white",icon:"arrow-back",accessibilityLabel:x._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")})})}),(0,c.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{T(e,j)},onKeyUp:e=>{T(e,j)},style:u.slider,children:!E&&(0,c.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:b||(0,c.jsx)(l.JO,{color:"white",icon:"arrow-forward",accessibilityLabel:x._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")})})})]})},p=(0,i.connect)((({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||(0,r.Z)({pin:i})}}),(e=>({changeCarouselSlotIndex:(t,n)=>e((0,o.Z)(t,n))})))(h)},100998:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(209067),o=n(130874),r=n(883119),s=n(785893);const a=({collaborator_count:e,useLegoLayout:t,type:n})=>t?(0,s.jsx)(r.xu,{marginEnd:e?2:0,children:(0,s.jsx)(i.Z,{type:n})}):(0,s.jsx)(i.Z,{type:n}),d=({board:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:d,showSectionsIcon:l,useLegoLayout:c})=>{var u;const h=(null==e||null===(u=e.collaborating_users)||void 0===u?void 0:u.length)||0;return t||n||d||l?(0,s.jsxs)(r.xu,{display:"flex",direction:"row",marginEnd:c?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center",children:[n&&(0,s.jsx)(a,{collaborator_count:h,useLegoLayout:c,type:"secret"}),d&&(0,s.jsx)(a,{collaborator_count:h,useLegoLayout:c,type:"protected"}),t&&(c?(0,s.jsx)(o.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,s.jsx)(i.Z,{type:"group"})),l&&(0,s.jsx)(i.Z,{type:"sections"})]}):null}},494353:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(881220),o=n(174523),r=n(946753),s=n(883119),a=n(785893);function d({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:d,newPin:l,onChangeButtonClick:c,onVisitButtonClick:u=(()=>{}),onHide:h,onUndo:p,pinImageUrl:g}){const m=(0,o.ZP)(),f=(0,a.jsx)(s.xu,{color:"lightGray",display:"flex",height:48,overflow:"hidden",width:48,children:(0,a.jsx)(s.xu,{padding:3,children:(0,a.jsx)(s.JO,{accessibilityLabel:m._("Saved to profile thumbnail","PostSavedPinToast.thumbnail.accessibilityLabel","Thumbnail for saved to profile."),color:"darkGray",icon:"history",size:24})})}),b=(!!c||!!p)&&(0,a.jsx)(s.zx,{text:l&&n&&c?m._("Change","PostSavedPinToast.ChangeButton","Change saved pin to a different destination"):m._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:l&&n&&c?()=>c(l):p},"button-key"),v=(0,a.jsx)(s.zx,{text:m._("Visit","PostSavedPinToast.VisitButton","Visit Pin saved from PinBuilder"),size:"lg",onClick:u});return(0,a.jsx)(i.ZP,{button:d?v:b,duration:n?6e3:3e3,iconThumbnail:n?f:void 0,imageUrl:g,onHide:h,text:(0,a.jsx)(s.xv,{size:"md",overflow:"normal",children:(0,r.nk)(m._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:(0,a.jsx)(s.rU,{href:n?"/me/":null!=t?t:"",children:(0,a.jsx)(s.xv,{size:"md",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},423405:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);const r=({image_url:e,naturalHeight:t,naturalWidth:n})=>(0,o.jsx)(i.xu,{"aria-hidden":"true",marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,children:(0,o.jsx)(i.zd,{wash:!0,width:48,height:48,rounding:2,children:(0,o.jsx)(i.Ee,{src:e,alt:"",naturalHeight:t,naturalWidth:n})})})},596885:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(395553),o=n(883119),r=n(785893);function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:s,onEditSubmit:a,onToggleModal:d,pinId:l,variant:c,viewParameter:u,shouldUseLegoStyles:h}=e,p="pin"===c?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return(0,r.jsxs)(o.xu,{alignItems:"center",display:"flex",direction:"row",paddingX:"closeup"!==c||h?void 0:2,width:"closeup"===c?"100%":void 0,maxHeight:"100%",children:[t&&(0,r.jsx)(o.xu,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),(0,r.jsx)(o.xu,{paddingX:1,flex:"none",marginStart:"auto",children:(0,r.jsx)(i.default,{component:0,onDelete:s,onSubmit:a,pinId:l,onToggleModal:d,viewParameter:u,carouselSlotCurrentIndex:n,style:p,shouldUseLegoStyles:h,useLegoStyles:"pin"===c})})]})}},645871:(e,t,n)=>{n.d(t,{Z:()=>s});const i={row:0,section:0},o={row:-1,section:-1},r=()=>{};class s{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=r,this.selectItem=r}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},i):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},i);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},745252:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(955801),r=(n(645871),n(883119)),s=n(785893);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.Component{constructor(e){super(e),a(this,"setSelectedItemRef",(e=>{this.selectedItemRef=e})),a(this,"handleIndexUpdate",(e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})})),a(this,"handleSelectItem",(e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)})),a(this,"handleMouseEnter",(e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)})),a(this,"handleMouseLeave",(()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()})),a(this,"renderItems",((e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:o,section:a}=i||{},{customProps:d={},items:l,renderItem:c}=e,{isDisabled:u=(e=>!1)}=d,h=t===a,p=c||n;return p&&l.map(((e,n)=>{const i=u(e),a={section:t,row:n},l=h&&n===o;return(0,s.jsx)(r.xu,{"data-test-id":"board-selection",ref:!i&&l?this.setSelectedItemRef:null,children:i?p({item:e,hovered:l,sectionProps:d}):(0,s.jsx)(r.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:l,sectionProps:d})})},n)}))})),a(this,"renderSections",(()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map(((t,n)=>(0,s.jsxs)(r.xu,{children:[e&&e(t,n),this.renderItems(t,n)]},n)))}));const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),i=n.top,o=n.bottom,r=t.getBoundingClientRect(),s=r.top;o>=r.bottom?e.scrollIntoView(!1):i<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return(0,s.jsx)(o.Z,{fetchMore:n,children:({setRef:n,onScroll:i})=>(0,s.jsx)(r.xu,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},732891:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s({handleFollowClick:e,isFollowing:t,isSelf:n,disabled:s,isSecondaryColor:a}){const d=(0,i.ZP)(),l=t?d._("Unfollow"," - "," -- "):d._("Follow"," - "," -- ");return n?(0,r.jsx)(o.zx,{disabled:!0,text:d._("That's you!","Text describing that the person's avatar is you","Text describing that the person's avatar is you")}):(0,r.jsx)(o.zx,{color:t||a?"gray":"red",onClick:e,text:l,disabled:s})}},558491:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(40142),r=n(151101),s=n(732891),a=n(320145),d=n(883119),l=n(289605),c=n(785893);function u({isSelf:e,showVerified:t=!1,user:n={}}){const[u,h]=(0,i.useState)(n.explicitly_followed_by_me||!1),p=(0,o.useDispatch)(),{domain_verified:g,full_name:m,is_verified_merchant:f,username:b}=n,v=n.image_key||n.image_medium_url||n.image_small_url;return(0,c.jsxs)(d.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,paddingY:1,children:[(0,c.jsx)(d.xu,{flex:"grow",paddingX:1,children:(0,c.jsx)(d.iP,{role:"link",href:`/${b}/`,children:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",gap:2,children:[(0,c.jsx)(d.xu,{width:50,children:(0,c.jsx)(r.Z,{name:m,src:v,size:"fit"})}),(0,c.jsx)(d.xv,{weight:"bold",children:t&&(f||g)?(0,c.jsx)(a.Z,{badgeSize:"sm",badgeSpacing:2,fullName:null!=m?m:"",identityIsVerified:g,isVerifiedMerchant:f}):m})]})})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(s.Z,{handleFollowClick:()=>{u?(p((0,l.fv)(n.id)),h(!1)):(p((0,l.ZN)(n.id)),h(!0))},isFollowing:u,isSelf:Boolean(e)})})]})}},320145:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(915192),r=n(883119),s=n(785893);const a=function({badgeSize:e,badgeSpacing:t,fullName:n,identityIsVerified:a,isVerifiedMerchant:d,truncate:l=!1}){const c=n.split(" "),u=c.slice(0,c.length-1).join(" "),h=" ".concat(c[c.length-1]);return l?(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(r.xv,{lineClamp:1,weight:"bold",children:n}),(0,s.jsx)(r.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:d})})]}):(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("span",{children:u}),(0,s.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[h," ",(0,s.jsx)(r.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:d})})]})]})}},325946:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(21755),o=n(387987),r=n(785893);function s({activate:e,children:t,isEligible:n,name:s}){return(0,r.jsx)(o.LC,{children:o=>(0,r.jsx)(i.Z,{activate:e,group:o.experiments.v2GetGroup(s)||"",isEligible:n,name:s,children:t})})}},643011:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(56221),o=n(304385),r=n(282972),s=n(535258),a=n(457175),d=n(480055),l=n(883119),c=n(785893);const u=s.xf;function h({contextLogData:e,bubbles:t,id:n,referringSource:s,slotIndex:h,storyType:p,title:g,titleIcon:m,viewType:f,viewParameter:b}){const{logContextEvent:v}=(0,a.v)(),x=t.map((({type:e,id:t})=>e+":"+t)).join("|");return(0,c.jsx)(o.Z,{viewType:f,componentType:200,viewParameter:b,loggingId:n,contextLogData:{story_type:p,objectId:n,content_ids:x,...e},impressionType:"Story",slotIndex:h,children:(0,c.jsxs)(l.xu,{children:[g&&(0,c.jsxs)(l.xu,{display:"flex",marginBottom:1,justifyContent:"center",alignItems:"center",children:["number"==typeof m&&m!==d.J&&(0,c.jsx)(l.xu,{marginEnd:2,dangerouslySetInlineStyle:{__style:{paddingTop:1}},children:(0,c.jsx)(l.JO,{accessibilityLabel:"",color:"darkGray",icon:(0,d.Z)(m),size:14})}),(0,c.jsx)(l.xv,{weight:"bold",children:(0,r.Z)(g)})]}),t.map(((e,t)=>(0,c.jsx)(l.xu,{paddingY:1,flex:"none",children:(0,c.jsx)(i.Z,{bubble:e,onClick:e=>{v({event_type:101,object_id_str:e,view_type:f,view_parameter:b,component:200})},referringSource:s,height:103,width:u,storyId:n,viewType:f,viewParameter:b,slotIndex:t,contextLogData:{content_ids:x,story_type:p}})},`bubble-${e.id}`)))]})})}},317461:(e,t,n)=>{n.d(t,{GY:()=>s,r$:()=>a,LM:()=>d});var i=n(730762),o=n(281996);const r=["search_articles_story","search_pinner_authority_hero","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2"];function s({query:e,scope:t}){return`${e}-${t}`}function a({query:e,rs:t,scope:n},r){const s=i.Z.getInstance().getPreviousViewFromContext(),a=!s.view_type&&!s.view_parameter,d=(0,o.wF)(n);if(!a&&d){const{view_type:n,view_parameter:i}=s;r({event_type:d,view_type:n,view_parameter:i,aux_data:{query:e,rs:t||"Unknown"}})}"hashtag_closeup"===t?r({event_type:101,component:13065,element:10273,view_type:142}):"hashtag_pinrep"===t&&r({event_type:101,component:0,element:10349,view_type:142})}const d=(e=[])=>{let t=!0;return e.reduce(((e,n)=>{var i;return t&&n.story_type&&r.includes(n.story_type)&&0===(null===(i=n.display_options)||void 0===i?void 0:i.num_columns_requested)?e.searchFullWidthStories.push(n):(t=!1,e.filteredResults.push(n)),e}),{searchFullWidthStories:[],filteredResults:[]})}},666187:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(520108),o=n(607023),r=n(785893);const s=[500329,503259,500410,500688],a=({placementId:e})=>{const t=(0,o.Z)();return(0,r.jsx)(i.Z,{placementId:e,eligibleIds:s,children:({complete:e,dismiss:n})=>(t(e,n),null)})}},264414:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(667294),o=n(520108),r=n(881220),s=n(457175),a=n(785893);const d=e=>{const{logContextEvent:t}=(0,s.v)();return(0,a.jsx)(o.Z,{eligibleIds:e.eligibleIds,placementId:e.placementId,eligibleTypes:[10],children:({complete:n,dismiss:i,experience:{display_data:o}})=>{const s=o.link||e.linkUrl;return(0,a.jsx)(r.ZP,{duration:o.duration,href:s,text:o.text||"",onClick:()=>{n(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&t({event_type:101,object_id_str:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?n():i()}})}})};var l=n(880841);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=2e3;class h extends i.Component{constructor(...e){super(...e),c(this,"componentDidMount",(()=>{const{delay:e=u}=this.props;this.experienceToastsTimeout=window.setTimeout((()=>this.triggerEducationToasts()),e)}))}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){const{toastManagerContext:e,completionOnDismissal:t,placementId:n,experienceIds:i}=this.props;e.showOneToast((({onHide:e})=>(0,a.jsx)(d,{experienceIds:i,completionOnDismissal:t,onHide:e,placementId:n,shouldLogClicks:!1})))}render(){return null}}c(h,"defaultProps",{completionOnDismissal:!1});const p=(0,l.Cl)(h)},314463:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(667294),o=n(883119),r=n(785893);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],d=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),l=e=>e*(Math.PI/180);class c extends i.PureComponent{constructor(...e){super(...e),s(this,"animationTimer",null),s(this,"canvasRemovalTimer",null),s(this,"containerRef",(0,i.createRef)()),s(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),n=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=0-(n-t)/2+"px",i.style.top=0-(n-e)/2+"px",i.style.pointerEvents="none",i.style.width=`${n}px`,i.style.height=`${n}px`,i.style.overflow="visible",i.width=n,i.height=n,i})),s(this,"explode",(()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const n=e.getContext("2d");t.prepend(e);const i=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(d(10,30)),color:a[Math.floor(Math.random()*a.length)],degree:Number(d(0,360).toFixed(1)),speed:Math.round(d(0,25)),friction:.9,opacity:Number(d(0,.5).toFixed(1)),yVel:0,gravity:.04}))),o=(e,t,n,i)=>{window.requestAnimationFrame((()=>o(e,t,n,i))),t.clearRect(0,0,n,i),e.forEach(((e,n)=>{e.x+=e.speed*Math.cos(l(e.degree)),e.y+=e.speed*Math.sin(l(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())}))};o(i,n,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{t.removeChild(e)}),(this.props.delay||0)+800)}))}componentDidUpdate(e){const{delay:t,startAnimation:n}=this.props,{startAnimation:i}=e;n&&i!==n&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,r.jsx)(o.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}s(c,"defaultProps",{delay:0});const u=c;var h=n(946753),p=n(174523);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),f=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class b extends i.PureComponent{constructor(...e){super(...e),g(this,"state",{isInitialized:!1}),g(this,"containerRef",(0,i.createRef)()),g(this,"pinDestinationRef",(0,i.createRef)())}componentDidMount(){window.requestAnimationFrame((()=>{this.setState({isInitialized:!0})}))}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:i}=this.props;n&&i&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(i,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:s}=this.props,{description:a="",images:d}=t,{height:l=0,width:c=0,url:p=""}=(null==d?void 0:d["236x"])||{},{isInitialized:g}=this.state,{mask:b,imageContainer:v}=((e,t,n,i)=>{var o,r,s;let a,d,l={};const c=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),u=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),h=null===(s=i.current)||void 0===s?void 0:s.getBoundingClientRect();if(u&&c&&h){l={left:c.left-u.left,top:c.top-u.top};const e={x:h.left-c.left,y:h.top-c.top},t={x:(h.width-c.width)/2,y:(h.height-c.height)/2};a=`translate(${e.x}px, ${e.y}px)`,d=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:l.left,top:l.top,width:e?null==h?void 0:h.width:null==c?void 0:c.width,height:e?null==h?void 0:h.height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?a:"none",transform:e?a:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==c?void 0:c.width,height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?d:"none",transform:e?d:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(g,this.containerRef,n,this.pinDestinationRef);return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(o.xu,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef,children:[(0,r.jsx)(o.xu,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:b},children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:v},children:(0,r.jsx)(o.Ee,{alt:null!=a?a:"",src:p||"",naturalHeight:l||1,naturalWidth:c||1})})}),(0,r.jsx)(o.xu,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(x=g,{pointerEvents:"none",opacity:x?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})},children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:m(g)},children:[(0,r.jsx)(u,{delay:1250,startAnimation:g,children:(0,r.jsx)(o.zd,{rounding:2,width:270,height:180,children:(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",height:"100%",width:"100%",children:[(0,r.jsx)(o.xu,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:80,children:[(0,r.jsx)(o.xu,{color:"lightGray",flex:"grow",marginBottom:1}),(0,r.jsx)(o.xu,{color:"lightGray",flex:"grow"})]})]})})}),(0,r.jsx)(o.xu,{paddingX:2,dangerouslySetInlineStyle:{__style:f(g)},children:(0,r.jsx)(o.X6,{align:"center",children:e?(0,h.nk)(this.props.i18n._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=s?s:""}):(0,h.nk)(this.props.i18n._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=s?s:""})})})]})})]})});var x}}function v(e){const t=(0,p.ZP)();return(0,r.jsx)(b,{...e,i18n:t})}g(b,"defaultProps",{firstRepin:!1})},282152:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(737614);function o(){const e=i.Z.instance;return`${e.is_mobile_agent?"mobile":"desktop"}.${e.country}.${e.user_agent_platform}.${e.browser_name}`.replace(/ /g,"_")}},318205:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(667294),o=n(932466),r=n(620813),s=n(174523),a=n(387987),d=n(883119),l=n(785893);function c({height:e,onCtaDidLoad:t,width:c}){const u=(0,s.ZP)(),[h,p]=(0,i.useState)(null),{locale:g}=(0,a.B)(),m=(0,o.default)(g);(0,i.useEffect)((()=>{m&&"none"!==m&&(e=>{const t=(0,i.lazy)((()=>n(641661)(`./${e}`)));p(t)})(m)}),[m]),(0,i.useEffect)((()=>{h&&t()}),[h]);const f=u._("Open Pinterest and tap the camera icon for ideas","PincodeCTA.title","Text informing users how to use Pincodes — may be displayed or used as accessibility label for an image"),b=(0,l.jsx)(d.xv,{align:"center",children:f});return"none"===m?b:h?(0,l.jsx)(r.Z,{fallback:b,children:(0,l.jsx)(h,{height:e,title:f,width:c})}):(0,l.jsx)(d.$j,{accessibilityLabel:u._("Loading Pincode Call to Action","PincodeCTA.loading","Accessibility label for loading spinner for the Pincode call-to-action"),show:!0})}},932466:(e,t,n)=>{function i(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":return"ESMX";case"ES-AR":return"ESAR";case"ES-419":return"ESMX";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}n.r(t),n.d(t,{default:()=>i})},33234:(e,t,n)=>{n.d(t,{ZP:()=>k});var i=n(667294),o=n(318205),r=n(785893);const s="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z",a="#e60023",d="0 0 222 222";function l({size:e}){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:d,children:(0,r.jsx)("path",{d:s,fill:a,fillRule:"evenodd"})})}var c=n(174523),u=n(883119);function h({getThumbnailImageSrcSet:e,images:t,onTouch:n}){const i=(0,c.ZP)();return(0,r.jsx)(u.xu,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map(((t,o)=>{var s,a,d,c;return(0,r.jsx)(u.xu,{padding:1,children:(0,r.jsx)(u.Zb,{children:(0,r.jsx)(u.iP,{fullWidth:!1,onTap:()=>n("logo"===t?"logo":o-1),rounding:2,children:(0,r.jsx)(u.zd,{rounding:"circle",width:85,height:85,children:"logo"===t?(0,r.jsx)(l,{size:85}):(0,r.jsx)(u.Ee,{alt:i._("Pincode Hero Image","accessibility label for the Pincode hero image","accessibility label for the Pincode hero image"),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:null!==(s=t.height)&&void 0!==s?s:1,naturalWidth:null!==(a=t.width)&&void 0!==a?a:1,src:null!==(d=t.url)&&void 0!==d?d:"",srcSet:e&&e(null!==(c=t.url)&&void 0!==c?c:"")})})})})},"logo"===t?t:t.url)}))})}var p=n(535718);const g=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n  <svg xmlns="http://www.w3.org/2000/svg" width="${m||222}" height="${m||222}" x="${f||0}" y="${f||0}" viewBox="0 0 222 222">\n    <path d="${s}" fill="#e60023" fill-rule="evenodd" />\n  </svg>`.trim())}`;var m,f;const b=600;function v(e,t,n){return`\n    <image id="image"\n      x="${100+("right"===t?300:0)}"\n      y="${100+("bottom"===n?300:0)}"\n      width="${b/("row"===t?1:2)}"\n      height="${b/("column"===n?1:2)}"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n      xlink:href="${e}"\n      preserveAspectRatio="xMidYMid slice"\n    />`}function x(e,t){const n=function(e){switch(e.length){case 0:case 1:return;case 2:return[v(e[0],"left","column"),v(e[1],"right","column")].join("");case 3:return[v(e[0],"left","column"),v(e[1],"right","top"),v(e[2],"right","bottom")].join("");default:return[v(e[0],"left","top"),v(e[1],"right","top"),v(e[2],"left","bottom"),v(e[3],"right","bottom")].join("")}}(t);return n?e.replace(/<image[^>]*>/,n):e}class y extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(n="handleFetchChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){const{className:e,imageUrls:t,size:n,pincodeImageResource:{data:i,isLoaded:o}}=this.props,s=n,a=n;return(0,r.jsxs)(u.kC,{alignItems:"center",height:a,justifyContent:"center",width:s,children:[o&&!!i&&(0,r.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:x(i,t)},style:{width:s,height:a}}),(0,r.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("Loading Pincode Image","accessibility label for loading the Pincode image","accessibility label for loading the Pincode image"),show:!i})]})}}function _(e){const t=(0,c.ZP)(),n=(0,p.Z)({name:"PincodeImageResource",options:{object_id:e.id,hero_image_url:e.imageUrls[0]||g}});return(0,r.jsx)(y,{...e,i18n:t,pincodeImageResource:n})}var w=n(457175);function C(e){return new Promise(((t,n)=>{const i=new XMLHttpRequest;i.ontimeout=n,i.onreadystatechange=()=>{if(4!==i.readyState)return;if(200!==i.status)return void n();const e=new FileReader;e.onloadend=()=>{const i=e.result;"string"==typeof i?t(i.split(/,/)[1]):n()},e.readAsDataURL(i.response)},i.open("GET",e,!0),i.timeout=3e4,i.responseType="blob",i.send()}))}function S(e,t){if(!(e instanceof Element))return Promise.resolve(e);if(e instanceof window.SVGImageElement)return function(e,t){const n=e.href.baseVal;if(n.startsWith("data:"))return Promise.resolve();const i=t?t(n):n;return Promise.resolve(i).then(C).then((e=>`data:${function(e){const t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(i)};base64,${e}`)).then((t=>new Promise(((n,i)=>{e.onerror=i,e.href.baseVal=t,window.requestAnimationFrame(n)}))))}(e,t);const n=Array.from(e.childNodes);return Promise.all(n.map((e=>S(e,t))))}function j(e,t){return new Promise(((n,i)=>{const o=document.createElement("div");o.innerHTML=e.innerHTML,S(o,t).then((()=>{const t=new Image;t.onload=()=>{window.requestAnimationFrame((()=>n(t)))},t.onerror=i;const r=o&&o.querySelector("svg");r&&(/^[0-9]+$/.test(r.getAttribute("width")||"")||r.setAttribute("width",`${e.scrollWidth}`),/^[0-9]+$/.test(r.getAttribute("height")||"")||r.setAttribute("height",`${e.scrollHeight}`));const s=o.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(s.trim())}`}))}))}function I(e,t){return new Promise(((n,i)=>{(function(e){return new Promise(((t,n)=>{if(e.toBlob)return void e.toBlob(t);let i="";try{i=e.toDataURL("image/png")}catch(a){n()}const o=window.atob(i.split(",")[1]),r=o.length,s=new Uint8Array(r);for(let e=0;e<r;e+=1)s[e]=o.charCodeAt(e);t(new window.Blob([s],{type:"image/png"}))}))})(e).then((e=>window.URL.createObjectURL(e))).then((e=>{const i=document.createElement("a");i.download=t,i.href=e,i.style.display="none",window.document.body.appendChild(i),window.requestAnimationFrame((()=>{const t=()=>{window.requestAnimationFrame((()=>{window.URL.revokeObjectURL(e),i.removeAttribute("href"),i.removeEventListener("click",t),window.document.body.removeChild(i),n()}))};i.addEventListener("click",t),i.click()}))})).catch(i)}))}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T="pincodeMain",P="pincodeCTA";class D extends i.PureComponent{constructor(...e){super(...e),E(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),E(this,"getCustomHeroImages",(()=>{const{images:e,customizable:t}=this.props,{pickedImageIndex:n}=this.state;if(!t)return e;const i="logo"!==n&&e[n];return i?[i]:[]})),E(this,"normalizeUrl",(e=>{const{getMainImageURL:t}=this.props;return(e=>e.replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/"))((t||(e=>e))(e))})),E(this,"handleFetchChange",(e=>{this.setState({isFetchingPincodeImage:e})})),E(this,"handleCancelButtonClick",(()=>this.setState({isPickingHeroImage:!1}))),E(this,"handleEditButtonClick",(()=>this.setState({isPickingHeroImage:!0}))),E(this,"handleSelectImage",(e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e}))),E(this,"downloadPincodeImage",(()=>{const e=this.previewNode,{ctaIsLoaded:t,isFetchingPincodeImage:n,isDownloading:i}=this.state;if(!e||!t||n||i)return;const o=e.querySelector(".pincodeMain"),r=e.querySelector(".pincodeCTA");if(!o||!r)return;const{getDownloadImageURL:s,id:a,logContextEvent:d}=this.props;d({event_type:7078,component:13141,object_id_str:a}),this.setState({isDownloading:!0}),Promise.all([j(o,s),j(r)]).then((e=>{const[t,n]=e;return((e,t)=>{const n=document.createElement("canvas");n.width=3544,n.height=3544;const i=Math.round(.1*n.width),o=Math.round(.05*n.width),r=n.width-2*i,s=n.width-2*o,a=n.height-r,[d,l]=t.width/t.height>s/a?[s,s/t.width*t.height]:[a/t.height*t.width,a],c=n.getContext("2d");return c.fillStyle="#fff",c.fillRect(0,0,n.width,n.height),c.drawImage(e,i,0,r,r),c.drawImage(t,(n.width-d)/2,r+(n.height-r-l)/2,d,l),n})(t,n)})).then((e=>I(e,`pincode_${this.props.id}.png`))).then((()=>{this.setState({isDownloading:!1})})).catch((()=>{this.setState({errorFlyoutIsOpen:!0})}))}))}render(){const{id:e,isLoadingImages:t,images:n,getThumbnailImageSrcSet:i,customizable:s}=this.props,{ctaIsLoaded:a,errorFlyoutIsOpen:d,isFetchingPincodeImage:l,isDownloading:c,isPickingHeroImage:p}=this.state;return p?(0,r.jsx)(u.xu,{width:350,color:"white",rounding:2,padding:4,children:(0,r.jsxs)(u.xu,{children:[(0,r.jsx)(u.xu,{paddingY:1,children:(0,r.jsx)(u.X6,{size:"md",lineClamp:1,children:this.props.i18n._("Change Image","Title of the Pincode hero image picker modal","Title of the Pincode hero image picker modal")})}),(0,r.jsx)(u.iz,{}),(0,r.jsx)(h,{images:n,getThumbnailImageSrcSet:i,onTouch:this.handleSelectImage}),(0,r.jsx)(u.xu,{padding:1,children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Cancel","Button to dismiss Pincode hero image picker","Button to dismiss Pincode hero image picker"),onClick:this.handleCancelButtonClick})})]})}):(0,r.jsx)(u.xu,{width:350,color:"white",rounding:2,marginBottom:4,paddingX:4,children:(0,r.jsxs)(u.xu,{children:[(0,r.jsx)(u.xu,{ref:e=>{this.previewNode=e},children:(0,r.jsxs)(u.xu,{color:"white",display:"flex",direction:"column",alignItems:"center",justifyContent:"center",width:"100%",height:320,children:[t?(0,r.jsx)(u.kC,{alignItems:"center",height:230,justifyContent:"center",width:"100%",children:(0,r.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("Loading","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0})}):(0,r.jsx)(_,{className:T,id:e,imageUrls:this.getCustomHeroImages().map((e=>{var t;return this.normalizeUrl(null!==(t=e.url)&&void 0!==t?t:"")})),onFetchingChange:this.handleFetchChange,size:230}),(0,r.jsx)(u.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:7,marginTop:2,children:(0,r.jsx)("div",{className:P,children:(0,r.jsx)(o.default,{onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300,height:78})})})]})}),(0,r.jsxs)(u.xu,{marginTop:2,padding:1,children:[s&&n.length>0&&(0,r.jsx)(u.xu,{paddingY:1,children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Change Image","Button to pick Pincode hero image","Button to pick Pincode hero image"),onClick:this.handleEditButtonClick})}),(0,r.jsxs)(u.xu,{paddingY:1,children:[(0,r.jsx)(u.xu,{ref:e=>{this.downloadButton=e},children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Download Pincode","Button to download the Pincode image","Button to download the Pincode image"),color:"red",onClick:this.downloadPincodeImage,disabled:t||!a||l||c})}),d&&(0,r.jsx)(u.J2,{anchor:this.downloadButton,color:"red",idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),size:"sm",shouldFocus:!1,children:(0,r.jsx)(u.xu,{padding:3,children:(0,r.jsx)(u.xv,{color:"white",weight:"bold",children:(0,r.jsx)("span",{children:this.props.i18n._("Oops! Your browser does not support downloading Pincodes.","Error message shown when user attempts to download Pincode on a browser not supported","Error message shown when user attempts to download Pincode on a browser not supported")})})})})]})]})]})})}}function k(e){const{logContextEvent:t}=(0,w.v)(),n=(0,c.ZP)();return(0,r.jsx)(D,{...e,i18n:n,logContextEvent:t})}},956997:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(451190),r=n(174523),s=n(883119),a=n(457175),d=n(785893);function l({children:e,objectId:t,onHide:n}){const{logContextEvent:l}=(0,a.v)(),c=(0,r.ZP)(),u={component:13141,object_id_str:t};return(0,i.useEffect)((()=>{l({event_type:6359})}),[t]),(0,d.jsx)(o.Z,{accessibilityModalLabel:c._("Pincode","pincode.pincodemodal.label","Accessible label for a modal showing the pincode modal"),heading:c._("Pincode","pincode.pincodemodal.heading","Heading for a modal showing the pincode."),onDismiss:()=>{n(),l({event_type:6358,...u})},size:"sm",children:(0,d.jsx)(s.kC,{alignItems:"stretch",justifyContent:"center",children:e})})}},130874:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(189734),o=n.n(i),r=n(174523),s=n(34411),a=n(883119),d=n(946753),l=n(785893);function c(e){var t,n;const i=null!==(t=e.imageMediumUrl)&&void 0!==t?t:e.image_medium_url;return{name:null!==(n=e.fullName)&&void 0!==n?n:e.full_name,src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:i}){const u=(0,r.ZP)(),h=(0,s.Z)(),p=i?[c(e.owner)]:function(e,t,n){const{collaborated_by_me:i,collaborating_users:r=[],owner:s}=e,a=[s];if(i||n){const e=r.findIndex((e=>t.isAuth&&e.id===t.id));if(-1!==e){const t=r.splice(e,1)[0];a.push(t)}else a.push(t)}const d=o()(r,"full_name");return[...a,...d]}(e,h,t).map(c),g=p.slice(0,3).map((e=>e.name));let m="";switch(p.length){case 3:m=(0,d.Wc)(`${u._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${g[0]}`,second:`${g[1]}`,last:`${g[2]}`});break;case 2:m=(0,d.Wc)(`${u._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${g[0]}`,second:`${g[1]}`});break;default:m=g.join(", ")}const f=p.length>3?(0,d.Wc)(`, ${u.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",p.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars")}`,{userNames:m,leftCount:""+(p.length-3)}):(0,d.Wc)(`, ${u._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:m});return(0,l.jsx)(a.HE,{accessibilityLabel:f,collaborators:p,size:n?"xs":"sm"})}},330658:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(538052),o=n(451190),r=n(174523),s=n(387987),a=n(883119),d=n(785893);function l(e){const t=(0,r.ZP)(),{onSectionCreate:n,onClose:l,selectedBoard:c,useLayer:u=!0}=e,{isRTL:h}=(0,s.B)(),p=u?o.Z:a.u_,g=(0,d.jsx)(a.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,d.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[(0,d.jsx)(a.xu,{maxWidth:400,children:(0,d.jsx)(a.X6,{align:"center",size:"md",children:t._("Add section","Modal header for adding a section","Modal header for adding a section")})}),(0,d.jsx)(a.xu,{left:h,paddingX:6,paddingY:5,position:"absolute",right:!h,top:!0,children:(0,d.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t._("Close","CreateSection.Modal.Icon","Icon to close section create modal"),onClick:l})})]})});return(0,d.jsx)(p,{accessibilityModalLabel:t._("Add a section to the board","modal to add a section to a board","modal to add a section to a board"),heading:g,onDismiss:l,size:"sm",children:(0,d.jsx)(a.xu,{display:"flex",color:"white",rounding:2,children:(0,d.jsx)(i.Z,{board:c,completeCreateSectionAction:n,onClearModal:l,positionRelative:!0,showTitle:!1})})})}},273341:(e,t,n)=>{n.d(t,{OJ:()=>a,Sd:()=>d,Q2:()=>l});var i=n(881219),o=n(711349),r=n(301314);const s=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],a={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:i},o)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:i,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...o?{orbac_subject_id:o}:Object.freeze({})})},d=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>s.reduce(((t,n)=>{const s=[(0,o.Z)("profileBoards",(0,i.OV)(e,n))];return[!0,!1].forEach((t=>{[!0,!1].forEach((i=>{s.push((0,r.jB)(a.name,a.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:i})))}))})),t.concat(s)}),[])},691908:(e,t,n)=>{n.d(t,{a:()=>d,Z:()=>l});var i=n(667294),o=n(762803),r=n(785893);const{Provider:s,useHook:a}=(0,o.Z)("ShowBoardlessPins");function d({children:e}){const[t,n]=(0,i.useState)(!1);return(0,r.jsx)(s,{value:{showBoardlessPinsModal:t,setShowBoardlessPinsModal:n},children:e})}const l=a},266265:(e,t,n)=>{n.d(t,{o:()=>c,Z:()=>u});var i=n(174523),o=n(34411),r=n(535258),s=n(457175),a=n(104216),d=n(883119),l=n(785893);const c="AddPinRep";function u({ctaText:e,handleClick:t,height:n,iconSize:c,textSize:u}){const{logContextEvent:h}=(0,s.v)(),p=(0,i.ZP)(),g=(0,o.Z)(),m=(0,a.Z)({shouldStopEventPropagation:!1})((()=>{t&&t(),g.isPartner&&h({event_type:101,component:0,element:10643})}));return(0,l.jsx)(d.xu,{children:(0,l.jsx)(d.iP,{role:"link",onTap:m,href:"/pin-builder/",children:(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.xu,{alignItems:"center",color:"lightGray",display:"flex",fit:!0,height:n||r.xf,justifyContent:"center",rounding:2,width:n||void 0,children:(0,l.jsx)(d.xu,{color:"white",height:c||40,rounding:"circle",width:c||40,children:(0,l.jsx)(d.JO,{accessibilityLabel:"",color:"red",icon:"add-circle",inline:!0,size:c||40})})}),(0,l.jsx)(d.xu,{padding:2,children:(0,l.jsx)(d.xv,{color:"gray",size:u||"lg",weight:"bold",children:e||p._("Create Pin","label to open create pin modal","label to open create pin modal")})})]})})})}},756103:(e,t,n)=>{n.d(t,{ZP:()=>Ae,Tr:()=>Re,aU:()=>ke});var i=n(667294),o=n(40142),r=n(963232),s=n(150361),a=n.n(s),d=n(174523),l=n(883119),c=n(785893);function u({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:i,isManagedView:o,isNoTitle:r}){const s=(0,d.ZP)(),a=o?6:r?0:3;return(0,c.jsxs)(l.xu,{children:[!r&&(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:o?0:4,paddingY:a,children:[!o&&!r&&(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",children:s._("Comment Permissions","Label for comments setting on a pin in pin edit form","Label for comments setting on a pin in pin edit form")})}),(0,c.jsxs)(l.xu,{column:12,mdColumn:o?12:8,children:[(0,c.jsxs)(l.xu,{paddingY:1,display:"flex",alignItems:"center","data-test-id":"allow-comments-switch",children:[(0,c.jsx)(l.rs,{onChange:t,id:"CommentSwitch",switched:!e}),(0,c.jsx)(l.xu,{paddingX:2,children:(0,c.jsx)(l.__,{htmlFor:"CommentSwitch",children:(0,c.jsx)(l.xv,{size:"md",children:s._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form")})})})]}),n&&(0,c.jsxs)(l.xu,{paddingY:1,alignItems:"center",display:"flex",children:[(0,c.jsx)(l.rs,{onChange:n,id:"PhotoSwitch",switched:!i}),(0,c.jsx)(l.xu,{paddingX:2,children:(0,c.jsx)(l.__,{htmlFor:"PhotoSwitch",children:(0,c.jsx)(l.xv,{size:"md",children:s._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form")})})})]})]})]})]})}var h=n(631739),p=n(311866),g=n(273341),m=n(301314);var f=n(234316),b=n(618446),v=n.n(b),x=n(451190),y=n(559335),_=n(549156),w=n(881220),C=n(880841);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends i.PureComponent{constructor(...e){super(...e),S(this,"state",{deleting:!1}),S(this,"unmounted",!1),S(this,"handleConfirm",(()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then((()=>this.handleDeleteDidComplete())).catch((e=>this.handleDeleteDidComplete(e)))})),S(this,"handleDeleteDidComplete",(e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast((({onHide:e})=>(0,c.jsx)(w.ZP,{onHide:e,text:this.props.i18n._("Pin deleted!","User deleted their pin","User deleted their pin")})))}))}componentWillUnmount(){this.unmounted=!0}render(){const{i18n:e,onDismiss:t,showStoryPinCreatorDeleteMessage:n}=this.props,{deleting:i}=this.state;return(0,c.jsx)(x.Z,{heading:e._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:e._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:t,footer:(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"center",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{fullWidth:!0,onClick:t,text:e._("Cancel"," - "," -- ")})}),(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(_.Z,{id:"confirm-delete-pin",children:(0,c.jsx)(y.Z,{color:"red",onClick:this.handleConfirm,text:e._("Delete","PinEditModal.DeletePinConfirmation.DeleteButton","Delete button to delete a Pin"),submitting:i})})})]}),children:(0,c.jsx)(l.xu,{padding:4,children:(0,c.jsx)(l.xv,{children:n?e._("If you delete this Pin, it'll be gone for good and those who've saved it won't be able to view it.","PinEditModal.DeletePinConfirmation","Confirmation to delete a Pin that lets the creator know it will be unavailable to other Pinners who have saved it"):e._("Once you delete a Pin, you can't undo it!"," - "," -- ")})})})}}const I=(0,C.Cl)((function(e){const t=(0,d.ZP)();return(0,c.jsx)(j,{...e,i18n:t})}));I.displayName="DeletePinConfirmation";const E=I;function T({canEdit:e,onAltTextChange:t,altText:n}){const o=(0,d.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"AltTextField",children:(0,c.jsx)(l.xv,{size:"md",children:o._("Alt text","EditPinModal.EditAltText","Label for editing alt text of pin")})})}),(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.xu,{children:(0,c.jsx)(l.nv,{id:"AltTextField",onChange:({value:e})=>t({value:e.slice(0,500)}),size:"lg",value:n||""})}),(0,c.jsx)(l.xu,{children:(0,c.jsx)(l.__,{htmlFor:"AltTextField",children:(0,c.jsx)(l.xu,{marginTop:1,children:(0,c.jsx)(l.xv,{size:"md",color:"gray",children:o._("This helps people using screen readers understand what your Pin is about.","EditPinModal.EditAltText","Label for editing alt text of pin")})})})})]}):(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:n})})})]})]})}var P=n(530197),D=n(269307);function k({board:e={},canEdit:t,isOriginallyQuickCreatesBoard:n,onBoardChange:i,onBoardCreate:o,viewerId:r}){const s=(0,d.ZP)(),{showEnabledSaveBehavior:a}=(0,D.ZP)(r),u="quick_saves"===e.layout&&a,h="quick_creates"===e.layout;return(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"BoardPicker",children:(0,c.jsx)(l.xv,{size:"md",children:n?s._("Organize to a board (optional)","editPinModal.editBoard.optionalBoardLabel","Label for board dropdown to select optional board"):s._("Board"," - "," -- ")})})}),t?(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:(0,c.jsx)(P.Z,{board:e,isBoardlessPinsBoard:u,isQuickCreatesBoard:h,onBoardChosen:i,onBoardCreate:o})}):e.name&&(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:e.name})})]})}var O=n(308125),R=n(189509),B=n(457175);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M extends i.Component{constructor(...e){super(...e),A(this,"state",{focused:!1}),A(this,"suggestionAnchorRef",(0,i.createRef)()),A(this,"handleBlur",(e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)})),A(this,"handleFocus",(e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)})),A(this,"handleChange",(({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})}))}render(){const{canAddUserMentionTags:e,canEdit:t,description:n,errorMessage:o,initialMentions:r,label:s,placeholder:a,onDescriptionChange:d}=this.props,u={__style:{...this.state.focused?{boxShadow:"0 0 0 3px #92c2fb"}:{}}};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"DescriptionField",children:(0,c.jsx)(l.xv,{size:"md",children:s})})}),t?(0,c.jsxs)(l.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(l.xu,{children:e?(0,c.jsx)(l.xu,{borderStyle:"lg",dangerouslySetInlineStyle:u,id:"DescriptionField",minHeight:48,paddingX:2,paddingY:4,ref:this.suggestionAnchorRef,role:"textbox",rounding:4,children:(0,c.jsx)(O.Z,{initialMentions:r,initialText:n,onAddMention:()=>{this.props.logContextEvent({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{this.props.logContextEvent({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:()=>{this.props.logContextEvent({event_type:8907,element:116,aux_data:{tag_type:1}})},maxSuggestions:4,placeholder:a})}):(0,c.jsx)(l.Kx,{id:"DescriptionField",placeholder:a,value:n,onChange:({value:e})=>{d({value:e,userMentionTags:[]})},hasError:(o||"").length>0})}),!!o&&(0,c.jsx)(l.xu,{children:(0,c.jsx)(R.Z,{errorMessage:o,htmlFor:"pin-edit-description"})})]}):(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:n})})]})]})}}const L=function(e){const{logContextEvent:t}=(0,B.v)();return(0,c.jsx)(M,{...e,logContextEvent:t})};var Z=n(479996),N=n(606657),F=n(329485);function U({isCarousel:e,onMouseEnter:t,onMouseLeave:n,shouldShowCarouselSliders:i,onCarouselSlide:o,currentIndex:r,carouselData:s,pinId:a,description:d,image:u={}}){return(0,c.jsxs)(l.xu,{paddingX:4,paddingY:3,children:[e&&(()=>{const e=s&&s.carousel_slots&&s.carousel_slots.length||1;return e>=2&&(0,c.jsx)(l.xu,{padding:2,children:(0,c.jsx)(l.__,{htmlFor:"CardsIndex",children:(0,c.jsxs)(l.xv,{size:"md",children:[r+1,"/",e]})})})})(),(0,c.jsx)(l.zd,{width:236,children:(0,c.jsxs)(l.xu,{onMouseEnter:t,onMouseLeave:n,children:[(0,c.jsxs)(l.zd,{rounding:2,wash:!0,children:[e&&i&&(0,c.jsx)(l.xu,{display:"inlineBlock",height:"100%",position:"absolute",width:"100%",zIndex:new l.Ry(10),dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},children:(0,c.jsx)(N.default,{handleCarouselSwipe:o,carouselIndex:r,carouselData:s,pinId:a,isEditMode:!0})}),e?(0,c.jsx)(F.Z,{carouselIndex:r,isCloseup:!1,carouselData:s,pinId:a,isEditMode:!0}):(0,c.jsx)(l.Ee,{alt:d,color:"#efefef",naturalHeight:u.height,src:u.url,naturalWidth:u.width})]}),e&&(0,c.jsx)(Z.default,{carouselIndex:r,carouselData:s,pinId:a,handleCarouselSwipe:o,isEditMode:!0,variant:"legacy"})]})})]})}function H({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:n,disableDelete:i,onHide:o,shouldDisableSave:r,triggerBoardAndSectionCreate:s}){const a=(0,d.ZP)();return(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(_.Z,{id:"delete-pin-button",children:(0,c.jsx)(l.zx,{fullWidth:!0,text:a._("Delete","EditPinModal.EditPinFooter.Delete","delete pin"),onClick:n,disabled:i})}),t&&(0,c.jsx)(l.xu,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center",children:(0,c.jsx)(R.Z,{errorMessage:e||a._("Sorry! There was an error editing your Pin.","EditPinModal.EditPinFooter.ErrorMessageToast","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2,children:[(0,c.jsx)(l.xu,{paddingX:2,children:(0,c.jsx)(l.zx,{fullWidth:!0,text:a._("Cancel","EditPinModal.EditPinFooter.Cancel","cancel changes"),onClick:o})}),(0,c.jsx)(l.xu,{paddingX:2,"data-test-id":"edit-pin-save",children:(0,c.jsx)(l.zx,{fullWidth:!0,text:a._("Save","EditPinModal.EditPinFooter.Save","save changes"),color:"red",onClick:s,disabled:r})})]})]})}function z({pinNoteText:e,isCollaborative:t,onPinNoteChange:n}){const o=(0,d.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"PinNoteField",children:(0,c.jsx)(l.xv,{size:"md",children:t?o._("Note to group","editPinModal.editPinNote.groupTitle","Label for editing private note on group Pin"):o._("Note to self","editPinModal.editPinNote.title","Label for editing private note on Pin")})})}),(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,"data-test-id":"note-to-self-input",children:(0,c.jsx)(l.Kx,{errorMessage:e.length>=500?o._("Character limit reached","editPinModal.editPinNote.warningText","Text to inform user they have reached the length limit on Pin note"):void 0,id:"PinNoteField",onChange:n,placeholder:o._("Add a private note to remember your ideas about this Pin","editPinModal.editPinNote.placeholderText","Placeholder for editing private note"),value:e})})]})]})}var W=n(221487);function $({board:e,canEdit:t,currentSection:n,onSectionChange:i,onSectionCreate:o,sectionId:r,sectionName:s}){const a=(0,d.ZP)(),u=null!=e&&e.id?W.Z:W.x;return"quick_creates"===(null==e?void 0:e.layout)?null:(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:3,children:(0,c.jsx)(l.__,{htmlFor:"SectionPicker",children:(0,c.jsx)(l.xv,{size:"md",children:a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")})})}),t&&e?(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:(0,c.jsx)(u,{board:e,onSectionChange:i,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})}):(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:n&&!(e||{}).is_collaborative?n.title:a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")})})]})}var G=n(72984),V=n(388291),q=n(247093),Y=n(910963),X=n(155643);function J({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:n,onUpdateListBlocks:o,templateType:r}){const s=(0,d.ZP)();return(0,c.jsxs)(l.xu,{children:[1===r&&(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:s._("Cook time","editModal.editStoryPinModal.details.cookTime","Label for cook time detail")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(X.Z,{onUpdate:e=>n(0,e),value:e[0]||null})})]},"cooktime"),(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:s._("Servings","editModal.editStoryPinModal.details.servings","Label for serving size detail")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(Y.Z,{showLabel:!1,onUpdate:e=>n(1,e),value:e[1]||null})})]},"servingSize")]}),2===r&&(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:s._("Difficulty","editModal.editStoryPinModal.details.difficulty","Label for difficulty level detail")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(V.Z,{showLabel:!1,onUpdate:e=>n(2,e),value:e[2]||null})})]},"difficulty"),(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:(()=>{switch(r){case 1:return s._("Ingredients","editModal.editStoryPinModal.listHeading","Heading for an ingredients list");case 2:return s._("Supplies","editModal.editStoryPinModal.listHeading","Heading for a supplies list");default:return s._("What they'll need","editModal.editStoryPinModal.listHeading","Heading for a generic list")}})()}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(q.Z,{listBlocks:t,onUpdate:o})})]})]})}var K=n(325946),Q=n(757839);var ee=n(946753),te=n(181307),ne=n(921274);const ie=(0,o.connect)((()=>({})),(e=>({completeResourceFetch:t=>e((0,m.Sr)("PinResource",{field_set_key:"detailed",id:t.resource_response.data.id},t)),invalidatePin:t=>e((0,m.jB)("PinResource",{field_set_key:"detailed",id:t}))})))((function({apiErrorMessage:e,board:t,completeResourceFetch:n,commentsDisabled:o,description:r,disableDelete:s,invalidatePin:a,isLoadingPin:h,isProcessing:g,onChangeBoard:m,onChangeComment:f,onChangeSection:b,onClickBoardCreate:v,onClickDeleteButton:y,onClickEditPages:_,onClickSectionCreate:w,onHide:C,pinResource:S,sectionId:j,sectionName:I,title:E,triggerBoardAndSectionCreate:T}){var D,k;const O=(0,d.ZP)(),B=null!==(D=S.data)&&void 0!==D?D:{},A=B.story_pin_data,M=null!==(k=B.images&&B.images["474x"])&&void 0!==k?k:{},[L,Z]=(0,i.useState)(!1),[N,F]=(0,i.useState)(null),[U,H]=(0,i.useState)(!1),[z,$]=(0,i.useState)({}),[V,q]=(0,i.useState)([]);(0,i.useEffect)((()=>{var e;const t=(null==A||null===(e=A.metadata)||void 0===e?void 0:e.basics)||null;if(t){const e=(0,Q._i)(t);$(e.keyValueBlocks||{}),q(e.listBlocks||[])}}),[A]),(0,i.useEffect)((()=>{e&&F(e)}),[e]);const Y=(e,t)=>{$({...z,[e]:t}),Z(!0)},X=e=>{q(e),Z(!0)},{anyEnabled:ie}=(0,te.aq)("web_story_pin_edit_deprecation"),{anyEnabled:oe}=(0,te.aq)("web_sp2s"),re=B.created_at?new Date(B.created_at):null,se=re&&(0,G.Z)(re,14),ae=!ie&&!!se&&new Date<se,de=V.length>0||Object.keys(z).length>0,le=oe?(0,ee.nk)(O._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Idea Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14}):(0,ee.nk)(O._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Story Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14});return(0,c.jsx)(x.Z,{accessibilityModalLabel:O._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,c.jsx)(l.xu,{"data-test-id":"delete-pin-button",children:(0,c.jsx)(l.zx,{fullWidth:!0,color:"white",disabled:s,onClick:y,size:"lg",text:O._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})}),!!N&&(0,c.jsx)(l.kC,{alignItems:"stretch",justifyContent:"center",children:(0,c.jsx)(R.Z,{errorMessage:N,htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(l.xu,{paddingX:1,children:(0,c.jsx)(l.zx,{fullWidth:!0,onClick:C,size:"lg",text:O._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})}),(0,c.jsx)(l.xu,{"data-test-id":"edit-pin-save",paddingX:1,children:(0,c.jsx)(l.zx,{fullWidth:!0,color:"red",onClick:()=>{if(L&&A){H(!0);const e=(0,Q.Fe)({keyValueBlocks:z,listBlocks:V}),t=function(e){var t,n,i,o,r,s,a;return{metadata:{basics:null!==(t=e.metadata)&&void 0!==t&&t.basics?(0,Q.CH)(e.metadata.basics):void 0,diy_data:null===(n=e.metadata)||void 0===n?void 0:n.diy_data,pin_image_signature:null===(i=e.metadata)||void 0===i?void 0:i.pin_image_signature,pin_title:null===(o=e.metadata)||void 0===o?void 0:o.pin_title,recipe_data:null===(r=e.metadata)||void 0===r?void 0:r.recipe_data,template_type:null===(s=e.metadata)||void 0===s?void 0:s.template_type},pages:(a=e.pages,(null!=a?a:[]).map((e=>{var t,n;const i=(null!==(t=e.blocks)&&void 0!==t?t:[]).map((e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}})).filter(Boolean);return i.length>0?{blocks:i,layout:e.layout,style:null!==(n=e.style)&&void 0!==n&&n.background_color?{background_color:e.style.background_color}:void 0}:null})).filter(Boolean))}}(A),i={...t,metadata:{...t.metadata,basics:e}},o={pin_id:B.id,story_pin:JSON.stringify(i)};p.ZP.create("StoryPinEditResource",o).callUpdate().then((e=>{a(B.id),n(e),T()})).catch((e=>{F(e.message),H(!1)}))}else T()},size:"lg",text:O._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})})]})]}),heading:O._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:C,size:"md",children:h||!S.isLoaded||U||g?(0,c.jsx)(l.xu,{paddingX:12,paddingY:9,children:(0,c.jsx)(l.$j,{accessibilityLabel:O._("Loading edit information","editPinModal.editStoryPinModal.spinner","Accessible label for the edit pin loading icon"),show:!0})}):(0,c.jsx)(l.xu,{overflow:"hidden",children:(0,c.jsx)(l.xu,{marginEnd:-4,marginStart:-4,children:(0,c.jsx)(K.Z,{name:"web_story_pin_limit_edits",children:({anyEnabled:e})=>{var n,s,a,d,h,p;return(0,c.jsxs)(l.xu,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8,children:[(0,c.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4,children:[(0,c.jsxs)(l.zd,{wash:!0,rounding:4,width:120,children:[(0,c.jsx)(l.Ee,{alt:r,color:"#efefef",naturalHeight:null!==(n=M.height)&&void 0!==n?n:1,naturalWidth:null!==(s=M.width)&&void 0!==s?s:1,src:null!==(a=M.url)&&void 0!==a?a:""}),(0,c.jsx)(l.xu,{position:"absolute",left:!0,top:!0,padding:2,children:(0,c.jsxs)(l.xu,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill",children:[(0,c.jsx)(l.JO,{accessibilityLabel:oe?O._("Idea Pin icon","editModal.editStoryPinModal.storyPinIndicator","Idea Pin icon indicator"):O._("Story Pin icon","editModal.editStoryPinModal.storyPinIndicator","Story Pin icon indicator"),color:"darkGray",icon:"idea-pin",size:12}),(0,c.jsx)(l.xu,{marginStart:1,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:null===(d=B.story_pin_data)||void 0===d?void 0:d.page_count})})]})})]}),ae||!e?(0,c.jsx)(l.xu,{"data-test-id":"edit-pages-button",paddingY:2,children:(0,c.jsx)(l.zx,{onClick:_,text:O._("Edit pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")})}):null]}),(0,c.jsx)(l.xu,{direction:"column",display:"flex",flex:"grow",paddingX:4,children:(0,c.jsx)(l.xu,{marginBottom:-2,marginTop:-2,children:(0,c.jsx)(l.xu,{maxHeight:500,overflow:"auto",paddingX:1,children:(0,c.jsxs)(l.xu,{maxWidth:504,children:[e&&se&&(0,c.jsx)(l.xu,{paddingY:2,children:ae?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.xv,{size:"md",children:(0,ee.nk)(O._("Edit until {{ editDate }}","editModal.editStoryPinModal.lastEditableDate","Let user know the last date this Pin can be edited on"),{editDate:(0,c.jsx)(ne.Z,{dateFormatType:ne.k.NUMERIC,useUTC:!1,value:se},`noEditsTwoWeeksAfter-${null!==(h=B.created_at)&&void 0!==h?h:""}`)})}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(l.xv,{color:"gray",size:"md",children:le})})]}):(0,c.jsxs)(l.xu,{children:[(0,c.jsx)(l.xv,{size:"md",children:O._("Editing","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",color:"gray",children:O._("Only board selection and engagement settings can be changed!","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")})})]})}),(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:O._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsxs)(l.xu,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",padding:4,rounding:4,children:[(0,c.jsx)(l.xv,{color:"gray",lineClamp:1,children:E||""}),(0,c.jsx)(l.JO,{accessibilityLabel:O._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"})]})})]}),(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:O._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board")}),(0,c.jsx)(l.xu,{paddingY:2,children:t?(0,c.jsx)(P.Z,{board:t,isStoryPin:!0,onBoardChosen:m,onBoardCreate:v}):null})]}),(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:O._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section")}),(0,c.jsx)(l.xu,{paddingY:2,children:(null==t?void 0:t.id)&&(0,c.jsx)(W.Z,{isStoryPin:!0,board:t,onSectionChange:b,onSectionCreate:w,selectedSectionId:j,selectedSectionName:I})})]}),e&&de&&ae&&(0,c.jsx)(J,{keyValueBlocks:z,listBlocks:V,onUpdateKeyValueBlock:Y,onUpdateListBlocks:X,templateType:null==A||null===(p=A.metadata)||void 0===p?void 0:p.template_type}),B.can_delete_did_it_and_comments&&(0,c.jsxs)(l.xu,{paddingY:2,children:[(0,c.jsx)(l.xv,{size:"md",children:O._("Comments and photos permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos")}),(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(u,{isNoTitle:!0,commentsDisabled:o,onCommentChange:f})})]})]})})})})]})}})})})})}));function oe({canEdit:e,onTitleChange:t,title:n,errorMessage:o}){const r=(0,d.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"TitleField",children:(0,c.jsx)(l.xv,{size:"md",children:r._("Title","Label for editing title of pin","Label for editing title of pin")})})}),(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.xu,{"data-test-id":"pin-title-input",children:(0,c.jsx)(l.nv,{hasError:(o||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})}),!!o&&(0,c.jsx)(l.xu,{children:(0,c.jsx)(R.Z,{errorMessage:o,htmlFor:"pin-edit-title"})})]}):(0,c.jsx)(l.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",weight:"bold",children:n})})})]})]})}function re({onChangeWebsite:e,link:t,errorMessage:n}){const o=(0,d.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"WebsiteField",children:(0,c.jsx)(l.xv,{size:"md",children:o._("Website"," - "," -- ")})})}),(0,c.jsxs)(l.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(l.xu,{children:(0,c.jsx)(l.nv,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})}),!!n&&(0,c.jsx)(l.xu,{children:(0,c.jsx)(R.Z,{errorMessage:n,htmlFor:"pin-edit-website"})})]})]})]})}var se=n(646942),ae=n(411221),de=n(418102),le=n(535718);function ce({onShoppingRecChange:e,shoppingRecDisabled:t,storyPinData:n}){const o=(0,d.ZP)(),{isLoaded:r,data:s}=(0,le.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:"user.ip_stela_rec_disabled"}}});if(!r||!s)return null;const{has_product_pins:a}=n||{},u=s.ip_stela_rec_disabled;return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,children:[(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",children:o._("Shopping recommendations","Heading for shopping recommendations permissions","shopping.recommendations")})}),(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(l.xu,{paddingY:1,display:"flex",alignItems:"start",children:[(0,c.jsx)(l.rs,{onChange:e,id:"PhotoSwitch",switched:!t,disabled:u||a}),(0,c.jsx)(l.xu,{paddingX:2,children:(0,c.jsx)(l.__,{htmlFor:"stelaSwitch",children:(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsxs)(l.xv,{size:"md",color:u?"gray":"darkGray",children:[o._("Show similar products ","Label to toggle similar products on ideal pin","ideaPin.stela.toggle"),(0,c.jsx)(l.Ct,{text:o._("Early","ideaPin.stela.earlyAccess","Early access badge to Stela on Idea Pin")})]}),u?(0,c.jsxs)(l.xv,{color:"gray",size:"md",children:[o._("You’ve disabled shopping recommendations for your profile ","Text indicating shopping recommendations are currently disabled","ideaPin.disable"),(0,c.jsx)(l.xv,{inline:!0,size:"md",weight:"bold",color:"gray",children:(0,c.jsx)(l.rU,{inline:!0,href:"/settings/permissions",children:o._("Edit profile settings","Link to the settings page to enable shopping recommendations on idea pins","ideaPin.link")})})]}):(0,c.jsxs)(l.xu,{display:"flex",direction:"column",marginTop:1,children:[(0,c.jsx)(l.xu,{marginBottom:1,children:(0,c.jsx)(l.xv,{size:"md",children:o._("People can shop products similar to what’s shown in this Idea Pin using visual search","Text indicating shopping recommendations are currently enabled","ideaPin.enable")})}),(0,c.jsx)(l.xv,{size:"md",children:o._("Shopping recommendations aren’t available for Idea Pins with product or paid partnership tags","Explanation about how stela on idea pins with tagged products arent available","ideaPin.tagged.unavailable")})]})]})})})]})})]})})}function ue({shoppingRecDisabled:e,onShoppingRecChange:t,isNoTitle:n}){const o=(0,d.ZP)();return(0,c.jsxs)(i.Fragment,{children:[!n&&(0,c.jsx)(l.iz,{}),(0,c.jsxs)(l.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:n?0:3,children:[!n&&(0,c.jsx)(l.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(l.xv,{size:"md",children:o._("Recommendations","EditPinModal.recommendations","Title of a section in the edit pin modal to manage recommendations on a specific pin.")})}),(0,c.jsx)(l.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(l.xu,{paddingY:1,display:"flex",alignItems:"center",children:[(0,c.jsx)(l.rs,{onChange:t,id:"ShoppingRecSwitch",switched:!e}),(0,c.jsx)(l.xu,{paddingX:2,children:(0,c.jsx)(l.__,{htmlFor:"ShoppingRecSwitch",children:(0,c.jsx)(l.xv,{size:"md",children:o._("Show shopping recommendations","EditPinModal.recommendations.showShoppingRecommendations.label","Label for toggling showing shopping recommendations on a specific pin.")})})})]})})]})]})}var he=n(500115),pe=n(34411),ge=n(361509),me=n(81260),fe=n(613330),be=n(431260),ve=n(101691),xe=n(767523),ye=n(383506),_e=n(159276),we=n(387987),Ce=n(708206),Se=n(40197),je=n(622400),Ie=n(997993),Ee=n(742979),Te=n(855168);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){return Boolean(e&&e.trim().length)}function ke(e,t){const n=De(e),i=De(t);return(n||i)&&e!==t}class Oe extends i.Component{constructor(...e){var t,n,i,o,r,s,d,l,c,u,g,m,f,b,x,y,_,w,C;super(...e),Pe(this,"state",{altText:(null===(t=this.props.pinResource.data)||void 0===t?void 0:t.alt_text)||"",board:(null===(n=this.props.pinResource.data)||void 0===n?void 0:n.board)||null,commentsDisabled:(null===(i=this.props.pinResource.data)||void 0===i?void 0:i.comments_disabled)||(null===(o=this.props.pinResource.data)||void 0===o?void 0:o.did_it_disabled)||!1,description:(null===(r=this.props.pinResource.data)||void 0===r||null===(s=r.description)||void 0===s?void 0:s.trim())||"",apiErrorMessage:null,link:(null===(d=this.props.pinResource.data)||void 0===d?void 0:d.link)||"",pinNoteText:(null===(l=this.props.pinResource.data)||void 0===l||null===(c=l.pin_note)||void 0===c?void 0:c.text)||"",sectionId:(null===(u=this.props.pinResource.data)||void 0===u||null===(g=u.section)||void 0===g?void 0:g.id)||null,sectionName:(null===(m=this.props.pinResource.data)||void 0===m||null===(f=m.section)||void 0===f?void 0:f.title)||null,showDeleteConfirmation:!1,carousel_data:(null===(b=this.props.pinResource.data)||void 0===b?void 0:b.carousel_data)||null,title:(null===(x=this.props.pinResource.data)||void 0===x?void 0:x.title)||"",isLoadingPin:!Boolean(this.props.pinResource.isLoaded),isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:(null===(y=this.props.pinResource.data)||void 0===y||null===(_=y.carousel_data)||void 0===_?void 0:_.index)||0,shoppingRecDisabled:null===(w=this.props.pinResource.data)||void 0===w?void 0:w.shopping_rec_disabled,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:(null===(C=this.props.pinResource.data)||void 0===C?void 0:C.user_mention_tags)||[]}),Pe(this,"onClickDeleteButton",(()=>this.setState({showDeleteConfirmation:!0}))),Pe(this,"onHideConfirmation",(()=>this.setState({showDeleteConfirmation:!1}))),Pe(this,"updateCarouselSlotIndex",(()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})})),Pe(this,"handleBoardChange",(e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})})),Pe(this,"createBoard",(e=>{const{createBoard:t,viewer:n,orbacActingAs:i}=this.props,{board:o}=this.state,r=(0,_e.lJ)(n,i);!o.id&&o.name&&e&&t(o.name,e,r).then((e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}}))})),Pe(this,"handleBoardCreateClick",(e=>{if(!e)return;const t={name:e,privacy:h.Z.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})})),Pe(this,"createSection",(()=>{const{board:e,sectionName:t}=this.state,{viewer:n,orbacActingAs:i}=this.props,o=(0,_e.lJ)(n,i);if(!t)return;if(!e.id)return void this.createBoard();const r={boardId:e.id,name:t},{createSection:s}=this.props;s(r,o).then((e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())})).catch((()=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:null})}))})),Pe(this,"handleSectionCreateClick",(e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})})),Pe(this,"handleSectionChange",(e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1}))),Pe(this,"handleDeletePin",(()=>{const{advertiser_id:e,changeBoardPinCount:t,changeUserPinCount:n,dispatch:i,onDelete:o,onHide:r,orbacActingAs:s,pinId:a,pinResource:{data:d},removeBoardlessPin:l,viewer:c}=this.props,u=(0,_e.lJ)(c,s),h={...e?{advertiser_id:e}:{},...u?{orbac_subject_id:u}:Object.freeze({}),id:a};return p.ZP.create("PinResource",h).callDelete().then((()=>{if(this._isMounted){if(!d)return;const{board:{id:e}={},pinner:{id:s}={},section:l}=d,c=null==l?void 0:l.id;t({boardId:e,sectionId:c,increment:-1}),n({userId:s,increment:-1}),i((0,Se.xQ)(e)),i((0,ae.Z)({feedId:c||e,feedType:c?fe.DV.SECTION_PINS:fe.DV.BOARD_PINS,itemIds:[a],itemType:"pin"})),c&&i((0,se.Z)(c)),de.ZP.instance.publish(s,"pinDeleted"),r(),o&&o()}c.id&&l(c.id,a)}))})),Pe(this,"sanitizeCarouselData",(e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach((e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)})),t}}return null})),Pe(this,"triggerBoardAndSectionCreate",(e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;t&&!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()})),Pe(this,"logPinEditEvent",((e,t,n,i,o)=>{const r={},{pinId:s,view:a,viewParameter:d}=this.props,{userMentionTags:l}=this.state;if(r.objectId=s,r.num_user_mention_tags=l.length,e&&(r.board_was_modified=!0),!e&&t&&(r.board_section_was_modified=!0),n){const{description:e}=this.state,{description:t}=o;r.original_pin_description=t,r.edited_pin_description=e}if(i){const{carousel_data:e}=this.state,{carousel_data:t}=o;r.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),r.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}this.props.logContextEvent({event_type:2,component:208,view_type:a,view_parameter:d,aux_data:{...r}})})),Pe(this,"handleSave",(()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,completeResourceFetch:t,invalidatePinResource:n,orbacActingAs:i,pinId:o,pinResource:{data:r},onHide:s,removeBoardlessPin:a,updatePinNote:d,viewer:l}=this.props;if(!r)return;const{alt_text:c,board:u,comments_disabled:h,did_it_disabled:g,title:m,description:f,link:b,pin_note:x,section:y,carousel_data:_,shopping_rec_disabled:w}=r,C=null==x?void 0:x.text,{carousel_data:S,shouldShowValidationLinkFormatError:j}=this.state;let I;if(S){const e=this.sanitizeCarouselData();e&&(I=JSON.stringify(e))}const{altText:E,board:T,commentsDisabled:P,currentIndex:D,title:k,description:O,pinNoteText:R,sectionId:B,shoppingRecDisabled:A,carousel_data:M,userMentionTags:L}=this.state,Z=T||u,N=j?b:this.state.link,F=(0,_e.lJ)(l,i),U={alt_text:E,board_id:null==Z?void 0:Z.id,board_section_id:B,carousel_data_json:I,description:O,disable_comments:P,disable_did_it:P,id:o,link:N,shopping_rec_disabled:A,title:k,user_mention_tags:JSON.stringify(L),...e?{advertiser_id:e}:{},...F?{orbac_subject_id:F}:Object.freeze({})},H=y&&y.id||null,z=null==Z?void 0:Z.id,W=null==u?void 0:u.id,$=ke(c,E),G=W!==z,V=(Boolean(H)||Boolean(B))&&H!==B,q=ke(m,k),Y=ke(f,O),X=ke(b,N),J=Boolean(M)&&Boolean(_)&&!v()(M,_),K=h!==P||g!==P,Q=ke(C,R);$||G||V||q||Y||Q||X||J||K||w!==A?(Q&&d(o,C,R,F),p.ZP.create("PinResource",U).callUpdate().then((e=>{if(this._isMounted){var i;const{changeBoardPinCount:c,onSubmit:u,pinId:h,pinMoved:p}=this.props;var o,d;if((G||V)&&z&&W)p({selectedPinIds:[h],source:{boardId:W,sectionId:H},target:{boardId:z,sectionId:B}}),c({boardId:z,sectionId:B||void 0,increment:1}),c({boardId:W,sectionId:H||void 0,increment:-1}),l.id&&"quick_saves"===(null===(o=r.board)||void 0===o?void 0:o.layout)&&a(l.id,h);if(u&&z&&null!=Z&&Z.url)u({boardId:z,title:null!==(d=Z.name)&&void 0!==d?d:"",sectionId:B,url:Z.url});s(),n(h,F),null!==(i=e.resource_response)&&void 0!==i&&i.data.carousel_data&&(e.resource_response.data.carousel_data.index=D),t(e,F),this.logPinEditEvent(G,V,Y,J,r)}})).catch((()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})}))):(s(),n(o,F)),this.setState({isProcessing:!1})})),Pe(this,"handleTextChanges",((e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=a()(n),{carousel_slots:o=[]}=i,{currentIndex:r,shouldApplyTextToAll:s,description:d,link:l,title:c}=this.state,u=this.valueIsValidForType(e,t);switch(s?o.forEach((n=>n[t]=e)):o[r]&&(o[r][t]=e),t){case"details":const t=0===r?e:d;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===r?e:l;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const o=0===r?e:c;this.setState({title:o,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}})),Pe(this,"handleDescriptionChange",(({value:e,userMentionTags:t})=>{const n=this.valueIsValidForType(e,"description"),i=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&this.props.logContextEvent({event_type:8906,element:116,aux_data:{tag_type:1}}),this.setState({description:e,userMentionTags:t,shouldShowValidationDescriptionError:!n,shouldShowValidationUserMentionTagsError:!i,shouldShowGenericUpdateError:!1})})),Pe(this,"handleCarouselDetailsChange",(({value:e})=>{this.handleTextChanges(e,"details")})),Pe(this,"handleTitleChange",(({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})})),Pe(this,"handleCarouselTitleChange",(({value:e})=>{this.handleTextChanges(e,"title")})),Pe(this,"handleAltTextChange",(({value:e})=>{this.setState({altText:e})})),Pe(this,"valueIsValidForType",((e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===(0,Ie.FU)([(0,Ie.Jx)({message:this.props.i18n._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}})),Pe(this,"handleWebsiteChange",(({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})})),Pe(this,"handleCarouselWebsiteChange",(({value:e})=>{this.handleTextChanges(e,"link")})),Pe(this,"handleCommentChange",(e=>this.setState({commentsDisabled:!e.value}))),Pe(this,"handleShoppingRecChange",(e=>{this.setState({shoppingRecDisabled:!e.value})})),Pe(this,"handleShouldApplyToAll",(e=>{if(e){const{currentIndex:t=0,carousel_data:n}=this.state;if(!n)return;const i=a()(n),{carousel_slots:o=[]}=i,{details:r,link:s,title:d}=o[t];o.forEach((e=>{e.details=r,e.title=d,e.link=s})),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})})),Pe(this,"handleCarouselSlider",(e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})})),Pe(this,"handleClickStoryPinPages",(()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/idea-pin-builder/${e.id}/edit`)})),Pe(this,"handleMouseEnter",(()=>{this.setState({shouldShowCarouselSliders:!0})})),Pe(this,"handleMouseLeave",(()=>{this.setState({shouldShowCarouselSliders:!1})}))}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:i}=this.props;var o;t&&n!==e.pinResource.isLoaded&&this.setState({altText:t.alt_text,board:t.board,commentsDisabled:t.comments_disabled||t.did_it_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,pinNoteText:(null===(o=t.pin_note)||void 0===o?void 0:o.text)||"",sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[],shoppingRecDisabled:t.shopping_rec_disabled})}componentWillUnmount(){this._isMounted=!1}getCurrentUserId(e){return e.isAuth?e.id:""}render(){var e,t,n;const{disableDelete:i,onHide:o,orbacActingAs:s,pinResource:a,pinId:d,requestContext:h,viewer:p}=this.props,{experiments:g}=h,{altText:m,apiErrorMessage:f,board:b,commentsDisabled:v,description:y,link:_,pinNoteText:w,sectionId:C,sectionName:S,showDeleteConfirmation:j,title:I,isLoadingPin:P,isProcessing:D,carousel_data:O,shouldApplyTextToAll:R,currentIndex:B,shoppingRecDisabled:A,shouldDisableSave:M,shouldShowCarouselSliders:Z,shouldShowValidationTitleError:N,shouldShowValidationDescriptionError:F,shouldShowValidationLinkFormatError:W,shouldShowGenericUpdateError:G,shouldShowValidationUserMentionTagsError:V,userMentionTags:q}=this.state,Y=a.data||{},X=!!(Y&&Y.story_pin_data_id&&Y.story_pin_data),J=(null===(e=Y.native_creator)||void 0===e?void 0:e.id)===this.getCurrentUserId(p);if(j)return(0,c.jsx)(E,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation,showStoryPinCreatorDeleteMessage:X&&J});const K=!!(O&&O.carousel_slots&&O.carousel_slots.length>1),Q=O&&O.carousel_slots&&O.carousel_slots.length>0&&O.carousel_slots[B]||{},{details:ee="",link:te="",title:ne=""}=Q,se=Y&&(Y.access||[]).includes("write")||this.props.canEdit||!!b&&(0,r.Z)({action:4,board:b,viewer:p})||!!b&&(0,_e.KY)(p,b,s),ae=e=>{const t=(0,_e.lJ)(e,s),n=t||this.getCurrentUserId(e),i=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:n;return se&&!Y.is_repin&&!X&&(K||!O)&&(Y.native_creator&&Y.native_creator.id===i||K&&Y.pinner&&Y.pinner.id===i||Y.link_domain&&Y.link_domain.official_user&&Y.link_domain.official_user.id===i||!!Y.domain&&Y.pinner&&Y.pinner.id===i&&Y.pinner.domain_url&&Y.pinner.domain_url.includes(Y.domain))},de=Y&&Y.images&&Y.images["474x"]||{},le=new je.v(h,"web_story_pin_creator").enabledWithNoActivation(),he=new je.v(h,"web_alt_text").enabledWithNoActivation(),pe=!new je.e(h,"web_ip_stela_opt_in").getGroup().includes("pwt")&&new je.v(h,"web_ip_stela_opt_in").enabled(),fe=X&&!!Y.story_pin_data&&pe&&J,be=Y.story_pin_data&&Y.story_pin_data.metadata&&Y.story_pin_data.metadata.version?(0,ge.n)(Y.story_pin_data.metadata.version,me.RR):null,ve=null!=be&&be>=0,xe=!!Y.story_pin_data&&!!Y.story_pin_data.metadata&&!!Y.story_pin_data.metadata.is_editable&&Y.native_creator&&Y.native_creator.id===this.getCurrentUserId(p);if(X&&le&&ve&&xe)return(0,c.jsx)(ie,{apiErrorMessage:f,board:b,commentsDisabled:v,description:y,disableDelete:!se||i,isLoadingPin:P,isProcessing:D,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:o,pinResource:a,sectionId:C,sectionName:S,title:I,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(p.username&&p.username)});const we=ae(p)?(0,c.jsx)(oe,{canEdit:se,onTitleChange:K?this.handleCarouselTitleChange:this.handleTitleChange,title:K&&ne?ne:I,errorMessage:N?(0,ye.Y8)(K,this.props.i18n):""}):null,Ce=(se||p.isAuth&&(Y.pinner||{}).id===p.id)&&ae(p)?(0,c.jsx)(L,{canAddUserMentionTags:!K,canEdit:se,description:(K?ee:y)||"",errorMessage:(()=>F?(0,ye.MM)(K,this.props.i18n):V?(0,ye.bl)(K,this.props.i18n):"")(),initialMentions:q,label:this.props.i18n._("Description","Label for editing description","Label for editing description"),placeholder:this.props.i18n._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:K?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,Se=(0,c.jsx)(z,{isCollaborative:!(null==b||!b.is_collaborative),onPinNoteChange:({value:e})=>{this.setState({pinNoteText:e})},pinNoteText:w}),Ie=(e=>ae(e)&&!(Y.aggregated_pin_data&&Y.aggregated_pin_data.is_shop_the_look))(p)?(0,c.jsx)(re,{link:K&&te?te:_,onChangeWebsite:K?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:W?(0,ye.qj)(K,this.props.i18n):""}):null,Ee=K?(0,c.jsxs)(l.xu,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end",children:[(0,c.jsx)(l.xu,{paddingY:2,children:(0,c.jsx)(l.__,{htmlFor:"applyTextToAll",children:(0,c.jsx)(l.xv,{children:this.props.i18n._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")})})}),(0,c.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,c.jsx)(l.rs,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:R})})]}):null,Te=ae(p)&&he?(0,c.jsx)(T,{canEdit:se,onAltTextChange:this.handleAltTextChange,altText:m}):null,Pe=Y.can_delete_did_it_and_comments?(0,c.jsx)(u,{commentsDisabled:v,onCommentChange:this.handleCommentChange}):null,De=g.getWithoutActivation("web_shopping_rec_setting").group;De.match("pwt")||g.v2ActivateExperiment("web_shopping_rec_setting");const ke=!["enabled","employees"].includes(De)||!p.isAuth||(null===(t=Y.pinner)||void 0===t?void 0:t.id)!==p.id||Y.is_repin||Y.story_pin_data||p.shopping_rec_disabled?null:(0,c.jsx)(ue,{shoppingRecDisabled:A,onShoppingRecChange:this.handleShoppingRecChange}),Oe=!!p.has_quicksave_board&&!!p.boardCount&&p.boardCount<2,Re="quick_creates"===(null===(n=Y.board)||void 0===n?void 0:n.layout),Be=(0,_e.Ms)(p,s);return(0,c.jsx)(x.Z,{heading:this.props.i18n._("Edit this Pin","EditPinModal.ModalHeading.EditThisPin","Edit a previously saved pin"),accessibilityModalLabel:this.props.i18n._("Edit your previously saved pin","EditPinModal.ModalHeading.AccessibleLabel","Accessible label for edit previously saved pin modal"),size:Oe?"sm":"lg",onDismiss:o,footer:(0,c.jsx)(H,{apiErrorMessage:f,shouldShowGenericUpdateError:G,onClickDeleteButton:this.onClickDeleteButton,disableDelete:!se||i,onHide:o,shouldDisableSave:M,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(Be)}),children:P||!a.isLoaded||D?(0,c.jsx)(l.kC,{alignItems:"center",justifyContent:"center",children:(0,c.jsx)(l.$j,{accessibilityLabel:this.props.i18n._("loading","EditPinModal.LoadingPin.Spinner","Accessible label for the edit pin loading icon"),show:!0})}):(0,c.jsxs)(l.xu,{display:"flex",justifyContent:Oe?"center":"between",minHeight:350,paddingX:4,children:[Oe?null:(0,c.jsxs)(l.xu,{column:12,mdColumn:9,children:[(0,c.jsx)(k,{board:b||Y.board,canEdit:se,isOriginallyQuickCreatesBoard:Re,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick,viewerId:p.id||""}),(0,c.jsx)($,{board:b||Y.board,canEdit:se,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:C,sectionName:S,currentSection:Y.section}),we,Ce,Ie,Ee,Te,Se,Pe,ke,fe&&(0,c.jsx)(ce,{onShoppingRecChange:this.handleShoppingRecChange,shoppingRecDisabled:A,storyPinData:Y.story_pin_data})]}),(0,c.jsx)(U,{isCarousel:K,shouldShowCarouselSliders:Z,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:d,description:y,image:de})]})})}}const Re=(e,t,n)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...n?{orbac_subject_id:n}:Object.freeze({})}),Be=(0,Ce.compose)(C.Cl,(0,o.connect)(null,((e,t)=>({changeBoardPinCount:t=>e((0,Se.Br)(t)),changeUserPinCount:t=>e((0,ve.JS)(t)),completeResourceFetch:(t,n)=>e((0,m.Sr)("PinResource",Re(t.resource_response.data.id,!1,n),t)),createBoard:(t,n,i)=>e(function(e,t,n){const i={name:e,privacy:h.Z.BoardPrivacy.PUBLIC,username:t,...n?{orbac_subject_id:n}:Object.freeze({})};return e=>p.ZP.create("BoardResource",i).callCreate().then((n=>{const i=n.resource_response.data;return e(t&&(0,m.jB)("BoardsResource",(0,g.Sd)(t,!1))),i}))}(t,n,i)),createSection:(n,i)=>e((0,f.Z)(n,t.i18n,i)),invalidatePinResource:(t,n)=>e((0,m.jB)("PinResource",Re(t,!0,n))),removeBoardlessPin:(t,n)=>e((0,ae.Z)({feedId:t,feedType:fe.DV.BOARDLESS_PINS,itemIds:[n],itemType:"pin"})),pinMoved:(0,Ce.bindActionCreators)(Ee.S,e),updatePinNote:(t,n,i,o)=>e((0,be._)(t,n,i,o))}))))(Oe);function Ae(e){const t=(0,d.ZP)(),{logContextEvent:n}=(0,B.v)(),i=(0,o.useSelector)((({advertiser:e})=>e)),r=(0,xe.Z)(),s=(0,pe.Z)(),a=(0,_e.lJ)(s,r),l=(0,le.Z)({name:"PinResource",options:Re(e.pinId,!0,a)}),u=s.isAuth&&Boolean(i)?i.id:void 0,h=s.isAuth&&Boolean(i)&&i.owner_user_id!==s.id?i.owner_user_id:void 0,p=(0,he.Z)(l.data);return(0,c.jsx)(Be,{...e,dispatch:(0,o.useDispatch)(),history:(0,Te.k6)(),pinResource:l,requestContext:(0,we.B)(),i18n:t,onDelete:()=>{var t;p(),null===(t=e.onDelete)||void 0===t||t.call(e)},orbacActingAs:r,advertiser_id:u,advertiserOwnerUserId:h,viewer:s,logContextEvent:n})}},383506:(e,t,n)=>{function i(e,t){return e?t._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):t._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function o(e,t){return e?t._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):t._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function r(e,t){return t._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e,t){return e?t._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):t._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}n.d(t,{Y8:()=>i,MM:()=>o,bl:()=>r,qj:()=>s})},685893:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(40142),o=n(266265),r=n(643011),s=n(345513),a=n(883119),d=n(785893);const l=1.25*s.J;function c({story:e}){const{action:{text:t,url:n},custom_properties:{image:i,image_alt:o}}=e;return(0,d.jsxs)(a.xu,{position:"relative",children:[(0,d.jsx)(a.zd,{rounding:4,height:l,width:s.J,children:(0,d.jsx)(a.Ee,{alt:o,color:"black",fit:"cover",naturalHeight:2688,naturalWidth:2e3,src:i})}),(0,d.jsx)(a.xu,{bottom:!0,display:"flex",justifyContent:"center",position:"absolute",width:s.J,padding:4,children:(0,d.jsx)(a.zx,{role:"link",href:n,fullWidth:!0,color:"white",text:t})})]})}const u=(0,i.connect)(((e,t)=>({story:e.stories[t.storyId]})),(()=>({})))((function({story:e,...t}){if(!e)return null;switch(e.story_type){case"BUBBLE_ONE_COL":return(0,d.jsx)(r.Z,{bubbles:e.objects,id:t.storyId,referringSource:e.referring_source,slotIndex:t.slot,storyType:e.story_type,title:e.title,viewType:t.viewType,viewParameter:t.viewParameter});case"feed_card_default":case"feed_card_video":return(0,d.jsx)(c,{story:e});case"add_pin":return(0,d.jsx)(o.Z,{});default:return null}}))},476666:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(667294),o=n(40142),r=n(627578),s=n(646942),a=n(439887),d=n(578429),l=n(411221),c=n(494353),u=n(807824),h=n(311866),p=n(881220),g=n(512806),m=n(500115),f=n(34411),b=n(613330),v=n(418102),x=n(946753),y=n(101691),_=n(880841),w=n(174523),C=n(104216),S=n(40197),j=n(164756),I=n(507010),E=n(855168),T=n(785893);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class D extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{step:"unsaved"}),P(this,"deletePin",(e=>h.ZP.create("PinResource",{id:e}).callDelete())),P(this,"repin",(()=>{const{location:e,pin:t,target:{board:n,boardSection:i},eventContext:o,previousHistory:r}=this.props,s=(0,a.Z)(t,e,r)||`${t.tracking_params||""}-0`,d=!t.id&&t.image_url?(0,u.Z)(t.image_url,t.link):"",l=i&&i.id,c={board_id:n.id||"",clientTrackingParams:s,description:t.description||"",image_base64:t.image_base64,link:t.link,image_url:d,is_buyable_pin:!1,is_removable:t.promoted_is_removable,media_upload_id:t.media_upload_id,pin_id:t.id||"",section:l,title:t.title||"",eventContext:o};return h.ZP.create("RepinResource",c).callCreate({showError:!1})})),P(this,"handleSave",this.props.requireAuth((()=>{const{onSave:e,makeCancelablePromise:t}=this.props,{step:n}=this.state;if("unsaving"===n)return void this.setState({step:"saving"});this.setState({step:"saving"});t(this.repin().then((({resource_response:{data:e}})=>this.shouldCompleteSave(e)))).then(e).catch((({isCanceled:e})=>{if(!e){const{target:{board:e,boardSection:t}}=this.props;r.Z.showError(t?(0,x.nk)(this.props.i18n._("Failed to save the Pin to {{sectionName}}","Error message when failed to save to a section within a board","Error message when failed to save to a section within a board"),{sectionName:t.title}).join(""):(0,x.nk)(this.props.i18n._("Failed to save the Pin to {{boardName}}","Error message when failed to save to a board","Error message when failed to save to a board"),{boardName:e.name}).join(""))}}))}))),P(this,"shouldCompleteSave",(e=>{const{pin:t,dispatch:n,showToast:i,target:{board:o,boardSection:r}}=this.props,{step:s}=this.state,a=r&&r.id,l={pinId:t.id,boardId:o.id,sectionId:a,title:t.title||""};if("saving"===s){v.eE.publish(e.board.id,"pinCreated",{pin:e}),n((0,j.Ss)(o)),n((0,d.Z)({feedId:a||o.id,feedType:a?b.DV.SECTION_PINS:b.DV.BOARD_PINS,itemIds:[t.id],itemType:"pin"}));const{image_url:s,images:u}=t,h=s||(null==u?void 0:u["236x"])&&u["236x"].url||"";return!r&&o.image_cover_url||(o.image_cover_url=h,n((0,j.yT)({},o))),n((0,I.a1)({...l,localPinId:e.id})),n((0,S.Br)({boardId:o.id,sectionId:r?r.id:void 0,increment:1})),n((0,y.JS)({userId:e.pinner.id,increment:1})),this.setState({step:"saved"}),i((({onHide:e})=>(0,T.jsx)(c.Z,{pinImageUrl:h,boardName:o.name,boardUrl:o.url,onHide:e,onUndo:this.handleUnsave}))),e}"unsaving"===s&&this.handleUnsave(e.id)})),P(this,"handleUnsave",(e=>{const{step:t}=this.state,{savedInfo:n}=this.props;if("unsaved"===t)return;if("saving"===t)return void this.setState({step:"unsaving"});const i=n&&n.localPinId||e;i&&(this.setState({step:"unsaving"}),this.deletePin(i).then((()=>this.shouldCompleteUnsave())))})),P(this,"shouldCompleteUnsave",(()=>{const{pin:e,savedInfo:t,showToast:n,target:{board:i,boardSection:o},dispatch:r,onDelete:a,viewerId:d,i18n:c}=this.props,{step:u}=this.state;if("unsaving"===u){if(t){const t=null==o?void 0:o.id;r((0,I.jg)({pinId:e.id})),r((0,S.Br)({boardId:i.id,sectionId:t,increment:-1})),r((0,y.JS)({userId:d,increment:-1})),r((0,S.xQ)(i.id)),r((0,l.Z)({feedId:t||i.id,feedType:t?b.DV.SECTION_PINS:b.DV.BOARD_PINS,itemIds:[e.id],itemType:"pin"})),t&&r((0,s.Z)(t)),a&&a()}n((({onHide:e})=>(0,T.jsx)(p.ZP,{onHide:e,text:c._("Pin deleted","OneTapSavePinWrapper.Unsave","Pin delete completion confirmation")}))),this.setState({step:"unsaved"})}"saving"===u&&this.handleSave()}))}render(){const{children:e,savedInfo:t}=this.props,{step:n}=this.state;return e({save:this.handleSave,saved:"saved"===n||"saving"===n||!(!t||!t.localPinId),savedInfo:t,unsave:this.handleUnsave})}}const k=(0,o.connect)(((e,{pin:{id:t}})=>({previousHistory:e.history.previous,savedInfo:e.pins[t]&&e.pins[t].savedInfo})))((function(e){const t=(0,w.ZP)(),{showToast:n}=(0,_.F9)(),i=(0,g.Z)(),o=(0,E.TH)(),r=(0,C.Z)(),s=(0,f.Z)(),a=(0,m.Z)(e.pin);return(0,T.jsx)(D,{...e,location:o,makeCancelablePromise:i,onDelete:()=>{var t;a(),null===(t=e.onDelete)||void 0===t||t.call(e)},showToast:n,requireAuth:r,i18n:t,viewerId:s.isAuth?s.id:""})}))},180115:(e,t,n)=>{n.d(t,{U:()=>p,Z:()=>g});var i=n(667294),o=n(294184),r=n.n(o),s=n(264221),a=n(596885),d=n(174523),l=n(883119),c=n(785893);const u={sm:32,md:40,lg:48},h=(0,i.memo)((0,i.forwardRef)((({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:i,onBoardUpdated:o,onClick:s,onSavedClick:h,onToggleModal:p,onUnsaved:g,renderSavedStatus:m,saveButtonType:f="classic",saved:b,savedInfo:v,size:x="md",variant:y="classic",viewParameter:_},w)=>{const C=(0,d.ZP)();return b&&"controlled"===f?(0,c.jsx)(l.zx,{fullWidth:!0,disabled:!0,text:C._("Saved"," - "," -- "),size:"sm"}):!i&&v&&m&&g&&o&&"classic"===f?(0,c.jsx)(a.Z,{currentCarouselIndex:e&&e.index,onDeleteSavedState:g,onEditSubmit:o,onToggleModal:p,pinId:v.localPinId,variant:"pin",viewParameter:_,children:m()}):b&&"classic"===f&&i?(0,c.jsx)(l.zx,{fullWidth:!0,accessibilityLabel:C._("Saved button","saveButton.saved.label","Saved state label on save button"),text:C._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:h}):n?(0,c.jsx)(l.xu,{ref:w,"data-test-id":"SaveButton",children:(0,c.jsx)(l.hU,{accessibilityLabel:C._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>s(e),iconColor:"darkGray"})}):(0,c.jsx)(l.xu,{display:i?void 0:"flex",justifyContent:"end",children:(0,c.jsx)("div",{ref:w,className:r()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===y}),"data-test-id":"SaveButton",onClick:t?void 0:s,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),s(e))},role:"button",tabIndex:"0",children:(0,c.jsx)("div",{className:r()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===y}),children:(0,c.jsx)(l.xu,{alignItems:"center",minHeight:u[x],dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:(0,c.jsx)(l.xv,{color:t?"gray":"white",size:"lego"===y?"sm":"md",weight:"bold",children:(0,c.jsx)("span",{className:r()("SaveButton__label",{"SaveButton__label--lego":"lego"===y}),children:C._("Save","Pin save button label","Pin save button label")})})})})})})}))),p=({isPulsarDisplayed:e,...t})=>{const[n,o]=(0,i.useState)(null);return(0,c.jsx)(s.Z,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:n,isHidden:!e,children:(0,c.jsx)(h,{ref:e=>{null===e||n||o(e)},...t})})},g=h},796025:(e,t,n)=>{n.d(t,{c:()=>l,Z:()=>u});var i=n(667294),o=n(174523),r=n(946753),s=n(387987),a=n(883119),d=n(785893);const l=48,c=(0,i.forwardRef)(((e,t)=>{const{addButtonRef:n,collaboratorCount:i,nonDisplayedCollaboratorCount:c,displayedCollaborators:u,onClick:h,showAddButton:p}=e,g=(0,o.ZP)(),{isRTL:m}=(0,s.B)(),f=u.map((e=>e.name));let b="";switch(c?"default":f.length){case 3:b=(0,r.Wc)(g._("{{ first }}, {{ second }}, and {{ last }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:`${f[0]}`,second:`${f[1]}`,last:`${f[2]}`});break;case 2:b=(0,r.Wc)(g._("{{ first }} and {{ second }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:`${f[0]}`,second:`${f[1]}`});break;default:b=f.join(", ")}const v=c?(0,r.Wc)(g.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",c,"BoardAvatarGroup.AvatarGroup.accessibilityLabel.aboveTwoCollaborators","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:b,leftCount:`${c}`}):(0,r.Wc)(g._("Collaborators: {{ userNames }}.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.notAboveTwoCollaborators","Accessibility label that lists the names of collaborators"),{userNames:b}),x=u.length>1?[...u,...Array(c).fill({name:"",src:""})]:u,y=(u.length>1||0===i)&&p,_=g._("Invite collaborators.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators.");return(0,d.jsxs)(a.xu,{position:"relative",rounding:"pill","data-test-id":"user-rep-avatar",children:[y?(0,d.jsx)(a.xu,{height:l,position:"absolute",left:m,ref:n,right:!m,rounding:"circle",top:!0,width:l}):null,(0,d.jsx)(a.HE,{accessibilityLabel:y?`${v} ${_}`:`${v}`,addCollaborators:y,collaborators:x,onClick:h,ref:t,role:"button",size:"md"})]})}));c.displayName="BoardAvatarGroup";const u=c},92849:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(174523),r=n(302199),s=n(946753),a=n(387987),d=n(796025),l=n(883119),c=n(785893);function u({addButtonRef:e,nonDisplayedCollaboratorCount:t,displayedCollaborators:n,onClick:u,pileRef:h,showAddButton:p}){const[g,m]=(0,i.useState)(!1),f=(0,o.ZP)(),b=(0,r.Z)(),{locale:v}=(0,a.B)(),x=f._("Invite collaborators.","DeprecatedBoardCollaboratorFacepile.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators."),y=(0,s.Wc)(f.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",t,"DeprecatedBoardCollaboratorFacepile.accessibilityLabel","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:n.map((e=>e.name)).join(", "),leftCount:`${t}`}),_=({children:e,hovered:t})=>(0,c.jsxs)(l.xu,{position:"relative",children:[(0,c.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0}),e]}),w=n.map((({name:e,src:t},n)=>(0,c.jsx)(l.xu,{"aria-hidden":"true",marginStart:0!==n?-4:void 0,children:(0,c.jsx)(_,{hovered:g&&!!u,children:(0,c.jsx)(l.xu,{color:"white",height:d.c,width:d.c,rounding:"circle",children:(0,c.jsx)(l.qE,{name:e,outline:!0,src:t})})})},`face-${n}`)));return w.length>1&&t&&w.push((0,c.jsx)(l.xu,{"aria-hidden":"true",zIndex:new l.Ry(1),children:(0,c.jsx)(l.xu,{marginStart:-4,children:(0,c.jsx)(_,{hovered:g&&!!u,children:(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(l.xu,{alignItems:"center",color:"lightGray",display:"flex",height:d.c,justifyContent:"center",position:"relative",rounding:"circle",width:d.c,children:(0,c.jsx)(l.xv,{size:"lg",weight:"bold",children:b(v,t,{shortform:!0})})})})})})},"additionalCount")),w.length>1&&p&&w.push((0,c.jsx)(l.xu,{"aria-hidden":"true",ref:e,zIndex:new l.Ry(1),children:(0,c.jsx)(l.xu,{marginStart:-4,children:(0,c.jsx)(_,{hovered:g,children:(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(l.xu,{alignItems:"center",color:"lightGray",display:"flex",height:d.c,justifyContent:"center",rounding:"circle",width:d.c,children:(0,c.jsx)(l.JO,{accessibilityLabel:"Add",icon:"add",color:"darkGray",size:20})})})})})},"addIcon")),(0,c.jsx)(l.kC,{alignItems:"center",children:(0,c.jsx)(l.iP,{accessibilityLabel:p?`${y} ${x}`:`${y}`,ref:h,onTap:u,rounding:"pill",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,c.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:w})})})}},16719:(e,t,n)=>{n.d(t,{Z:()=>r,I:()=>s});var i=n(535718);const o=({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:o})=>{const{data:r,isLoaded:s}=(0,i.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),a=[{name:n,src:o,href:`/${t}/`,isDim:!1}];return s&&r&&r.length>0&&r.forEach((e=>{a.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),a},r=o;function s({children:e,...t}){return e(o(t))}},927550:(e,t,n)=>{n.d(t,{Z:()=>de});var i=n(667294),o=n(40142),r=n(463112),s=n(389609),a=n(535718),d=n(34411),l=n(883119),c=n(457175),u=n(174523),h=n(785893);function p({label:e,path:t,selected:n}){return(0,h.jsx)(l.JO,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:t},color:n?"darkGray":"gray",size:24})}function g({selected:e}){const t=(0,u.ZP)();return(0,h.jsx)(p,{label:t._("Dense","Label for selecting the dense pin density view","Label for selecting the dense pin density view"),path:"M16.00,20.00 L20.00,20.00 L20.00,16.00 L16.00,16.00 L16.00,20.00 Z M10.00,8.00 L10.00,4.00 L14.00,4.00 L14.00,8.00 L10.00,8.00 Z M4.00,8.00 L4.00,4.00 L8.00,4.00 L8.00,8.00 L4.00,8.00 Z M16.00,8.00 L16.00,4.00 L20.00,4.00 L20.00,8.00 L16.00,8.00 Z M4.00,14.00 L4.00,10.00 L8.00,10.00 L8.00,14.00 L4.00,14.00 Z M10.00,14.00 L10.00,10.00 L14.00,10.00 L14.00,14.00 L10.00,14.00 Z M16.00,14.00 L16.00,10.00 L20.00,10.00 L20.00,14.00 L16.00,14.00 Z M4.00,20.00 L4.00,16.00 L8.00,16.00 L8.00,20.00 L4.00,20.00 Z M10.00,20.00 L10.00,16.00 L14.00,16.00 L14.00,20.00 L10.00,20.00 Z",selected:e})}function m({selected:e}){const t=(0,u.ZP)();return(0,h.jsx)(p,{label:t._("Regular","Label for selecting the regular pin density view","Label for selecting the regular pin density view"),path:"M13.00,20.00 L13.00,13.00 L20.00,13.00 L20.00,20.00 L13.00,20.00 Z M4.00,11.00 L4.00,4.00 L11.00,4.00 L11.00,11.00 L4.00,11.00 Z M13.00,11.00 L13.00,4.00 L20.00,4.00 L20.00,11.00 L13.00,11.00 Z M4.00,20.00 L4.00,13.00 L11.00,13.00 L11.00,20.00 L4.00,20.00 Z",selected:e})}var f=n(955637);class b extends i.Component{constructor(...e){var t,n,i;super(...e),i=({activeIndex:e})=>{const{viewType:t,component:n,pinView:i,logContextEvent:o}=this.props,r=0===e?"regular":"dense";(0,s.Z)({boardDensity:r,component:n,surface:i,viewType:t},o)},(n="handleItemChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidUpdate(){const{dispatch:e,metadata:t,pinView:n,updatedBoardPinDensity:i}=this.props;if(t&&t.data&&""===i){const{profile_pin_rep_view_type:i,board_pin_rep_view_type:o}=t.data;"board"===n&&e(i?(0,f.VT)(i):(0,f.VT)("regular")),"profile"===n&&e(o?(0,f.QG)(o):(0,f.QG)("regular"))}}render(){const{metadata:e,updatedBoardPinDensity:t}=this.props;if(!e||!e.data)return null;const n="dense"===t?1:0;return(0,h.jsx)("div",{className:"OwnBoardSelector",children:(0,h.jsx)(l.sY,{items:[(0,h.jsx)(m,{selected:"regular"===t}),(0,h.jsx)(g,{selected:"dense"===t})],onChange:this.handleItemChange,selectedItemIndex:n,responsive:!0})})}}function v(e){const{logContextEvent:t}=(0,c.v)(),n=(0,d.Z)(),i=(0,a.Z)({name:"UserMetadataResource",options:{user:{id:n.isAuth?n.username:""}},noCache:!0}),r=(0,o.useSelector)((({ui:t})=>t.views&&t.views[`${e.pinView}PinView`]));return(0,h.jsx)(b,{...e,dispatch:(0,o.useDispatch)(),metadata:i,updatedBoardPinDensity:r,logContextEvent:t})}var x=n(33076);function y({board:e,currentView:t,inBoardOrganizationMode:n,onContentViewChange:o,onOrganizeClick:r,pinCount:s,showSortOptions:a}){const c=(0,u.ZP)(),p=(0,d.Z)();return(0,h.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,children:[(0,h.jsx)(l.xu,{paddingX:1,flex:"grow",children:(0,h.jsx)(l.X6,{children:c._("Pins","Heading for Pins outside of board sections on board page","Heading for Pins outside of board sections on board page")})}),a&&(0,x.tk)(s)&&(0,h.jsx)(l.xu,{paddingX:2,children:(0,h.jsx)(x.ZP,{currentView:t,onChange:o,board:e,viewer:p})}),s>=1&&(0,h.jsxs)(i.Fragment,{children:[s>=1&&(0,h.jsx)(v,{viewType:5,component:13183,pinView:"board"}),!n&&(0,h.jsx)(l.xu,{paddingX:2,children:(0,h.jsx)(l.zx,{fullWidth:!0,text:c._("Organize","The board organization button","The board organization button"),onClick:r})})]})]})}var _=n(613330),w=n(817930),C=n(557238);const S=(0,o.connect)(((e,t)=>(0,C.fx)(e.feeds[_.DV.BOARD_PINS][t.board.id])))((function(e){const t=(0,a.Z)({name:"BoardFeedResource",options:(0,w.q)(e.board,e.viewer,e.currentView,e.currentFilter)});return(0,h.jsx)(C.ZP,{...e,resource:t})}));S.displayName="BoardSectionlessPinGrid";const j=S,I=({children:e,shouldNavigate:t,to:n})=>t?(0,h.jsx)(l.iP,{role:"link",href:n,children:e}):e;var E=n(754999);const T=e=>{const t=(0,u.ZP)(),{numberOfSelectedPins:n}=e;return(0,h.jsx)(l.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(l.xu,{color:"white",padding:3,rounding:"pill",children:(0,h.jsx)(l.xv,{weight:"bold",children:(0,E.Z)(t.ngettext("Move {{ count }} Pin here","Move {{ count }} Pins here",n,"Call to action overlay on a section to move selected Pins","Call to action overlay on a section to move selected Pins"),{count:n})})})})};var P=n(396026),D=n.n(P);const k=157,O=141,R=118,B=106;function A(e){return"dense"===e?2:3}function M(e){return(("dense"===e?R:B)+1)*A(e)-1}function L({ariaLabel:e,isHovered:t,mode:n,pins:i}){const o=A(n),r="dense"===n,s=r?k:O,a=r?R:B,d=M(n);return(0,h.jsx)(l.zd,{rounding:4,width:d,children:(0,h.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(l.xu,{"aria-label":e,"aria-required":"true",bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),D()(o).map((e=>{var t,n,r,d,c,u;const p=e===o-1,g=i[e];return(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:p?void 0:1}},children:(0,h.jsx)(l.zd,{height:s,width:a,rounding:0,wash:!0,children:g&&(0,h.jsx)(l.Ee,{alt:null!==(t=g.description)&&void 0!==t?t:"",color:"transparent",fit:"cover",naturalHeight:null!==(n=null===(r=g.image_large_size_pixels)||void 0===r?void 0:r.height)&&void 0!==n?n:1,naturalWidth:null!==(d=null===(c=g.image_large_size_pixels)||void 0===c?void 0:c.width)&&void 0!==d?d:1,src:null!==(u=g.image_large_url)&&void 0!==u?u:""})})},e)}))]})})}var Z=n(272850),N=n(387987);function F({children:e,mode:t}){return"dense"===t?(0,h.jsx)(l.xv,{weight:"bold",children:e}):(0,h.jsx)(l.X6,{accessibilityLevel:2,size:"sm",lineClamp:1,children:e})}function U({children:e,displayEditIcon:t,mode:n,mouseCursor:i,onEditClick:o,onTouch:r,pinCount:s,title:a}){const d=(0,u.ZP)(),{isRTL:c}=(0,N.B)(),p=(0,h.jsxs)(l.xu,{children:[(0,h.jsxs)(l.xu,{position:"relative",children:[e,t&&(0,h.jsx)(l.xu,{position:"absolute",bottom:!0,left:c,right:!c,children:(0,h.jsx)(l.xu,{padding:2,children:(0,h.jsx)(l.hU,{bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:o,accessibilityLabel:d._("Edit","BoardSectionCard.SectionRep.EditIcon","accessibility label for the board section name edit button"),accessibilityHaspopup:!0,size:"sm"})})})]}),(0,h.jsx)(l.kC,{alignItems:"start",justifyContent:"between",width:M(n),children:(0,h.jsxs)(l.xu,{padding:2,flex:"grow",children:[(0,h.jsx)(F,{mode:n,children:a}),(0,h.jsx)(l.xu,{marginTop:1,children:(0,h.jsx)(Z.i,{count:s,size:"sm"})})]})})]});return r?(0,h.jsx)(l.iP,{fullWidth:!1,mouseCursor:i,onTap:r,rounding:4,children:p}):p}const H=e=>{var t;const{board:n,boardSection:r,canEdit:s,focused:a,hovered:d,inOrganizationMode:c,isDragging:u,isMergeTarget:p,onBlur:g,oneTapMovePinsHandler:m,onFocus:f,onMouseEnter:b,onMouseLeave:v,onShowEditSectionModal:x}=e,{slug:y,title:_,preview_pins:w=[]}=r,C=(0,o.useSelector)((({ui:e})=>e.views.boardPinView)),S=m&&m.numberOfSelectedPins;let j;S&&m&&(j=()=>{m.moveToSection(r)});let E="pointer";u?E="grabbing":!S&&c&&(E="grab");const P=!!s&&!u&&(d||a),D=m&&m.numberOfSelectedPins>0&&!!S&&d&&!u&&(0,h.jsx)(T,{numberOfSelectedPins:m.numberOfSelectedPins});return(0,h.jsxs)(l.xu,{alignItems:"center",color:"white","data-test-id":`section-${r.title}`,direction:"row",display:"flex",onBlur:g,onFocus:f,onMouseEnter:b,onMouseLeave:v,position:"relative",rounding:2,children:[(0,h.jsx)(I,{shouldNavigate:!c,to:`${null!==(t=n.url)&&void 0!==t?t:""}${y}/`,children:(0,h.jsx)(U,{displayEditIcon:P,mode:C,mouseCursor:E,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),x(r)},onTouch:j,pinCount:r.pin_count,title:_,children:(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(L,{ariaLabel:`section-${r.title}`,isHovered:d||p||a,mode:C,pins:w}),D]})})}),(0,h.jsx)("div",{className:"sectionHoverSurface"})]})};var z=n(366787),W=n(194620),$=n(8742),G=n(297633),V=n(470848);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Y extends i.Component{constructor(...e){super(...e),q(this,"state",{dragDrop:null,sectionIds:this.props.sections.map((e=>e.id))}),q(this,"cancelHoverTimeout",(()=>{const e=this.dragHoverTimeout;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null})),q(this,"dragHoverTimeout",null),q(this,"isDragging",(()=>!!this.state.dragDrop)),q(this,"handleSectionDragBegin",(e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})})),q(this,"handleSectionDragHover",((e,t)=>{const{dragDrop:n}=this.state,i=this.props.allowReordering;if(!t||!n)return;const{previewIndex:o}=n,r=(0,V.TI)({hoverRelativePosition:t,centerEnabled:e!==o&&i}),s={itemIndex:e,regionWithinItem:r};if(this.dragHoverTimeout&&(0,V.Lz)(s,this.dragHoverTimeout.hoverLocation))return;this.cancelHoverTimeout();const a="center"===r?"merge":"reorder",d={action:a,index:(0,V.X3)({hoverLocation:s,sourceIndex:o})};d.index!==o?this.dragHoverTimeout={hoverLocation:s,timeoutId:setTimeout((()=>{this.dragHoverTimeout=null,"reorder"===a?this.setState((({dragDrop:e,sectionIds:t})=>({dragDrop:{...e,target:d,previewIndex:d.index},sectionIds:(0,_.zX)(t,o,d.index)}))):this.setState((({dragDrop:e})=>({dragDrop:{...e,target:d}})))}),"reorder"===a?200:20)}:n.target&&n.target.index!==d.index&&this.setState({dragDrop:{...n,target:d}})})),q(this,"handleSectionDragEnd",(e=>{const{sections:t,onShowMergeSectionsConfirmationModal:n,onSectionReorder:i}=this.props,{dragDrop:o,sectionIds:r}=this.state,s=o&&o.target;if(this.cancelHoverTimeout(),!e||!o||!s||s.index===o.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map((e=>e.id))});const{previewIndex:a,sourceIndex:d}=o,{action:l,index:c}=s;if(this.setState({dragDrop:null}),"merge"===l){const e=e=>{const n=r[e];return n&&t.find((({id:e})=>e===n))},i=e(a),o=e(c);i&&o&&n(i,o)}else i(d,c)})),q(this,"renderSection",((e,t)=>{const{allowReordering:n,board:i,canEdit:o,oneTapMovePinsHandler:r,onShowEditSectionModal:s,organizeMode:a}=this.props,{dragDrop:d}=this.state,c=d&&d.target;return(0,h.jsx)(l.xu,{padding:2,children:(0,h.jsx)($.q,{children:({focused:d,hovered:l,onBlur:u,onFocus:p,onMouseEnter:g,onMouseLeave:m})=>(0,h.jsx)(H,{allowReordering:n,board:i,boardSection:e,canEdit:o,focused:d,hovered:l,inOrganizationMode:a,isDragging:this.isDragging(),isMergeTarget:!!c&&"merge"===c.action&&t===c.index,onBlur:e=>{const t=e.currentTarget;setTimeout((()=>{t.contains(document.activeElement)||u()}),0)},onFocus:p,onMouseEnter:g,onMouseLeave:m,oneTapMovePinsHandler:r,onShowEditSectionModal:s})})})}))}componentDidUpdate(e){const{sections:t}=e,{sections:n}=this.props,i=e=>e.map((({id:e})=>e)).join(",");if(t.length!==n.length&&i(t)!==i(n)){this.cancelHoverTimeout();const e=n.map((e=>e.id));this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){const{allowReordering:e,connectDropTarget:t,isDragWithinBounds:n,sections:i}=this.props,{sectionIds:o}=this.state,r=this.isDragging(),s=i.reduce(((e,t)=>({...e,[t.id]:t})),{}),a=(0,h.jsx)(l.xu,{display:"flex",justifyContent:"center",marginStart:6,marginEnd:6,wrap:!0,children:o.map((e=>s[e])).filter((e=>!!e)).map(((t,i)=>(0,h.jsx)(l.xu,{children:e?(0,h.jsx)(G.Z,{index:i,onDragBegin:this.handleSectionDragBegin,onDragEnd:this.handleSectionDragEnd,onDragHover:this.handleSectionDragHover,type:G.y.Section,children:(0,h.jsx)("div",{style:{opacity:r&&!n?.5:1},children:this.renderSection(t,i)})}):(0,h.jsx)(l.xu,{children:this.renderSection(t,i)})},t.id)))});return(0,h.jsxs)(l.xu,{width:"100%",children:[e&&t?t((0,h.jsx)("div",{children:a})):a,r&&(0,h.jsx)(z.Z,{})]})}}const X=(0,W.Z)(G.y.Section)(Y);function J(e){const t=(0,u.ZP)(),{allowReordering:n,fetchMore:i,isAtEnd:o,isFetching:r}=e;return(0,h.jsxs)(l.xu,{width:"100%",children:[(0,h.jsx)(l.gr,{isAtEnd:o,isFetching:r,fetchMore:i}),n?(0,h.jsx)(X,{...e}):(0,h.jsx)(Y,{...e}),r&&!o&&(0,h.jsx)(l.xu,{position:"relative",paddingY:6,children:(0,h.jsx)(l.$j,{accessibilityLabel:t._("Loading sections","loading state for board sections","loading state for board sections"),show:!0})})]})}var K=n(386004),Q=n(311866);var ee=n(159276),te=n(767523);class ne extends i.Component{constructor(...e){var t,n,i;super(...e),i=(e,t)=>{const{board:n,dispatch:i,enableReordering:o,sections:r,viewParameter:s}=this.props;if(!o)return;const a=r[e].id,d=r[t].id,l=(0,_.zX)(r,e,t).map((e=>e.id)),c=l.indexOf(a),u=e=>e>=0&&e<l.length,h={boardId:n.id,sourceSectionId:a,targetSectionId:d,...u(c+1)?{sectionIdAfter:l[c+1]}:{},...u(c-1)?{sectionIdBefore:l[c-1]}:{}},p={object_id_str:a,view_type:5,view_parameter:s};var g;i((g=h,e=>{const{boardId:t,sectionIdBefore:n,sectionIdAfter:i,sourceSectionId:o,targetSectionId:r}=g;e((0,K.Z)({feedType:_.DV.BOARD_SECTIONS,feedId:t,itemType:"board_section",sourceItemId:o,targetItemId:r}));const s={section_id:o,section_before:n||void 0,section_after:i||void 0};return Q.ZP.create("BoardSectionsReorderResource",s).callUpdate({showError:!1})})).then((()=>this.props.logContextEvent({event_type:7133,...p})))},(n="handleSectionReorder")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:n,refresh:i,isAtEnd:o}}=this.props;e&&!n&&i(),o&&t()}componentDidUpdate(e){!this.props.sectionsInvalidated||e.sectionsInvalidated||this.props.isFetching||this.props.refreshData(),!e.sectionsResource.isAtEnd&&this.props.sectionsResource.isAtEnd&&this.props.onLoadedAll()}render(){var e;const{board:t,enableReordering:n,inBoardOrganizationMode:i,oneTapMovePinsHandler:o,onShowEditSectionModal:r,onShowMergeSectionsConfirmationModal:s,sections:a,sectionsResource:d,viewer:c,orbacActingAs:u}=this.props,{isLoaded:p,isFetching:g,fetchMore:m,isAtEnd:f}=d;if(!p)return this.props.i18n._("Board sections loading spinner","BoardPage.BoardSections.loadingSpinner","Accessibility label for the spinner on board sections"),(0,h.jsx)(l.$j,{accessibilityLabel:this.props.i18n._("Board sections loading spinner"," - "," -- "),show:!0});const b=(t.access||[]).includes("write")||(0,ee.D3)(c,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",u);return(0,h.jsx)(l.kC,{alignItems:"stretch",justifyContent:"center",children:(0,h.jsx)(J,{allowReordering:n,board:t,canEdit:b,fetchMore:m,isAtEnd:f,isFetching:g,oneTapMovePinsHandler:o,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:r,onShowMergeSectionsConfirmationModal:s,organizeMode:i,sections:a})})}}const ie=(0,o.connect)((function(e,t){const{feeds:{[_.DV.BOARD_SECTIONS]:n={}},sections:i}=e,{board:{id:o}}=t,r=n[o];return{sections:(r||[]).reduce(((e,t)=>"board_section"===t.type&&i[t.id]?e.concat([i[t.id]]):e),[]),sectionsInvalidated:null===r}}))((function(e){const{logContextEvent:t}=(0,c.v)(),n=(0,u.ZP)(),i=(0,d.Z)(),o=(0,te.Z)(),r=(0,a.Z)({name:"BoardSectionsResource",options:{board_id:e.board.id,redux_normalize_feed:!0}});return(0,h.jsx)(ne,{...e,sectionsResource:r,i18n:n,viewer:i,orbacActingAs:o,logContextEvent:t})}));var oe=n(570970),re=n(41425),se=n(816670),ae=n(104216);const de=(0,o.connect)((function({boards:e,ui:t},{board:n}){const{views:{boardPinView:i}}=t,o=((e||{}).content||{})[n.id];return{boardPinView:i,sectionCount:(o?o.section_count:n.section_count)||0}}),(()=>({})))((function({actions:e,board:t,boardPinView:n,bulkEditSelectedPins:o,currentFilter:s,currentView:a,displayActionBar:u,enableReordering:p,inBoardOrganizationMode:g,inSectionOrganizationMode:m,inSelectAll:f,isOwnBoard:b,isPinGridSorted:v,onBulkEditPinClick:x,onContentViewChange:_,oneTapMovePinsHandler:w,onShowEditSectionModal:C,onShowMergeSectionsConfirmationModal:S,refreshFilteredFeed:I,sectionCount:E,viewParameter:T}){const{logContextEvent:P}=(0,c.v)(),[D,k]=(0,i.useState)(0===E),O=(0,ae.Z)({shouldStopEventPropagation:!1}),R=(0,re.Z)(t.url),B=(0,d.Z)(),A=O((()=>{const{onBoardOrganizeClick:t}=e;P({event_type:101,component:69,element:400}),t&&t(!0)})),{is_collaborative:M,pin_count:L}=t,Z=(t.access||[]).includes("write"),N=b||t.collaborated_by_me,F=Boolean("number"==typeof L&&L>=2&&M&&N);return(0,h.jsxs)(l.xu,{marginBottom:12,children:[(0,h.jsx)(r.Z,{setMaxWidth:!1,children:(0,h.jsxs)(l.xu,{children:[E>0&&(!s||s===se.cg)&&(0,h.jsx)(ie,{board:t,enableReordering:p,inBoardOrganizationMode:g,inSectionOrganizationMode:m,oneTapMovePinsHandler:w,onLoadedAll:()=>k(!0),onShowEditSectionModal:C,onShowMergeSectionsConfirmationModal:S,viewParameter:T}),u&&D&&N&&E>0&&(0,h.jsx)(y,{board:t,currentView:a,inBoardOrganizationMode:g,onContentViewChange:_,onOrganizeClick:A,pinCount:null!=L?L:0,showSortOptions:F})]})}),D&&(0,h.jsx)(l.xu,{"data-test-id":"board-feed",dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},paddingX:3,position:"relative",children:(0,h.jsx)(j,{board:t,bulkEditSelectedPins:o,currentFilter:s,currentView:a,denseViewSelected:Z&&"dense"===n,inBoardOrganizationMode:g,inSectionOrganizationMode:m,inSelectAll:f,isOwnBoard:b,isPinGridSorted:v,onBulkEditPinClick:x,refreshFilteredFeed:I,renderFooterStory:e=>!g&&!t.archived_by_me_at&&N&&(0,h.jsx)(l.xu,{marginBottom:6,children:(0,h.jsx)(r.Z,{children:(0,h.jsx)(oe.Z,{collection:t,storyId:e,url:R})})}),viewParameter:T,viewer:B})})]})}))},872571:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(667294),o=n(40142),r=n(169897),s=n(174523),a=n(691908),d=n(883119),l=n(785893);function c(e){const t=(0,s.ZP)(),{anchor:n,experienceType:i,hideAddSectionTooltip:o}=e,{setShowBoardlessPinsModal:c}=(0,a.Z)();let u;switch(i){case"addSectionTooltip":u=(0,l.jsx)(d.J2,{anchor:n,color:"blue",idealDirection:"down",onDismiss:o,positionRelativeToAnchor:!1,showCaret:!0,size:"sm",children:(0,l.jsx)(d.xu,{padding:4,children:(0,l.jsx)(d.xv,{color:"white",weight:"bold",children:t._("Tap + to add a section any time","boardActionsButton.addIconButton.addSectionFlyout","Flyout to point out where you can find add section")})})});break;case"planningActionsExperience":u=(0,l.jsx)(r.Z,{anchor:n,experienceIds:[502096],idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0});break;case"createBoardTooltip":u=(0,l.jsx)(r.Z,{anchor:n,experienceIds:[503447],idealDirection:"down",flyoutSize:"md",onClickComplete:()=>{c(!0)},placementId:19,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center",textWeight:"normal"});break;default:u=null}return(0,l.jsx)(d.mh,{children:(0,l.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{zIndex:5e3}},position:"absolute",top:!0,children:u})})}var u=n(207395),h=n(803478),p=n(101267),g=n(549156),m=n(181307);function f({anchor:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:o,onAddSection:r,onClose:a,onCreateBoard:c,onCreatePin:f,onCreateStoryPin:b,surface:v}){const x=(0,s.ZP)(),{anyEnabled:y}=(0,m.aq)("web_story_pin_creator"),{anyEnabled:_}=(0,m.aq)("web_sp2s");return(0,l.jsx)(u.Z,{anchor:e,idealDirection:t,onDismiss:a,children:(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(h.Z,{label:x._("Create","BoardActionsButton.LegoFlyout.Create","Label for a list of options to create a pin or a section"),children:[(0,l.jsx)(p.Z,{dataTestId:"Create Pin",onClick:()=>{f(),a()},children:x._("Pin","BoardActionsButton.LegoFlyout.Pin","Option to create a pin")}),b&&y&&(0,l.jsx)(p.Z,{dataTestId:"Create Story Pin",onClick:()=>{b(),a()},children:_?x._("Idea Pin","BoardActionsButton.LegoFlyout.IdeaPin","Option to create a Idea Pin"):x._("Story Pin","BoardActionsButton.LegoFlyout.StoryPin","Option to create a Story Pin")}),"profileBoards"===v&&c&&(0,l.jsx)(p.Z,{dataTestId:"Create board",onClick:()=>{c(),a()},children:x._("Board","profileHeader.actionBar.board","Option to create a board")})]}),"board"===v&&(0,l.jsxs)(h.Z,{label:x._("Add","BoardActionsButton.LegoFlyout.Add","Label for a list of options to add board sections or a board date"),children:["board"===v&&n&&(0,l.jsx)(g.Z,{id:"addBoardNote",children:(0,l.jsx)(p.Z,{onClick:()=>{n(),a()},children:(0,l.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(d.xv,{weight:"bold",children:x._("To-dos","BoardActionsButton.LegoFlyout.Note","Option to create a board note")}),(0,l.jsx)(d.xu,{color:"blue",marginStart:2,padding:1,rounding:1,children:(0,l.jsx)(d.xv,{color:"white",size:"sm",weight:"bold",children:x._("New","BoardActionsButton.LegoFlyout.New","New option indicator")})})]})})}),"board"===v&&r&&(0,l.jsx)(g.Z,{id:"addSection",children:(0,l.jsx)(p.Z,{onClick:()=>{r(),a()},children:x._("Section","BoardActionsButton.LegoFlyout.Section","Option to create a board section")})}),"board"===v&&!!o&&(0,l.jsx)(p.Z,{onClick:()=>{o(),a()},children:x._("Date","BoardActionsButton.LegoFlyout.Date","Option to add a date to a board")})]})]})})}var b=n(717927);function v({children:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:a,onCreateBoard:u,onCreatePin:h,onCreateStoryPin:p,onOpen:g=(()=>{}),surface:m}){const v=(0,s.ZP)(),x=(0,o.useDispatch)(),y=()=>x((0,b.l)()),_=(0,o.useSelector)((({createSectionTooltip:e})=>Boolean(null==e?void 0:e.showCreateSectionTooltip))),w=(0,i.useRef)(),[C,S]=(0,i.useState)(!1),j=()=>{g(),_&&y(),S(!0)},I={board:v._("Board Actions","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget"),profileBoards:v._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),profilePins:v._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),section:v._("Create Pin","Button to begin pin creation flow","Button to begin pin creation flow")},E=e&&e({active:C,openFlyout:j})||(0,l.jsx)(d.hU,{accessibilityLabel:I[m],icon:"add",onClick:"section"===m?h:j,size:"lg"});let T;return C||"board"!==m||(_?T="addSectionTooltip":r&&(T="planningActionsExperience")),C||"profileBoards"!==m||(T="createBoardTooltip"),(0,l.jsxs)(d.xu,{"data-test-id":"boardActionsButton",children:[(0,l.jsx)(d.xu,{ref:w,children:E}),C&&(0,l.jsx)(f,{anchor:w.current,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:a,onClose:()=>S(!1),onCreateBoard:u,onCreatePin:h,onCreateStoryPin:p,surface:m}),T&&(0,l.jsx)(c,{anchor:w.current,experienceType:T,hideAddSectionTooltip:y})]})}},815671:(e,t,n)=>{n.d(t,{Z:()=>G});var i=n(667294),o=n(551687),r=n(689859),s=n(881220),a=n(174523),d=n(880841),l=n(883119),c=n(785893);const u=(0,i.lazy)((()=>n.e(4603).then(n.t.bind(n,774855,23))));function h({linkURL:e,onDidFocus:t,onDidClickCopyButton:n}){const i=(0,a.ZP)(),{showOneToast:h}=(0,d.F9)(),p=i._("Copy link","[button] copy a URL link shown, to paste in another place","[button] copy a URL link shown, to paste in another place");return(0,c.jsxs)(l.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,c.jsx)(l.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(l.nv,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),(0,c.jsx)(o.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(r.Z,{fallback:(0,c.jsx)(l.zx,{text:p,disabled:!0}),children:(0,c.jsx)(u,{text:e,onCopy:(e,t)=>{t&&h((({onHide:e})=>(0,c.jsx)(s.ZP,{onHide:e,text:i._("Link copied to clipboard!","toast message to confirm if users copied the url successfully","toast message to confirm if users copied the url successfully")}))),n()},children:(0,c.jsx)(l.zx,{text:p,size:"lg"})})})})]})}var p=n(640027),g=n(237574),m=n(457175),f=n(659048);const b=e=>({invite_category:4,invite_channel:12,object_type:g.d.BOARD,object_id:e}),v=e=>({component:13305,element:10921,object_id_str:e,view_type:5,view_parameter:3059});function x({boardId:e}){const{logContextEvent:t}=(0,m.v)(),[n,o]=(0,i.useState)(!1),[r,s]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!r){const t=b(e),{cancel:n,promise:i}=(0,p.Z)(f.Z.createShareInviteData(t));return i.then((e=>s(e))),()=>{n()}}}),[]);const a=r?r.invite_url:"...",d=()=>{null===r||n||(o(!0),f.Z.logShareInvite(b(e),r))};return(0,c.jsx)(h,{linkURL:a,onDidClickCopyButton:()=>{t({event_type:101,...v(e)}),d()},onDidFocus:d})}var y=n(760001),_=n(151101),w=n(535718);function C({boardId:e,invitedUserId:t,isInvited:n,onClick:o,buttonSize:r="sm"}){const s=(0,a.ZP)(),d=(0,w.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t}});(0,i.useEffect)((()=>{d.refresh()}),[]);const u={text:s._("Invite","[button] invite someone to collaborate on a board","it appears in the list expanded when click invite button at the top of board page"),color:"red",disabled:!1};return d.isFetching&&(u.text=s._("Loading","[button] disabled button status text when checking if the user has been invited","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),(n||d.isLoaded&&d.data)&&(u.text=s._("Invited","[button] disabled button status text when a user has been invited to a board","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),(0,c.jsx)(l.zx,{fullWidth:!0,color:u.color,size:r,disabled:u.disabled,onClick:o,text:u.text})}var S=n(494715),j=n(497199),I=n(760620),E=n(731164),T=n(203620),P=n(163880);function D({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:n,shareSuggestions:o}){const{logContextEvent:r}=(0,m.v)(),s=(0,a.ZP)(),[d,u]=(0,i.useState)(""),[h,p]=(0,i.useState)([]),[g,f]=(0,i.useState)({}),[b,v]=(0,i.useState)({}),x=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||s._("On Pinterest","is a user of Pinterest","is a user of Pinterest");case"emailcontact":case"email_share_suggestion":return e.email||s._("Email Contact","invited user has an email","invited user has an email")}return""},y=(i,o)=>{const{id:s,full_name:a,debug_reason:l}=i;let c="";l&&(c=l.reason),((t,n)=>{r({event_type:101,component:13029,element:d?1044:1039,object_id_str:e,view_type:5,view_parameter:3059,aux_data:{entered_query:d,result_index:t+1,rs:n}})})(o,c);const u={...g};u[s]=!0,f(u),(0,P.pS)(e,[s]).then((()=>{n(a,!0)})).catch((e=>{n(a,!1,e);const t={...g};t[s]=!1,f(t)})).finally(t)};let w=o;return d&&(w=h),(0,c.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,c.jsx)(l.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,c.jsx)(l.xu,{flex:"grow",children:(0,c.jsx)(T.Z,{onTypeaheadSuggestionsChange:e=>{E.Z.increment("web_contacts_search",1,{source:"board_invite"}),p(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25},value:d,children:(0,c.jsx)(l.xu,{paddingX:4,children:(0,c.jsx)(l.Um,{accessibilityLabel:s._("Search for a name or email","accessible label for contact search input field","accessible label for contact search input field"),id:"search",onChange:({value:e})=>{u(e),r({event_type:4113,component:13029,element:1043,view_parameter:3059,aux_data:{entered_query:e}})},placeholder:s._("Search by name or email","search input field prompt for finding contacts","search input field prompt for finding contacts"),size:"lg",value:d})})})})}),(0,c.jsxs)(l.xu,{overflow:"scrollY",maxHeight:414,children:[w.map(((t,n)=>{const i=t.username?`/${t.username}/`:null;return(0,c.jsx)(l.xu,{children:(0,c.jsx)(S.Z,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:x(t),accessory:(0,c.jsx)(C,{boardId:e,invitedUserId:t.id,isInvited:(o=t.id,!!g[o]),onClick:()=>y(t,n),buttonSize:"lg"}),linkURL:i})},n);var o})),d&&((0,I.Z)(d)?(0,c.jsx)(S.Z,{name:d,title:d,accessory:(D=!!b[d],k=()=>{const i=d;if(!(0,I.Z)(i))return;const o={...b};o[i]=!0,v(o),(0,P.OA)(e,[i]).then((()=>{n(i,!0),u("")})).catch((e=>{n(i,!1,e);const t={...b};t[i]=!1,v(t)})).finally(t)},O="lg",(0,c.jsx)(l.zx,{fullWidth:!0,color:D?"gray":"red",disabled:!!D,size:O,onClick:k,text:D?s._("Invited","[button] disabled button status text when a user has been invited to a board","[button] disabled button status text when a user has been invited to a board"):s._("Invite","[button] invite someone to collaborate on a board","[button] invite someone to collaborate on a board")}))}):(0,c.jsx)(j.Z,{iconNode:(0,c.jsx)(_.Z,{name:d,size:"md"}),title:d,subtitle:s._("Keep typing!","boardCollabInviterForm.label","Message for user to keep typing")}))]})]});var D,k,O}var k=n(946753);function O({boardId:e}){const{logContextEvent:t}=(0,m.v)(),n=(0,a.ZP)(),o=(0,d.F9)(),{refresh:r}=(0,w.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0},noCache:!0}),{refresh:u}=(0,w.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval"},noCache:!0}),{data:h,isLoaded:p}=(0,w.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board"},noCache:!0});(0,i.useEffect)((()=>{t({event_type:7120,object_id_str:e,view_type:5,view_parameter:3059})}),[]),(0,i.useEffect)((()=>{if(p){const e=h&&h.length>0?7511:7512;t({event_type:e,component:13305,element:10592,view_type:5,view_parameter:3059})}}),[p]);const g=(e,t=!1)=>{o.showOneToast((({onHide:n})=>(0,c.jsx)(s.ZP,{duration:3e3,onHide:n,text:e,variant:t?"error":void 0})))};return p?(0,c.jsx)(D,{boardId:e,onInvitesDidUpdate:()=>{r(),u()},onInviteDidComplete:(e,t,i)=>{t?g(n._("1 invite sent!","BoardCollabInviteFormContainer.showInviteSuccessToast.text","Toast for successfully sending invitation of collaborating a board")):((e,t)=>{const i=n._("Failed to invite {{userIdentifier}} to collaborate","Toast for failing to send invitation of collaborating a board","Toast for failing to send invitation of collaborating a board");g(t&&t.message?t.message:(0,k.nk)(i,{userIdentifier:e}).join(""),!0)})(e,i)},shareSuggestions:h||[]}):(0,c.jsx)(l.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,c.jsx)(l.$j,{accessibilityLabel:n._("Loading contacts","BoardCollab.BoardCollabInviteFormContainer","Accessibility label on loading spinner"),show:!0})})}const R="INVITE_SETTING",B="REQUEST_TO_JOIN_SETTING";function A({boldHeading:e,setting:t,viewerIsOwner:n}){const o=(0,a.ZP)(),r={0:{name:o._("Do (almost) everything","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("Add, move or delete Pins and sections, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},1:{name:o._("Save and comment","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:n?o._("Save Pins, organize them, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting"):o._("Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!","save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab","Text explaining collaborator permission setting")},[R]:{name:o._("Invite other people","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("Collaborators can invite others to this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},[B]:{name:o._("Board requests","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("People can request to join this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")}},s=e?l.X6:l.xv;return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(s,{color:"darkGray",size:e?"sm":"lg",children:r[t].name}),(0,c.jsx)(l.xu,{paddingY:1,children:(0,c.jsx)(l.xv,{color:"gray",size:"lg",children:r[t].description})})]})}var M=n(26629),L=n(451190),Z=n(34411),N=n(629318),F=n(855168),U=n(387987);function H({board:e,currentPermissionLevel:t,fromBoardEditModal:n,navigateToPermissions:o,onDismiss:r}){var s;const d=(0,a.ZP)(),u="number"==typeof e.collaborator_count&&e.collaborator_count>0,[h,p]=(0,i.useState)(!u),g=(0,U.B)(),m=(0,Z.Z)(),f=(0,F.k6)(),b=m.isAuth&&(null===(s=e.owner)||void 0===s?void 0:s.id)===m.id,v=b||e.collaborator_invites_enabled,_=h&&!u||!h;return(0,c.jsx)(N.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:b,children:(0,c.jsx)(L.Z,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:h?d._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"):d._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),footer:v&&!h?(0,c.jsx)(l.iP,{onTap:()=>p(!0),rounding:8,children:(0,c.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(l.hU,{accessibilityLabel:d._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","accessibility label on icon button"),icon:"add",bgColor:"red",iconColor:"white"}),(0,c.jsx)(l.xu,{paddingX:3,children:(0,c.jsx)(l.xv,{size:"lg",weight:"bold",children:d._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Clickable text to show invite form")})})]})}):null,heading:(0,c.jsxs)(l.xu,{padding:8,children:[n&&(0,c.jsx)(l.xu,{position:"absolute",top:!0,left:!g.isRTL,right:g.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(l.hU,{accessibilityLabel:d._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(l.X6,{align:"center",size:"md",children:h?d._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"):d._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")})]}),onDismiss:r,children:(0,c.jsxs)(l.xu,{marginBottom:5,children:[_&&(0,c.jsxs)(l.xu,{paddingX:6,children:[(0,c.jsx)(l.xu,{paddingY:3,children:(0,c.jsx)(l.xv,{size:"sm",children:b?d._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting"):d._("You can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting")})}),(0,c.jsxs)(l.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,c.jsx)(l.xu,{width:"60%",children:(0,c.jsx)(A,{boldHeading:!0,viewerIsOwner:b,setting:t})}),b&&(0,c.jsx)(l.hU,{accessibilityLabel:d._("Edit board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on icon button"),icon:"arrow-forward",onClick:o})]})]}),h?(0,c.jsxs)(l.xu,{paddingX:2,children:[(0,c.jsx)(x,{boardId:e.id}),(0,c.jsx)(O,{boardId:e.id})]}):(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.xu,{paddingX:6,paddingY:5,children:(0,c.jsx)(l.xv,{size:"sm",children:d._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Header before listing collaborators on a group board")})}),(0,c.jsx)(M.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=m.isAuth?`/${m.username}`:"/";f.replace(e)},renderInvite:(e,t,n)=>{if(!e.invited_user)return null;const i={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(y.Z,{...i})}})]})]})})})}var z=n(40142),W=n(164756);function $({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:n},currentPermissionLevel:o,navigateToCollaborators:r,onDismiss:s}){const{logContextEvent:d}=(0,m.v)(),u=(0,a.ZP)(),[h,p]=(0,i.useState)(o),[g,f]=(0,i.useState)(e),[b,v]=(0,i.useState)(t),[x,y]=(0,i.useState)(!1),_=(0,U.B)(),w=(0,z.useDispatch)();return(0,c.jsx)(L.Z,{accessibilityModalLabel:u._("Board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),heading:(0,c.jsxs)(l.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(l.xu,{position:"absolute",top:!0,left:!_.isRTL,right:_.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(l.hU,{accessibilityLabel:u._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(l.X6,{align:"center",size:"md",children:u._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")}),(0,c.jsx)(l.xu,{position:"absolute",top:!0,left:_.isRTL,right:!_.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(l.hU,{accessibilityLabel:u._("Close","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"cancel",iconColor:"darkGray",onClick:s})})]}),footer:(0,c.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,c.jsx)(l.zx,{color:"red",disabled:x||h===o&&g===e&&b===t,onClick:()=>{y(!0);const i={id:n},r={view_type:5,view_parameter:3472};g!==e&&(i.collaborator_invites_enabled=g,d({event_type:g?106:107,element:11896,...r})),h!==o&&(i.collaborator_permissions_setting=h,d({event_type:8841,...r})),b!==t&&(i.collaborator_requests_enabled=b),w((0,W.wN)(i)).then((()=>s()))},size:"lg",text:u._("Done","save.board.BoardPage.ModalContents.PermissionsModal","Submit button on a form")})}),onDismiss:s,children:(0,c.jsxs)(l.xu,{paddingX:12,children:[(0,c.jsx)(l.xu,{paddingY:3,children:(0,c.jsx)(l.xv,{size:"sm",children:u._("Permissions","save.board.BoardPage.ModalContents.PermissionsModal","Heading before listing possible board permissions")})}),(0,c.jsxs)(l.kC,{alignItems:"center",children:[(0,c.jsx)(l.EU,{checked:0===h,id:"ALL",onChange:()=>p(0),value:0}),(0,c.jsx)(l.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(A,{setting:0})})]}),(0,c.jsxs)(l.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,c.jsx)(l.EU,{checked:1===h,id:"SAVE_ONLY",onChange:()=>p(1),value:1}),(0,c.jsx)(l.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(A,{setting:1})})]}),(0,c.jsx)(l.xu,{paddingY:3,children:(0,c.jsx)(l.xv,{size:"sm",children:u._("Invitations","save.board.BoardPage.ModalContents.PermissionsModal","Heading before group board invitation permission form setting")})}),(0,c.jsxs)(l.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,c.jsx)(l.XZ,{checked:g,id:"inviteSetting",onChange:({checked:e})=>f(e)}),(0,c.jsx)(l.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(A,{setting:R})})]}),(0,c.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(l.XZ,{checked:b,id:"inviteSetting",onChange:({checked:e})=>v(e)}),(0,c.jsx)(l.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(A,{setting:B})})]})]})})}function G({board:e,fromBoardEditModal:t,onDismiss:n}){const[o,r]=(0,i.useState)("collaboratorsView"),{collaborator_permissions_setting:s}=e;return"collaboratorsView"===o?(0,c.jsx)(H,{board:e,currentPermissionLevel:s,fromBoardEditModal:t,navigateToPermissions:()=>r("permissionsView"),onDismiss:n}):(0,c.jsx)($,{board:e,currentPermissionLevel:s,navigateToCollaborators:()=>r("collaboratorsView"),onDismiss:n})}},238332:(e,t,n)=>{n.d(t,{Z:()=>Ye});var i=n(40142),o=n(483957),r=n(881220),s=n(174523),a=n(946753),d=n(883119),l=n(880841),c=n(164756),u=n(785893);function h({shouldArchive:e,board:t,onClose:n,onConfirm:h}){const p=(0,s.ZP)(),g=(0,i.useDispatch)(),{showOneToast:m}=(0,l.F9)();return(0,u.jsx)(o.Z,{confirmButtonLabel:e?p._("Archive","BoardPage.ModalContents.BoardModalManager","button label on confirming board archive"):p._("Unarchive","BoardUnarchiveConfirmation.BoardEditConfirmation.buttonLabel","button label on confirming board unarchive"),heading:e?p._("Archive this board?","BoardPage.ModalContents.BoardModalManager","modal heading for board archive confirmation"):p._("Unarchive this board?","BoardUnarchiveConfirmation.BoardEditConfirmation.heading","modal heading for board unarchive confirmation"),message:(0,a.nk)(e?p._("If you archive {{ boardName }}, you won’t be able to save Pins to it. We’ll hide it from your profile and stop using it for recommendations. (Don’t worry: You can unarchive your board to undo this!)","BoardPage.ModalContents.BoardModalManager","Confirmation message when archiving a board"):p._("If you unarchive {{ boardName }}, it will show up on your profile and you’ll be able to save new Pins to it.","BoardUnarchiveConfirmation.BoardEditConfirmation.message","Confirmation message when unarchiving a board"),{boardName:(0,u.jsx)(d.xv,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:n,onConfirm:()=>{g(e?(0,c.xk)(t.id):(0,c.YV)(t.id)),h(),n(),m((({onHide:n})=>{var i;return(0,u.jsx)(r.ZP,{imageUrl:null!==(i=t.image_cover_url)&&void 0!==i?i:"",onHide:n,text:e?(0,a.nk)(p._("Archived {{ boardName }}","board.BoardPage.ModalContents.BoardArchiveConfirmation","Toast text on complete archiving board"),{boardName:t.name}).join(""):(0,a.nk)(p._("Unarchived {{ boardName }}","BoardUnarchiveConfirmation.handleConfirmUnarchive.message","Toast text on completing unarchiving board"),{boardName:t.name}).join("")})}))}})}var p=n(815671),g=n(497231),m=n(667294),f=n(451190),b=n(558491);function v({fetchMore:e,followers:t,followersCount:n,isFetching:i,onDismiss:o}){const r=(0,s.ZP)();return(0,u.jsx)(f.Z,{accessibilityModalLabel:r._("Board Followers","boardFollowersList.modal.accessibilityLabelForModal","Accessibility label for modal"),heading:(0,u.jsx)(d.xu,{display:"flex",justifyContent:"center",padding:8,children:(0,u.jsx)(d.X6,{size:"md",accessibilityLevel:1,children:(0,a.nk)(r.ngettext("{{ followersCount }} Follower","{{ followersCount }} Followers",n,"Label for the number of people following a board","Label for the number of people following a board"),{followersCount:n.toLocaleString()})})}),onDismiss:o,size:"sm",children:(0,u.jsx)(d.xu,{maxHeight:600,paddingX:6,overflow:"auto",children:t&&t.length>0?(0,u.jsxs)(m.Fragment,{children:[t.map((e=>(0,u.jsx)(b.Z,{user:e},e.id))),n-t.length>0?(0,u.jsx)(d.xu,{display:"flex",justifyContent:"center",padding:5,marginBottom:2,children:(0,u.jsx)(d.zx,{disabled:i,onClick:e,size:"lg",text:r._("See more","BoardFollowerList.SeeMore","Button to load more items in the board follower list")})}):null]}):(0,u.jsx)(d.xu,{marginBottom:8,children:(0,u.jsx)(d.$j,{accessibilityLabel:r._("Loading board followers","BoardModalManager.Spinner","Spinner which shows when loading board followers"),show:!0})})})})}var x=n(631739),y=n(535718);function _({boardId:e,followersCount:t,onDismiss:n}){const{data:i=[],fetchMore:o,isFetching:r}=(0,y.Z)({name:"BoardFollowersResource",options:{board_id:e,page_size:x.Z.MAX_FETCH_NUM_FOLLOWERS_PER_PAGE}});return(0,u.jsx)(v,{fetchMore:o,followers:i,followersCount:t,isFetching:r,onDismiss:n})}var w=n(130874),C=n(475896);const S=({handleClick:e,selectedBoard:t,sourceBoard:n,targetBoardCandidates:i})=>{const o=(0,s.ZP)(),r=(0,u.jsx)(d.xv,{weight:"bold",inline:!0,children:null==n?void 0:n.name}),l=(0,u.jsx)(d.xv,{weight:"bold",inline:!0,children:null==n?void 0:n.pin_count});return 0===i.length?(0,u.jsx)(d.xv,{children:o._("There is no board to merge this board into.","BoardMergeModal.NoBoards.Text","helper text for selecting merge target board")}):n?(0,u.jsxs)(d.xu,{maxWidth:540,maxHeight:532,marginStart:4,marginEnd:4,children:[(0,u.jsx)(d.xv,{size:"lg",align:"center",children:(0,a.nk)(o._("Your board {{ sourceBoardName }} and all {{ sourceBoardPinCount }} pins will be gone for good. You won’t be able to get them back.","BoardMergeModal.Merge.Text","helper text for merging board"),{sourceBoardName:r,sourceBoardPinCount:l})}),(0,u.jsx)(d.xu,{marginTop:4,marginStart:2,children:(0,u.jsx)(d.xv,{size:"sm",children:o._("All boards","MergeModal.AllBoards.Text","all boards section title")})}),i.map((n=>{var i,r;return(0,u.jsx)(d.iP,{onTap:()=>e(n),children:(0,u.jsxs)(d.xu,{color:(null==t?void 0:t.id)===n.id?"lightGray":"transparent",display:"flex",justifyContent:"between",alignItems:"center",height:64,padding:2,rounding:2,children:[(0,u.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:[(0,u.jsx)(d.zd,{height:48,width:48,rounding:2,children:(0,u.jsx)(d.Ee,{fit:"cover",src:n.image_cover_url||"",color:"steelblue",naturalHeight:48,naturalWidth:48,alt:o._("Board Cover Image","MergeModal.Board.CoverImage","board cover image")})}),(0,u.jsxs)(d.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,children:[(0,u.jsx)(d.xu,{marginBottom:1,children:(0,u.jsx)(d.xv,{size:"lg",weight:"bold",children:n.name})}),(0,u.jsx)(d.xv,{size:"sm",children:(0,a.nk)(o.ngettext("{{ count }} Pin","{{ count }} Pins",null!==(i=n.pin_count)&&void 0!==i?i:0,"boardEdit.boardMergeModalBody.pinCount","label for n amount of pins"),{count:(0,u.jsx)(C.Z,{value:null!==(r=n.pin_count)&&void 0!==r?r:0})})})]})]}),(0,u.jsxs)(d.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:["secret"===n.privacy&&(0,u.jsx)(d.xu,{marginEnd:3,children:(0,u.jsx)(d.JO,{icon:"lock",color:"darkGray",accessibilityLabel:o._("Private board icon","MergeModal.Board.Private.Icon","private board accesibility label")})}),n.is_collaborative&&(0,u.jsx)(d.xu,{marginEnd:3,children:(0,u.jsx)(w.Z,{isCompact:!0,board:n})}),!!n.section_count&&(0,u.jsx)(d.JO,{icon:"arrow-forward",color:"darkGray",accessibilityLabel:o._("Board section icon","MergeModal.Board.Section.Icon","board secetion accesibility label")})]})]})},n.id)}))]}):null};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I extends m.Component{constructor(...e){super(...e),j(this,"state",{selectedTargetBoard:null}),j(this,"handleChange",(e=>{this.setState({selectedTargetBoard:e})})),j(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{selectedTargetBoard:t}=this.state;t&&e(t)})),j(this,"renderModalBody",(()=>{const{boardsResource:e,sourceBoardId:t}=this.props,{selectedTargetBoard:n}=this.state,{data:i}=e;if(!i)return(0,u.jsx)(d.$j,{accessibilityLabel:this.props.i18n._("Loading board list","spinner accessibility label","spinner accessibility label"),show:!0});const o=i.find((e=>e.id===t)),r=i.filter((e=>e.id!==t));return(0,u.jsx)(S,{handleClick:this.handleChange,selectedBoard:n,sourceBoard:o,targetBoardCandidates:r})}))}render(){const{onCancel:e}=this.props,{selectedTargetBoard:t}=this.state,n=(0,u.jsxs)(d.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:6,children:[(0,u.jsx)(d.xu,{}),(0,u.jsx)(d.X6,{size:"md",children:this.props.i18n._("Combine boards","BoardMergeModal.CombineBoards","title for board merging modal")}),(0,u.jsx)(d.iP,{fullWidth:!1,onTap:e,accessibilityLabel:this.props.i18n._("Close merge boards modal","BoardMergeModal.Close.TapArea","close icon for board merging modal"),children:(0,u.jsx)(d.JO,{icon:"cancel",color:"darkGray",size:18,accessibilityLabel:this.props.i18n._("Close merge boards modal","BoardMergeModal.Close.Label","close icon for board merging modal")})})]});return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Move Pins to","BoardEdit.BoardMergeModal.accessibilityLabel","accessibility label for board merging modal"),heading:n,onDismiss:e,footer:(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(d.zx,{color:"red",disabled:!t,onClick:this.handleSubmit,size:"lg",text:this.props.i18n._("Done","BoardMergeModal.Button.Submit","button for merging a board")})}),children:(0,u.jsx)(d.xu,{padding:8,children:this.renderModalBody()})})}}function E(e){const t=(0,s.ZP)(),n=(0,y.Z)({name:"BoardsResource",options:{privacy_filter:"all",sort:"alphabetical",field_set_key:"detailed",username:"me"},noCache:!0});return(0,u.jsx)(I,{...e,boardsResource:n,i18n:t})}var T=n(33234);const P="236x",D="474x",k="736x",O=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),R=e=>[P,D,k].map(((t,n)=>`${O(t)(e)} ${n+1}x`)).join(", ");function B({boardId:e,customizable:t}){const n=(0,y.Z)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),i=!n.isLoaded,o=(n.data||[]).filter((({type:e})=>"pin"===e)).map((({images:e})=>e["236x"]));return(0,u.jsx)(T.ZP,{getDownloadImageURL:O("1200x"),getMainImageURL:O(D),getThumbnailImageSrcSet:R,id:e,images:o,isLoadingImages:i,customizable:t})}function A({onCompleteBulkDelete:e,onClearModal:t,pinCountToDelete:n}){const i=(0,s.ZP)(),o=1===n?i._("Delete this Pin"," - "," -- "):i._("Delete these Pins"," - "," -- "),r=1===n?i._("Are you sure you want to permanently delete this Pin?"," - "," -- "):i._("Are you sure you want to permanently delete these Pins?"," - "," -- ");return(0,u.jsx)(f.Z,{accessibilityModalLabel:i._("delete Pins","accessibility label for bulk delete modal","accessibility label for bulk delete modal"),footer:(0,u.jsxs)(d.xu,{children:[(0,u.jsx)(d.xu,{marginBottom:2,children:(0,u.jsx)(d.zx,{fullWidth:!0,text:i._("Cancel"," - "," -- "),onClick:t})}),(0,u.jsx)(d.zx,{fullWidth:!0,text:i._("Delete"," - "," -- "),color:"red",onClick:()=>{e(),t()}})]}),heading:o,onDismiss:t,children:(0,u.jsx)(d.xu,{paddingX:8,children:(0,u.jsx)(d.xv,{children:r})})})}var M=n(530197);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends m.Component{constructor(...e){super(...e),L(this,"state",{chosenBoardId:null}),L(this,"handleChosenBoardChange",(e=>{this.setState({chosenBoardId:e.id})})),L(this,"handleConfirm",(()=>{const{onCopyToBoard:e,onClearModal:t}=this.props,{chosenBoardId:n}=this.state;n&&(e(n),t())}))}render(){const{onClearModal:e,pinCountToCopy:t}=this.props,{chosenBoardId:n}=this.state,i=1===t?this.props.i18n._("Pick another board for this Pin"," - "," -- "):this.props.i18n._("Pick another board for these Pins"," - "," -- ");return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Copy your pins to a different board","BoardPage.ModalContents.BulkEditBoardPicker.accessibilityModalLabel","Accessiblilty modal label"),heading:i,onDismiss:e,footer:(0,u.jsxs)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:[(0,u.jsx)(d.xu,{paddingX:1,children:(0,u.jsx)(d.zx,{fullWidth:!0,onClick:e,text:this.props.i18n._("Cancel"," - "," -- ")})}),(0,u.jsx)(d.xu,{paddingX:1,children:(0,u.jsx)(d.zx,{fullWidth:!0,disabled:!n,onClick:this.handleConfirm,text:this.props.i18n._("Copy"," - "," -- "),color:"red"})})]}),children:(0,u.jsx)(d.xu,{padding:8,minHeight:400,children:(0,u.jsx)(M.Z,{onBoardChosen:this.handleChosenBoardChange})})})}}function N(e){const t=(0,s.ZP)();return(0,u.jsx)(Z,{...e,i18n:t})}var F=n(180115),U=n(773788),H=n(535258);function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W=()=>{};class $ extends m.PureComponent{constructor(...e){super(...e),z(this,"state",{isHovered:!1}),z(this,"hover",(()=>this.setState({isHovered:!0}))),z(this,"unhover",(()=>this.setState({isHovered:!1}))),z(this,"handlePinClick",(({event:e})=>{const{save:t,unsave:n,saved:i}=this.props;e.preventDefault(),e.stopPropagation(),i?n():t()}))}render(){const{children:e,boardName:t,saved:n}=this.props,{isHovered:i}=this.state;return(0,u.jsxs)(d.xu,{position:"relative",children:[(0,u.jsx)(d.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,u.jsx)(d.iP,{accessibilityLabel:this.props.i18n._("Save this Pin","jumpstartBoardPinWrapper.tapArea.accessibilityLabel","Accessibility label describing purpose of tap area"),fullHeight:!0,fullWidth:!0,onMouseEnter:this.hover,onMouseLeave:this.unhover,onTap:this.handlePinClick,children:(i||n)&&(0,u.jsx)(d.xu,{paddingX:4,paddingY:4,position:"absolute",top:!0,width:H.xf,zIndex:new d.Ry(1),children:n?(0,u.jsxs)(d.kC,{alignItems:"center",justifyContent:"center",children:[(0,u.jsx)(d.xu,{flex:"grow",children:(0,u.jsx)(U.Z,{isNewlySaved:!0,url:null,name:t})}),(0,u.jsx)("div",{className:"jumpstart-undo-icon",children:(0,u.jsx)(d.hU,{accessibilityLabel:this.props.i18n._("Undo","Undo saving a pin to a board","Undo saving a pin to a board"),bgColor:"transparentDarkGray",icon:"refresh",iconColor:"white",onClick:W})})]}):(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(d.xu,{children:(0,u.jsx)(F.Z,{onClick:W,saved:n,variant:"lego"})})})})})}),(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}}function G(e){const t=(0,s.ZP)();return(0,u.jsx)($,{...e,i18n:t})}var V=n(476666),q=n(476865),Y=n(457175);function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class J extends m.PureComponent{constructor(...e){super(...e),X(this,"scollRef",(0,m.createRef)()),X(this,"clickLogging",(e=>{const{board:t}=this.props;this.props.logContextEvent({event_type:101,component:13380,element:10599,aux_data:{reason:e,board_id:t.id}})})),X(this,"handleSave",(()=>{this.clickLogging("save")})),X(this,"handleDelete",(()=>{this.clickLogging("delete")})),X(this,"renderPin",(({data:e,itemIdx:t})=>{const{board:n}=this.props;return(0,u.jsx)(V.Z,{pin:e,target:{board:n},onSave:this.handleSave,onDelete:this.handleDelete,eventContext:{viewType:5,viewParameter:3173,element:10599},children:({save:i,unsave:o,saved:r})=>{var s;return(0,u.jsx)(G,{save:i,unsave:o,saved:r,boardName:null!==(s=n.name)&&void 0!==s?s:"",children:(0,u.jsx)(q.default,{attributionOption:"hide",blockClickEvents:!0,pin:e,pinId:e.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},surface:"JumpstartBoard",trackingParameters:{slotIndex:t,viewParameter:3173,viewType:5}})})}})}))}render(){const{resource:e}=this.props;return(0,u.jsxs)(d.xu,{maxHeight:600,maxWidth:ee,overflow:"auto",ref:this.scollRef,padding:4,children:[e.isLoaded&&e.data&&(0,u.jsx)(d.Rk,{comp:this.renderPin,columnWidth:H.xf,gutterWidth:24,items:e.data,scrollContainer:()=>this.scollRef.current,loadItems:e.fetchMore}),(0,u.jsx)(d.$j,{accessibilityLabel:this.props.i18n._("Loading pins","Loading indicator","Loading indicator"),show:e.isFetching})]})}}function K({board:e}){const{logContextEvent:t}=(0,Y.v)(),n=(0,s.ZP)(),i=(0,y.Z)({name:"BoardContentRecommendationResource",options:{type:"board",id:e.id,__track__referrer:21}});return(0,u.jsx)(J,{board:e,resource:i,i18n:n,logContextEvent:t})}var Q=n(855168);const ee=1112;function te({board:e,onDismiss:t}){const n=(0,s.ZP)(),i=(0,Q.k6)(),o=(0,Q.TH)(),r=()=>{const e={...o&&o.state||{}};e.newBoard&&(delete e.newBoard,i.replace({...o,state:e})),t()};return(0,u.jsx)(f.Z,{accessibilityModalLabel:n._("add pins to empty board modal","accessibility label for modal","accessibility label for modal"),allowScroll:!0,heading:n._("Save some Pins to your new board","jumpstartBoardModal.heading","heading for modal to add Pins to an empty board"),onDismiss:r,size:ee,footer:(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(d.zx,{color:"red",onClick:r,text:n._("Done","done adding pins to empty board","done adding pins to empty board"),accessibilityLabel:n._("Done","done adding pins to empty board","done adding pins to empty board")})}),children:(0,u.jsx)(K,{board:e})})}var ne=n(963232),ie=n(538052),oe=n(742979),re=n(63447),se=n(178862);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class de extends m.Component{constructor(...e){super(...e),ae(this,"getSections",(e=>{var t,n,i;const{board:o,canMoveToOtherBoards:r}=this.props,s=null!==(t=null===(n=this.props.boardsResource.data)||void 0===n?void 0:n.all_boards)&&void 0!==t?t:[],a=null!==(i=this.props.sectionsResource.data)&&void 0!==i?i:[],d=s.filter((e=>e.id!==o.id));return e.length>=2?[a.length?{items:(0,se.j)([o],e),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},{items:(0,se.j)(a,e,"title"),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}},r?{items:(0,se.j)(d,e)}:{items:[]}]:[a.length?{title:this.props.i18n._("Current board","title in move pins flow","title in move pins flow"),items:[o,...a],customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},r?{title:this.props.i18n._("Other boards","heading text for a list of a user's other boards in the move pins flow","heading text for a list of a user's other boards in the move pins flow"),items:d}:{items:[]}]})),ae(this,"isDisabled",(e=>e.id===this.props.selectedRowId))}render(){const{board:e,boardsResource:{error:t,isLoaded:n},boardSavedTo:i,onRowSelected:o,onSectionCreate:r,pinId:s,sectionsResource:{error:a,isLoaded:d},selectedRowId:l}=this.props;return(0,u.jsx)(re.Z,{boardSavedTo:i,createButtonLabel:this.props.i18n._("Add section","Button for creating a board section","Button for creating a board section"),disabledRowId:l,hasLoadError:!!t||!!a,isLoaded:n&&d,getSections:this.getSections,onCreate:r,onSelected:o,pinId:s},e.id)}}function le(e){const t=(0,s.ZP)(),n=(0,y.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}}),i=(0,y.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",onlyFetchBoards:!0}});return(0,u.jsx)(de,{...e,boardsResource:i,i18n:t,sectionsResource:n})}function ce({board:e,boardSavedTo:t,onMove:n,onSectionedBoardSelect:i,onSectionCreate:o,selectedRowId:r,showOtherBoards:a}){const l=(0,s.ZP)(),c=a&&!e.section_count?l._("Choose board"," - "," -- "):l._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section");return(0,u.jsxs)(d.xu,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:"absolute",rounding:2,width:330,dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[(0,u.jsx)(d.xu,{paddingY:3,paddingX:3,children:(0,u.jsx)(d.X6,{size:"sm",children:c})}),(0,u.jsx)(le,{board:e,boardSavedTo:t,canMoveToOtherBoards:a,onRowSelected:t=>{if("board_section"===t.type){n(e,t)}else if("board"===t.type){const o=t;o&&o.id!==e.id&&(o.section_count||0)>0?i(o):n(o,null)}},onSectionCreate:o,selectedRowId:r})]})}var ue=n(34411),he=n(817930),pe=n(301314),ge=n(923224),me=n(396026),fe=n.n(me);function be({previewPin:e,extraPinCount:t,showFullImage:n}){if(!e)return(0,u.jsx)(ge.Z,{height:214,pin:null,rounded:!0,width:142});const{description:i,images:o={},dominant_color:r}=e,s=o["474x"],a=Math.min(217*s.height/s.width,450),d=n?a:214,l=n?217:142;return(0,u.jsx)(ge.Z,{additionalPinCount:t,height:d,pin:{description:i,dominantColor:r,imageUrl:s.url},rounded:!0,width:l})}function ve({pins:e}){const t=e.length>0&&e.length<=2?e.length:4,n=fe()(0,t).map((n=>(0,u.jsx)(d.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{padding:3}},children:(0,u.jsx)(be,{previewPin:e[n],extraPinCount:3===n?Math.max(e.length-t,0):0,showFullImage:1===e.length})},n)));return(0,u.jsx)(d.xu,{alignItems:"center",display:0===e.length||e.length>2?"inlineBlock":"flex",height:440,justifyContent:"center",width:296,children:n})}var xe=n(9757);function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _e extends m.Component{constructor(e){var t;super(e),ye(this,"showSuccessToast",(()=>{const{movedBoard:e,movedSection:t}=this.state,{board:n,inSelectAll:i,toastManagerContext:o}=this.props;if(i)o.showOneToast((({onHide:e})=>(0,u.jsx)(r.ZP,{duration:xe.Au,onHide:e,text:this.props.i18n._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move.")})));else if(e){var s;const i=t?(0,a.nk)(this.props.i18n._("Moved to {{sectionName}} in {{boardName}}","Toast for successfully moving pins to a section within a board","Toast for successfully moving pins to a section within a board"),{sectionName:t.title,boardName:e.name}).join(""):(0,a.nk)(this.props.i18n._("Moved to {{boardName}}","Toast for successfully moving pins to a different board","Toast for successfully moving pins to a different board"),{boardName:e.name}).join(""),d=t?`${null!==(s=e.url)&&void 0!==s?s:""}${t.slug}`:e.url;o.showOneToast((({onHide:e})=>{var t;return(0,u.jsx)(r.ZP,{duration:xe.Au,href:d,imageUrl:null!==(t=n.image_cover_url)&&void 0!==t?t:"",onHide:e,text:i})}))}})),ye(this,"handleMove",((e,t)=>{const{board:n,boardSection:i,dispatch:o,inSelectAll:r,onCompleteMove:s,selectedPinIds:a}=this.props,d={boardId:n.id,sectionId:i&&i.id||null},l={boardId:e.id,sectionId:t&&t.id||null};if(d.boardId===l.boardId&&d.sectionId===l.sectionId)return;const c=l.sectionId||l.boardId;this._setBoardSavedTo(c,xe.SN.LOADING),o((0,oe.Z)({inverseSelection:r,selectedPinIds:a,source:d,target:l},this.props.i18n)).then((()=>{this._setBoardSavedTo(c,xe.SN.SUCCESS),this.setState({movedBoard:e,movedSection:t}),s()}))})),ye(this,"handleSectionedBoardSelect",(e=>{this.setState({initialBoardName:"",selectedBoard:e})})),ye(this,"handleSectionCreateComplete",(e=>{const{onCompleteMove:t,toastManagerContext:n}=this.props;t();const i=(0,a.nk)(this.props.i18n._("Moved to {{sectionName}} in {{boardName}}","moveSectionModal.handleSectionCreate.toast","Toast for successfully moving pins to a section within a board"),{sectionName:e.title,boardName:e.board.name});n.showOneToast((({onHide:t})=>{var n;return(0,u.jsx)(r.ZP,{duration:xe.Au,href:`${null!==(n=e.board.url)&&void 0!==n?n:""}${e.slug}`,imageUrl:" ",onHide:t,text:i.join("")})}))})),ye(this,"handleShowCreate",(e=>{this.setState({initialBoardName:e,showCreate:!0})})),ye(this,"handleHideCreate",(()=>{const{onClearModal:e,sectionCount:t}=this.props;0===t?e():this.setState({initialBoardName:"",showCreate:!1})}));const{board:n,viewer:i,showCreateOnly:o}=e;this.state={boardSavedTo:null,initialBoardName:"",movedBoard:null,movedSection:null,selectedBoard:e.board,showCreate:o||(null===(t=n.owner)||void 0===t?void 0:t.id)!==i.id&&0===n.section_count}}componentWillUnmount(){const{dispatch:e,viewer:t}=this.props,{movedBoard:n,movedSection:i}=this.state;n&&(!i&&t.isAuth&&e((0,pe.jB)("BoardFeedResource",(0,he.q)(n,t))),this.showSuccessToast())}_setBoardSavedTo(e,t){this.setState({boardSavedTo:{board:e,state:t}})}render(){const{board:e,boardSection:t,inSelectAll:n,onClearModal:i,selectedPinIds:o,selectedPins:r,shouldShowOtherBoards:s}=this.props,{boardSavedTo:a,initialBoardName:l,selectedBoard:c,showCreate:h}=this.state,p=n?330:660;return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Choose the section or board you want to move pins to","moveSectionModal.modal.accessibilityLabelForModal","Accessibility label for modal"),onDismiss:i,size:p,children:(0,u.jsxs)(d.xu,{color:"white",display:"flex",height:540,rounding:2,width:p,children:[!n&&(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},marginBottom:6,paddingX:2,children:(0,u.jsx)(ve,{pins:r})}),h?(0,u.jsx)(ie.Z,{board:c,completeCreateSectionAction:this.handleSectionCreateComplete,initialName:l,onClearModal:this.handleHideCreate,pinImport:{all:n,pinIds:o},showTitle:!0}):(0,u.jsx)(ce,{board:c,boardSavedTo:a,onMove:this.handleMove,onSectionCreate:this.handleShowCreate,onSectionedBoardSelect:this.handleSectionedBoardSelect,selectedRowId:t&&t.id||e&&e.id,showOtherBoards:s})]})})}}function we(e){const t=(0,s.ZP)(),n=(0,i.useDispatch)(),o=(0,ue.Z)(),r=o.isAuth?o.id:"",a=(0,i.useSelector)((({pins:t})=>e.selectedPinIds.reduce(((e,n)=>{const i=t[n];return i?e.concat([i]):e}),[]))),d=(0,i.useSelector)((({pins:t})=>(0,ne.Z)({action:2,board:e.board,viewer:o})||!e.selectedPinIds.some((e=>{const n=t[e];return n&&n.pinner&&n.pinner.id&&n.pinner.id!==r})))),c=(0,i.useSelector)((({boards:t})=>{var n;return null!==(n=(t.content[e.board.id]||{}).section_count)&&void 0!==n?n:0}));return(0,u.jsx)(_e,{...e,dispatch:n,sectionCount:c,selectedPins:a,shouldShowOtherBoards:d,toastManagerContext:(0,l.F9)(),viewer:o,i18n:t})}var Ce=n(956997),Se=n(330658),je=n(325616);function Ie(e,t){return t.isAuth&&(e||{}).id===t.id}var Ee=n(627578),Te=n(726369),Pe=n(221487);function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ke extends m.Component{constructor(...e){super(...e),De(this,"state",{section:null}),De(this,"handleSectionChange",(e=>{this.setState({section:e})})),De(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{section:t}=this.state;t&&e(t)}))}render(){const{board:e,boardSection:t,onCancel:n}=this.props,{section:i}=this.state;return(0,u.jsx)(f.Z,{size:"md",accessibilityModalLabel:this.props.i18n._("Move Pins","BoardPage.ModalContents.SectionMergeModal","accessibility label for merging modal"),onDismiss:()=>{n()},heading:i?this.props.i18n._("Move Pins and delete section?","title for board section merging modal","title for board section merging modal"):this.props.i18n._("Move all Pins to...","title for board section merging modal","title for board section merging modal"),footer:(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsxs)(d.hE,{children:[(0,u.jsx)(d.zx,{onClick:n,text:this.props.i18n._("Cancel"," - "," -- "),size:"lg"}),(0,u.jsx)(d.zx,{color:"red",disabled:!i,onClick:this.handleSubmit,text:this.props.i18n._("Move Pins and delete section","button for merging a board section","button for merging a board section"),size:"lg"})]})}),children:(0,u.jsx)(d.xu,{padding:8,minHeight:400,children:(0,u.jsx)(Pe.Z,{board:e,mergingFromSectionId:t.id,onSectionChange:this.handleSectionChange,selectedSectionId:i?i.id:null})})})}}function Oe(e){const t=(0,s.ZP)();return(0,u.jsx)(ke,{...e,i18n:t})}var Re=n(578429),Be=n(411221),Ae=n(311866),Me=n(613330),Le=n(234316);function Ze(e,t,n,i){return o=>Ae.ZP.create("BoardSectionEditResource",{section_id:t,title:n,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate({showError:!1}).then((t=>{const n=t.resource_response.data;return o(function(e,t){return n=>{const i=t.board;i&&i.id!==e?(n((0,je.H)(e,t.id)),n((0,Be.Z)({feedId:e,feedType:Me.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n((0,c.Tq)(e,"pin_count")),n((0,Le.h)(i.id,t)),n((0,Re.Z)({feedId:i.id,feedType:Me.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n((0,c.Tq)(e,"pin_count"))):n({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}}(e,n)),o((0,pe.jB)("BoardSectionsRepinResource",{board_id:e})),n}))}var Ne=n(367599),Fe=n(767523),Ue=n(159276),He=n(708206);function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class We extends m.Component{constructor(...e){super(...e),ze(this,"state",{deleting:!1,editMode:"main",title:this.props.boardSection.title}),ze(this,"handleSaveSection",(e=>{if(e.preventDefault(),this.saveDisabled())return;const{board:t,boardSection:n,dispatch:i,onSaveSection:o,viewer:r,orbacActingAs:s}=this.props,{title:a}=this.state,d=(0,Ue.lJ)(r,s);i(Ze(t.id,n.id,a.trim(),d)).then(o).catch((e=>this.setState({titleErrorMessage:e.message||this.props.i18n._("Invalid section name","error message of section name input field","error message of section name input field")})))})),ze(this,"saveDisabled",(()=>this.state.title===this.props.boardSection.title||""===this.state.title.trim())),ze(this,"handleChangeTitle",(({value:e})=>{this.setState({title:e,titleErrorMessage:void 0})})),ze(this,"handleDeleteSectionButtonClick",(()=>{this.setState({editMode:"confirmDelete"})})),ze(this,"handleMergeButtonClick",(()=>{this.setState({editMode:"merge"})})),ze(this,"handleBackToMainMenu",(()=>{this.setState({editMode:"main"})})),ze(this,"handleDeleteSection",(()=>{const{board:e,boardSection:t,dispatch:n,onDeleteSection:i,toastManagerContext:o,viewer:s,orbacActingAs:a}=this.props;if(this.state.deleting)return;const{id:d}=t;this.setState({deleting:!0}),n((0,je.Z)(e.id,d,(0,Ue.lJ)(s,a))).then((()=>{i(),o.showToast((({onHide:e})=>(0,u.jsx)(r.ZP,{onHide:e,text:this.props.i18n._("Section deleted!","Toast for successfully deleting a board section","Toast for successfully deleting a board section")})))})).catch((e=>Ee.Z.showError(e.message||this.props.i18n._("Failed to delete the section","error message for failed to delete section","error message for failed to delete section"))))})),ze(this,"handleMergeSection",(e=>{var t;const{board:n,boardSection:i,dispatch:o,showBlockingActionToast:r,onDeleteSection:s}=this.props;this.state.deleting||(this.setState({deleting:!0}),this.props.logContextEvent({event_type:7173,object_id_str:i.id,aux_data:{merge_flow:"menu"}}),o((0,Te.Z)(n.id,i.id,null!==(t=e.id)&&void 0!==t?t:"")).then(s).then((()=>{r({actionType:"merge",board:n,section:e})})).catch((e=>Ee.Z.showError(e.message||this.props.i18n._("Failed to merge the section","error message for failed to merge section","error message for failed to merge section")))))}))}componentDidMount(){window.requestAnimationFrame((()=>{const e=this._textField;e&&(e.focus(),e.select())}))}render(){const{board:e,boardSection:t,onClearModal:n,viewer:i,orbacActingAs:r}=this.props,{title:s,titleErrorMessage:a,editMode:l}=this.state,c=Ie(t.user,i)||(0,ne.Z)({action:10,board:e,viewer:i})||(0,Ue.KY)(i,e,r),h=e.section_count>1&&(Ie(t.user,i)||(0,ne.Z)({action:13,board:e,viewer:i}));return"confirmDelete"===l?(0,u.jsx)(o.Z,{confirmButtonLabel:this.props.i18n._("Delete section","button for deleting a board section","button for deleting a board section"),onCancel:this.handleBackToMainMenu,onConfirm:this.handleDeleteSection,message:this.props.i18n._("Once you delete a section and all its Pins, you can't undo it!"," - "," -- ")}):"merge"===l?(0,u.jsx)(Oe,{board:e,boardSection:t,onCancel:this.handleBackToMainMenu,onSubmit:this.handleMergeSection}):(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Edit your section"," - "," -- "),size:"md",onDismiss:n,heading:this.props.i18n._("Edit your section"," - "," -- "),footer:(0,u.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,u.jsx)(d.sg,{span:6,children:(c||h)&&(0,u.jsxs)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[c&&(0,u.jsx)(d.xu,{"data-test-id":"delete-section-button",paddingX:1,children:(0,u.jsx)(d.zx,{onClick:this.handleDeleteSectionButtonClick,text:this.props.i18n._("Delete","Delete button","Delete button")})}),h&&(0,u.jsx)(d.xu,{paddingX:1,children:(0,u.jsx)(d.zx,{onClick:this.handleMergeButtonClick,text:this.props.i18n._("Merge","button for merging a board section","button for merging a board section")})})]})}),(0,u.jsx)(d.sg,{span:6,children:(0,u.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,u.jsx)(d.xu,{marginEnd:3,children:(0,u.jsx)(d.zx,{text:this.props.i18n._("Cancel"," - "," -- "),onClick:n})}),(0,u.jsx)(d.zx,{type:"submit",color:"red",text:this.props.i18n._("Save"," - "," -- "),disabled:this.saveDisabled(),onClick:({event:e})=>{this.handleSaveSection(e)}})]})})]}),children:(0,u.jsx)("form",{onSubmit:this.handleSaveSection,children:(0,u.jsx)(d.xu,{display:"flex",direction:"column",padding:8,children:(0,u.jsx)(d.nv,{errorMessage:a,id:"title",label:this.props.i18n._("Name"," - "," -- "),onChange:this.handleChangeTitle,ref:e=>{this._textField=e},size:"lg",value:s})})})})}}const $e=(0,He.compose)((0,i.connect)(),Ne.ZP,l.Cl)((function(e){const{logContextEvent:t}=(0,Y.v)(),n=(0,s.ZP)(),i=(0,ue.Z)(),o=(0,Fe.Z)();return(0,u.jsx)(We,{...e,i18n:n,viewer:i,orbacActingAs:o,logContextEvent:t})}));function Ge({source:e,target:t,onConfirm:n,onCancel:i}){const o=(0,s.ZP)();return(0,u.jsx)(f.Z,{accessibilityModalLabel:o._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),heading:o._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),onDismiss:i,footer:(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsxs)(d.hE,{children:[(0,u.jsx)(d.zx,{onClick:i,text:o._("Cancel"," - "," -- ")}),(0,u.jsx)(d.zx,{color:"red",onClick:n,text:o._("Move Pins and delete section","button for merging a board section","button for merging a board section")})]})}),children:(0,u.jsx)(d.xu,{padding:8,children:(0,u.jsx)(d.xv,{children:(0,a.nk)(o._("You're about to move all Pins from your {{ sourceName }} section to your {{ targetName }} section.","helper text for section merge confirmation modal","helper text for section merge confirmation modal"),{sourceName:(0,u.jsx)(d.xv,{inline:!0,weight:"bold",children:e.title},"source"),targetName:(0,u.jsx)(d.xv,{inline:!0,weight:"bold",children:t.title},"target")})})})})}var Ve=n(597168),qe=n(691951);function Ye({actions:e,board:t,boardSection:n,bulkEditSelectedPins:i,currentModal:o,groupPinsData:r,inSelectAll:s,onClearModal:a,mergeConfirmationModalProps:d}){var l,c;const{completeCreateSectionAction:m,completeMoveAction:f,onBoardArchiveChange:b,onBoardDelete:v,onBoardLeave:x,onBoardSectionDelete:y,onBoardSectionSave:w,onConfirmMergeSection:C,onCopyPinsToBoard:S,onDeletePins:j,onBoardMerge:I}=e;switch(o){case qe.s.boardArchiveConfirmation:return b?(0,u.jsx)(h,{shouldArchive:!0,board:t,onClose:a,onConfirm:b}):null;case qe.s.boardUnarchiveConfirmation:return b?(0,u.jsx)(h,{shouldArchive:!1,board:t,onClose:a,onConfirm:b}):null;case qe.s.boardEdit:return(0,u.jsx)(g.Z,{boardId:t.id,onBoardArchiveChange:b,onBoardDelete:v,onBoardLeave:x,onClose:a});case qe.s.bulkDelete:return j?(0,u.jsx)(A,{pinCountToDelete:i&&i.length||0,onCompleteBulkDelete:j,onClearModal:a}):null;case qe.s.bulkCopy:return S?(0,u.jsx)(N,{currentBoardId:t.id,onCopyToBoard:S,onClearModal:a,pinCountToCopy:i&&i.length||0}):null;case qe.s.collaboratorsAndPermissions:return(0,u.jsx)(p.Z,{board:t,onDismiss:a});case qe.s.editSection:return n?(0,u.jsx)($e,{board:t,boardSection:n,onClearModal:a,onDeleteSection:y,onSaveSection:w}):null;case qe.s.mergeBoard:return I?(0,u.jsx)(E,{onCancel:a,onSubmit:I,sourceBoardId:t.id}):null;case qe.s.createSection:case qe.s.moveSection:return!!i&&!!f&&(0,u.jsx)(we,{board:t,boardSection:n,inSelectAll:!!s,selectedPinIds:i,showCreateOnly:o===qe.s.createSection,onClearModal:a,onCompleteMove:f});case qe.s.sectionMergeConfirm:return d&&C?(0,u.jsx)(Ge,{onCancel:a,onConfirm:C,source:d.source,target:d.target}):null;case qe.s.followers:return(0,u.jsx)(_,{boardId:t.id,onDismiss:a,followersCount:null!==(l=t.follower_count)&&void 0!==l?l:0});case qe.s.pincode:return(0,u.jsx)(Ce.Z,{onHide:a,objectId:t.id,children:(0,u.jsx)(B,{boardId:t.id,customizable:!(null===(c=t.owner)||void 0===c||!c.is_partner)})});case qe.s.jumpstartBoard:return(0,u.jsx)(te,{board:t,onDismiss:a});case qe.s.simpleCreateSection:return m?(0,u.jsx)(Se.Z,{selectedBoard:t,onClose:a,onSectionCreate:m}):null;case qe.s.groupPins:return(0,u.jsx)(Ve.Z,{boardId:t.id,clusterId:null==r?void 0:r.clusterId,suggestedSectionTitle:(null==r?void 0:r.suggestedSectionName)||"",onDismiss:a});default:return null}}},691951:(e,t,n)=>{n.d(t,{s:()=>i});const i={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",groupPins:"groupPins",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},619581:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(40142),r=n(304194),s=n(152214),a=n(855168);function d(){const e=(0,o.useDispatch)(),t=(0,a.k6)(),{pathname:n}=(0,a.TH)(),d=(0,o.useSelector)((({ui:e})=>e.mainComponent.locationToErrorMap));(0,i.useEffect)((()=>{(0,r.Z)();const i=`/${n.split("/")[1]}/`;d[n]&&(e((0,s.m)(i,d[n])),t.replace(i))}),[])}},187851:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(40142),r=n(627578),s=n(726369),a=n(174523),d=n(734125),l=n(457175),c=n(104216);function u({board:e}){const{logContextEvent:t}=(0,l.v)(),n=(0,a.ZP)(),[u,h]=(0,i.useState)(null),p=(0,o.useDispatch)(),{showBlockingActionToast:g}=(0,d.Z)(),m=(0,c.Z)({shouldStopEventPropagation:!1}),f=(0,i.useCallback)(m((()=>{if(!u)return;const{source:i,target:o}=u;h(null),t({event_type:7173,object_id_str:i.id,aux_data:{merge_flow:"dnd"}}),p((0,s.Z)(e.id,i.id,o.id)).then((()=>{g({actionType:"merge",board:e,section:o})})).catch((e=>{r.Z.showError(e.message||n._("Failed to merge sections","useSectionMergeAction.errorMessage","Error message when failed to merge sections"))}))})),[null==u?void 0:u.source,null==u?void 0:u.target]);return{handleShowMergeSectionsConfirmationModal:m(((e,t)=>{h({source:e,target:t})})),mergeConfirmationModalProps:u,onConfirm:f}}},395308:(e,t,n)=>{n.d(t,{Z:()=>zt});var i=n(667294),o=n(40142),r=n(396026),s=n.n(r),a=n(883119),d=n(785893);const l=80,c=1.2;function u({layoutType:e,thumbnails:t}){switch(e){case 4:const e=t&&t[0]&&t[0]["236x"];return(0,d.jsx)(a.zd,{rounding:4,width:l,height:80,children:e?(0,d.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:e.height,naturalWidth:e.width,src:e.url||""}):(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{color:"lightGray",height:l,width:39.4}),(0,d.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:c}},children:[(0,d.jsx)(a.xu,{color:"lightGray",height:39.4,width:39.4}),(0,d.jsx)(a.xu,{color:"lightGray",dangerouslySetInlineStyle:{__style:{marginTop:"1.2px"}},height:40.6,width:39.4})]})]})});case 2:return(0,d.jsx)(a.zd,{rounding:4,width:l,height:80,children:(0,d.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:s()(0,2).map((e=>{const n=!!t&&t.length>0&&t[e];return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:c}},children:(0,d.jsx)(a.xu,{height:l,width:39.4,children:n&&(0,d.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:l,naturalWidth:39.4,src:n["236x"].url||""})})},e)}))})});default:return null}}var h=n(520108),p=n(457175);const g=[502043,502085,502419];function m({boardId:e,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n}){return(0,d.jsx)(h.Z,{placementId:18,eligibleIds:g,children:({experience:i,complete:o,dismiss:r})=>(0,d.jsx)(f,{boardId:e,displayData:i.display_data,complete:o,dismiss:r,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n})})}function f({boardId:e,displayData:t,complete:n,dismiss:o,handleShowArchiveConfirmation:r,handleShowGroupPinsModal:s}){const{logContextEvent:l}=(0,p.v)(),c=t.custom_properties,[h,g]=(0,i.useState)(null);(0,i.useEffect)((()=>()=>clearTimeout(h)),[h]);const m={2:r,3:()=>{c&&s(c.cluster_id,c.section_name)}};return(0,i.useEffect)((()=>{(e=>{if(!h){const t=setTimeout((()=>{e()}),2e4);g(t)}})(o),l({event_type:13,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}})}),[]),(0,d.jsx)(a.mh,{children:(0,d.jsxs)("div",{className:"BoardActionUpsellCard",children:[(0,d.jsx)(a.xu,{flex:"none",children:(0,d.jsx)(u,{layoutType:t.layout_type,thumbnails:t.thumbnail_image_urls})}),(0,d.jsxs)(a.xu,{marginStart:4,children:[(0,d.jsx)(a.xv,{inline:!0,children:(0,d.jsx)(a.X6,{size:"sm",children:t.text})}),(0,d.jsxs)(a.xu,{display:"flex",justifyContent:"start",marginTop:4,width:"100%",children:[(0,d.jsx)(a.zx,{color:"gray",onClick:()=>{l({event_type:123,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),o()},text:t.dismiss_button.text}),(0,d.jsx)(a.xu,{paddingX:2,children:(0,d.jsx)(a.zx,{color:"red",onClick:()=>{m[t.complete_button.action_type](),l({event_type:101,view_type:5,view_parameter:3069,element:11758,object_id_str:JSON.stringify(t.experience.experience_id),aux_data:{board_id:e}}),n()},text:t.complete_button.text})})]})]})]})})}var b=n(389609);function v({density:e,surface:t},n){(0,b.Z)({boardDensity:e,component:"board"===t?13183:13187,surface:"board",viewType:"board"===t?5:164},n)}var x=n(207395),y=n(803478),_=n(101267),w=n(174523),C=n(816670);function S({board:e,currentFilter:t,eligibleFilters:n,isOwnBoard:r,surface:s,setCurrentFilter:l,setTitle:c}){const{logContextEvent:u}=(0,p.v)(),h=(0,w.ZP)(),g=(0,i.useRef)(null),m=(0,o.useSelector)((({ui:e})=>{var t;return null==e||null===(t=e.views)||void 0===t?void 0:t.boardPinView})),[f,b]=(0,i.useState)(!1),S=()=>{b(!1)},j=[],I={[C.cg]:12111,[C.c7]:12110,[C.Ac]:12227};if(n){const i={items:n.map((n=>{var i;return{isSelected:n.pin_type===t,onClick:()=>{var t,i;u({event_type:101,component:13475,element:I[null!==(t=n.pin_type)&&void 0!==t?t:-1],object_id_str:e.id,view_type:5,view_parameter:r?3069:3070}),l(null!==(i=n.pin_type)&&void 0!==i?i:-1),c(n.pin_type===C.cg?null:n.text),S()},text:null!==(i=n.text)&&void 0!==i?i:""}})),label:h._("Filter by type","board.experimentalBoardActionBar.filterOptions","List of board filter options")};j.push(i)}return j.push(function({handleClose:e,selectedDensity:t,surface:n},i,o){return{items:[{isSelected:"regular"===t,onClick:()=>{e(),v({density:"regular",surface:n},o)},text:i._("Default","BoardHeader.ActionBar.DensityOption-Default","Clickable text to set board view density to default mode")},{isSelected:"dense"===t,onClick:()=>{e(),v({density:"dense",surface:n},o)},text:i._("Compact","BoardHeader.ActionBar.DensityOption-Compact","Clickable text to set board view density to compact mode")}],label:i._("View options","BoardHeader.ActionBar.ViewOptions","List of board view options")}}({handleClose:S,selectedDensity:m,surface:s},h,u)),(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.xu,{ref:g,children:(0,d.jsx)(a.hU,{accessibilityLabel:h._("Board Filter","board.experimentalBoardActionBar.boardFilter","Filter to select specific Pins on board"),icon:"filter",iconColor:"darkGray",onClick:()=>{u({event_type:101,element:12020,object_id_str:e.id,view_type:5,view_parameter:r?3069:3070}),b(!f)},selected:f,size:"lg"})}),f&&(0,d.jsx)(x.Z,{anchor:g.current,onDismiss:S,size:"lg",children:j.map((({items:e,label:t})=>(0,d.jsx)(y.Z,{label:t,children:e.map((({isSelected:e,onClick:t,text:n})=>(0,d.jsx)(_.Z,{icon:e?"selected":null,onClick:t,children:n},n)))},t)))})]})}var j=n(778527),I=n(946753);const E=(0,j.ZP)(1000332)((function({board:e,currentFilter:t,isOwnBoard:n,section:o,setCurrentFilter:r,showExperienceTooltip:s}){const l=(0,w.ZP)(),{eligible_pin_type_filters:c}=null!=o?o:e,[u,p]=(0,i.useState)(null),g=(0,i.useRef)(null),m=o?o.pin_count:e.pin_count;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(a.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:8,children:[(0,d.jsx)(a.xu,{flex:"grow",children:(0,d.jsx)(a.X6,{accessibilityLevel:2,size:"sm",children:t>0&&u?u:(0,I.nk)(l.ngettext("{{ pinCount }} Pin","{{ pinCount }} Pins",null!=m?m:0,"board.experimentalBoardActionBar.pinCount","Number of Pins on board or section"),{pinCount:m})})}),(0,d.jsx)(a.xu,{ref:g,children:(0,d.jsx)(S,{board:e,isOwnBoard:n,currentFilter:t,eligibleFilters:c,setCurrentFilter:r,setTitle:p,surface:o?"section":"board"})})]}),s&&g&&(0,d.jsx)(a.mh,{children:(0,d.jsx)(h.Z,{eligibleIds:[502974],placementId:1000332,children:({dismiss:e,experience:{display_data:t}})=>((e,t)=>{var n;return g&&(null===(n=g.current)||void 0===n||n.scrollIntoView(!1)),(0,d.jsx)(a.J2,{showCaret:!0,anchor:g.current,color:"blue",idealDirection:"down",onDismiss:e,shouldFocus:!1,size:312,children:(0,d.jsx)(a.xu,{padding:3,children:(0,d.jsx)(a.xv,{align:"center",color:"white",overflow:"normal",weight:"bold",children:t.text})})})})(e,t)})})]})}));var T=n(927550),P=n(463112),D=n(518730),k=n(578805),O=n(406191),R=n(451190),B=n(893945);function A(){const e=(0,w.ZP)(),t=(0,d.jsx)(a.xu,{display:"flex",justifyContent:"center",paddingX:8,children:(0,d.jsx)(a.xv,{children:(0,I.nk)(e._("Add a {{ star }} to show collaborators your favorite Pins","groupBoardFavoriteEducationModal.text","Text for modal informing users of changes from group board reactions to board favorites"),{star:(0,d.jsx)(a.xu,{display:"inlineBlock",children:(0,d.jsx)(a.JO,{accessibilityLabel:e._("Favorite icon","groupBoardFavoriteEducationModal.bodyFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:B.W,size:12})})})})}),n=t=>(0,d.jsx)(a.kC,{justifyContent:"end",children:(0,d.jsx)(a.zx,{onClick:()=>t(),text:e._("Got it","groupBoardFavoriteEducationModal.doneButton","Done button for modal")})}),i=t=>(0,d.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingX:4,paddingY:6,position:"relative",children:[(0,d.jsx)(a.xu,{maxWidth:400,children:(0,d.jsx)(a.X6,{align:"center",size:"md",children:(0,I.nk)(e._("{{ heart }}  is now  {{ star }}","groupBoardFavoriteEducationModal.heading","Heading for modal informing users of changes from group board reactions to board favorites"),{heart:(0,d.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,d.jsx)(a.JO,{accessibilityLabel:e._("Heart icon","groupBoardFavoriteEducationModal.headingHeartIcon","Accessibility label for heart icon"),color:"darkGray",icon:"heart",size:16})}),star:(0,d.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,d.jsx)(a.JO,{accessibilityLabel:e._("Favorite icon","groupBoardFavoriteEducationModal.headingFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:B.W,size:16})})})})}),(0,d.jsx)(a.xu,{position:"absolute",top:!0,right:!0,padding:6,children:(0,d.jsx)(a.hU,{accessibilityLabel:e._("Close","groupBoardFavoriteEducationModal.closeModalButton","Accessibility label for close modal button"),icon:"cancel",iconColor:"darkGray",onClick:t})})]});return(0,d.jsx)(h.Z,{eligibleIds:[503077],placementId:18,children:({complete:o,dismiss:r})=>(0,d.jsx)(R.Z,{accessibilityModalLabel:e._("Group board reaction","groupBoardFavoriteEducationModal.modalAccessibilityLabel","Accessiblility label for modal used to educate group board collaborators about favorite button"),footer:n(o),heading:i(r),onDismiss:r,size:"sm",children:t})})}var M=n(711349),L=n(570970),Z=n(41425),N=n(34411),F=n(648381),U=n(613330),H=n(691951);const z=()=>{};function W({board:e,currentView:t,handleContentViewChange:n,handleSetCurrentModal:r,handleShowEditSectionModal:s,handleShowMergeSectionsConfirmationModal:l,isOwnerOrCollaborator:c,isOwnBoard:u,isPinGridSorted:h,refreshBoardData:p=z,refreshSectionData:g=z,section:m}){const f=(0,N.Z)(),b=(0,O.Z)({board:e,viewer:f}),v=(e.access||[]).includes("write"),x=(0,o.useSelector)((e=>e.ui.views.boardPinView)),y=(0,Z.Z)(m?(0,k.Z)(e,m):""),[_,w]=(0,i.useState)(C.cg),[S,j]=(0,i.useState)(!1),I=(0,o.useDispatch)();(0,i.useEffect)((()=>()=>{_!==C.cg&&I(m?(0,M.Z)(U.DV.SECTION_PINS,m.id):(0,M.Z)(U.DV.BOARD_PINS,e.id))}),[e,_,I,m]);const R=()=>{_>0&&(w(C.cg),m?g():p())};return m?(0,d.jsx)(F.k,{value:{currentFilter:_,eligibleFilters:m.eligible_pin_type_filters,refreshData:g,sectionId:m.id},children:(0,d.jsxs)(i.Fragment,{children:[c&&(0,d.jsx)(E,{board:e,currentFilter:_,isOwnBoard:u,section:m,setCurrentFilter:w,showExperienceTooltip:!1}),(0,d.jsx)(D.Z,{board:e,boardSectionId:m.id,currentFilter:_,denseViewSelected:v&&"dense"===x,inSectionOrganizationMode:!1,inSelectAll:!1,isOwnBoard:u,refreshFilteredFeed:R,renderFooterStory:t=>!e.archived_by_me_at&&c&&(0,d.jsx)(a.xu,{marginBottom:12,children:(0,d.jsx)(P.Z,{children:(0,d.jsx)(L.Z,{collection:m,storyId:t,url:y})})}),viewer:f,viewParameter:b})]})}):(0,d.jsx)(F.k,{value:{currentFilter:_,eligibleFilters:e.eligible_pin_type_filters,refreshData:p,setShowExperienceTooltip:j},children:(0,d.jsxs)(i.Fragment,{children:[c&&(0,d.jsx)(E,{board:e,currentFilter:_,isOwnBoard:u,setCurrentFilter:w,showExperienceTooltip:S}),(0,d.jsx)(T.Z,{actions:{onBoardOrganizeClick:z},board:e,currentFilter:_,currentView:t,enableReordering:c,isOwnBoard:u,isPinGridSorted:h,onContentViewChange:n,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:(e,t)=>{r(H.s.sectionMergeConfirm),l(e,t)},refreshFilteredFeed:R,viewParameter:b}),c&&(0,d.jsx)(A,{})]})})}function $(e){e({event_type:101,element:10778,component:13216,view_type:5,view_parameter:3069})}function G({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:r,onUnarchiveClick:s,setFlyoutType:a,showCreatePinCodeOption:d},l,c){const u=[{dataTestId:"editBoardButton",text:l._("Edit board","BoardHeader.BoardOptionsFlyout.EditOption","Clickable text to enter board editing mode"),onClick:()=>{o(),e()}},{text:l._("Share","BoardHeader.BoardOptionsFlyout.ShareOption","Clickable text to show share options"),onClick:()=>{$(c),a("boardShare")}},{text:l._("Merge","BoardHeader.BoardOptionsFlyout.MergeOption","Clickable text to open merge board modal"),onClick:()=>{r(),e()}}];t?u.push({text:l._("Unarchive","BoardHeader.BoardOptionsFlyout.UnarchiveOption","Clickable text to open unarchive modal"),onClick:()=>{s(),e()}}):u.push({text:l._("Archive","BoardHeader.BoardOptionsFlyout.ArchiveOption","Clickable text to open archive modal"),onClick:()=>{n(),e()}}),d&&u.push({text:l._("Create Pincode","BoardHeader.BoardOptionsFlyout.PincodeOption","Clickable text to trigger Pincode modal"),onClick:()=>{i(),e()}});return{items:u,label:l._("Board options","BoardHeader.BoardOptionsFlyout.OptionsCategory","Category of board options in board flyout")}}function V({handleClose:e,onEditClick:t,setFlyoutType:n},i,o){return{items:[{dataTestId:"edit-section-button",text:i._("Edit Section","BoardHeader.getSectionOptionsCategory.EditOption","Clickable text to enter board editing mode"),onClick:()=>{t(),e()}},{text:i._("Share","BoardHeader.getSectionOptionsCategory.ShareOption","Clickable text to show share options"),onClick:()=>{$(o),n("boardShare")}}],label:i._("Section options","BoardHeader.getSectionOptionsCategory.OptionsCategory","Category of section options in section flyout")}}function q({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:l,setFlyoutType:c,showCreatePinCodeOption:u,surface:h}){const{logContextEvent:g}=(0,p.v)(),m=(0,w.ZP)(),f=[].concat(["section"===h?V({handleClose:e,onEditClick:r,setFlyoutType:c},m,g):G({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:s,onUnarchiveClick:l,setFlyoutType:c,showCreatePinCodeOption:u},m,g)]);return(0,d.jsx)(a.xu,{width:206,children:f.map((({items:e,label:t})=>(0,d.jsx)(y.Z,{label:t,children:e.map((({dataTestId:e,isSelected:t,onClick:n,text:i})=>(0,d.jsx)(_.Z,{dataTestId:e,icon:t?"selected":null,onClick:n,children:i},i)))},t)))})}var Y=n(930909),X=n(872284),J=n(237574);function K({board:e,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:l,showCreatePinCodeOption:c,surface:u}){const h=(0,w.ZP)(),p=(0,i.useRef)(null),[g,m]=(0,i.useState)(!1),[f,b]=(0,i.useState)("boardOptions"),v=()=>{m(!1),b("boardOptions")},y={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:J.d.BOARD,url:e.url},_=()=>{m((e=>!e)),b("boardOptions")},C=!!e.archived_by_me_at;return(0,d.jsxs)(a.xu,{position:"relative",children:[(0,d.jsx)(a.xu,{"data-test-id":"more-board-options",ref:p,children:(0,d.jsx)(a.hU,{accessibilityLabel:h._("More Board options","BoardHeaderOVerflowFlyoutButton.IconButton.AccessibilityLabel","Accessibility label on icon button"),bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:_,selected:g,size:"sm"})}),(0,d.jsx)(Y.Z,{anchors:{3001:p.current},onCompleteByAnchor:{3001:_},placementId:18}),g&&(0,d.jsx)(x.Z,{anchor:p.current,onDismiss:v,size:"boardOptions"===f?"lg":"xl",children:"boardOptions"===f?(0,d.jsx)(q,{handleClose:v,isArchived:C,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:l,setFlyoutType:b,showCreatePinCodeOption:c,surface:u}):(0,d.jsx)(X.Z,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:n,onHide:v,sendType:J.d.BOARD,sharedObject:y})})]})}var Q=n(151101),ee=n(925265);function te(e){const{faces:t,maxFaces:n,numFaces:i,onOverflowClick:o,shouldNavigate:r=!0}=e,s=[...t].reverse(),l=t.length>n?s.slice(0,n+1):s,c=i-n;return(0,d.jsx)(a.xu,{position:"relative",display:"flex",dangerouslySetInlineStyle:{__style:{flexDirection:"row-reverse"}},alignItems:"center",children:l.map(((e,t)=>{const{name:n,src:i,href:s,isDim:l}=e;if(0===t&&c>0)return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},width:44,height:44,marginStart:-2,rounding:"circle",overflow:"hidden",children:(0,d.jsx)(a.Ee,{src:i||"",alt:n,naturalWidth:44,naturalHeight:44,fit:"contain",children:(0,d.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:o,rounding:"circle",children:(0,d.jsx)(a.xu,{display:"flex",justifyContent:"center",alignItems:"center",rounding:"circle",width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},children:(0,d.jsx)(a.xv,{color:"white",size:"md",weight:"bold",children:(u=c,u>99?"99+":u)})})})})},t);{const e={__style:{opacity:l?.5:1}},o=(0,d.jsx)(a.xu,{marginStart:-2,dangerouslySetInlineStyle:e,children:(0,d.jsx)(Q.Z,{name:n,size:"sm",src:i,outline:!0})},t);return r?(0,d.jsx)(a.iP,{role:"link",href:s,rounding:"circle",children:o},t):o}var u}))})}function ne({invitedByUser:e,isAccepted:t,onDecline:n,onAccept:i,createdAt:o}){const r=(0,w.ZP)(),s=(0,N.Z)(),l=e||{},{first_name:c,full_name:u,username:h,image_medium_url:p}=l,g=c||u||r._("others","Default text when board colalborator name is not known.","Default text when board colalborator name is not known.");return(0,d.jsx)(a.W2,{children:t?(0,d.jsxs)(a.xu,{width:"100%",paddingX:5,paddingY:3,rounding:2,marginStart:-1,marginEnd:-1,display:"flex",direction:"row",alignItems:"center",borderStyle:"sm",children:[(0,d.jsx)(te,{maxFaces:2,numFaces:2,faces:[{href:s.isAuth?`/${s.username}`:"",name:s.isAuth?s.fullName:"",src:s.isAuth?s.imageMediumUrl:""},{href:`/${h}`,name:u,src:p}]}),(0,d.jsxs)(a.xu,{marginStart:2,children:[(0,d.jsx)(a.xv,{weight:"bold",children:r._("You're in!","Text showing that a user has accepted the board invite and is now a part of the board","Text showing that a user has accepted the board invite and is now a part of the board")}),(0,d.jsx)(a.xv,{children:(0,ee.Z)(r._("Start collaborating with {{ invitedByUserName }} on this board"," - "," -- "),{invitedByUserName:g})})]})]}):(0,d.jsx)(a.xu,{width:540,color:"white",paddingX:6,paddingY:6,rounding:6,marginStart:-1,marginEnd:-1,borderStyle:"shadow",children:(0,d.jsxs)(a.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(Q.Z,{name:u,src:p,size:"md"})}),(0,d.jsx)(a.xu,{flex:"grow",children:(0,d.jsx)(a.xv,{inline:!0,color:"darkGray",children:(0,I.nk)(r._("{{ user }} invited you to collaborate on this board {{ createdAt }}","web.boardView.inviteCard.text","Label used to indicate a Pinner has invited you to join a board"),{user:(0,d.jsx)(a.xv,{color:"darkGray",inline:!0,weight:"bold",children:(0,d.jsx)(a.rU,{inline:!0,href:`/${h}`,children:u})},h),createdAt:(0,d.jsx)(a.xv,{color:"gray",inline:!0,children:o})})})}),(0,d.jsxs)(a.xu,{display:"flex",alignItems:"center",paddingX:1,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:[(0,d.jsx)(a.xu,{marginEnd:2,display:"inlineBlock",children:(0,d.jsx)(a.zx,{onClick:n,text:r._("Decline","decline board collaborator invite or request","decline board collaborator invite or request"),color:"gray",size:"lg"})}),(0,d.jsx)(a.zx,{onClick:i,text:r._("Accept","Text to accept a board collaboration invite","Text to accept a board collaboration invite"),size:"lg",color:"red"})]})]})})})}var ie=n(311866),oe=n(881220),re=n(658726),se=n(535718),ae=n(40197),de=n(301314),le=n(880841);const ce=(0,le.Cl)((({boardId:e,inviteCode:t,shouldAutoAcceptBoardInvite:n,toastManagerContext:r,userInviterId:s})=>{const l=(0,w.ZP)(),c=(0,re.Z)(),[u,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),m=(0,N.Z)(),f=(0,o.useDispatch)(),b={board_id:e,field_set_key:"boardBanner",invite_code:t,invited_user_id:m.isAuth&&m.id};(0,i.useEffect)((()=>{s&&n&&(ie.ZP.create("BoardInviteResource",b).callUpdate().then((()=>{f((0,ae.A8)(e)),f((0,de.jB)("BoardInviteResource",b))})),ie.ZP.create("UserResource",{field_set_key:"grid_item",user_id:s}).callGet().then((({resource_response:e})=>{const t=e&&e.data;t&&g(t)})))}),[n,s]);const{data:v}=(0,se.Z)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}}),{data:x}=(0,se.Z)({name:"BoardInviteResource",options:b}),y=!(!s||!n)||u,_=!["new","contact_request_not_approved"].includes(null==x?void 0:x.status),C=[...v||[]].pop(),S=t=>{const n=ie.ZP.create("BoardInviteResource",b);(t?n.callUpdate():n.callDelete()).then((()=>{t&&(f((0,ae.A8)(e)),h(!0),r.showToast((({onHide:e})=>(0,d.jsx)(oe.ZP,{duration:5e3,onHide:e,text:l._("You're in! Save Pins, plan with collaborators, and more!","BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast","Text in toast after accepting a board collaborator invite.")})))),f((0,de.jB)("BoardInviteResource",b))}))},j=(null==x?void 0:x.invited_by_user)||p;return!j||_&&!y?null:(0,d.jsx)(a.xu,{marginTop:3,paddingY:0,children:(0,d.jsx)(ne,{invitedByUser:j,isAccepted:y,onAccept:()=>S(!0),onDecline:()=>S(!1),createdAt:c(C&&C.created_at,!0)})})}));var ue=n(254821),he=n(221469),pe=n(855168),ge=n(869950);function me({boardId:e}){const t=(0,pe.TH)(),n=t&&t.search?(0,he.mB)(t.search):{},i=n.invite_code,o=n.accept_invite,r=n.inviter_user_id;return(0,d.jsx)(ce,{boardId:e,inviteCode:i,shouldAutoAcceptBoardInvite:o,userInviterId:r})}const fe=function(e){const{board:t}=e,{id:n,sensitivity:o}=t,r=(0,ge.Uz)(o);return(0,d.jsxs)(i.Fragment,{children:[!r&&(0,d.jsx)(me,{boardId:n}),r&&(0,ge.Fx)(o)&&o&&(0,d.jsx)(a.xu,{paddingY:10,children:(0,d.jsx)(ue.Z,{notices:o.notices,viewType:5,sensitivity:o})})]})};function be(e){const t=(0,w.ZP)(),{color:n,size:i}=e;return(0,d.jsx)(a.JO,{accessibilityLabel:t._("secret board","accessible label for secret board icon","accessible label for secret board icon"),color:n,icon:"lock",size:i})}function ve({color:e,paddingX:t}){return(0,d.jsx)(a.xu,{display:"inlineBlock",paddingX:t,children:(0,d.jsx)(a.xv,{color:e,size:"md",weight:"bold",inline:!0,children:"·"})})}function xe({archived:e,secret:t}){const n=(0,w.ZP)();return(0,d.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[t&&(0,d.jsx)(be,{color:"gray",size:16}),t&&(0,d.jsx)(a.xu,{"data-test-id":"secret-board",paddingX:1,children:(0,d.jsx)(a.xv,{color:"gray",inline:!0,size:"lg",children:n._("Secret board","LegoBoardPageHeader.BoardStatus.secret","Label for a secret board")})}),t&&e&&(0,d.jsx)(ve,{color:"gray",paddingX:1}),e&&(0,d.jsx)(a.xu,{paddingX:1,children:(0,d.jsx)(a.xv,{color:"gray",inline:!0,size:"lg",children:n._("Archived board","LegoBoardPageHeader.BoardStatus.archived","Label for a secret board")})})]})}var ye=n(759712),_e=n(785078),we=n(151106),Ce=n(624500);function Se({board:e,collaborators:t,overflowNumber:n}){const o=(0,w.ZP)(),r=(0,i.useRef)(),[s,l]=(0,i.useState)(!1),c=t.map((e=>e.isDim?null:(0,d.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,d.jsx)(a.rU,{href:e.href||"",hoverStyle:"none",inline:!0,children:e.name})},e.name))).filter(Boolean);return n&&c.push((0,d.jsx)(a.xu,{display:"inlineBlock",ref:r,children:(0,d.jsx)(a.iP,{onTap:()=>l(!0),children:(0,d.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,I.nk)(o.ngettext("{{ overflowNumber }} other","{{ overflowNumber }} others",n,"LegoBoardPageHeader.CollaboratorNames.others","number of additional collaborators not listed"),{overflowNumber:n})})})},"overflowText")),(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.xv,{inline:!0,children:(0,Ce.Z)(c,o)}),s&&(0,d.jsx)(we.default,{anchor:r.current,board:e,onDismiss:()=>l(!1)})]})}var je=n(631739),Ie=n(686723),Ee=n(415401),Te=n(363570);function Pe(e,t){return t?e._("Join","BoardPage.BoardJoinButton.join","[Button] Request to join a group board as a collaborator"):e._("Request to join","[Button] Request to join a group board as a collaborator","[Button] Request to join a group board as a collaborator")}function De(e,t){return t?e._("Cancel","BoardPage.BoardJoinButton.cancel","[Button] Cancel request to join a group board as a collaborator"):e._("Cancel request","[Button] Cancel request to join a group board as a collaborator","[Button] Cancel request to join a group board as a collaborator")}function ke(e){const t=(0,w.ZP)(),{onClick:n,requested:i,size:o,useAlternateText:r}=e;return(0,d.jsx)(a.zx,{fullWidth:!0,onClick:n,size:o||"md",text:(i?De:Pe)(t,r)})}function Oe(e){const t=(0,w.ZP)(),{boardImage:n,boardName:i,boardUrl:o,onHide:r}=e,s=(0,d.jsx)(a.xv,{children:(0,I.nk)(t._("You've cancelled the request to collaborate on {{ boardName }}","Board.JoinButton.CancelToast","Toast text stating that a user has cancelled a request to join a board"),{boardName:(0,d.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,d.jsx)(oe.ZP,{duration:3e3,href:o,imageUrl:n,onHide:r,text:s})}function Re(e){const t=(0,w.ZP)(),{boardImage:n,boardName:i,boardUrl:o,onHide:r}=e,s=(0,d.jsx)(a.xv,{children:(0,I.nk)(t._("You've requested to join {{ boardName }}","Board.JoinButton.RequestToast","Toast text stating that a user has requested to join a board"),{boardName:(0,d.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,d.jsx)(oe.ZP,{href:o,imageUrl:n,onHide:r,text:s})}var Be=n(104216);function Ae(e,t){return ie.ZP.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:t})}function Me(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}function Le(e){const{boardId:t,boardImage:n,boardName:i,boardUrl:r,isBoardLandingPage:s,isRequestedByMe:l,showPulsar:c,size:u,variant:h}=e,{logContextEvent:g}=(0,p.v)(),m=(0,o.useDispatch)(),f=(0,N.Z)(),b=(0,le.F9)(),v=f.isAuth&&f.id||"",x=(0,Be.Z)();function y(){m(function(e,t){return n=>{Ae(e,t).callDelete({showError:!1}).catch((()=>{n(Me(e,!0))})),n(Me(e,!1))}}(t,v)),b.showOneToast((({onHide:e})=>(0,d.jsx)(Oe,{boardImage:n,boardName:i,boardUrl:r,onHide:e})))}function _(){m(function(e,t){return n=>{Ae(e,t).callCreate().catch((()=>{n(Me(e,!1))})),n(Me(e,!0))}}(t,v)),b.showOneToast((({onHide:e})=>(0,d.jsx)(Re,{boardImage:n,boardName:i,boardUrl:r,onHide:e})))}const w=({event:e})=>{e.preventDefault(),e.stopPropagation(),x(l?y:_)(),function(e){const{action:t,id:n,isBoardLandingPage:i,logContextEvent:o,url:r}=e;o({event_type:101,component:1,element:"request"===t?7499:7547,object_id_str:n,view_type:i?5:4,aux_data:{current_page_url:r}})}({action:l?"request":"cancel",id:t,isBoardLandingPage:!!s,logContextEvent:g,url:r})};return v?(0,d.jsxs)(a.xu,{position:"relative",display:"flex",children:[(0,d.jsx)(ke,{onClick:w,requested:l,useAlternateText:"lego"===h,size:u}),c&&(0,d.jsx)(a.iP,{onTap:e=>{w(e)},children:(0,d.jsx)(a.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,d.jsx)(a.o3,{paused:l})})})]}):null}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ne extends i.Component{constructor(...e){super(...e),Ze(this,"state",{flyoutOpen:!1}),Ze(this,"toggleFlyout",this.props.requireAuth((()=>{this.state.flyoutOpen||this.props.onOpen(),this.setState((e=>({flyoutOpen:!e.flyoutOpen})))})))}render(){const{board:e,bgColor:t="white",children:n,iconColor:o="gray",onCreatePincode:r}=this.props,{flyoutOpen:s}=this.state,l={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:J.d.BOARD,url:e.url},c=n&&n({active:s,onClick:this.toggleFlyout})||(0,d.jsx)(a.hU,{accessibilityLabel:this.props.i18n._("Send Board","Accessible label for button to send board","Accessible label for button to send board"),onClick:this.toggleFlyout,icon:"share",size:"lg",bgColor:t,iconColor:o});return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.xu,{ref:e=>{this.anchor=e},children:c}),this.state.flyoutOpen&&(0,d.jsx)(a.mh,{children:(0,d.jsx)(a.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.toggleFlyout,size:"xl",positionRelativeToAnchor:!1,children:(0,d.jsx)(X.Z,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:r?()=>{this.toggleFlyout(),r()}:void 0,onHide:this.toggleFlyout,sendType:J.d.BOARD,sharedObject:l})})})]})}}function Fe(e){const t=(0,w.ZP)(),n=(0,Be.Z)();return(0,d.jsx)(Ne,{...e,i18n:t,requireAuth:n})}function Ue({board:e,handleCreatePincode:t}){const{logContextEvent:n}=(0,p.v)(),i=(0,w.ZP)(),o=(0,Be.Z)()((()=>$(n)));return(0,d.jsx)(Fe,{board:e,onCreatePincode:t,onOpen:o,children:({onClick:e})=>(0,d.jsx)(a.zx,{fullWidth:!0,color:"gray",onClick:e,size:"lg",text:i._("Share","BoardHeader.SendBoardButton","Text on button to share board")})})}var He=n(767523),ze=n(272850);var We=n(159276),$e=n(181307),Ge=n(796025),Ve=n(92849),qe=n(577302),Ye=n(551687),Xe=n(169897),Je=n(689859);const Ke=(0,i.lazy)((()=>Promise.resolve().then(n.bind(n,151106))));function Qe({board:e,displayedCollaborators:t,nonDisplayedCollaboratorCount:n,handleShowCollabAndPermissionsModal:o}){const[r,s]=(0,i.useState)(!1),l=(0,N.Z)(),c=(0,i.useRef)(),u=(0,i.useRef)(),h=(0,pe.k6)(),p=(0,qe.Z)(l,e),g=p||e.collaborator_invites_enabled&&e.collaborated_by_me,m=(()=>{let n=()=>{var e;return h.push(null!==(e=t[0].href)&&void 0!==e?e:"/")};return t.length>1&&(n=()=>s(!r)),(p||e.collaborated_by_me)&&(n=o),n})(),f=[501003];p&&e.is_collaborative&&f.push(502335);const b=t.map((({name:e,src:t})=>e&&t?{name:e,src:t.endsWith("/default_75.png")?"":t}:{name:e,src:t}));return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[!e.collaborator_count||e.collaborator_count<=101?(0,d.jsx)(Ge.Z,{addButtonRef:u,collaboratorCount:e.collaborator_count||0,nonDisplayedCollaboratorCount:n,displayedCollaborators:b,onClick:m,ref:c,showAddButton:null!=g&&g}):(0,d.jsx)(Ve.Z,{addButtonRef:u,nonDisplayedCollaboratorCount:n,displayedCollaborators:b,onClick:m,pileRef:c,showAddButton:null!=g&&g}),(0,d.jsx)(Y.Z,{anchors:{3002:u.current},placementId:18,positionRelativeToAnchor:!1}),(0,d.jsx)(Xe.Z,{anchor:u.current,experienceIds:f,idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,customWrapper:({children:e})=>(0,d.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:new a.Ry(2),children:e})})]}),r&&(0,d.jsx)(Ye.Z,{name:"SafeSuspense_CollaboratorAvatarGroup_BoardCollabFlyout",children:(0,d.jsx)(Je.Z,{children:(0,d.jsx)(Ke,{anchor:c.current,board:e,onDismiss:()=>{s(!1),c.current&&c.current.focus()}})})})]})}function et(e){var t;const{board:n,collaborators:i,handleCreatePincode:o,handleShowCollabAndPermissionsModal:r,hideFollowers:s,isToolsBoard:l,onFollowersClick:c,overFlowActionsButton:u,showPulsar:h,userBlocked:p}=e,{access:g,archived_by_me_at:m,collaborator_requests_enabled:f,description:b,follower_count:v,id:x,image_cover_url:y,name:_,privacy:w,url:C,viewer_collaborator_join_requested:S}=n,{displayedCollaborators:j,nonDisplayedCollaboratorCount:I}=(0,_e.Z)({boardCollaboratorCount:n.collaborator_count,collaborators:i}),E=(0,N.Z)(),T=(0,He.Z)(),P=(0,We.D3)(E,(null===(t=n.owner)||void 0===t?void 0:t.id)||"",T),D=g&&g.includes("write")||P,k=(0,Te.Z)({viewer:E,board:n})||P,O=(0,$e.tc)("auth_web_board_copy_link"),R=!!m,B=w===je.Z.BoardPrivacy.PROTECTED,A=w===je.Z.BoardPrivacy.SECRET,M=!D&&!p,L=M&&f,Z=M&&!!o,F=!(!v||s||R||A||B),U=!k||b,H={description:n.description||"",id:n.id,imageUrl:n.image_cover_url,name:"",type:n.type,url:n.url};return(0,d.jsx)(a.xu,{direction:"column",display:"flex",justifyContent:"center",marginBottom:l?4:7,paddingX:8,width:"100%",children:(0,d.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,d.jsxs)(a.xu,{"data-test-id":"LegoBoardHeader__main",direction:"column",display:"flex",maxWidth:488,children:[(0,d.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,d.jsx)(a.xu,{maxWidth:800,children:(0,d.jsx)(fe,{board:n})})}),(0,d.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginStart:10,marginTop:4,children:(0,d.jsxs)(a.X6,{align:"center",children:[_,(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{display:"inline-flex"}},paddingX:2,children:u})]})}),(0,d.jsx)(ye.Z,{children:(0,d.jsx)(a.xu,{marginTop:2,children:(0,d.jsx)(Qe,{board:n,displayedCollaborators:j,nonDisplayedCollaboratorCount:I,handleShowCollabAndPermissionsModal:r})})}),U&&(0,d.jsx)(ye.Z,{children:(0,d.jsx)(a.xu,{marginTop:2,dangerouslySetInlineStyle:{__style:{textAlign:"center"}},children:(0,d.jsx)(Ee.Z,{inline:!0,items:[k?null:(0,d.jsx)(Se,{board:n,collaborators:j,overflowNumber:I},"collaborators"),b?(0,d.jsx)(a.xv,{inline:!0,children:b}):null]})})}),(0,d.jsx)(ye.Z,{children:(0,d.jsx)(a.xu,{marginTop:2,children:(R||A)&&(0,d.jsx)(xe,{archived:R,secret:A})})}),(0,d.jsx)(ye.Z,{children:F&&(0,d.jsx)(ze.P,{bold:!0,count:null!=v?v:0,onClick:c,shortform:!0,size:"lg"})}),(0,d.jsx)(ye.Z,{children:(L||Z)&&(0,d.jsxs)(a.xu,{direction:"row",display:"flex",justifyContent:"center",marginTop:5,width:"100%",children:[L&&(0,d.jsx)(a.xu,{paddingX:1,children:(0,d.jsx)(Le,{boardId:x,boardImage:null!=y?y:"",boardName:_,boardUrl:C,isRequestedByMe:Boolean(S),showPulsar:h,size:"lg",variant:"lego"})}),Z&&!!o&&(0,d.jsx)(a.xu,{paddingX:1,children:(0,d.jsx)(Ue,{board:n,handleCreatePincode:o})}),O().anyEnabled&&(0,d.jsx)(Ie.default,{sharedObject:H,backgroundColor:"#FFFFFF",iconColor:"#111111",iconSize:48,isCloseupActionBar:!0},"copylink")]})})]})})})}function tt({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:i,children:o}){const{data:r,isLoaded:s}=(0,se.Z)({name:"BoardCollaboratorsResource",options:{board_id:e},noCache:!0}),a=[{name:n,src:i,href:`/${t}/`}];return s&&r&&r.length>0&&r.forEach((e=>{const t=e.image_key||e.image_medium_url||e.image_small_url;a.push({name:e.full_name,src:t,href:`/${e.username}/`})})),o(a)}var nt=n(81);function it(e){const{boardImage:t,boardName:n,boardUrl:i,onHide:o}=e,r=(0,w.ZP)(),s=(0,d.jsx)(a.xv,{children:(0,I.nk)(r._("Now following {{ boardName }}","BoardFollowButton.FollowingToast.nowFollowing","Toast text displayed when a user follows a board"),{boardName:(0,d.jsx)(a.xv,{weight:"bold",children:n},"boardName")})});return(0,d.jsx)(oe.ZP,{onHide:o,text:s,href:i,imageUrl:t})}function ot(e){return ie.ZP.create("BoardFollowResource",{board_id:e})}function rt(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function st(e){const t=(0,w.ZP)(),{bgColor:n,board:r,canCreatePincode:s,canEdit:a,handleCreatePincode:l,handleOpenSendBoardFlyout:c,onEditClick:u,showFollow:h,showShare:p,size:g}=e,{id:m,name:f,url:b,image_cover_url:v}=r,[x,C]=(0,i.useState)(r.followed_by_me),{showOneToast:S}=(0,le.F9)(),j=(0,o.useDispatch)(),I=(0,Be.Z)()((()=>{x?(j(function(e){return t=>{ot(e).callDelete().catch((()=>{t(rt(e,!0))})),t(rt(e,!1))}}(m)),C(!1)):(j(function(e){return t=>{ot(e).callCreate().catch((()=>{t(rt(e,!1))})),t(rt(e,!0))}}(m)),C(!0),S((({onHide:e})=>(0,d.jsx)(it,{boardImage:null!=v?v:"",boardName:f,boardUrl:b,onHide:e}))))}));return(0,d.jsx)(nt.Z,{bgColor:n,icon:"ellipsis",label:t._("Other actions","profileHeader.actionBar.overflow","Accessibility label for button to open other options flyout"),size:g,children:()=>(0,d.jsxs)(y.Z,{label:t._("Board options","profileHeader.actionBar.overflow.header","Accessibility label header for board options flyout"),children:[a&&u&&(0,d.jsx)(_.Z,{onClick:()=>{u()},children:t._("Edit","BoardPage.ActionBar.PartnerEdit","Clickable text to enter board editing mode")}),a&&s&&l&&(0,d.jsx)(_.Z,{onClick:()=>{l()},children:t._("Create Pincode","BoardPage.ActionBar.PartnerPincode","Clickable text to trigger Pincode modal")}),p&&c&&(0,d.jsx)(Fe,{board:r,onCreatePincode:l,onOpen:c,children:({onClick:e})=>(0,d.jsx)(_.Z,{onClick:e,children:t._("Share","BoardPage.ActionBar.EllipsisButton","Button caption to share board")})}),h&&(0,d.jsx)(i.Fragment,{children:x?(0,d.jsx)(_.Z,{onClick:I,children:t._("Unfollow","BoardPage.ActionBar.EllipsisButton","Button caption to unfollow board")}):(0,d.jsx)(_.Z,{onClick:I,children:t._("Follow","BoardPage.ActionBar.EllipsisButton","Button caption to follow board")})})]})})}var at=n(8742);const dt=(0,i.forwardRef)(((e,t)=>{const{boardName:n,boardUrl:i,children:o,overFlowActionsButton:r,sectionName:s}=e;return(0,d.jsxs)(a.xu,{display:"flex",justifyContent:"center",marginBottom:8,paddingX:8,ref:t,width:"100%",children:[(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxWidth:488,children:[(0,d.jsx)(ye.Z,{children:(0,d.jsx)(a.xu,{marginTop:4,children:(0,d.jsx)(at.q,{children:({active:e,focused:t,hovered:o,onBlur:r,onFocus:s,onMouseEnter:l,onMouseLeave:c})=>(0,d.jsx)(a.iP,{role:"link",href:null!=i?i:"",onFocus:s,onBlur:r,onMouseEnter:l,onMouseLeave:c,children:(0,d.jsx)(a.X6,{align:"center",color:e||t||o?"darkGray":"gray",children:n})})})})}),(0,d.jsx)(ye.Z,{children:(0,d.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:-2,children:[(0,d.jsx)(a.X6,{align:"center",children:s}),!!r&&(0,d.jsx)(a.xu,{paddingX:1,children:r})]})})]}),o&&(0,d.jsx)(a.xu,{marginTop:8,children:o})]})}));dt.displayName="SectionHeader";const lt=dt;var ct=n(16719);function ut({board:e,handleBoardEditClick:t,handleFollowersClick:n,handleSectionEditClick:i,handleShowBoardArchiveConfirmation:o,handleShowBoardUnarchiveConfirmation:r,handleShowCollabAndPermissionsModal:s,handleShowCreatePincodeModal:l,handleShowMergeModal:c,section:u,showPulsar:h}){var p,g,m,f,b,v;const{name:x,sensitivity:y,url:_}=e,{access:w}=e,C=(0,N.Z)(),S=(0,He.Z)(),j=w&&w.includes("write")?ct.I:tt,I=(0,ge.Uz)(y),E=(0,We.D3)(C,(null===(p=e.owner)||void 0===p?void 0:p.id)||"",S),T=(0,Te.Z)({viewer:C,board:e})||E;let P=null;P=T?(0,d.jsx)(K,{board:e,onArchiveClick:o,onCreatePincode:l,onEditBoardClick:t,onEditSectionClick:i,onMergeClick:c,onUnarchiveClick:r,showCreatePinCodeOption:C.isAuth&&C.isPartner,surface:u?"section":"board"}):(0,d.jsx)(st,{bgColor:"lightGray",board:e,showFollow:!0,size:"sm"});const D=I&&(0,ge.Fx)(y);return u?(0,d.jsx)(lt,{boardName:x,boardUrl:_,overFlowActionsButton:P,sectionName:u.title,children:D&&(0,d.jsx)(ye.Z,{children:(0,d.jsx)(a.xu,{maxWidth:800,paddingY:10,children:y&&(0,d.jsx)(ue.Z,{notices:y.notices,viewType:5,sensitivity:y})})})}):(0,d.jsx)(a.xu,{"data-test-id":"board-header",children:(0,d.jsx)(j,{boardId:e.id,ownerName:(null===(g=e.owner)||void 0===g?void 0:g.full_name)||"",ownerUsername:(null===(m=e.owner)||void 0===m?void 0:m.username)||"",ownerImgSrc:(null===(f=e.owner)||void 0===f?void 0:f.image_key)||(null===(b=e.owner)||void 0===b?void 0:b.image_medium_url)||(null===(v=e.owner)||void 0===v?void 0:v.image_small_url)||"",children:t=>{var i;return(0,d.jsx)(et,{board:e,collaborators:t,handleCreatePincode:l,handleShowCollabAndPermissionsModal:s,hideFollowers:E,isToolsBoard:!0,onFollowersClick:n,overFlowActionsButton:P,showPulsar:h,userBlocked:!(null===(i=e.owner)||void 0===i||!i.blocked_by_me)})}})})}var ht=n(238332),pt=n(163880),gt=n(164756);function mt({boardId:e,collaboratorId:t,collaboratorUsername:n}){const i=(0,o.useDispatch)(),r=(0,pe.k6)(),s=(0,w.ZP)();return(0,d.jsx)(a.kC,{justifyContent:"center",width:"100%",children:(0,d.jsx)(a.xu,{marginTop:8,maxWidth:960,paddingX:8,children:(0,d.jsx)(a.QH,{message:s._("You’ve been requested to take over ownership of this board","boardOwnershipTransferUpsell.message","Message informing user they have received an ownership transfer request"),primaryAction:{accessibilityLabel:s._("Accept","boardOwnershipTransferUpsell.acceptAccessibilityLabel","Accessibility label for accept button on upsell"),label:s._("Accept","boardOwnershipTransferUpsell.acceptLabel","Label for accept button on upsell"),onClick:()=>{ie.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callUpdate(),i((0,gt.K8)(n)),r.push(`/${n}/`)}},secondaryAction:{accessibilityLabel:s._("Decline","boardOwnershipTransferUpsell.declineAccessibilityLabel","Accessibility label for decline button on upsell"),label:s._("Decline","boardOwnershipTransferUpsell.declineLabel","Label for decline button on upsell"),onClick:()=>{i((0,pt.xx)(e,t))}},title:s._("Board ownership request pending","boardOwnershipTransferUpsell.title","Title for board ownership transfer upsell")})})})}var ft=n(387987);const bt=(0,i.forwardRef)((({boardTool:{icon:e,link:t,text:n}},o)=>{const[r,s]=(0,i.useState)(!1),{isRTL:l}=(0,ft.B)();return(0,d.jsx)(a.iP,{role:"link",accessibilityLabel:n,href:t,onFocus:()=>s(!0),onBlur:()=>s(!1),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),ref:o,rounding:6,children:(0,d.jsxs)(a.xu,{display:"flex",direction:"column",justifyContent:"center",dangerouslySetInlineStyle:{__style:{paddingBottom:"1px"}},children:[(0,d.jsx)(a.xu,{alignItems:"center",alignSelf:"center",color:r?"lightWash":"lightGray",display:"flex",height:88,justifyContent:"center",rounding:6,width:88,children:(0,d.jsx)(a.JO,{accessibilityLabel:n,color:"darkGray",icon:"text-align-left"===e&&l?"text-align-right":e,size:30})}),(0,d.jsx)(a.xu,{paddingY:1,width:88,children:(0,d.jsx)(a.xv,{align:"center",overflow:"normal",size:"sm",weight:"bold",children:n})})]})})}));bt.displayName="BoardTool";const vt=bt;function xt({boardId:e,sectionId:t}){const n=(0,i.useRef)(),o=(0,i.useRef)(),r=(0,i.useRef)(),s=(0,i.useRef)(),l=!!t,c=l?{sectionId:t}:{boardId:e},{data:u,isLoaded:h}=(0,se.Z)({name:l?"SectionToolsFeedResource":"BoardToolsFeedResource",options:c});if(h&&(!u||!u.length))return null;const p=[n,o,r,s],g=null==u?void 0:u.map((({id:e})=>{const t=e.split("-");return t&&t.length>1?Number(t[1]):-1}));return h&&null!=u&&u.length?(0,d.jsx)(a.kC,{alignItems:"center",justifyContent:"center",width:"100%",children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[u.map(((e,t)=>{const n=g?g[t]:-1;return(0,d.jsx)(a.xu,{padding:1,children:(0,d.jsx)(vt,{boardTool:e,ref:p[n]})},e.id)})),(0,d.jsx)(Y.Z,{anchors:{3003:n.current,3004:o.current,3005:r.current,3007:s.current},placementId:18,positionRelativeToAnchor:!1})]})}):null}var yt=n(666187),_t=n(264414),wt=n(872571);const Ct=e=>()=>{e({event_type:101,element:10776,component:13216,view_type:5,view_parameter:3069})};function St({handleAddBoardNote:e,handleAddSection:t,handleCreatePin:n,handleCreateStoryPin:o,surface:r}){const{logContextEvent:s}=(0,p.v)(),l=(0,w.ZP)(),c=(0,i.useRef)();return(0,d.jsx)(a.xu,{bottom:!0,marginBottom:4,position:"fixed",rounding:"circle",width:56,dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",left:"50%",transform:"translate(-50%)"}},children:(0,d.jsx)(wt.Z,{idealDirection:"up",onAddBoardNote:e,onAddSection:t,onCreatePin:n,onCreateStoryPin:o,onOpen:Ct(s),surface:r,children:({active:e,openFlyout:t})=>(0,d.jsxs)(a.xu,{color:"white",display:"inlineBlock",rounding:"circle",children:[(0,d.jsx)(a.hU,{accessibilityLabel:"board"===r?l._("Create a Pin or add a Section","BoardPage.ActionBar.AddPinOrSection","button triggering a flyout to create a pin or add a section"):l._("Create Pin","BoardPage.ActionBar.AddPin","button triggering a flyout to create a pin"),bgColor:"white",icon:"add",iconColor:"darkGray",onClick:t,ref:c,selected:e,size:"xl"}),(0,d.jsx)(Y.Z,{anchors:{3006:c.current},idealDirection:"up",placementId:18})]})})})}var jt=n(17329);function It(e){const t=(0,w.ZP)(),{boardUrl:n="",onHide:i,slug:o}=e;return(0,d.jsx)(oe.ZP,{duration:2e3,href:`${n}${o}`,onHide:i,text:t._("Section added!","Toast for successfully creating a new board section","Toast for successfully creating a new board section")})}var Et=n(956324),Tt=n(250311);const Pt=Et.HW+1;function Dt({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:n}){const i=(0,w.ZP)();return(0,Tt.Q)({component:13860,view_type:5,aux_data:n}),(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)"}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new a.Ry(Pt),children:(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:260}},children:(0,d.jsxs)(a.kC,{alignItems:"center",direction:"column",gap:8,maxWidth:500,children:[(0,d.jsx)(a.X6,{align:"center",color:"white",children:i._("This board may contain sensitive content","boardPageContainer.sensitivityScreen.heading","Warning text on board that may have sensitive content")}),(0,d.jsxs)(a.kC,{gap:6,children:[(0,d.jsx)(a.zx,{color:"red",onClick:e,size:"lg",text:i._("Go back","boardPageContainer.sensitivityScreen.backButton","Text on button that lets user go back to previous page")}),(0,d.jsx)(a.zx,{color:"white",onClick:t,size:"lg",text:i._("View anyway","boardPageContainer.sensitivityScreen.viewButton","Text on button that lets user past sensitivity screen")})]}),(0,d.jsx)(a.xu,{paddingY:4,children:(0,d.jsx)(a.xv,{align:"center",color:"white",overflow:"normal",size:"md",children:(0,I.nk)(i._('If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the "..." button at the bottom of any Pin',"boardPageContainer.sensitivityScreen.text","Text telling user how to report a Pin"),{communityGuidelines:(0,d.jsx)(a.xv,{color:"white",inline:!0,size:"md",underline:!0,children:(0,d.jsx)(a.rU,{href:"https://policy.pinterest.com/en/community-guidelines",inline:!0,target:"blank",children:i._("Community Guidelines","boardPageContainer.sensitivityScreen.communityGuidelines","Text that links to the community guidelines page")})})})})})]})})})}var kt=n(387610);var Ot=n(627578),Rt=n(734125);var Bt=n(187851),At=n(584489),Mt=n(955637);function Lt(){const e=(0,N.Z)(),t=(0,se.Z)({name:"UserMetadataResource",options:{user:e}});(0,i.useEffect)((()=>function(e){const t=At.Z.instance;if(t&&""===t.getState().ui.views.boardPinView&&e&&e.data){const{profile_pin_rep_view_type:n}=e.data;n?t.dispatch((0,Mt.VT)(n)):t.dispatch((0,Mt.VT)("regular"))}}(t)))}var Zt=n(708206),Nt=n(296655),Ft=n(33076),Ut=n(930090);const Ht=()=>{};const zt=(0,Zt.compose)(pe.EN,(0,j.ZP)(18,(e=>{var t;return{board_id:e.board.id,pin_count:null!==(t=e.board.sectionless_pin_count)&&void 0!==t?t:0,chrome_push_subscription:(0,jt.Z)()}})))((function({board:e,experience:t,initialModalType:n,match:{params:{slug:r}},refreshBoardData:s=Ht,refreshSectionData:l=Ht,setPlacementExtraContext:c,section:u,showPulsar:h}){var g,f,b;const{logContextEvent:v}=(0,p.v)(),x=(0,o.useDispatch)(),y=(0,Be.Z)({shouldStopEventPropagation:!1}),{setFooterPlusButtonVisible:_}=(0,Nt.I)(),C=(0,N.Z)(),S=(0,He.Z)(),{anyEnabled:j}=(0,$e.tc)("web_board_notes")({dangerouslySkipActivation:!0}),I=(0,Ut.W$)(C,e),E=(null===(g=e.owner)||void 0===g?void 0:g.id)||"",T=(0,We.q6)(C,E,S),P=(0,Te.Z)({board:e,viewer:C})||T,D=C.isAuth&&C.id===e.pending_ownership_transfer,k=(0,$e.tc)("web_board_sensitivity_screen"),R=!P&&k().anyEnabled;(0,i.useEffect)((()=>{let t="other";I?t="own":(0,Ut.Df)(C,e)&&(t="collaborator"),c({board_ownership:t})}),[t]),(0,i.useEffect)((()=>(P&&_(!1),()=>{_(!0)})),[_,P]);const{showOneToast:B}=(0,le.F9)(),A=(0,pe.k6)(),M=(0,o.useSelector)((({history:e})=>0===e.previous.length));Lt();const{handleShowMergeSectionsConfirmationModal:L,mergeConfirmationModalProps:Z,onConfirm:F}=(0,Bt.Z)({board:e}),U=function(){const e=(0,w.ZP)(),{logContextEvent:t}=(0,p.v)(),n=(0,o.useDispatch)(),{showBlockingActionToast:i}=(0,Rt.Z)();return({board:o,targetBoard:r})=>{t({event_type:7172,object_id_str:o.id,aux_data:{merge_flow:"menu"}}),n((0,gt.xH)(o.id,r.id)).then((()=>{i({actionType:"merge",board:r})})).catch((t=>{Ot.Z.showError(t.message||e._("Failed to merge boards","Error message when failed to merge boards","Error message when failed to merge boards"))}))}}(),z={board_id:e.id,reason:(null===(f=e.sensitivity_screen)||void 0===f?void 0:f.reason)||""},[$,G]=(0,i.useState)(!(null===(b=e.sensitivity_screen)||void 0===b||!b.show_warning)&&R),[V,q]=(0,i.useState)(null),[Y,X]=(0,i.useState)(n||null),[J,K]=(0,i.useState)(null),[Q,ee]=(0,i.useState)(e&&(0,Ft.VV)(C,e)||"custom"),te=()=>X(H.s.boardArchiveConfirmation),ne=()=>{const e=C.isAuth?`/${(0,We.Ms)(C,S)}`:"/";A.replace(e)},oe=y((e=>{X(H.s.editSection),q(e)})),re=y((t=>{X(null),(t=>{B((({onHide:n})=>(0,d.jsx)(It,{boardUrl:e.url,onHide:n,slug:t.slug})))})(t)})),se=y((()=>{!function(e){e({event_type:101,element:10780,component:13217,view_type:5,view_parameter:3069})}(v),A.push({pathname:"/pin-builder/",state:{board:e,boardSection:u}})})),ae=y((()=>{A.push({pathname:"/idea-pin-builder/"})})),de=y((()=>{!function(e){e({event_type:101,element:10781,component:13217,view_type:5,view_parameter:3069})}(v),X(H.s.pincode)})),ce=y((()=>{!function(e){e({event_type:101,element:10779,component:13217,view_type:5,view_parameter:3069})}(v),X(H.s.simpleCreateSection)})),ue=y((()=>{X(H.s.mergeBoard)})),he="custom"!==Q;return(0,d.jsx)(kt.Z,{view:5,viewParameter:(0,O.Z)({board:e,viewer:C}),objectId:e.id,children:(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:$?{filter:"blur(30px)"}:{}},children:[(0,d.jsx)(ut,{board:e,handleBoardEditClick:()=>{v({event_type:101,element:10845,component:13216,view_type:5,view_parameter:3069}),X(H.s.boardEdit)},handleFollowersClick:()=>{X(H.s.followers)},handleSectionEditClick:()=>oe(),handleShowBoardArchiveConfirmation:te,handleShowBoardUnarchiveConfirmation:()=>X(H.s.boardUnarchiveConfirmation),handleShowCollabAndPermissionsModal:()=>X(H.s.collaboratorsAndPermissions),handleShowCreatePincodeModal:de,handleShowMergeModal:ue,section:u,showPulsar:h}),P&&(0,d.jsx)(a.xu,{marginBottom:6,children:(0,d.jsx)(xt,{boardId:e.id,sectionId:null==u?void 0:u.id})}),D&&(0,d.jsx)(mt,{boardId:e.id,collaboratorId:C.isAuth?C.id:"",collaboratorUsername:C.isAuth?C.username:""}),Y!==H.s.jumpstartBoard&&(0,d.jsx)(W,{board:e,currentView:Q,handleContentViewChange:e=>ee(e),handleSetCurrentModal:X,handleShowEditSectionModal:oe,handleShowMergeSectionsConfirmationModal:L,isOwnBoard:I,isOwnerOrCollaborator:P,isPinGridSorted:he,refreshBoardData:s,refreshSectionData:l,section:u}),(0,d.jsx)(m,{boardId:e.id,handleShowArchiveConfirmation:te,handleShowGroupPinsModal:(e,t)=>{X(H.s.groupPins),K({clusterId:e,suggestedSectionName:t})}}),P&&(0,d.jsx)(St,{handleAddBoardNote:T||!j||u?null:()=>{(async()=>{var t;const n=null===(t=e.owner)||void 0===t?void 0:t.username;if(n){const t=(await ie.ZP.create("BoardNoteResource",{slug:r,username:n}).callCreate()).resource_response.data;A.push(e.url?`${e.url}_tools/notes/${t.id}`:"")}})()},handleAddSection:ce,handleCreatePin:se,handleCreateStoryPin:T?null:ae,surface:u?"section":"board"}),Y&&(0,d.jsx)(ht.Z,{actions:{completeCreateSectionAction:re,onBoardArchiveChange:()=>{s(),x((0,gt.K8)(C.isAuth?C.username:""))},onBoardDelete:ne,onBoardLeave:e=>{x((0,gt.K8)(C.isAuth?C.username:"")),ne()},onBoardMerge:t=>{U({board:e,targetBoard:t}),ne()},onBoardSectionDelete:()=>{var t;(q(null),X(null),u)&&A.replace(null!==(t=e.url)&&void 0!==t?t:"")},onBoardSectionSave:({title:t,slug:n})=>{if(q(null),X(null),u){var i;const t=`${null!==(i=e.url)&&void 0!==i?i:""}${n}/`;A.replace(t)}},onConfirmMergeSection:F},board:e,boardSection:u||V,currentModal:Y,groupPinsData:J,mergeConfirmationModalProps:Z,onClearModal:()=>X(null)}),(0,d.jsx)(yt.Z,{placementId:18}),(0,d.jsx)(_t.Z,{placementId:18})]}),$&&(0,d.jsx)(Dt,{handleGoBack:()=>{v({event_type:101,component:13860,element:73,view_type:5,aux_data:{...z}}),M&&A.replace("/"),A.goBack()},hideSensitivityScreen:()=>{x((0,gt.Fi)(e.id)),v({event_type:101,component:13860,element:12448,view_type:5,aux_data:{...z}}),G(!1)},sensitivityScreenAuxData:z})]})})}))},406191:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(577302);function o({board:e,viewer:t}){return(0,i.Z)(t,e)?3069:3070}},363570:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(577302),o=n(129826);function r({board:e,viewer:t}){return(0,i.Z)(t,e)||(0,o.Z)({board:e,viewer:t})}},817930:(e,t,n)=>{n.d(t,{q:()=>r});var i=n(816670);function o(e){return"most_reactions"===e?"most_reactions":"default"}function r(e,t,n,r){var s,a;const{owner:d,should_show_board_activity:l}=e,c=(null==d?void 0:d.id)===t.id;let u="react_grid_pin";return t.isPartner&&c&&l?u="partner_react_grid_pin_with_board_activity":t.isPartner&&c?u="partner_react_grid_pin":l&&(u="react_grid_pin_with_board_activity"),{board_id:e.id,board_url:null!==(s=e.url)&&void 0!==s?s:"",currentFilter:r,field_set_key:u,filter_section_pins:!r||r===i.cg,sort:o(n),layout:null!==(a=e.layout)&&void 0!==a?a:"",page_size:25,redux_normalize_feed:!0}}},463112:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e,setMaxWidth:t=!0}){return(0,o.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:t?(0,o.jsx)(i.xu,{width:"100%",paddingX:2,maxWidth:774,children:e}):(0,o.jsx)(i.xu,{width:"100%",children:e})})}},557238:(e,t,n)=>{n.d(t,{ZP:()=>z,fx:()=>U});var i=n(667294),o=n(366787),r=n(759712),s=n(174523),a=n(883119),d=n(785893);function l({isSection:e}){const t=(0,s.ZP)(),n=e?t._("There aren’t any Pins in this section yet","EmptyBoard.EmptyText.section","Statement that there are no pins in the section"):t._("There aren’t any Pins on this board yet","EmptyBoard.EmptyText.board","Statement that there are no pins on the board");return(0,d.jsx)(r.Z,{children:(0,d.jsx)(a.xu,{paddingY:8,children:(0,d.jsx)(a.xv,{color:"darkGray",size:"lg",children:n})})})}function c({hasSections:e,isSection:t}){return(0,d.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:!t&&e?null:(0,d.jsx)(l,{isSection:t})})}var u=n(646942),h=n(685893),p=n(583704);const g=e=>null===e,m=e=>e?164:5,f=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),b=(e,t)=>e+(e>=t?1:0),v=(0,p.xZ)(0,p._Y)((e=>e));function x(e){const{boardSectionId:t,gridItem:n,index:i,paddingBottom:o,renderPinItem:r,viewParameter:s}=e,{itemKey:l}=n;let c=null;switch(l.type){case"story":c=(0,d.jsx)(h.Z,{slot:i,storyId:l.id,viewType:m(t),viewParameter:s});break;case"pin":c=(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:o}},children:r(n,i)});break;default:c=null}return(0,d.jsx)(a.xu,{children:c},`${l.type}:${l.id}`)}var y=n(386004),_=n(754674),w=n(194620),C=n(297633);const S=-1;const j=(0,w.Z)(C.y.Pin)((function(e){const{allowReordering:t,children:n,connectDropTarget:i,index:o,isDragWithinBounds:r}=e;return t&&i?i((0,d.jsx)("div",{style:{opacity:o===S||r?1:.5},children:n})):n}));var I=n(825499),E=n(885106),T=n(476865);function P(e){const{allowReordering:t,boardSectionId:n,gridItem:i,handlePinDragBegin:o,handlePinDragEnd:r,handlePinDragHover:s,index:a,lfvExperiences:l,onBulkEditPinClick:c,source:u,target:h,viewParameter:p}=e,{inBulkEditMode:g,isCollaborator:f,isGroupBoard:b,isOwnBoard:v,isSelected:x,itemKey:{id:y}}=i,_=u!==S,w=h===a,j={pinId:y,imageOnlyOption:!v&&(0,E.Z)(l)?"image-only":"default",attributionOption:b?"show":"hide",pinImageCrop:"none",surface:g?"BulkEditMode":"BaseBoardPinGrid",trackingParameters:{slotIndex:a,viewParameter:p,viewType:m(n)}};if(!v&&!f)return(0,d.jsx)(T.default,{...j});let P="no-selection";g&&(P=x?"selected":"deselected");let D=(0,d.jsx)(T.default,{...j,disableHover:_||g,selectionState:P});return g&&(D=(0,d.jsx)(I.Z,{onClick:()=>c(y),children:D})),t&&(D=(0,d.jsx)(C.Z,{index:a,isDragging:w,onDragBegin:o,onDragHover:s,onDragEnd:r,type:C.y.Pin,children:D})),D}var D=n(311866),k=n(610062),O=n(778527),R=n(418102),B=n(40197),A=n(457175),M=n(535258),L=n(708206),Z=n(613330);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F extends i.Component{constructor(...e){super(...e),N(this,"state",{reorderSource:S,reorderTarget:S}),N(this,"handlePinAdded",((e,t,n)=>{const{board:i,boardSectionId:o,dispatch:r}=this.props;r((0,B.xQ)(i.id)),o&&r((0,u.Z)(o)),this.props.resource.refresh()})),N(this,"handlePinDragBegin",(e=>this.setState({reorderSource:e}))),N(this,"handlePinDragHover",(e=>{const{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})})),N(this,"handlePinDragEnd",(e=>{const{board:t,boardSectionId:n,dispatch:i,feed:o,viewParameter:r}=this.props,{reorderSource:s,reorderTarget:a}=this.state;if(o&&e&&a!==S&&s!==S&&a!==s){const e=this.hiddenItemIndex,[d,l]=-1===e?[s,a]:[b(s,e),b(a,e)],c=(0,Z.zX)(o,d,l),u=o[d].id;i((0,y.Z)({feedType:n?Z.DV.SECTION_PINS:Z.DV.BOARD_PINS,feedId:n||t.id,itemType:"pin",targetItemId:o[l].id,sourceItemId:o[d].id}));const h={board_id:t.id,pin_id:u},p=c.filter((e=>"pin"===e.type)).map((e=>e.id)),g=p.indexOf(u),f=g-1;f>=0&&f<p.length&&(h.pin_id_before=p[f]);const v=g+1;v>=0&&v<p.length&&(h.pin_id_after=p[v]);const x={object_id_str:u,view_type:m(n),view_parameter:r};D.ZP.create("BoardPinsReorderResource",h).callUpdate({showError:!1}).then((()=>this.props.logContextEvent({event_type:7122,...x})))}this.setState({reorderSource:S,reorderTarget:S})})),N(this,"handleFetchMore",(()=>{const{resource:{fetchMore:e,isAtEnd:t,isFetching:n}}=this.props;t||n||e()})),N(this,"renderPinItem",((e,t)=>{const{lfvExperiences:n,onBulkEditPinClick:i,viewer:o,viewParameter:r,boardSectionId:s}=this.props,{reorderSource:a,reorderTarget:l}=this.state;return(0,d.jsx)(P,{allowReordering:this.allowReordering,boardSectionId:s,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,lfvExperiences:n,onBulkEditPinClick:i,source:a,target:l,viewer:o,viewParameter:r})})),N(this,"renderGridItem",(({data:e,itemIdx:t})=>{const{boardSectionId:n,viewParameter:i}=this.props;return(0,d.jsx)(x,{boardSectionId:n,gridItem:e,index:t,paddingBottom:this.props.denseViewSelected?6:0,renderPinItem:this.renderPinItem,viewParameter:i})}))}componentDidMount(){const{board:{id:e},feed:t,resource:{isFetching:n,refresh:i}}=this.props;this.subscribers=[R.eE.subscribe(e,"pinCreated",this.handlePinAdded)],g(t)&&!n&&i()}componentDidUpdate(e){const{feed:t,resource:{isFetching:n,refresh:i}}=this.props;g(t)&&!g(e.feed)&&!n&&i()}componentWillUnmount(){this.subscribers.forEach((e=>e.unsubscribe())),delete this.subscribers}get allowReordering(){const{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:n}=this.props;return!n&&(t||e)}get hiddenItemIndex(){const{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(f):-1}render(){const{bulkEditSelectedPins:e,board:t,boardSectionId:n,feed:r,footerStoryId:s,denseViewSelected:l,inBoardOrganizationMode:u,inSectionOrganizationMode:h,isDragWithinBounds:p,inSelectAll:g,renderFooterStory:m,resource:{isAtEnd:f,isFetching:b,isLoaded:x},isOwnBoard:y,refreshFilteredFeed:w,scrollContainer:C}=this.props,{access:I,collaborated_by_me:E=!1,collaborator_count:T=0,section_count:P}=t,{reorderSource:D,reorderTarget:k}=this.state;if(!r||!r.find((e=>"pin"===e.type)))return b?(0,d.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Board Pins grid"," - "," -- "),show:!0}):(x&&r&&0===r.length&&w&&w(),(0,d.jsxs)(i.Fragment,{children:[x&&r&&0===r.length&&(0,d.jsx)(c,{hasSections:!!P,isSection:!!n}),m&&s&&m(s)]}));const O=this.allowReordering,R=O&&D!==k&&D!==S&&k!==S;let B=r||[];const A=this.hiddenItemIndex;if(-1!==A&&(B=[...B.slice(0,A),...B.slice(A+1)]),R&&(B=(0,Z.zX)(B,D,k)),!B.length)return(0,d.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Board Pins grid"," - "," -- "),show:!0});const L={inBulkEditMode:u||h,inDenseView:l||!1,isGroupBoard:T>0,userCanEdit:(I||[]).includes("write"),isOwnBoard:y,isCollaborator:E},N=B.map(((t,n)=>{const{inBulkEditMode:i}=L,o="pin"===t.type&&!(null==e||!e.includes(t.id));return v({...L,isSelected:i&&(g?!o:o),itemKey:t})}));return(0,d.jsxs)(a.xu,{"data-test-id":"base-board-pin-grid",minHeight:l?800:"",children:[(0,d.jsx)(j,{allowReordering:O,index:k,isDragWithinBounds:p,children:(0,d.jsx)(_.default,{columnWidth:l?M.Lo:M.xf,comp:this.renderGridItem,gutterWidth:l?2*M.Us/3:M.Us,isAtEnd:f,isFetching:b,isLoaded:x,items:N,layout:"basicCentered",loadItems:this.handleFetchMore,paddingStyle:l?"dense":"simplified",scrollContainer:C,virtualize:!0},`${String(l)}-${String(u)}-${String(h)}`)}),O&&D!==S&&(0,d.jsx)(o.Z,{}),b&&(0,d.jsx)(a.xu,{position:"relative",paddingY:3,children:(0,d.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Loading Board Feed"," - "," -- "),show:!0})}),f&&s&&m&&m(s)]})}}const U=e=>e?e.reduce((({feed:e,footerStoryId:t},n)=>{const i="story"===n.type&&"board_ideas_preview_detailed"===n.story_type;return{feed:e.concat(i?[]:[n]),footerStoryId:i?n.id:t}}),{feed:[],footerStoryId:void 0}):{feed:e,footerStoryId:void 0},H=(0,L.compose)((0,O.ZP)(1000182),k.Z)((function(e){const{logContextEvent:t}=(0,A.v)(),n=(0,s.ZP)();return(0,d.jsx)(F,{...e,i18n:n,logContextEvent:t})}));H.displayName="BaseBoardPinGrid";const z=H},518730:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(40142),o=n(535718),r=n(613330);var s=n(273341),a=n(557238),d=n(785893);const l=(0,i.connect)(((e,t)=>(0,a.fx)(e.feeds[r.DV.SECTION_PINS][t.boardSectionId])))((function(e){const t=(0,o.Z)({name:"BoardSectionPinsResource",options:(n=e.boardSectionId,i=e.isOwnBoard,r=e.board.should_show_board_activity,l=e.currentFilter,{currentFilter:l,field_set_key:r?"react_grid_pin_with_board_activity":"react_grid_pin",is_own_profile_pins:i,page_size:25,redux_normalize_feed:!0,section_id:n})});var n,i,r,l;const c=(0,o.Z)({name:"BoardsResource",options:(0,s.Sd)(e.viewer.username,!0)});return(0,d.jsx)(a.ZP,{...e,boardsResource:c,resource:t})}));l.displayName="BoardSectionPinGrid";const c=l},578805:(e,t,n)=>{function i(e,t){const{url:n}=e,{slug:i}=t;return`${null!=n?n:""}${i}/`}n.d(t,{Z:()=>i})},41425:(e,t,n)=>{function i(e=""){return`${e}_tools/more-ideas/`}n.d(t,{Z:()=>i})},597455:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(476865),r=n(883119),s=n(785893);function a({index:e,isSelected:t,pin:n,handlePinSelectionChanged:a}){const d=n.id,l=(0,i.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),a(d,!t)}),[d,t]);return(0,s.jsx)(r.iP,{onTap:l,rounding:4,children:(0,s.jsx)(o.default,{attributionOption:"hide",blockClickEvents:!0,pin:n,pinId:n.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:t?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}},597168:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(40142),r=n(234316),s=n(451190),a=n(742979),d=n(597455),l=n(174523),c=n(535718),u=n(164756),h=n(717927),p=n(457175),g=n(883119),m=n(785893);function f({boardId:e,clusterId:t,handleAddClick:n,isBoardOrganizeFeed:f,onDismiss:b,suggestedSectionTitle:v}){const{logContextEvent:x}=(0,p.v)(),y=(0,l.ZP)(),_=(0,i.useRef)(null),[w,C]=(0,i.useState)([]),[S,j]=(0,i.useState)(v),{data:I,fetchMore:E,isFetching:T,isLoaded:P}=(0,c.Z)({name:"SectionSuggestionsPinsResource",options:{boardId:e,clusterId:t}}),D=f?3541:3069,k=(0,o.useDispatch)(),O=(0,i.useCallback)((()=>{if(I){const t=I.map((e=>e.id)),i=t.length,o=t.filter((e=>!w.includes(e)));n&&n(S),k((0,r.Z)({boardId:e,name:S},y)).then((t=>{k((0,a.Z)({inverseSelection:!1,selectedPinIds:o,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:t.id}},y))})).then((()=>{k((0,u.Tq)(e,"pin_count")),x({event_type:8606,object_id_str:e,view_type:5,view_parameter:D,aux_data:{number_pins_suggested:i,number_pins_selected:o.length,section_title:S,suggested_section_name:v}}),b(),f||k((0,h.W)())}))}}),[w,S,I]),R=(e,t)=>{const n=[...w],i=n.indexOf(e);t&&-1!==i?n.splice(i,1):t||-1!==i||n.push(e),C(n)};return(0,m.jsx)(s.Z,{accessibilityModalLabel:y._("Add suggested pins to your newly created section modal","sectionSuggestionPinsModal.modal.accessibilityLabelForModal","Accessibility label for modal"),allowScroll:!0,footer:(0,m.jsxs)(g.xu,{display:"flex",justifyContent:"end",paddingX:2,children:[(0,m.jsx)(g.xu,{display:"inlineBlock",marginEnd:2,children:(0,m.jsx)(g.zx,{onClick:()=>{b(),f||k((0,h.W)()),x({event_type:8607,object_id_str:e,view_type:5,view_parameter:D,aux_data:{suggested_section_name:v}})},text:y._("Not now","sectionSuggestionPinsModal.footer.cancelButton","Cancel creating a board section")})}),(0,m.jsx)(g.xu,{display:"inlineBlock",children:(0,m.jsx)(g.zx,{color:"red",onClick:O,text:y._("Add section","sectionSuggestionPinsModal.footer.addSectionButton","Add pins and section")})})]}),heading:y._("Pick your Pins and you're all set!","sectionSuggestionPinsModal.modal.heading","Heading for modal to add suggested pins to your newly created section"),onDismiss:b,size:704,children:(0,m.jsxs)(g.xu,{maxHeight:600,maxWidth:704,ref:_,overflow:"auto",children:[(0,m.jsxs)(g.xu,{padding:4,paddingX:2,children:[(0,m.jsx)(g.xv,{size:"md",children:y._("Section name","sectionSuggestionPinsModal.modal.sectionNameTitle","Title for section name")}),(0,m.jsx)(g.xu,{paddingY:2,children:(0,m.jsx)(g.nv,{id:"SectionSuggestionPinsTitle",onChange:({value:e})=>{j(e)},placeholder:y._("Add a name for this group","sectionSuggestionPinsModal.modal.sectionNameTitle.placeholder","Placeholder for section name"),size:"lg",value:S})})]}),P&&I&&(0,m.jsx)(g.Rk,{columnWidth:152,comp:({data:e,itemIdx:t})=>(0,m.jsx)(d.Z,{index:t,isSelected:!w.includes(e.id),pin:e,handlePinSelectionChanged:R}),gutterWidth:16,items:I,loadItems:E,scrollContainer:()=>_.current}),(0,m.jsx)(g.$j,{accessibilityLabel:y._("Loading pins","sectionSuggestionPinsModal.modal.spinner","Loading indicator"),show:T})]})})}},825499:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(174523),o=n(785893);function r({children:e}){return(0,o.jsx)("div",{className:"withoutBoxShadow",children:e})}var s=n(883119);function a({children:e,onClick:t}){const n=(0,i.ZP)();return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(s.xu,{bottom:!0,left:!0,right:!0,top:!0,position:"absolute",children:(0,o.jsx)(r,{children:(0,o.jsx)(s.iP,{accessibilityLabel:n._("Drag and drop item","BulkEditPinWrapper.tapArea.accessibilityLabel","Label for item that can be dragged and dropped."),fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:2})})}),(0,o.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}},272850:(e,t,n)=>{n.d(t,{P:()=>d,i:()=>l});var i=n(475896),o=n(174523),r=n(883119),s=n(785893);const a=({bold:e=!1,count:t,shortform:n=!1,size:o="md",text:a})=>(0,s.jsx)(r.xu,{children:(0,s.jsxs)(r.xv,{align:"center",size:o,color:"darkGray",weight:e?"bold":"normal",children:[(0,s.jsx)(i.Z,{value:t,shortform:n})," ",a]})}),d=({bold:e,count:t,onClick:n,shortform:i,size:d})=>{const l=(0,o.ZP)();return(0,s.jsx)(r.xu,{children:(0,s.jsx)(r.iP,{onTap:n,children:(0,s.jsx)(a,{bold:e,count:t,shortform:i,size:d,text:l.ngettext("follower","followers",t,"label for n follower(s)","label for n follower(s)")})})})},l=({count:e,size:t})=>{const n=(0,o.ZP)().ngettext("Pin","Pins",e,"label for n board section(s)","label for n board section(s)");return(0,s.jsx)(r.xu,{children:(0,s.jsxs)(r.xv,{inline:!0,size:t,color:"darkGray",children:[!!e&&(0,s.jsx)(i.Z,{value:e})||"0"," ",n]})})}},343283:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{accessibilityLabel:t,bgColor:n,icon:r,onClick:s,selected:a,size:d}=e;return(0,o.jsx)(i.hU,{accessibilityLabel:t,bgColor:null!=n?n:"transparent",icon:r,iconColor:"darkGray",onClick:s,selected:a,size:null!=d?d:"lg"})}},81:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(207395),r=n(883119),s=n(343283),a=n(785893);function d({bgColor:e,children:t,icon:n,label:d,size:l}){const c=(0,i.useRef)(null),[u,h]=(0,i.useState)(!1),p=()=>h(!1);return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(r.xu,{ref:c,children:(0,a.jsx)(s.Z,{accessibilityLabel:d,bgColor:e,icon:n,onClick:()=>h(!u),selected:u,size:l})}),u&&(0,a.jsx)(o.Z,{anchor:c.current,onDismiss:p,children:t({handleClose:p})})]})}},785078:(e,t,n)=>{n.d(t,{Z:()=>i});const i=({boardCollaboratorCount:e,collaborators:t})=>{const n=e?e+1:t.length,i=n>3,o=t.slice(0,i?2:3);return{displayedCollaborators:o,nonDisplayedCollaboratorCount:i?n-o.length:0}}},759712:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e}){return(0,o.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",children:e})}},570970:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(40142),o=n(923224),r=n(396026),s=n.n(r),a=n(920228),d=n(174523),l=n(457175),c=n(883119),u=n(785893);function h({pin:e}){var t,n,i,r,s;return(0,u.jsx)(c.zd,{rounding:4,width:138,children:(0,u.jsx)(o.Z,{height:207,pin:e&&{imageUrl:null!==(t=null===(n=e.images)||void 0===n||null===(i=n["474x"])||void 0===i?void 0:i.url)&&void 0!==t?t:"",dominantColor:null!==(r=e.dominant_color)&&void 0!==r?r:"",description:null!==(s=e.description)&&void 0!==s?s:""},width:138})})}const p=(0,i.connect)(((e,t)=>{const n=e.stories[t.storyId];return n&&"board_ideas_preview_detailed"===n.story_type?{story:n}:{story:void 0}}),(()=>({})))((function({collection:e,story:t,url:n}){const{logContextEvent:i}=(0,l.v)(),o=(0,d.ZP)(),{isHovering:r,hoverHandlers:p}=(0,a.Z)();if(!t)return null;const g=t.objects.reduce(((e,t)=>e.concat("pin"===t.type?[t]:[])),[]);return(0,u.jsx)("div",{className:"moreIdeasOnBoard",children:(0,u.jsx)(c.iP,{role:"link",href:`${n}?ideas_referrer=${t.referring_source}`,onTap:()=>i({event_type:101,element:10600,view_type:"board_section"===e.type?164:5,object_id_str:e.id,view_parameter:3069}),fullWidth:!1,onMouseEnter:p.onMouseOver,onMouseLeave:p.onMouseLeave,rounding:4,children:(0,u.jsxs)(c.xu,{alignItems:"start",color:r?"lightGray":"white",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:4,width:"100%",children:[(0,u.jsx)(c.xu,{padding:2,children:(0,u.jsx)(c.X6,{size:"sm",lineClamp:1,children:"board_section"===e.type?o._("Find some ideas for this section:","Call-to-action text that upsells more ideas tab for an empty section","Call-to-action text that upsells more ideas tab for an empty section"):o._("Find some ideas for this board:","Call-to-action text that upsells more ideas tab for an empty board","Call-to-action text that upsells more ideas tab for an empty board")})}),(0,u.jsx)(c.xu,{display:"flex",justifyContent:"between",padding:2,width:"100%",children:s()(0,5).map((e=>{const t=g[e];return(0,u.jsx)(c.xu,{children:(0,u.jsx)(h,{pin:t})},`${t?t.id:e}`)}))})]})})})}))},389609:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(311866);var o=n(584489),r=n(955637);function s({boardDensity:e,component:t,surface:n,viewType:s},a){!function({boardDensity:e,component:t,viewType:n},i){i({event_type:101,component:t,element:function({boardDensity:e,viewType:t}){switch(t){case 164:return"regular"===e?10618:10619;case 5:return"regular"===e?10607:10608;default:return 10607}}({boardDensity:e,viewType:n}),...n?{view_type:n,view_parameter:4===n?3106:3069}:Object.freeze({})})}({boardDensity:e,component:t,viewType:s},a),function({density:e,surface:t}){const n="board"===t?{profile_pin_rep_view_type:e}:{board_pin_rep_view_type:e};i.ZP.create("UserMetadataResource",n).callUpdate()}({density:e,surface:n}),function({density:e,surface:t}){const n="board"===t?r.VT:r.QG;o.Z.instance.dispatch(n(e))}({density:e,surface:n})}},923224:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(754999),o=n(174523),r=n(883119),s=n(785893);function a({pinCount:e,height:t,size:n}){const a=(0,o.ZP)(),d=(0,i.Z)(a._("+{{ pinCount }}","+N count overlay on pin selections","+N count overlay on pin selections"),{pinCount:e});return(0,s.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",justifyContent:"center",height:t,children:"sm"===n?(0,s.jsx)(r.xv,{color:"white",size:"md",weight:"bold",children:d}):(0,s.jsx)(r.X6,{color:"white",size:"md",children:d})})}function d({additionalPinCount:e,additionalPinCountSize:t="lg",pin:n,width:i,height:o,rounded:d}){return(0,s.jsx)(r.zd,{height:o,width:i,rounding:d?4:0,wash:!0,children:n&&(0,s.jsx)(r.Ee,{alt:n.description,color:n.dominantColor,fit:"cover",naturalHeight:o,naturalWidth:i,src:n.imageUrl,children:!!e&&(0,s.jsx)(a,{pinCount:e,height:o,size:t})})})}},734125:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(40142),o=n(117937),r=n(880841),s=n(367599);function a(){const e=(0,i.useDispatch)(),{showToast:t}=(0,r.F9)();return{showBlockingActionToast:({actionType:n,board:i,section:r})=>{t((0,s.Bk)("inProgress",n,i,r)),(0,s.Zl)({check:()=>e((0,o.K)(i.id)).then((e=>!(0,s.EQ)({blockingActions:e,actionType:n,boardId:i.id,sectionId:r&&r.id}))),checkDelay:s.SE,checkInterval:s.l,onComplete:()=>t((0,s.Bk)("completed",n,i,r))})}}}},367599:(e,t,n)=>{n.d(t,{SE:()=>f,l:()=>b,Zl:()=>w,ZP:()=>S,EQ:()=>x,Bk:()=>C});var i=n(40142),o=n(117937),r=n(880841),s=n(667294),a=n(705376),d=n(174523),l=n(883119),c=n(881220),u=n(785893);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){const e=(0,d.ZP)();return(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"around",overflow:"hidden",children:(0,u.jsx)("div",{className:"boardBlockingActionToastWhiteSpinner",children:(0,u.jsx)(l.JO,{accessibilityLabel:e._("board action pending","accessibility label for board action toast to indicate pending action","accessibility label for board action toast to indicate pending action"),color:"white",icon:"knoop",size:40})})})}class g extends s.Component{constructor(...e){super(...e),h(this,"state",{hiding:!1,visible:!1}),h(this,"handleHide",(()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,c.Vg)})),h(this,"handleMouseEnter",(()=>{window.clearTimeout(this.timeout)})),h(this,"handleMouseLeave",(()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)}))}componentDidMount(){this.firstLine&&(window.setTimeout((()=>{this.setState({visible:!0})}),100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get firstLine(){const{actionType:e,actionStatus:t,location:{isSection:n}}=this.props,i="completed"===t;switch(e){case"create_section":return i?this.props.i18n._("Created section","toast text to indicate a section has been created successfully","toast text to indicate a section has been created successfully"):this.props.i18n._("Creating section","toast text to indicate a section is being created","toast text to indicate a section is being created");case"delete_pins":return n?i?this.props.i18n._("Deleted Pins from","toast text to notify Pins have been deleted from a section","toast text to notify Pins have been deleted from a section"):this.props.i18n._("Deleting Pins from","toast text to notify Pins are being deleted from a section","toast text to notify Pins are being deleted from a section"):i?this.props.i18n._("Deleted Pins from","toast text to notify Pins have been deleted from a board","toast text to notify Pins have been deleted from a board"):this.props.i18n._("Deleting Pins from","toast text to notify Pins are being deleted from a board","toast text to notify Pins are being deleted from a board");case"move_pins":return n?i?this.props.i18n._("Moved to","toast text to notify pins have been moved to this section","toast text to notify pins have been moved to this section"):this.props.i18n._("Moving to","toast text to notify pins are being moved to this section","toast text to notify pins are being moved to this section"):i?this.props.i18n._("Moved to","toast text to notify pins have been moved to this board","toast text to notify pins have been moved to this board"):this.props.i18n._("Moving to","toast text to notify pins are being moved to this board","toast text to notify pins are being moved to this board");case"merge":return n?i?this.props.i18n._("Moved to","toast text to notify anotehr section has been merged to this section","toast text to notify anotehr section has been merged to this section"):this.props.i18n._("Moving to","toast text to notify another section is being merged to this section","toast text to notify another section is being merged to this section"):i?this.props.i18n._("Moved to","toast text to notify another board has been merged to this board","toast text to notify another board has been merged to this board"):this.props.i18n._("Moving to","toast text to notify another board is being merged to this board","toast text to notify another board is being merged to this board");default:return null}}render(){const{actionStatus:e,deviceType:t,location:n}=this.props,{visible:i,hiding:o}=this.state;if(!this.firstLine)return null;const r="inProgress"===e?`${n.name}...`:n.name;return(0,u.jsx)(l.xu,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:{__style:(0,c.UZ)({deviceType:t,visible:i,hiding:o})},children:(0,u.jsx)(l.FN,{text:(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(l.xv,{children:this.firstLine}),(0,u.jsx)(l.xv,{weight:"bold",children:r})]}),thumbnail:"completed"===e?void 0:(0,u.jsx)(p,{})})})}}function m(e){const t=(0,a.ZP)(),n=(0,d.ZP)();return(0,u.jsx)(g,{...e,deviceType:t,i18n:n})}const f=2e3,b=5e3;const v=["merge","move_pins","create_section"];function x({blockingActions:e,actionType:t,boardId:n,sectionId:i}){return e.find((e=>!(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}}(e.action_type)!==t||v.includes(e.action_type)&&e.is_origin||e.board_id!==n||(i?i!==e.section_id:e.section_id&&"-1"!==e.section_id)||1===e.progress)))}let y=0;const _={};function w({check:e,checkDelay:t,checkInterval:n,onComplete:i}){const o=`timeout${y}`;y+=1;const r=()=>{const t=Date.now();e().then((e=>{const s=Date.now()-t;e?(i(),delete _[o]):_[o]=setTimeout(r,Math.max(1e3,n-s))})).catch((()=>{delete _[o]}))};_[o]=setTimeout(r,t)}const C=(e,t,n,i)=>({onHide:o})=>{var r;return(0,u.jsx)(m,{actionType:t,actionStatus:e,duration:"inProgress"===e?f:2e3,location:{name:i?i.title:null!==(r=n.name)&&void 0!==r?r:"",isSection:!!i},onHide:o})};function S(e){function t(t){const n=(0,i.useDispatch)(),{showToast:s}=(0,r.F9)();return(0,u.jsx)(e,{...t,showBlockingActionToast:({actionType:e,board:t,section:i})=>{s(C("inProgress",e,t,i)),w({check:()=>n((0,o.K)(t.id)).then((n=>!x({blockingActions:n,actionType:e,boardId:t.id,sectionId:i&&i.id}))),checkDelay:f,checkInterval:b,onComplete:()=>s(C("completed",e,t,i))})}})}return t.displayName=`WithShowBlockingActionToasts(${e.displayName||e.name||""})`,t}},223419:(e,t,n)=>{n.d(t,{W:()=>c,Z:()=>u});var i=n(209067),o=n(100998),r=n(631739),s=n(423405),a=n(174523),d=n(883119),l=n(785893);function c(e,t=""){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce(((n,i,o)=>{if(n.length>0&&e&&e.length){const r=t.toLowerCase().indexOf(e.toLowerCase());return n.concat((0,l.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(r,r+e.length)},o),i)}return[i]}),[]):t}const u=function(e){var t,n,u,h,p,g;const m=(0,a.ZP)(),{disabled:f,item:b,isSection:v,isSelectMode:x,isWithinSectionPicker:y,saveState:_,searchQuery:w,selected:C}=e,S=v?null:b,j=v?b:null,I=j&&j.title||S&&S.name||"";let E="",T=!1,P="",D=0;S&&({image_cover_url:E,is_collaborative:T,privacy:P,section_count:D=0}=S);const k=c(w,I),O=P===r.Z.BoardPrivacy.SECRET,R=!f&&(C||!!_),B=!y&&"number"==typeof D&&D>0,A="number"==typeof D&&D>0?"boardWithSection":"boardWithoutSection",M=x?m._("Select","Board select button label","Board select button label"):m._("Save","Pin save button label","Pin save button label");return(0,l.jsxs)(d.xu,{alignItems:"center",color:R?"lightGray":"white",display:"flex",height:64,marginStart:2,marginEnd:2,marginTop:1,padding:2,rounding:3,"data-test-id":A,children:[S&&(0,l.jsx)(d.xu,{height:48,width:48,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:E?(0,l.jsx)(d.Ee,{src:E,alt:I,fit:"cover",naturalWidth:1,naturalHeight:1}):(0,l.jsx)("span",{})}),j&&!(null===(t=j.preview_pins)||void 0===t||!t.length)&&(0,l.jsx)(s.Z,{image_url:null!==(n=j.preview_pins[0].image_square_url)&&void 0!==n?n:"",naturalHeight:null!==(u=null===(h=j.preview_pins[0].image_square_size_pixels)||void 0===h?void 0:h.height)&&void 0!==u?u:1,naturalWidth:null!==(p=null===(g=j.preview_pins[0].image_square_size_pixels)||void 0===g?void 0:g.width)&&void 0!==p?p:1}),(0,l.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,l.jsx)(d.xv,{color:f?"gray":"darkGray",size:"lg",lineClamp:1,weight:"bold",children:k}),(B||!R)&&(0,l.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[O&&(0,l.jsx)(i.Z,{type:"secret"}),T&&(0,l.jsx)(o.Z,{board:S,showCollaborativeIcon:T,useLegoLayout:!0}),B&&(0,l.jsx)(i.Z,{type:"sections"})]}),!B&&R&&!_&&(0,l.jsx)(d.xu,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,l.jsx)(d.xv,{color:"white",overflow:"normal",size:"lg",weight:"bold",children:M})}),!B&&R&&"loading"===_&&(0,l.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,l.jsx)(d.$j,{accessibilityLabel:m._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},209067:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);const s=function({type:e}){const t=(0,i.ZP)(),n={group:{accessibilityLabel:t._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:t._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:t._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return(0,r.jsx)(o.xu,{marginStart:1,children:(0,r.jsx)(o.xu,{marginStart:2,children:"sections"===e||"sectionsInline"===e?(0,r.jsx)(o.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:"12",color:"darkGray"}):(0,r.jsx)(o.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:16,color:"darkGray"})})})}},189552:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(883119),r=n(785893);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"onHover",(()=>{this.setState({isHovering:!0})})),s(this,"offHover",(()=>{this.setState({isHovering:!1})}))}render(){const{name:e,selected:t,image:n,inFlyoutExp:i}=this.props;var s,a,d;return i?(0,r.jsxs)(o.xu,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.zd,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?(0,r.jsx)(o.Ee,{alt:"",color:"",fit:"cover",naturalHeight:null!==(s=n.height)&&void 0!==s?s:1,naturalWidth:null!==(a=n.width)&&void 0!==a?a:1,src:null!==(d=n.url)&&void 0!==d?d:""}):(0,r.jsx)(o.xu,{color:"lightGray",height:40,width:40})})}),(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(o.X6,{size:"sm",children:e})})]}):(0,r.jsxs)(o.xu,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.JO,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),(0,r.jsx)(o.xu,{marginStart:3,children:(0,r.jsx)(o.xv,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var d=n(174523),l=n(535718),c=n(670473),u=n(457175);const h=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:s,minHeight:h,onBoardSelected:p})=>{const{logContextEvent:g}=(0,u.v)(),m=(0,d.ZP)(),[f,b]=(0,i.useState)(-1),v=(0,c.iN)(),{data:x=[],error:y,isLoaded:_}=(0,l.Z)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),w=(C=x,(0,i.useMemo)((()=>C&&C.length?C.map((e=>e.title)):[]),[C]));var C;(0,i.useEffect)((()=>{_&&t&&v&&(y?v.error():v.stop())}),[_]);const S=()=>{b(-1)},j=(t,n)=>{const i=f===n;return(0,r.jsx)("li",{children:(0,r.jsx)(o.iP,{onMouseEnter:()=>(e=>{b(e)})(n),onMouseLeave:S,onTap:()=>(e=>{p(w[e],!1),g({event_type:101,component:13025,element:23})})(n),children:(0,r.jsx)(a,{selected:i,name:t,inFlyoutExp:e,image:s})})},n)};return _?w&&w.length?e?(0,r.jsx)(o.xu,{children:(0,r.jsx)("ul",{children:w.map(j)})}):t?(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.xu,{marginTop:5,marginStart:6,marginBottom:3,children:(0,r.jsx)(o.xv,{children:m._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),(0,r.jsx)("ul",{children:w.map(j)})]}):(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.xu,{marginTop:2,paddingX:5,children:(0,r.jsx)(o.xv,{children:m._("Suggested board names"," - "," -- ")})}),(0,r.jsx)("ul",{children:w.map(j)})]}):null:(0,r.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:h||"",children:(0,r.jsx)(o.$j,{accessibilityLabel:m._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},538052:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(40142),r=n(234316),s=n(588527),a=n(559335),d=n(34411),l=n(159276),c=n(174523),u=n(767523),h=n(883119),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends i.Component{constructor(e){super(e),g(this,"onCreateSection",(()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:i,viewer:o,orbacActingAs:s}=this.props,a=(0,l.lJ)(o,s);return this.setState({isSaving:!0}),t((0,r.Z)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i},this.props.i18n,a)).then((e=>{this.setState({isSaving:!1}),n(e)})).catch((e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})}))})),g(this,"handleKeyDown",(({event:e,value:t})=>{const{createError:n,inputName:i}=this.state;[s.Z.ENTER,s.Z.NUMPAD_ENTER].includes(e.which)&&!n&&i.trim()&&this.onCreateSection()})),g(this,"handleChangeName",(({value:e})=>{this.setState({createError:null,inputName:e})})),g(this,"handleInputRef",(e=>{this.setState({inputRef:e})})),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:i}=this.state;!i||t.inputRef&&!n||i.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:n,inputName:i,isSaving:o}=this.state,r=!!i.trim()&&!n;return(0,p.jsxs)(h.xu,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,p.jsx)(h.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,p.jsx)(h.X6,{size:"sm",children:this.props.i18n._("Add section","Title in the add section modal","Title in the add section modal")})}),(0,p.jsxs)(h.xu,{padding:4,children:[(0,p.jsx)(h.xu,{marginBottom:2,children:(0,p.jsx)(h.__,{htmlFor:"sectionEditName",children:(0,p.jsx)(h.xv,{size:"md",color:n?"red":"gray",children:this.props.i18n._("Name","Board section name","Board section name")})})}),(0,p.jsx)(h.xu,{children:(0,p.jsx)(h.xu,{ref:this.handleInputRef,children:(0,p.jsx)(h.nv,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:i})})})]}),(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,p.jsx)(h.xu,{padding:4,children:(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(a.Z,{disabled:!r||o,onClick:this.onCreateSection,submitting:o,text:this.props.i18n._("Add","add a new section","add a new section")})})})]})}}const f=(0,o.connect)()((function(e){const t=(0,c.ZP)(),n=(0,d.Z)(),i=(0,u.Z)();return(0,p.jsx)(m,{...e,i18n:t,viewer:n,orbacActingAs:i})}))},376067:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(542756),o=n(883119),r=n(785893);function s({url:e,description:t,color:n}){return n=n||"#8fa7bf",(0,r.jsx)(o.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}},children:(0,r.jsxs)(o.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,r.jsx)(o.xu,{marginBottom:2,children:(0,r.jsx)(o.xv,{color:"white",size:"sm",children:(0,i.Z)(e).hostname||e})}),(0,r.jsx)(o.xu,{maxHeight:144,children:(0,r.jsx)(o.xv,{color:"white",overflow:"normal",weight:"bold",children:t})})]})})}},584831:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(667294),o=n(588527),r=n(475896),s=n(311866),a=n(512806),d=n(946753),l=n(174523),c=n(883119),u=n(785893);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends i.Component{constructor(...e){super(...e),h(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),h(this,"onDismiss",(()=>{})),h(this,"mounted",!1),h(this,"addHashtag",(e=>{this.props.addHashtag(e),this.setState({recommendations:[]})})),h(this,"handleKeyDown",(e=>{e.keyCode===o.Z.UP?this.handlePrevHashtag(e):e.keyCode===o.Z.DOWN?this.handleNextHashtag(e):e.keyCode===o.Z.ESCAPE?this.handleClose(e):e.keyCode===o.Z.ENTER&&this.handleSubmit(e)})),h(this,"handlePrevHashtag",(e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState((e=>({selectedIndex:e.selectedIndex-1})))})),h(this,"handleNextHashtag",(e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState((e=>({selectedIndex:e.selectedIndex+1})))})),h(this,"handleClose",(e=>{e.preventDefault(),this.setState({recommendations:[]})})),h(this,"handleSubmit",(e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)})),h(this,"callResource",(e=>{const{makeCancelablePromise:t}=this.props;t(s.ZP.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then((e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})})).catch((({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})}))}))}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:i,idealDirection:o}=this.props,s=e.filter((e=>e.query)),a=o||"down",l="flyout_"+s.length;return t&&s.length>0?(0,u.jsx)(c.J2,{anchor:i,idealDirection:a,onDismiss:this.onDismiss,size:"sm",children:(0,u.jsx)(c.xu,{width:"100%",zIndex:new c.Ry(3),children:s.length>0?s.map(((e,t)=>(0,u.jsx)(c.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,u.jsxs)(c.xu,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",padding:1,children:[(0,u.jsx)(c.xu,{flex:"grow",children:(0,u.jsx)(c.xv,{inline:!0,size:"md",weight:"bold",children:e.query})}),(0,u.jsx)(c.xu,{flex:"none",children:(0,u.jsx)(c.xv,{inline:!0,size:"sm",children:(0,d.nk)(this.props.i18n.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:(0,u.jsx)(r.Z,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query))):null})},l):null}}function g(e){const t=(0,l.ZP)(),n=(0,a.Z)();return(0,u.jsx)(p,{...e,makeCancelablePromise:n,i18n:t})}},367919:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(667294),o=n(174523),r=n(535718),s=n(946753),a=n(883119),d=n(785893);function l({pin:e}){const t=(0,o.ZP)(),{data:n}=(0,r.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.id}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return n&&n.pinned_to_board&&"quick_creates"!==n.pinned_to_board.layout?(0,d.jsxs)(a.xu,{children:[(0,d.jsx)(a.xu,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,d.jsx)(a.xv,{align:"center",color:"white",size:"md",weight:"bold",children:(0,s.nk)(t._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(n.pinned_to_board||{}).name}).join(" ")})}),(0,d.jsx)(a.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,d.jsx)(a.JO,{accessibilityLabel:"",color:"red",icon:"heart",size:26})})]}):null}var c=n(584831),u=n(376067),h=n(457175);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.Component{constructor(...e){super(...e),p(this,"state",{flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),p(this,"updateDescription",(e=>{this.props.updateDescription&&this.props.updateDescription(e)})),p(this,"handleDescriptionBlur",(e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})})),p(this,"handleDescriptionEdit",(()=>{this.setState({editing:!0})})),p(this,"handleHashtagAddition",(e=>{const{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t.id,aux_data:{hashtags:e}});const n=this.state.flyoutCursorIndex,i=Number(n+this.state.hashtagQuery.length),o=this.state.description.slice(0,n)+e+" "+this.state.description.slice(i);this.updateDescription(o),this.setState({description:o,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}))}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:i}=this.props,{description:o,editing:r,flyoutOpened:s,hashtagQuery:h,isHashtagFlyoutOpen:p}=this.state,{images:g,link:m}=n,f=g&&g["236x"],b=f&&f.url||n.image_base64;return(0,d.jsxs)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:s&&r?{transform:"translateY(-75px)"}:{}},children:[(0,d.jsxs)(a.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[n&&n.id&&(0,d.jsx)(l,{pin:n}),(0,d.jsx)(a.xu,{paddingY:t?9:0,width:240,children:(0,d.jsx)(a.xu,{ref:i,maxHeight:s&&r?220:335,rounding:4,overflow:"hidden",children:b?(0,d.jsx)(a.Ee,{alt:o,src:b,naturalHeight:(null==f?void 0:f.height)||1,naturalWidth:(null==f?void 0:f.width)||1}):!!m&&(0,d.jsx)(u.Z,{color:e||"",description:o,url:m})})})]}),this.anchor&&p?(0,d.jsx)(c.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:h}):null]})}}function m(e){const{logContextEvent:t}=(0,h.v)();return(0,d.jsx)(g,{...e,logContextEvent:t})}},9757:(e,t,n)=>{n.d(t,{Au:()=>ge,SN:()=>me,ZP:()=>be});var i=n(667294),o=n(314463),r=n(40142),s=n(631739),a=n(559335),d=n(174523),l=n(824820),c=n(387987),u=n(760620),h=n(203620),p=n(535718),g=n(151101),m=n(925265),f=n(883119),b=n(785893);function v(e){const t=(0,d.ZP)(),{body:n,img:i,onClick:o,selected:r,title:s,username:a,valid:l}=e,c=a||n;return(0,b.jsx)(f.xu,{marginBottom:4,children:(0,b.jsx)(f.iP,{onTap:o,children:(0,b.jsxs)(f.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[i,(0,b.jsxs)(f.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,b.jsx)(f.xu,{marginBottom:1,children:(0,b.jsx)(f.xv,{lineClamp:1,weight:"bold",children:s})}),(0,b.jsx)(f.xv,{size:"sm",lineClamp:1,children:c})]}),(0,b.jsx)(f.xu,{marginStart:2,children:(u=r,h=l,a?u?(0,b.jsx)(f.JO,{accessibilityLabel:t._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),color:"red",icon:"check-circle",size:32}):(0,b.jsx)(f.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,b.jsx)(f.zx,{color:"gray",disabled:!!u||Boolean(!h),size:"sm",text:u?t._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"):t._("Invite","Add board collaborator invite","Add board collaborator invite")}))})]})})});var u,h}var x=n(163880);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n){const{id:i}=e;return t===n.findIndex((e=>e.id===i))}class w extends i.Component{constructor(...e){super(...e),y(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),y(this,"isIdSelected",{}),y(this,"handleTextFieldChange",(({value:e})=>{this.setState({value:e})})),y(this,"handleCollaboratorClick",(e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:i}=this.state,o=i.concat([e]),r="email"===n?x.OA:x.pS;this.props.onSelectedCollaboratorsChange({id:t,resource:r}),this.setState({selectedCollaborators:o})})),y(this,"handleTypeaheadSuggestionsChange",(e=>{this.setState({typeaheadSuggestions:e})}))}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map((e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const i="email"===n?x.OA:x.pS;return this.props.onSelectedCollaboratorsChange({id:t,resource:i}),null}))}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],i=(""===e?this.state.selectedCollaborators.concat(n).filter(_):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,u.Z)(e)}).concat(n).filter(_)).map((e=>function(e,t,n,i){if("user_share_suggestion"===e.type||"user"===e.type){const i=(0,b.jsx)(g.Z,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,b.jsx)(v,{img:i,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:o,valid:r}=e,s=(0,b.jsx)(f.xu,{alignItems:"center",color:"lightGray",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,b.jsx)(f.JO,{accessibilityLabel:i._("Email icon","Email icon on board create modal","Email icon on board create modal"),color:"darkGray",icon:"envelope",size:20})}),a=(0,m.Z)(i._("Email {{ email }}"," - "," -- "),{email:o});let d,l;return t?(d=i._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),l=()=>{}):(d=r?i._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):i._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),l=()=>r?n(e):void 0),(0,b.jsx)(v,{body:d,img:s,onClick:l,selected:t,title:a,valid:r})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n))).map(((e,t)=>(0,b.jsx)("li",{children:e},t)));return(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,b.jsx)(f.xu,{paddingX:3,paddingY:2,children:(0,b.jsx)(f.xv,{size:"sm",children:this.props.i18n._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create")})}),(0,b.jsx)(f.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,b.jsx)(f.xu,{flex:"grow",children:(0,b.jsx)(h.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,b.jsx)(f.Um,{accessibilityLabel:this.props.i18n._("Search for collaborators by name or email"," - "," -- "),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._("Search by name or email"," - "," -- "),size:"lg",value:e})})})}),(0,b.jsx)(f.xu,{overflow:"scrollY",paddingX:3,children:(0,b.jsx)("ul",{children:i})})]})}}function C(e){const t=(0,d.ZP)(),n=(0,p.Z)({name:"ShareSuggestionsResource",noCache:!0});return(0,b.jsx)(w,{...e,i18n:t,shareSuggestionsResource:n})}const S=(0,l.Z)((function({createBoardError:e,inputName:t,nameValidatorErrors:n,onBoardCreate:o,onCancel:r,onChangeBoardName:l,onChangeBoardPrivacy:u,onInvite:h,privacy:p,preselectedCollaborators:g,saving:m,showTitle:v,isAdAccountOwner:x}){const y=(0,d.ZP)(),{isRTL:_}=(0,c.B)(),w=0===n.length,S=p===s.Z.BoardPrivacy.SECRET;return(0,b.jsx)(f.xu,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,b.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},style:{height:"100%"},children:(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[v&&(0,b.jsx)(f.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,b.jsx)(f.X6,{size:"sm",children:y._("Create board"," - "," -- ")})}),(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"boardEditName",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Name"," - "," -- ")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.nv,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>l(e),placeholder:y._('Like "Places to Go" or "Recipes to Make"'," - "," -- "),size:"lg",value:t})})]}),x&&(0,b.jsxs)(i.Fragment,{children:[(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"secret",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Secret","secret board","secret board")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.rs,{id:"secret",onChange:u,switched:S})})]}),(0,b.jsx)(f.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",overflow:"hidden",children:(0,b.jsx)(f.xu,{width:"100%",children:(0,b.jsx)(C,{onSelectedCollaboratorsChange:h,preselectedCollaborators:g})})})]}),!x&&(0,b.jsx)(i.Fragment,{children:(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"protected",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Protected board (not listed on user's profile)","protected board","protected board")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.rs,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})})]})}),(0,b.jsxs)(f.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},bottom:!0,color:"white",display:"flex",justifyContent:"between",left:_,paddingX:4,paddingY:2,position:"absolute",right:!_,width:720,children:[(0,b.jsx)(f.kC,{children:(0,b.jsx)(f.zx,{onClick:r,text:y._("Cancel","cancel board create","cancel board create")})}),(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"end",children:[!!e&&(0,b.jsx)(f.xu,{paddingX:2,children:(0,b.jsx)(f.xv,{align:"center",color:"red",size:"md",weight:"bold",children:e})}),(0,b.jsx)(a.Z,{disabled:!t.trim()||!w||!!e||m,submitting:m,text:y._("Create","create a new board","create a new board")})]})]})]})})})}));var j=n(538052),I=n(63447),E=n(178862);class T extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{board:t,i18n:n,sectionsResource:{data:i}}=this.props,o=n._("Board","PinSaveButton.RepinPicker.SectionListBoardTitle","board title on section picker"),r=n._("Section","PinSaveButton.BoardFlyout.SectionListSectionTitle","section title on section picker");return e.length>=2?[{items:(0,E.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,E.j)(null!=i?i:[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:o},{items:null!=i?i:[],title:r}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:i,onSectionCreate:o,onSectionSelected:r,pinId:s}=this.props;return(0,b.jsx)(I.Z,{isSelectMode:i,boardSavedTo:n,createButtonLabel:this.props.i18n._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:s})}}function P(e){const t=(0,d.ZP)(),n=(0,p.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,b.jsx)(T,{...e,i18n:t,sectionsResource:n})}var D=n(301314),k=n(457175),O=n(34411);function R(e,t,n){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...n?{advertiser_id:n,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class B extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:i}=t,o=(e=>{const t=[],n=[];return e.forEach((e=>{var i;null!==(i=e.name)&&void 0!==i&&i.match(/^\d/)?n.push(e):t.push(e)})),[...t,...n]})(n);return o.length<=3?[{items:o}]:e.length>=2?[{items:(0,E.j)(o,e)}]:[i.length?{items:i,title:this.props.i18n._("Top choices"," - "," -- ")}:{items:[]},{items:o,title:this.props.i18n._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:i,isSelectMode:o,onBoardCreate:r,onBoardSelected:s,pinId:a}=this.props,d=n&&!!e&&e.all_boards.length<=3;return(0,b.jsx)(I.Z,{isSelectMode:o,boardSavedTo:i,hasLoadError:!!t,hasLowBoardCount:d,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:s,pinId:a})}}function A(e){const t=(0,d.ZP)(),n=(0,O.Z)(),i=(0,r.useSelector)((({advertiser:e})=>{if(n.isAuth&&e&&e.owner_user_id!==n.id)return e.id})),o=(0,r.useSelector)((({advertiser:e})=>{if(n.isAuth&&e&&e.owner_user_id!==n.id)return e.owner_user_id})),s=(0,p.Z)({name:"BoardPickerBoardsResource",options:R(e.pinId,o,i)});return(0,b.jsx)(B,{...e,boardResource:s,i18n:t})}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends i.Component{constructor(...e){super(...e),M(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),M(this,"close",(()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()})),M(this,"sendInvites",(e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach((n=>{t[n].resource(e.id,[n])}))})),M(this,"handleInvite",(e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}})),M(this,"handleBoardCreate",(e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)})),M(this,"handleBoardSave",((e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:o,invalidateResource:r}=this.props;if(r(),o(),n&&"board_section"===e.type){return i(n,e,t)}const s=e,{section_count:a=0}=s;!n&&"number"==typeof a&&a>0?this.setState({selectedSectionBoard:s},this.manageModalTitle):(this.sendInvites(e),i(s,void 0,t))})),M(this,"handleCreate",(e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,i=e?10306:249;this.props.logContextEvent({event_type:101,component:n,element:i})})),M(this,"manageModalTitle",(()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?this.props.i18n._("Add section","Repin title for making a board section","Repin title for making a board section"):n&&!t?this.props.i18n._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!n?this.props.i18n._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):this.props.i18n._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))}))}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:n,onToggleFlyout:i,pinId:o,preselectedCollaborators:r,setModalTitle:s,suggestedBoardTitle:a}=this.props,{newName:d,selectedSectionBoard:l,showCreate:c}=this.state,u=!!l,h=!s;return(0,b.jsxs)(f.xu,{display:"flex",position:"relative",width:"100%",children:[!c&&(0,b.jsx)(f.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:l?(0,b.jsx)(P,{board:l,boardSavedTo:e,isSelectMode:n,onSectionCreate:this.handleCreate(u),onSectionSelected:this.handleBoardSave}):(0,b.jsx)(A,{boardSavedTo:e,isSelectMode:n,onBoardCreate:this.handleCreate(u),onBoardSelected:this.handleBoardSave,pinId:o})}),c&&!l&&(0,b.jsx)(S,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:i,pinId:o,prefilledName:d||a,preselectedCollaborators:r,showTitle:h}),c&&l&&(0,b.jsx)(j.Z,{board:l,completeCreateSectionAction:this.handleBoardSave,initialName:d,isRepin:t,onClearModal:this.close,showTitle:h})]})}}const Z=(0,r.connect)(null,(function(e,t){return{invalidateResource:()=>{e((0,D.jB)("BoardPickerBoardsResource",R(t.pinId)))},invalidatePinBetterSaveResource:()=>{e((0,D.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))((function(e){const{logContextEvent:t}=(0,k.v)(),n=(0,d.ZP)();return(0,b.jsx)(L,{...e,i18n:n,logContextEvent:t})}));var N=n(300970),F=n(451190),U=n(367919),H=n(627578),z=n(230457),W=n(674245);const $="publish_actions",G={checkFbTimelinePermission:function(e){(0,W.default)((function(t){t.api("/me/permissions",(t=>{const n=t.data;let i=!1;if(n){i=!!n.find((e=>e.permission===$&&"granted"===e.status))}i?e.success&&e.success():e.error&&e.error()}))}),z.Z)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t,n){(0,W.default)((i=>{if(!G.fbConnectedAccountMatchesLoggedInAccount(i,n))return H.Z.showError(t._("Oops! Your account is linked to a different Facebook account than the one you're logged into now."," - "," -- ")),e.error&&e.error(),void(e.complete&&e.complete());G.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){G.fbLogin(e)}})}),z.Z)},fbLogin:function(e){(0,W.default)((t=>{t.login((t=>{t.authResponse?G.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()}),{scope:$})}),z.Z)}},V=G;var q=n(447186),Y=n(912397);function X({onSocialConnect:e}){const t=(0,d.ZP)(),n=(0,O.Z)(),{data:o,isLoaded:r}=(0,p.Z)({name:"UserResource",options:{user_id:n&&n.isAuth?n.id:"",field_set_key:"social_connect"}}),[s,a]=(0,i.useState)(!!(r&&o&&o.facebook_publish_stream_enabled)),[l,c]=(0,i.useState)(!!(r&&o&&o.twitter_publish_enabled));if((0,i.useEffect)((()=>{r&&o&&(a(!!o.facebook_publish_stream_enabled),c(!!o.twitter_publish_enabled))}),[o,r]),!o)return null;const{connected_to_facebook:u,twitter_url:h}=o,g=t=>{a(t),q.Z.set("facebook_publish_stream_enabled",t),e(Y.vq,t)};return!(!u&&!h)&&(0,b.jsxs)(f.xu,{display:"flex",padding:2,children:[u&&(0,b.jsxs)(f.xu,{display:"flex",alignItems:"center",marginStart:2,children:[(0,b.jsx)(f.XZ,{checked:s,id:"share_facebook",onChange:()=>{s?g(!1):V.maybeRequestFbTimelinePermission({success:()=>g(!0),error:()=>g(!1)},t)},size:"sm"}),(0,b.jsx)(f.__,{htmlFor:"share_facebook",children:(0,b.jsx)(f.xu,{marginStart:2,children:(0,b.jsx)(f.xv,{children:t._("Post to Facebook"," - "," -- ")})})})]}),h&&(0,b.jsxs)(f.xu,{display:"flex",alignItems:"center",marginStart:5,children:[(0,b.jsx)(f.XZ,{checked:l,id:"share_twitter",onChange:()=>{const t=!l;c(t),e(Y.Ib,t)},size:"sm"}),(0,b.jsx)(f.__,{htmlFor:"share_twitter",children:(0,b.jsx)(f.xu,{marginStart:2,children:(0,b.jsx)(f.xv,{children:t._("Post to Twitter"," - "," -- ")})})})]})]})}var J=n(234316);const K=({board:e,completeCreateSectionAction:t,height:n,onClose:o,pinImport:s,url:a,width:l})=>{const c=(0,d.ZP)(),u=(0,r.useDispatch)(),[h,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),[v,x]=(0,i.useState)(null);return(0,b.jsx)(F.Z,{accessibilityModalLabel:c._("Repin modal","save.pinToBoard.modal.label","Accessibility label on modal"),heading:(0,b.jsx)(f.xu,{padding:8,children:(0,b.jsx)(f.kC,{alignItems:"center",children:(0,b.jsx)(f.xu,{width:"66%",marginStart:"auto",children:(0,b.jsxs)(f.kC,{justifyContent:"between",children:[(0,b.jsx)(f.X6,{size:"md",children:c._("Add section","sectionCreateModal.title","Title in the add section modal")}),(0,b.jsx)(f.hU,{icon:"cancel",accessibilityLabel:c._("Close","sectionCreateModal.closeButton","close section create modal button"),size:"md",iconColor:"darkGray",onClick:o})]})})})}),footer:(0,b.jsx)(f.kC,{children:(0,b.jsx)(f.xu,{marginStart:"auto",children:(0,b.jsx)(f.zx,{fullWidth:!0,text:c._("Add","sectionCreateModal.add.button","add a new section"),color:"red",onClick:()=>{e&&(m(!0),u((0,J.Z)({boardId:e.id,name:h.trim(),pinImport:s},c)).then((n=>{t(e,n,!1)})).catch((e=>{x(e.message_detail||e.message)})).finally((()=>{m(!1)})))},disabled:g||!h.trim()||!!v,size:"lg"})})}),onDismiss:o,size:"sm",children:(0,b.jsx)(f.xu,{padding:8,children:(0,b.jsxs)(f.kC,{children:[(0,b.jsx)(f.zd,{rounding:4,height:n,width:l,children:(0,b.jsx)(f.Ee,{alt:"",fit:"cover",src:a||"",naturalHeight:null!=n?n:1,naturalWidth:null!=l?l:1})}),(0,b.jsx)(f.xu,{marginStart:8,dangerouslySetInlineStyle:{__style:{width:l?`calc(100% - ${l}px)`:"100%"}},children:(0,b.jsx)(f.nv,{errorMessage:v,id:"sectionEditName",onChange:e=>{p(e.value),x(null)},placeholder:c._('Like "Lighting"',"sectionCreateModal.boardSection.name","Placeholder for board section name"),label:c._("Name","section.create.label","label text for section input"),size:"lg",type:"text",value:h})})]})})})};function Q(){const e=(0,d.ZP)();return(0,b.jsxs)(f.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,b.jsx)(f.$j,{accessibilityLabel:e._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),(0,b.jsx)(f.xu,{paddingY:2,children:(0,b.jsx)(f.X6,{children:e._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins")})}),(0,b.jsx)(f.xv,{children:e._("We're grouping the ideas you picked into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")})]})}var ee=n(476865);function te({index:e,pin:t,sectionName:n}){const o=t.id,r=(0,i.useContext)(le),[s,a]=(0,i.useState)(!1),d=(0,i.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:s?"unselect":"select",payload:{sectionName:n,pinId:o}}),a(!s)}),[o,s]);return(0,b.jsx)(f.iP,{onTap:d,rounding:4,children:(0,b.jsx)(ee.default,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:s?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}const ne=(0,i.memo)((function({sectionSuggestion:e,showSpinner:t}){const n=(0,d.ZP)(),o=(0,i.useRef)(),r=(0,p.Z)({name:"BatchP2PResource",options:{clientType:"84",page_size:10,pinIds:e.pins.map((e=>e.id))},noCache:!0});return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(f.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,b.jsx)(f.$j,{accessibilityLabel:n._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&r.isFetching})}),r.data&&(0,b.jsx)(f.xu,{paddingY:4,paddingX:8,children:(0,b.jsx)(f.X6,{align:"start",size:"sm",children:e.name})}),(0,b.jsx)(f.xu,{ref:o,children:r.data&&o&&o.current&&(0,b.jsx)(f.Rk,{columnWidth:152,comp:({data:t,itemIdx:n})=>(0,b.jsx)(te,{index:n,pin:t,sectionName:e.name}),gutterWidth:16,items:r.data||[],loadItems:()=>{},scrollContainer:()=>o.current})})]})}),((e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id));function ie({canSubmit:e,handleClose:t,handleSubmit:n,sectionSuggestions:o}){const{logContextEvent:r}=(0,k.v)(),s=(0,d.ZP)();(0,i.useEffect)((()=>{const e=[];o.forEach((t=>e.push(t.name))),r({event_type:13,view_type:1,view_parameter:3461,aux_data:{suggested_section_names_viewed:e}})}),[r,o]);return(0,b.jsx)(i.Fragment,{children:(0,b.jsxs)(f.xu,{width:"100%",children:[(0,b.jsx)(f.xu,{minHeight:"100%",marginBottom:12,width:"100%",children:o.map(((e,t)=>(0,b.jsx)(f.xu,{marginBottom:4,children:(0,b.jsx)(ne,{sectionSuggestion:e,showSpinner:0===t})},e.name)))}),(0,b.jsx)(f.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{position:"sticky"}},bottom:!0,color:"white",display:"flex",justifyContent:"end",padding:4,width:720,children:(0,b.jsx)(f.zx,{color:e?"red":"gray",size:"lg",text:e?s._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):s._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?n():t()}})})]})})}function oe({handleClose:e,handleSubmit:t,suggestions:n}){const o=(0,d.ZP)(),[r,s]=(0,i.useState)({}),a=!!Object.keys(r).length;return(0,b.jsxs)(f.xu,{children:[(0,b.jsx)(f.xu,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:"calc(100% - 88px)"}},children:(0,b.jsx)(f.xu,{display:"flex",wrap:!0,height:360,paddingX:6,children:n.map((e=>(0,b.jsx)(f.xu,{paddingX:1,height:160,children:(0,b.jsx)(f.iP,{onTap:()=>{const t={...r};t[e.name]?delete t[e.name]:t[e.name]=e,s(t)},rounding:6,children:(0,b.jsx)(f.xu,{rounding:7,dangerouslySetInlineStyle:{__style:{border:r[e.name]?"2px solid #111":"2px solid white",padding:"2px"}},children:(0,b.jsxs)(f.xu,{height:160,width:152,position:"relative",rounding:6,children:[(0,b.jsx)(f.zd,{rounding:6,height:160,width:152,children:(0,b.jsx)(f.Ee,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})}),(0,b.jsx)(f.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152,children:(0,b.jsx)(f.X6,{align:"center",color:"white",size:"sm",children:e.name})})]})})})},e.name)))})}),(0,b.jsx)(f.xu,{display:"flex",width:"100%",justifyContent:"end",padding:5,children:(0,b.jsx)(f.zx,{color:a?"red":"gray",size:"lg",text:a?o._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):o._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{a?t(Object.values(r)):e()}})})]})}var re=n(881220),se=n(921797),ae=n(855168),de=n(880841);const le=(0,i.createContext)();function ce(e,t){const{sectionName:n,pinId:i}=t.payload,o=[...e[n]||[]];switch(t.type){case"select":return{...e,[n]:[...o,i]};case"unselect":const t=o.indexOf(i);if(o.splice(t,1),!o.length){const t={...e};return delete t[n],t}return{...e,[n]:o};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function ue({board:e,handleClose:t,setModalTitle:n,suggestions:o,viewer:s}){const{logContextEvent:a}=(0,k.v)(),l=(0,d.ZP)(),[c,u]=(0,i.useState)("sections"),[h,p]=(0,i.useState)([]),[g,m]=(0,i.useState)([]),[f,v]=(0,i.useReducer)(ce,{}),{showOneToast:x}=(0,de.F9)(),y=(0,r.useDispatch)(),_=(0,ae.k6)(),w=(0,i.useRef)(null);(0,i.useEffect)((()=>()=>{w.current&&clearTimeout(w.current)}),[]),(0,i.useEffect)((()=>{const e=[];o.forEach((t=>e.push(t.name))),m(e)}),[o]);const C=()=>{a({event_type:101,component:20,view_type:52})},S=()=>{t(),x((({onHide:t})=>{var n;return(0,b.jsx)(re.ZP,{duration:ge,onHide:t,text:(0,se.L)(l,e.name),href:e.url,imageUrl:null!==(n=e.image_cover_url)&&void 0!==n?n:"",onClick:C})})),a({event_type:101,element:1150,view_type:1,view_parameter:3460,aux_data:{suggested_section_names:g}})};return{sections:(0,b.jsx)(oe,{handleClose:S,handleSubmit:e=>{p(e),u("pins"),n&&((0,N.Z)(null,s)?n(l._("Great! Now pick a few ideas to add to your board's new section.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainerNewUser","Modal title for choosing ideas for a new board")):n(l._("Great! Now pick some ideas to start off with.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board")));const t=[];e.forEach((e=>t.push(e.name))),a({event_type:101,element:96,view_type:1,view_parameter:3460,aux_data:{suggested_section_names_selected:t,suggested_section_names_viewed:g}})},suggestions:o}),pins:(0,b.jsx)(le.Provider,{value:v,children:(0,b.jsx)(ie,{canSubmit:!!Object.keys(f).length,handleClose:S,handleSubmit:()=>{let t=0;u("saving"),n&&n(null);const i=h.reduce(((e,t)=>(e[t.name]=null,e)),{});let o=0;const r=[];Object.entries({...i,...f}).forEach((([n,i])=>{o+=Array.isArray(i)&&i.length,r.push({[n]:i}),y((0,J.Z)({boardId:e.id,initialPinIds:i,name:n},l)).then((()=>{t+=1,t===h.length&&(w.current=setTimeout((()=>{var t;_.push(null!==(t=e.url)&&void 0!==t?t:"")}),1500),a({event_type:101,element:76,view_type:1,view_parameter:3460,aux_data:{number_pins_selected:o,number_sections_selected:h.length,selected_pin_ids:JSON.stringify(r),suggested_section_names:g}}))}))}))},sectionSuggestions:h})}),saving:(0,b.jsx)(Q,{})}[c]}var he=n(254821);function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ge=4e3,me={LOADING:"loading",SUCCESS:"success"};class fe extends i.PureComponent{constructor(...e){super(...e),pe(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),pe(this,"pinImageRef",(0,i.createRef)()),pe(this,"handleSavePinToBoard",((e,t,n)=>{const{handleSaveToBoard:i,sectionSuggestions:o,setModalTitle:r,viewer:s}=this.props;i(e,t,n),n&&(this.setState({isSavingPin:!0,newBoard:e}),o&&o.length>0&&r&&((0,N.Z)(null,s)?r(this.props.i18n._("You can keep your boards organized with sections. Try adding a section to your new board now!","save.pin-to-board.PinToBoard.SectionPickerModalTitleNewUser","Modal title for selection recommended sections for a new board")):r(this.props.i18n._("Let's build out your new board! What topics will it include?","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board"))))})),pe(this,"handleToggleFlyout",(()=>this.setState((({isFlyoutOpen:e})=>({isFlyoutOpen:!e}))))),pe(this,"close",(()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()})),pe(this,"dismissModal",(e=>{const{dismissModal:t}=this.props;t&&t()}))}render(){const{boardSavedTo:e,boardWithSection:t,color:n,displaySuccessAnimation:r,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:a,isInModal:d,newPin:l,pin:c,preselectedCollaborators:u,onBoardCreated:h,sectionSuggestions:p,sensitiveContentNotice:g,setModalTitle:m,showCreate:v,shouldRenderContent:x,suggestedBoardTitle:y,updateDescription:_,viewer:w}=this.props;if(!c||!c&&!c.resourceLoaded||!x)return null;const{isSavingPin:C,newBoard:S}=this.state;if(v&&t){var j;const{url:e,width:n,height:i}=(null===(j=c.images)||void 0===j?void 0:j["236x"])||{};return(0,b.jsx)(K,{board:t,url:e,height:i,width:n,onClose:this.close,completeCreateSectionAction:this.handleSavePinToBoard})}let I=null;l&&l.board&&(I=l.board.name);const E=g&&g.title||this.props.modalTitle,T=g?(0,b.jsx)(he.Z,{inModal:!0,notices:[g]}):(0,b.jsx)(f.kC,{alignItems:"stretch",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:C&&S&&p&&p.length>0?(0,b.jsx)(ue,{board:S,handleClose:this.close,setModalTitle:m,suggestions:p,viewer:w}):(0,b.jsxs)(i.Fragment,{children:[(0,b.jsxs)(f.xu,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,b.jsxs)(f.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:[(0,b.jsx)(f.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,b.jsx)(U.Z,{color:n,pin:c,pinImageRef:this.pinImageRef,updateDescription:_})}),(0,b.jsx)(X,{onSocialConnect:a})]}),(0,b.jsx)(f.kC,{alignItems:"stretch",width:"60%",children:(0,b.jsx)(Z,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:h,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:c.id,preselectedCollaborators:u,setModalTitle:d?m:void 0,showCreate:v,suggestedBoardTitle:y})})]}),r&&(0,b.jsx)(o.Z,{onDismiss:()=>{s(),this.dismissModal()},pin:c,pinImageRef:this.pinImageRef,selectedBoardName:I})]})});return d?(0,b.jsx)(F.Z,{accessibilityModalLabel:E||this.props.i18n._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:E,onDismiss:this.close,size:"md",children:T}):T}}pe(fe,"defaultProps",{pwtAuxData:{}});const be=function(e){const t=(0,d.ZP)(),n=(0,O.Z)();return(0,b.jsx)(fe,{...e,i18n:t,viewer:n})}},921797:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(667294),o=(n(631739),n(925265)),r=n(883119),s=n(785893);const a=(e,t,n)=>n?(0,o.Z)(e._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:n.title,boardName:null!=t?t:""}):(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(r.xv,{children:e._("Saved to"," - "," -- ")}),(0,s.jsx)(r.xv,{weight:"bold",children:t})]})},824820:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(667294),o=n(40142),r=n(631739),s=n(34411),a=n(273341),d=n(301314),l=n(174523),c=n(946753),u=n(164756),h=n(997993),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){class t extends i.Component{constructor(...e){super(...e),g(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[(0,h.aH)({message:this.props.i18n._("Don't forget to name your board!"," - "," -- ")}),(0,h.Gy)({max:r.Z.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,c.nk)(this.props.i18n._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.Z.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.Z.BoardPrivacy.PUBLIC:r.Z.BoardPrivacy.PROTECTED,saving:!1}),g(this,"invalidateResource",(e=>{const{dispatch:t,viewer:n}=this.props;t((0,d.jB)("BoardsResource",(0,a.Sd)(n.isAuth?n.username:"",e===r.Z.BoardPrivacy.SECRET)))})),g(this,"createBoard",(e=>{const{dispatch:t,viewer:n}=this.props,i=n.isAuth?n.username:"";return t((0,u.aX)(e,{isFBC:n.isAuth&&0===n.boardCount},i))})),g(this,"handleChangeName",((e,t)=>{this.setState((({nameValidators:t})=>({inputName:e,nameValidatorErrors:(0,h.FU)(t,e),createBoardError:null})),(()=>{t&&this.handleCreate()}))})),g(this,"handleChangePrivacy",(()=>{this.setState((({privacy:e})=>({privacy:e===r.Z.BoardPrivacy.SECRET?r.Z.BoardPrivacy.PUBLIC:r.Z.BoardPrivacy.SECRET})))})),g(this,"handleCreate",(()=>{const{inputName:e,privacy:t}=this.state,{isAdAccountOwner:n,onCreate:i,advertiser_id:o}=this.props,r={privacy:t,name:e,...!n&&o?{advertiser_id:o}:{}};this.setState({saving:!0,createBoardError:null}),this.createBoard(r).then((e=>{this.setState({saving:!1}),i(e)})).catch((e=>{let t=this.props.i18n._("Uh oh! Something went wrong."," - "," -- ");if("string"==typeof e)t=e;else if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}this.setState({saving:!1,createBoardError:t})})),this.invalidateResource(t)}))}render(){return(0,p.jsx)(e,{onBoardCreate:this.handleCreate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,...this.props,...this.state})}}return g(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),function(e){const n=(0,l.ZP)(),i=(0,o.useSelector)((({advertiser:e})=>e)),r=(0,o.useDispatch)(),a=(0,s.Z)(),d=!i||a.isAuth&&i.owner_user_id===a.id,c=i&&i.id;return(0,p.jsx)(t,{...e,i18n:n,viewer:a,isAdAccountOwner:d,advertiser_id:null!=c?c:void 0,dispatch:r})}}},872284:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(551687),r=n(689859),s=n(174523),a=n(883119),d=n(785893);const l=(0,i.lazy)((()=>n.e(61116).then(n.bind(n,892575))));function c(e){const t=(0,s.ZP)();return(0,d.jsx)(o.Z,{name:"SafeSuspense_SendObjectLoader_SendObjectWrapper",children:(0,d.jsx)(r.Z,{fallback:(0,d.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:2,children:(0,d.jsx)(a.$j,{accessibilityLabel:t._("Loading sharing","Accessibility label for loading sharing UI","Accessibility label for loading sharing UI"),show:!0})}),children:(0,d.jsx)(l,{...e})})})}},237574:(e,t,n)=>{n.d(t,{d:()=>i});const i={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article",SEARCH:"search"}},388291:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s({onUpdate:e,showLabel:t=!0,value:n}){const s=(0,i.ZP)(),a=[{label:s._("Easy","storyboard.detailsList.field.difficulty","Easy difficulty rating for story pin"),value:String(1)},{label:s._("Medium","storyboard.detailsList.field.difficulty","Medium difficulty rating for story pin"),value:String(2)},{label:s._("Difficult","storyboard.detailsList.field.difficulty","Hard difficulty rating for story pin"),value:String(3)}];return(0,r.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,r.jsx)(o.xu,{width:"100%",children:(0,r.jsx)(o.EI,{size:"lg",id:"servings",name:"servings",label:t?s._("Difficulty","storyboard.detailsList.field.difficulty","Header title for difficulty rating entry for story pin"):void 0,placeholder:s._("Pick a difficulty rating","storyboard.detailsList.field","Placeholder caption for difficulty rating input in story pin"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},247093:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(588527),r=n(174523),s=n(883119),a=n(785893);const d=e=>{const t=e.split("\n");t.push("");const n=[];let i,o=[];return t.forEach((e=>{const t=e.indexOf("•");t>-1?(i||(i=""),o.push(e.substring(t+1).trim())):((i||o.length>0)&&n.push({heading:i,items:o}),i=e,o=[])})),n},l=e=>{let t="";return e.forEach(((n,i)=>{const{heading:o,items:r}=n;o&&(t+=o),r&&r.length>0&&(t+="\n• "+r.join("\n• ")),i<e.length-1&&(t+="\n\n")})),t};const c=function({header:e,helperText:t,listBlocks:n,onUpdate:c,placeholderListBlocks:u}){const h=(0,r.ZP)(),p=l(u||[{heading:h._("What you'll need","storyboard.detailsList.placeholder","Placeholder text header for details list of story Pin"),items:[h._("Write a bullet list of tools, materials and anything else!","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin"),h._("Type it up or copy and paste.","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin")]}]),[g,m]=(0,i.useState)(n?l(n):"");return(0,a.jsx)(s.xu,{children:(0,a.jsx)(s.Kx,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{m(e),c(d(e))},onBlur:()=>{""===g.trim()&&m("")},onKeyDown:({event:e,value:t})=>{const{keyCode:n,target:i,shiftKey:r}=e;if(i instanceof HTMLTextAreaElement){const{selectionStart:s,selectionEnd:a}=i;if(s===a){let a=0,l=0,u="";if(n===o.Z.ENTER?"\n• "!==t.substring(s-3,s)||"\n"!==t.substring(s,s+1)&&s!==t.length?r||"\n"===t.substring(s-1,s)||(a=0,u="\n• "):(a=-3,u="\n"):n!==o.Z.BACKSPACE&&n!==o.Z.DELETE||("\n• "===t.substring(s-3,s)?a=-3:"\n•"===t.substring(s-2,s)?a=-2:"\n"===t.substring(s-1,s)&&"•"===t.substring(s,s+1)&&(a=-1,l=1)),0!==a||0!==l||""!==u){const n=t.substring(0,s+a)+u+t.substring(s+l);m(n);const o=s+a+u.length;setTimeout((()=>{i.selectionStart=o,i.selectionEnd=o}),10),c(d(n)),e.preventDefault()}}}},placeholder:p,rows:7,value:g})})}},910963:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(174523),o=n(946753),r=n(883119),s=n(785893);function a({onUpdate:e,showLabel:t=!0,value:n}){const a=(0,i.ZP)(),d=[];for(let i=1;i<=50;i+=1)d.push({value:String(i),label:(0,o.nk)(a.ngettext("{{ servings }} serving","{{ servings }} servings",i,"storyboard.detailsList.field.servings","Option for number of servings a story pin recipe will provide"),{servings:i}).join("")});return(0,s.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,s.jsx)(r.xu,{width:"100%",position:"relative",children:(0,s.jsx)(r.EI,{size:"lg",id:"servings",name:"servings",label:t?a._("Servings","storyboard.detailsList.field.servings","Header title for serving count entry for story pin recipe"):void 0,placeholder:a._("Pick a serving size","storyboard.detailsList.recipe","Placeholder caption for servings count input in story pin recipe"),value:n,options:d,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},155643:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(174523),r=n(946753),s=n(883119),a=n(785893);function d({header:e,onUpdate:t,value:n}){const d=(0,o.ZP)(),[l,c]=(0,i.useState)(n?String(Math.floor(Number.parseInt(n,10)/60)):"0"),[u,h]=(0,i.useState)(n?String(Number.parseInt(n,10)%60):"0"),p=(e,n)=>{t(String(Number.parseInt(n,10)+60*Number.parseInt(e,10)))},g=[];for(let i=0;i<=9;i+=1)g.push({value:String(i),label:(0,r.nk)(d.ngettext("{{ hours }} hour","{{ hours }} hours",i,"storyboard.detailsList.recipe","Option for number of hours a story pin recipe will take"),{hours:i}).join("")});const m=[];for(let i=0;i<60;i+=1)m.push({value:String(i),label:(0,r.nk)(d.ngettext("{{ minutes }} minute","{{ minutes }} minutes",i,"storyboard.detailsList.recipe","Option for number of minutes a story pin recipe will take"),{minutes:i}).join("")});return(0,a.jsxs)(s.kC,{alignItems:"end",justifyContent:"start",width:"100%",children:[(0,a.jsx)(s.xu,{width:"50%",marginEnd:2,children:(0,a.jsx)(s.EI,{size:"lg",id:"hours",name:"hours",label:e,placeholder:d._("Hours","storyboard.detailsList.recipe","Placeholder caption for hours input in story pin recipe cooktime"),value:l,options:g,onChange:({value:e})=>{Number.isNaN(e)||(c(e),p(e,u))}})}),(0,a.jsx)(s.xu,{width:"50%",marginStart:2,children:(0,a.jsx)(s.EI,{size:"lg",id:"minutes",name:"minutes",placeholder:d._("Minutes","storyboard.detailsList.recipe","Placeholder caption for minutes input in story pin recipe cooktime"),value:u,options:m,onChange:({value:e})=>{Number.isNaN(e)||(h(e),p(l,e))}})})]})}},757839:(e,t,n)=>{n.d(t,{CH:()=>o,_i:()=>r,Fe:()=>s});const i=[0,2,1];function o(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:n}=e;return{heading:t,blocks:(null!=n?n:[]).map((e=>({text:e.text?e.text:"",type:9}))),type:7}})):[];return{key_value_blocks:n&&n.length>0?n.map((e=>({category_type:e.category_type,type:8,value:e.value}))):[],list_blocks:i}}function r(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:n}=e;return{heading:t,items:(null!=n?n:[]).map((e=>e.text?e.text:""))}})):[];return{keyValueBlocks:n&&n.length>0?n.reduce(((e,t)=>{const{category_type:n,value:i}=t;return e[null!=n?n:""]=i,e}),{}):{},listBlocks:i}}function s(e){const{keyValueBlocks:t,listBlocks:n}=e;if(!t&&!n)return null;return{list_blocks:n?n.map((e=>{const{heading:t,items:n}=e;let i=[];return n&&(i=n.map((e=>({text:e,type:9})))),{blocks:i,heading:t,type:7}})):[],key_value_blocks:(t?Object.keys(t).map((e=>{const n=t[e],o=Number.parseInt(e,10),r=i.indexOf(o)>-1&&n===Number.parseInt(n,10).toString();return n&&r?{value:n,category_type:o,type:8}:null})):[]).filter(Boolean)}}},432921:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(965035),o=n(174523),r=n(883119),s=n(785893);function a({duration:e}){const t=(0,o.ZP)();return(0,s.jsxs)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,s.jsx)(r.JO,{accessibilityLabel:t._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"white",size:"sm",lineClamp:1,children:(0,i.Z)(e)})})]})}},727407:(e,t,n)=>{n.d(t,{ZP:()=>S});var i=n(667294),o=n(23279),r=n.n(o),s=n(102156);function a(e){const{eventData:{videoEvent:{videoDuration:t,startTime:n,endTime:i,videoStartTime:o,videoEndTime:r,isAudible:s,height:a,width:d,playbackState:l,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:g}},component:m,objectId:f,view:b,viewParameter:v,...x}=e;return{component:m,object_id_str:f,view_type:b,view_parameter:v,aux_data:{...x},event_data:{videoEventData:{videoDuration:t,time:n,endTime:i,videoTime:o,endVideoTime:r,isAudible:s,height:a,width:d,playbackState:l,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:g}}}}var d=n(355991),l=n(80078),c=n(457175),u=n(748455),h=n(883119),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=[0,.25,.5,.75,.95,.97],f=[0,.5,.8,.99,1],b="-64px 0px 0px 0px",v={rootMargin:b,threshold:f},x={rootMargin:b,threshold:l.iM},y=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function _(){return(new Date).getTime()}function w(e){return!!e.volume&&e.volume>0}class C extends i.Component{constructor(e){super(e),g(this,"videoWrapperRef",(0,i.createRef)()),g(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),g(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),g(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),g(this,"handleLoop",(()=>{this.videoTime=0})),g(this,"handleTimeChange",(e=>{const{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;const i=1e3*e.time,o=function(e,t,n,i){if(e>t)return null;if(n<=0)return null;for(const o of i){const i=o*n;if(e<=i&&t>i)return o}return null}(this.videoTime,i,this.currentInterval.videoDuration,m);if("number"==typeof o&&this.props.playing&&!t&&n){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*o),quartilePercentValue:o})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)})),g(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),g(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),g(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),g(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const n=e.slice(-1)[0],i=function(e,t){for(let n=0;n<t.length;n+=1){const i=t[n],o=t[n+1];if(null==o)return i;if(i<=e&&e<o)return i}return null}(Number.parseFloat(n.intersectionRatio.toFixed(2)),f);"number"==typeof i&&(this.visible=i>=.5),null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:y.PAUSED}):this.startNewInterval({viewability:i}))})),g(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),g(this,"handleClose",(()=>{this.startNewInterval()})),g(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=_();this.handleWindowResize=r()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:w(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const n={};w(e)&&!w(this.props)?n.isAudible=!1:!w(e)&&w(this.props)&&(n.isAudible=!0);const i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?y.PLAYING:y.PAUSED:y.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{closeupStoryPinViewability:n,contextLogData:i,logContextEvent:o}=this.props,{height:r,width:s,windowHeight:d,windowWidth:l,viewability:c,...u}=t;if(null!=r&&null!=s&&null!=d&&null!=l&&null!=c){const t={...u,height:r,width:s,windowHeight:d,windowWidth:l,viewability:n||c};o({event_type:e,...a({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){const e=_();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=_();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:n,accessibilityPauseLabel:i,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:l,captions:c,contextLogData:g,controls:m,cropHeight:f,hlsConfig:b,inAdsDesktopVideoExperiment:y,isAutoPlay:_,loop:w,objectFit:C,onLoadedChange:S,onPause:j,onPlay:I,onSeek:E,onVolumeChange:T,playbackRate:P,playing:D,playsInline:k,poster:O,preload:R,rootMargin:B,src:A,surface:M,videoStartTime:L,volume:Z}=this.props,{seeking:N}=this.state,F=y?x:v;return void 0!==B&&(F.rootMargin=M?(0,d.e)(M):B),(0,p.jsx)(s.Z,{options:F,onVisibilityChange:this.handleVisibilityChange,children:(0,p.jsx)(h.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:f?{display:"flex",alignItems:"center",height:"236px"}:{}},children:(0,p.jsx)(u.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:n,accessibilityPauseLabel:i,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:l,captions:c,contextLogData:g,controls:m,hlsConfig:b,isAutoPlay:_,loop:w,objectFit:C,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:S,onLoop:this.handleLoop,onPause:j,onPlay:I,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:E,onTimeChange:this.handleTimeChange,onVolumeChange:T,playbackRate:P,playing:!N&&D,playsInline:k,poster:O,preload:R,src:A,videoStartTime:L,visible:this.visible,volume:Z})})})}}function S(e){const{logContextEvent:t}=(0,c.v)();return(0,p.jsx)(C,{...e,logContextEvent:t})}g(C,"defaultProps",h.nk.defaultProps)},582418:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(40142),r=n(756103),s=n(708206),a=n(457175),d=n(104216),l=n(785893);const c=(0,s.compose)((0,o.connect)((({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}})),(function(e){return function(t){const{logContextEvent:n}=(0,a.v)(),[o,s]=(0,i.useState)(!1),c=(0,d.Z)({shouldStopEventPropagation:!1}),{pinId:u,onDelete:h,onSubmit:p,carouselSlotCurrentIndex:g}=t;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(e,{...t,handlePinEditButtonClick:c((e=>{e&&e.stopPropagation();const{component:i,onToggleModal:o}=t;o&&o(!0),n({event_type:101,element:3,...i?{component:i}:Object.freeze({})}),s(!0)}))}),o&&(0,l.jsx)(r.ZP,{carouselSlotCurrentIndex:g,onDelete:h,onHide:()=>{s(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:p,pinId:u})]})}}))},207395:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(965667),o=n(883119),r=n(785893);function s({anchor:e,children:t,idealDirection:n,onDismiss:s,paddingX:a,paddingY:d,size:l="lg"}){return(0,r.jsx)(o.xu,{display:"flex",flex:"grow",zIndex:new o.Ry(1e3),children:(0,r.jsx)(i.Z,{anchor:e,idealDirection:null!=n?n:"down",onDismiss:s,positionRelativeToAnchor:!0,size:l,children:(0,r.jsx)(o.xu,{direction:"column",display:"flex",flex:"grow",paddingX:null!=a?a:2,paddingY:d,role:"list",children:t})})})}},803478:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e,label:t}){return(0,o.jsxs)(i.xu,{marginTop:2,paddingY:2,role:"listitem",children:[(0,o.jsx)(i.xu,{paddingX:2,children:(0,o.jsx)(i.xv,{size:"sm",children:t})}),(0,o.jsx)(i.xu,{marginTop:2,role:"list",children:e})]})}},101267:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(174523),r=n(883119),s=n(785893);function a({children:e,dataTestId:t,flexGrow:n,icon:a,onClick:d,url:l}){const c=(0,o.ZP)(),[u,h]=(0,i.useState)(!1);let p;"selected"===a?p=(0,s.jsx)(r.JO,{accessibilityLabel:c._("Selected option","flyoutMenu.selectedOptionCheckmark","Accessibility label for checkmark icon indicating which option is currently selected"),color:"darkGray",icon:"check",inline:!0}):"externalLink"===a&&(p=(0,s.jsx)(r.JO,{accessibilityLabel:c._("External page","header.accountsOptionsMenu.externalLinkIcon","Accessibility label for icon indicating a menu item is a link to an external page"),color:"darkGray",icon:"arrow-up-right",inline:!0,size:12}));const g="string"==typeof e?(0,s.jsx)(r.xu,{maxWidth:p?230:void 0,marginEnd:p?2:void 0,children:(0,s.jsx)(r.xv,{weight:"bold",children:e})}):e,m=l?"link":"button";return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:u?"rgba(0, 0, 0, 0.06)":void 0}},"data-test-id":t,role:"listitem",rounding:2,flex:n?"grow":"shrink",children:(0,s.jsx)(r.iP,{role:m,href:l,onBlur:()=>h(!1),onFocus:()=>h(!0),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onTap:d,target:"externalLink"===a?"blank":null,children:(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",minHeight:35,paddingX:2,rounding:2,children:[g,p&&(0,s.jsx)(r.xu,{flex:"none",marginStart:"auto",children:p})]})})})}},117937:(e,t,n)=>{n.d(t,{K:()=>o});var i=n(311866);function o(e){return t=>function(e){return i.ZP.create("BoardActionStatusResource",{board_id:e}).callGet({showError:!1}).then((e=>new Promise(((t,n)=>{const i=e&&e.resource_response&&e.resource_response.data&&e.resource_response.data.blocking_actions;i?t(i):n(new Error("No blocking actions found in the response"))}))))}(e).then((n=>(t({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:n}}),n)))}},163880:(e,t,n)=>{n.d(t,{OA:()=>o,pS:()=>r,q1:()=>s,Jn:()=>a,Cf:()=>d,xx:()=>l});var i=n(311866);function o(e,t){return i.ZP.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function r(e,t){return i.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function s(e,t){return n=>i.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().catch((()=>{}))}function a(e,t,n){return t=>{const{invited_user:o,status:r,board:{id:s}}=e;o&&i.ZP.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:s,field_set_key:"boardEdit",invited_user_id:o.id}).callDelete({showError:!1})}}function d(e,t){return async n=>{await i.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callCreate(),n(function(e,t){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}}}(e,t))}}function l(e,t){return async n=>{await i.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callDelete(),n(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}},40197:(e,t,n)=>{n.d(t,{oG:()=>o,xQ:()=>r,Br:()=>s,A8:()=>a,Cr:()=>d,ZP:()=>l});var i=n(357846);const o=(e,t)=>n=>n((0,i.U2)("BoardResource",{options:{board_id:e,field_set_key:t}})),r=e=>o(e,"pin_count"),s=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),a=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),d=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},164756:(e,t,n)=>{n.d(t,{Tq:()=>c,oL:()=>u,K8:()=>h,aX:()=>p,yT:()=>g,wN:()=>m,L1:()=>b,Ss:()=>v,xk:()=>x,YV:()=>y,xH:()=>_,Fi:()=>w});var i=n(711349),o=n(311866),r=n(153155),s=n(613330),a=n(357846),d=n(273341),l=n(101691);function c(e,t){return(0,a.U2)("BoardResource",{options:{board_id:e,field_set_key:t}})}function u(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function h(e){return t=>{e&&(0,d.Q2)(e).forEach((e=>{t(e)}))}}function p(e,t,n){const i={...e};return s=>(s({type:"BOARD_CREATE",payload:{board:e}}),o.ZP.create("BoardResource",i).callCreate().then((e=>{const o=e.resource_response.data;return o&&(s(h(n)),null!=t&&t.isFBC||s(u(i,o)),s((0,r.Y)(o.owner.id))),o})))}function g(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function m(e,t){return n=>{const i=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},r={board_id:e.id,name:e.name,description:e.description,category:e.category,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...t?{orbac_subject_id:t}:Object.freeze({}),...i};return n({type:"BOARD_UPDATE",payload:{boardUpdateOptions:r}}),o.ZP.create("BoardResource",r).callUpdate().then((t=>{const i=t&&t.resource_response&&t.resource_response.data||e;n(g(r,i))}))}}function f(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function b(e,t){return(n,i)=>{var r;const s=i().boards.content[e],{pin_count:a}=s,{id:d=""}=null!==(r=s.owner)&&void 0!==r?r:{};return n({type:"BOARD_DELETE",payload:{boardId:e}}),o.ZP.create("BoardResource",{board_id:e,...t?{orbac_subject_id:t}:Object.freeze({})}).callDelete().then((()=>{n(f(e)),n((0,l.JS)({userId:d,increment:"number"==typeof a?-a:0}))}))}}function v(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function x(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),o.ZP.create("BoardArchiveResource",{boardId:e}).callUpdate())}function y(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),o.ZP.create("BoardArchiveResource",{boardId:e}).callDelete())}function _(e,t){return n=>o.ZP.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then((()=>Promise.all([n(f(e)),n(c(t,"pin_count")),n((0,i.Z)(s.DV.BOARD_SECTIONS,t))])))}function w(e){return{type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}}},717927:(e,t,n)=>{function i(){return{type:"SHOW_SECTION_TOOLTIP"}}function o(){return{type:"HIDE_SECTION_TOOLTIP"}}n.d(t,{W:()=>i,l:()=>o})},711349:(e,t,n)=>{function i(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,{Z:()=>i})},386004:(e,t,n)=>{function i(e){return{type:"FEED_ITEM_REORDERED",payload:e}}n.d(t,{Z:()=>i})},578429:(e,t,n)=>{function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,{Z:()=>i})},411221:(e,t,n)=>{function i(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,{Z:()=>i})},152214:(e,t,n)=>{function i(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function o(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}n.d(t,{m:()=>i,L:()=>o})},742979:(e,t,n)=>{n.d(t,{Z:()=>m,S:()=>g});var i=n(646942),o=n(711349),r=n(578429),s=n(411221),a=n(311866),d=n(164756),l=n(613330),c=n(627578);const u=e=>t=>{c.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._("Please wait until the previous board action finishes."," - "," -- ");default:return e.message}}(t,e))},h=e=>(0,o.Z)(e.sectionId?l.DV.SECTION_PINS:l.DV.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const{source:n,target:o}=e;o.boardId!==n.boardId?(t((0,d.Tq)(n.boardId,"pin_count")),t((0,d.Tq)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t((0,d.Tq)(o.boardId,"pin_count")),n.sectionId&&t((0,i.Z)(n.sectionId)),o.sectionId&&t((0,i.Z)(o.sectionId))}function g(e){return t=>{const{selectedPinIds:n,source:i,target:o}=e;t((0,s.Z)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.DV.SECTION_PINS:l.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),t((0,r.Z)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?l.DV.SECTION_PINS:l.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function m(e,t){return n=>function(e,t,n){const{inverseSelection:i,selectedPinIds:o,source:d,target:c}=e;if(d.boardId===c.boardId&&(d.sectionId||null)===(c.sectionId||null))return Promise.reject();if(i){const e={board_id:d.boardId,new_board_id:c.boardId,old_section_id:d.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:o};return a.ZP.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then((()=>Promise.all([t(h(d)),t(h(c))]))).catch(u(n))}{const e=(e,n)=>{t((0,s.Z)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.DV.SECTION_PINS:l.DV.BOARD_PINS,itemIds:o,itemType:"pin"})),t((0,r.Z)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.DV.SECTION_PINS:l.DV.BOARD_PINS,itemIds:o,itemType:"pin"}))};e(d,c);const i=()=>e(c,d);if(c.boardId===d.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:o};return a.ZP.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}{const e={section_id:d.sectionId,pins:o};return a.ZP.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch((e=>{i(),u(n)(e)}))}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:o};return a.ZP.create("BulkEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}}}(e,n,t).then((()=>p(e,n)))}},507010:(e,t,n)=>{function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,{a1:()=>i,jg:()=>o,Vp:()=>r,ND:()=>s})},431260:(e,t,n)=>{n.d(t,{_:()=>o});var i=n(311866);function o(e,t,n,o){return async r=>{const s=i.ZP.create("ApiResource",{url:`/v3/pins/${e}/notes/`,data:{pin_note_content:n,...o?{orbac_subject_id:o}:Object.freeze({})}});let a;a=n?t?await s.callUpdate():await s.callCreate():await s.callDelete();const{resource_response:d}=a;r(function(e,t){return{type:"PIN_NOTE_UPDATE",payload:{pinId:e,pinNote:t}}}(e,null==d?void 0:d.data))}}},234316:(e,t,n)=>{n.d(t,{h:()=>c,Z:()=>u});var i=n(711349),o=n(578429),r=n(742979),s=n(311866),a=n(164756),d=n(613330),l=n(301314);function c(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]},p,g){let m=0;"RECOMMENDATION"===n?m=1:"EDITED_RECOMMENDATION"===n&&(m=2);const f={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:m,...g?{orbac_subject_id:g}:Object.freeze({})};return t=>s.ZP.create("BoardSectionResource",f).callCreate({showError:!1}).then((({resource_response:{data:n}})=>{t(c(e,n)),t((0,o.Z)({feedId:e,feedType:d.DV.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t((0,a.Tq)(e,"pin_count")),t((0,l.jB)("BoardSectionsRepinResource",{board_id:e}));const{all:s,pinIds:h}=u||{all:!1,pinIds:[]};return s?new Promise(((i,o)=>t((0,r.Z)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}},p)).then((()=>i(n))).catch(o))):(h.length>0&&t((0,i.Z)(d.DV.BOARD_PINS,e)),n)}))}},325616:(e,t,n)=>{n.d(t,{H:()=>d,Z:()=>l});var i=n(411221),o=n(311866),r=n(164756),s=n(613330),a=n(301314);function d(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function l(e,t,n){return l=>o.ZP.create("BoardSectionEditResource",{section_id:t,...n?{orbac_subject_id:n}:Object.freeze({})}).callDelete({showError:!1}).then((()=>Promise.all([l(d(e,t)),l((0,i.Z)({feedId:e,feedType:s.DV.BOARD_SECTIONS,itemIds:[t],itemType:"board_section"})),l((0,r.Tq)(e,"pin_count")),l((0,a.jB)("BoardSectionsRepinResource",{board_id:e}))])))}},646942:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(357846);function o(e,t){return n=>n((0,i.U2)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}},726369:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(646942),o=n(711349),r=n(311866),s=n(613330),a=n(301314),d=n(325616);function l(e,t,n){return l=>r.ZP.create("BoardSectionsMergeResource",{source_section_id:t,target_section_id:n}).callUpdate({showError:!1}).then((r=>Promise.all([l((0,d.H)(e,t)),l((0,a.jB)("BoardSectionsRepinResource",{board_id:e})),l((0,i.Z)(n)),l((0,o.Z)(s.DV.SECTION_PINS,n))]).then((()=>r))))}},920763:(e,t,n)=>{n.d(t,{F:()=>i,j:()=>o});const i={USER_FOLLOW:"USER_FOLLOW"},o={USER_BLOCK:"USER_BLOCK"}},289605:(e,t,n)=>{n.d(t,{ZN:()=>a,yA:()=>d,fv:()=>l,KF:()=>c});var i=n(311866),o=n(920763);function r(e,t){return i.ZP.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function s(e,t){return{type:o.F.USER_FOLLOW,payload:{id:e,value:t}}}function a(e,t=null){return n=>{r(e,t).callCreate().catch((()=>n(s(e,!1)))),n(s(e,!0))}}function d(e,t=null){return async n=>{n(s(e,!0)),await r(e,t).callCreate().catch((t=>{throw n(s(e,!1)),t}))}}function l(e,t=null){return n=>{r(e,t).callDelete().catch((()=>n(s(e,!0)))),n(s(e,!1))}}function c(e,t=null){return async n=>{n(s(e,!1)),await r(e,t).callDelete().catch((t=>{throw n(s(e,!0)),t}))}}},101691:(e,t,n)=>{function i(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function r(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,{JS:()=>i,hY:()=>o,h6:()=>r,V6:()=>s,fm:()=>a,GT:()=>d,hT:()=>l});const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),d=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function l(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}},955637:(e,t,n)=>{function i(e){return{type:"UPDATE_PROFILE_BOARD_VIEW",payload:{profileBoardView:e}}}function o(e){return{type:"UPDATE_BOARD_SORT_OPTION",payload:{updatedBoardOrder:e}}}function r(e){return{type:"UPDATE_BOARD_PIN_VIEW",payload:{boardPinView:e}}}function s(e){return{type:"UPDATE_PROFILE_PIN_VIEW",payload:{profilePinView:e}}}n.d(t,{HY:()=>i,gh:()=>o,VT:()=>r,QG:()=>s})},613330:(e,t,n)=>{n.d(t,{DV:()=>a,zX:()=>c,ZP:()=>u});var i=n(317461),o=n(945746),r=n(881219),s=n(451104);const a={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregatedCommentReplies",BOARD_ACTIVITYITEMS:"boardActivityItems",BOARD_ACTIVITYCOMMENTS:"boardActivityComments",BOARD_PINS:"boardPins",BOARDLESS_PINS:"boardlessPins",BOARD_SECTIONS:"boardSections",CALL_TO_CREATE_RESPONSES_FEED:"callToCreateResponsesFeed",CREATED_TAB_STORY_PINS_FEED:"createdTabStoryPinsFeed",CREATED_TAB_ACTIVITY_PINS_FEED:"createdTabActivityPinsFeed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",SECTION_PINS:"sectionPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unifiedComments",USER_DID_IT_DATA:"userDidItData"},d={ApiResource:({options:e})=>null!=e&&e.url.match(/\/v3\/call_to_create_pins\/([0-9]|[a-z]|[A-Z])+\/pins\//)?{type:a.CALL_TO_CREATE_RESPONSES_FEED,id:e.pin_id}:null,AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:a.USER_DID_IT_DATA,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:a.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?a.AGGREGATED_COMMENT_REPLIES:a.AGGREGATED_COMMENTS,id:t,reversed:!0}),BoardActivityFeedResource:({options:{board_id:e}})=>({type:a.BOARD_ACTIVITYITEMS,id:e}),BoardActivityCommentFeedResource:({options:{activityId:e,parentType:t}})=>({type:a.BOARD_ACTIVITYCOMMENTS,id:e,reversed:"boardactivitycomment"===t}),BoardFeedResource:({options:{board_id:e}})=>({type:a.BOARD_PINS,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:a.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:a.SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:a.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:a.PROFILE_BOARDS,id:(0,r.OV)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:t,scope:n,filters:r,query_pin_sigs:s,query:d,user:l},response:c})=>{var u;return{type:a.SEARCH_PINS,id:(0,o.Tb)({appliedProductFilters:t,autoCorrectionDisabled:e,filters:r,query:d,selectedPinImgSig:s,scope:n,user:l}),items:null!==(u=c.resource_response.data)&&void 0!==u&&u.results?(0,i.LM)(c.resource_response.data.results).filteredResults:[]}},DidItCommentsResource:({options:{objectId:e}})=>({type:a.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:a.USER_DID_IT_DATA,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:a.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:a.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:a.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:a.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:a.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:a.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e}})=>({type:a.UNIFIED_COMMENTS,id:e,reversed:!0}),UserActivityPinsResource:({options:{user_id:e}})=>({type:a.CREATED_TAB_ACTIVITY_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:a.CREATED_TAB_STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},l={aggregatedComments:{},aggregatedCommentReplies:{},boardActivityItems:{},boardActivityComments:{},boardlessPins:{},boardPins:{},boardSections:{},callToCreateResponsesFeed:{},createdTabStoryPinsFeed:{},createdTabActivityPinsFeed:{},profileBoards:{},searchPins:{},sectionPins:{},storyPinData:{},todayArticleInterestFeed:{},todayTabFeed:{},unifiedComments:{},userDidItData:{}};function c(e,t,n){const i=[...e],o=i.splice(t,1)[0];return i.splice(n,0,o),i}const u=(e=l,t)=>{switch(t.type){case s.zP:case s.aW:{var n;const{payload:i}=t,o=i.response.resource_response.data;if(null===(n=i.options)||void 0===n||!n.redux_normalize_feed)return e;const r=d[i.resource](i);if(r){const{type:n,id:i,items:d,reversed:l}=r;let c=(d||o||[]).map((e=>((e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===a.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"boardactivity":return{id:e.id,type:"boardactivity"};case"boardactivitycomment":return{id:e.id,type:"boardactivitycomment"};case"board_section":return{type:"board_section",id:e.id};case"userdiditdata":return{type:"userdiditdata",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"userdiditdata",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}})(e,n)));l&&(c=c.reverse());const u=e[n][i];if(u||t.type!==s.aW){const o=u||[];let r=c;return t.type===s.aW&&(r=l?c.concat(o):o.concat(c)),{...e,[n]:{...e[n],[i]:r}}}}break}case"FEED_ITEM_REORDERED":{const{payload:{feedType:n,feedId:i,itemType:o,targetItemId:r,sourceItemId:s}}=t,d=e[n]||{},l=d[i]||[];let u=-1,h=-1;if([a.BOARD_PINS,a.SECTION_PINS,a.BOARD_SECTIONS,"profileBoards"].includes(n)&&(u=l.findIndex((e=>e.type===o&&e.id===s)),h=l.findIndex((e=>e.type===o&&e.id===r))),-1!==u&&-1!==h)return{...e,[n]:{...d,[i]:c(l,u,h)}};break}case"FEED_ITEMS_REMOVED":{const{payload:{feedType:n,feedId:i,inverseSelection:o,itemType:r,itemIds:s=[]}}=t,d=e[n]||{},l=d[i];if(l&&l.length>0&&(n===a.SECTION_PINS||n===a.BOARD_PINS)){const t=l.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&(o&&!t||!o&&t))})),a=!!t.find((e=>"pin"===e.type));return{...e,[n]:{...d,[i]:a?t:[]}}}if(l&&l.length>0&&n===a.BOARD_SECTIONS){const t=l.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&t)}));return{...e,[n]:{...d,[i]:t}}}if(l&&l.length>0&&(n===a.BOARD_ACTIVITYITEMS||n===a.AGGREGATED_COMMENTS||n===a.BOARD_ACTIVITYCOMMENTS||n===a.BOARDLESS_PINS||n===a.UNIFIED_COMMENTS||n===a.USER_DID_IT_DATA||n===a.STORY_PIN_DATA)){const t=l.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&t)}));return{...e,[n]:{...d,[i]:t}}}break}case"FEED_ITEMS_ADDED":{const{payload:{feedType:n,feedId:i,itemType:o,itemIds:r=[],prepend:s}}=t,d=e[n]||{},l=d[i];if(l&&(n===a.SECTION_PINS||n===a.BOARD_PINS||n===a.BOARDLESS_PINS)){const t=r.map((e=>({id:e,type:o})));let s=0;"story"===(l[0]||{}).type&&(s=1),"story"===(l[1]||{}).type&&(s=2);const a=[...l.slice(0,s),...t,...l.slice(s)];return{...e,[n]:{...d,[i]:a}}}if(l&&n===a.BOARD_SECTIONS){const t=[...r].reverse().map((e=>({id:e,type:"board_section"}))),o=l?[...t,...l]:[...t];return{...e,[n]:{...d,[i]:o}}}if(n===a.BOARD_ACTIVITYITEMS||n===a.AGGREGATED_COMMENTS||n===a.AGGREGATED_COMMENT_REPLIES||n===a.BOARD_ACTIVITYCOMMENTS||n===a.UNIFIED_COMMENTS){const t=r.map((e=>({id:e,type:o}))),a=l?[...s?t:l,...s?l:t]:t;return{...e,[n]:{...d,[i]:a}}}if(n===a.USER_DID_IT_DATA){const t=r.map((e=>({id:e,type:o}))),s=l?[...t,...l]:t;return{...e,[n]:{...e[n],[i]:s}}}break}case"FEED_INVALIDATE":{const{payload:{feedType:n,feedId:i}}=t,o=e[n]||{};if(o[i])return{...e,[n]:{...o,[i]:null}};break}}return e}},881219:(e,t,n)=>{n.d(t,{OV:()=>i,M0:()=>o,$k:()=>r});const i=(e,t)=>`${e}:${t||""}`,o=(e,t)=>e.feeds.profileBoards[i(t.username,t.boardOrder)],r=(e,t)=>t.isOverview||t.inActivityView?"xxWide":t.isOwnProfile&&e.ui.views&&e.ui.views.profileBoardView||"wide"},584489:(e,t,n)=>{n.d(t,{Z:()=>i});const i=new class{get instance(){return this.__storeInstance__}set instance(e){return this.__storeInstance__=e,e}set(e){return this.instance=e,e}}},155656:(e,t,n)=>{n.d(t,{Z:()=>r});n(441143);var i=n(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function r(e){const{css:t,unsafeCSS:n,...r}=e,s=String(t||"")||n||"";return!!s?(0,i.jsx)("style",{...r,dangerouslySetInnerHTML:{__html:String(o.factory(s))}}):null}},549156:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{children:t,display:n,id:r}=e;return(0,o.jsx)(i.xu,{"data-test-id":r,display:n,children:t})}},966427:(e,t,n)=>{n.d(t,{o:()=>i,u:()=>o});const i=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>{switch(!0){case e.includes("Chrome"):return i.CHROME;case e.includes("Safari"):return i.SAFARI;case e.includes("Firefox"):return i.FIREFOX;case e.includes("Opera"):return i.OPERA;case e.includes("IE"):return i.IE;case e.includes("Edge"):return i.EDGE;default:return i.OTHER}}},799881:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(296882),o=n(641483);function r(e,t){if(t&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const t=window.open(e,"_blank");return t&&(t.opener=null),t}{const t=(0,i.Z)(e);return setTimeout((()=>{(0,o.My)("setting_new_window_location")}),0),window.location.href=t,window}}},17329:(e,t,n)=>{function i(){if("undefined"!=typeof navigator&&"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&"Notification"in window&&"PushManager"in window)try{return window.Notification.permission}catch(e){return}}n.d(t,{Z:()=>i})},439887:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(221469);const o=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,r=(e,t)=>t?e.substring(t.length).split("/")[0]:e,s=(e,t,n,s)=>{var a;if(!e)return"";let d="";const l=t.board&&t.board.url;switch(e){case"/":case"/homefeed/":return"UserHomefeedResource";case t.pinner&&`/${t.pinner.username}/pins/`:return"UserPinsResource";case t.pinner&&`/${t.pinner.username}/`:case/\/_activity\//.test(e)&&e:return"UserActivityPinsResource";case/\/_created\//.test(e)&&e:return t.story_pin_data_id?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(e)&&e:return"UserDiscoveredPinsResource";case/\/_shop\//.test(e)&&e:return"StoreFrontFeedResource";case/\/_saved\//.test(e)&&e:return"BoardlessPinsResource";case t.pinner&&`/${t.pinner.username}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(e)&&e:return"VisualLiveSearchResource";case/\/pin\//.test(e)&&e:d="/pin/";const c=r(e,d);if(t.id!==c)return t.call_to_create_source_pin_id?`ApiResource_callToCreatePins_${c}`:`RelatedPinFeedResource_${c}`;break;case/\/search\//.test(e)&&e:if(n){return`SearchResource_${((0,i.mB)(n,{shouldDecode:!1}).q||"").toLowerCase()}`}if(s)return`SearchResource_${encodeURIComponent(s.q||"").toLowerCase()}`;break;case/\/discover\/article\//.test(e)&&e:d="/discover/article/";return`ExploreArticleResource_${r(e,d)}`;case/\/categories\//.test(e)&&e:d="/categories/";return`CategoryFeedResource_${r(e,d)}`;case/\/discover\/topics\//.test(e)&&e:return"CategoryFeedResource";case/\/news_hub\//.test(e)&&e:d="/news_hub/";return`NewsHubDetailsResource_${r(e,d)}`;case/\/_tools\/more-ideas\//.test(e)&&e:return"BoardContentRecommendationResource";case/\/topics\//.test(e)&&e:d="/topics/";return`TopicFeedResource_${r(e,d)}`;case t.pinner&&`/${t.pinner.username}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(e)&&e:d="/source/";return`DomainFeedResource_${r(e,d)}`;case/\/explore\//.test(e)&&e:d="/explore/";return`SearchResource_${r(e,d)}`;case l:case!!l&&/\/more_ideas\//.test(e)&&e:return"BoardFeedResource";case l&&e.indexOf(l)>-1&&e:return"BoardSectionPinsResource";case/\/following\//.test(e)&&e:return"FollowingFeedResource";case/\/brand_catalog\//.test(e)&&e:return"BrandCatalogFeedResource";case o.test(e)&&e:return`TodayArticleFeedResource_${(null===(a=e.match(o))||void 0===a?void 0:a[2])||"unknown"}`;case/\/today\//.test(e):return"TodayTabResource";case/\story_feed\//.test(e)&&e:if(n){const{feed_type:e,request_params:t}=(0,i.mB)(n);return`StoryFeedResource_${e}_${t}`}break;case/\/your-shop\//.test(e)&&e:return"PersonalBoutiqueResource"}return""},a=(e,t,n)=>{if(!e||!e.tracking_params||!t)return;if(!e.tracking_params_map)return`${e.tracking_params}~0`;const{pathname:i,search:o,query:r}=t,a=s(i,e,o,r),d=e.tracking_params_map||{},l=Object.keys(d);let c;if((i||"").startsWith("/pin/")){const e=l.find((e=>"PinResource"!==e));c=e?d[e]:d.PinResource}else c=d[a];let u;if(!c&&n&&n.length){const t=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(n[n.length-1].location);u=s(t,e,o,r),c=d[u]}return c||(c=`${e.tracking_params||""}~0`),c}},250311:(e,t,n)=>{n.d(t,{Q:()=>a,Z:()=>d});var i=n(667294),o=n(304966),r=n(387987),s=n(44062);function a(e,t){const{setViewContextData:n}=(0,s.s)(),{requestIdentifier:a}=(0,r.B)(),d=(0,o.Z)();(0,i.useEffect)((()=>{var t;e&&(n({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data,component:e.component,element:e.element,object_id_str:e.object_id_str,aux_data:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:a}))}),[t])}function d(e){const{children:t,log:n}=e;return a(n),t||null}},457175:(e,t,n)=>{n.d(t,{B:()=>o,v:()=>r});var i=n(762803);const{Provider:o,useHook:r}=(0,i.Z)("ContextLogger")},304966:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(457175);const o=()=>(0,i.v)().logContextEvent},44062:(e,t,n)=>{n.d(t,{I:()=>d,s:()=>a});var i=n(667294),o=n(762803),r=n(785893);const{Provider:s,useHook:a}=(0,o.Z)("View");function d({children:e,initialState:t={}}){const[n,o]=(0,i.useState)(t),a=(0,i.useCallback)((()=>o({})),[]);return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(s,{value:{...n,clearViewContextData:a,setViewContextData:o},children:e})})}},762803:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(667294),o=n(785893);function r(e,t){let n=e.slice(1);if(n=n.endsWith("Context")?n:`${n}Context`,t){return{hocDisplayName:`with${e[0].toUpperCase()}${n}(${t})`}}return{propsDisplayName:`${e[0].toLowerCase()}${n}`,messageDisplayName:`${e[0].toUpperCase()}${n}`}}function s(e,t){const n=(0,i.createContext)(t),{propsDisplayName:s,messageDisplayName:a}=r(e);n.displayName=a;const d=n.Provider,l=({children:e})=>{const t=(0,i.useContext)(n);if(void 0===t)throw new Error(`${a}Consumer must be used within a ${a}Provider.`);return e(t)},c=()=>(0,i.useContext)(n);function u(t){const{hocDisplayName:d}=r(e,String(t.displayName||t.name)),l=e=>{const r=(0,i.useContext)(n);if(void 0===r)throw new Error(`${d} must be used within a ${a}Provider.`);if(e[s])throw new Error("Parent Component and Context are passing to the component the same variables.");const l={[s]:r};return(0,o.jsx)(t,{...e,...l})};return l.displayName=d,l}return d.displayName=`${a}Provider`,l.displayName=`${a}Consumer`,u.displayName=`${a}HOC`,{Provider:d,Consumer:l,MaybeConsumer:({children:e})=>e((0,i.useContext)(n)),useMaybeHook:c,useHook:function(){const e=c();if(void 0===e)throw new Error(`use${a} must be used within a ${a}Provider.`);return e},deprecatedHOC:u}}},921274:(e,t,n)=>{n.d(t,{k:()=>o.k,Z:()=>s});var i=n(387987),o=n(625838),r=n(785893);const s=({dateFormatType:e,useUTC:t=!0,value:n})=>(0,r.jsx)(i.LC,{children:i=>(0,o.Z)(i.locale,n,e,t)})},72984:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(e,t)=>{const n=new Date(e);return n.setDate(e.getDate()+t),n}},980767:(e,t,n)=>{n.d(t,{DH:()=>i,FS:()=>o,UK:()=>r,F4:()=>s,VL:()=>a,N9:()=>d,v6:()=>l,N1:()=>c});const i=1e3,o=60*i,r=60*o,s=24*r,a=7*s,d=30*s,l=31*s,c=365*s},625838:(e,t,n)=>{n.d(t,{k:()=>i,Z:()=>o});const i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour"};function o(e,t,n,o=!0){const r=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(n);o&&(r.timeZone="UTC");return new Intl.DateTimeFormat(e,r).format(t)}},483515:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);const o=()=>{const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{t(!0)}),[]),e}},102156:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(973935);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),r(this,"observer",null),r(this,"handleVisibilityChanged",((e,t)=>{this.props.onVisibilityChange(e,t)}))}componentDidMount(){const e=o.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){null!==this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return i.Children.only(this.props.children)}}const a=s},848101:(e,t,n)=>{n.d(t,{I7:()=>d,B$:()=>l,Cw:()=>s,c4:()=>a});var i=n(667294),o=n(762803);const r=(0,i.createContext)(null),s=()=>(0,i.useContext)(r),a=r.Provider,{Provider:d,useHook:l}=(0,o.Z)("DesktopCoreLogin")},853354:(e,t,n)=>{n.d(t,{lt:()=>i,Bx:()=>o,oM:()=>r,N4:()=>s,is:()=>a});const i=e=>e._("You're almost there! Log in to access all of Pinterest","loginModal.limitedLogin.subheader","Subheader text on personalized login modal/flyout to remind users to log in"),o=e=>e._("Log in to save this Pin","limitedLogin.modalHeader.repin","Title on mobile web limited login modal to prompt users to login after they clicked save button."),r=e=>e._("Log in to edit this Pin","limitedLogin.modalHeader.editPin","Title on mobile web limited login modal to prompt users to login after they clicked edit button."),s=({i18n:e,toFollow:t})=>t?e._("Log in to follow","limitedLogin.modalHeader.follow","Title on mobile web limited login modal to prompt users to login to follow a user or board."):e._("Log in to unfollow","limitedLogin.modalHeader.unfollow","Title on mobile web limited login modal to prompt users to login to unfollow a user or board."),a=e=>e._("Log in to create a Pin or board","limitedLogin.modalHeader.create","Title on mobile web limited login modal to prompt users to login to create a Pin or board.")},104216:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(853354),r=n(848101);const s=(e={shouldStopEventPropagation:!0})=>{const{loginForMore:t,viewer:n,limitedLoginModalSubheader:s}=(0,r.B$)(),{shouldStopEventPropagation:a}=e,d="AUTH"===n.type,l=(0,i.ZP)();return d?e=>e:(e,n)=>e=>{let i=null;e&&(e.nativeEvent&&e.nativeEvent instanceof Event?i=e:e.event&&(i=e.event)),a&&i&&i.stopPropagation&&i.stopPropagation(),t&&t.setVisible(!0),s&&(n?s.setText(n):s.setText((0,o.lt)(l)))}}},292900:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(731164),r=n(372833);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.Component{constructor(...e){super(...e),s(this,"state",{error:null,info:null}),s(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{const t=this.props.name,n=this.props.type||"secondary";(0,r.B)({errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),o.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:n}=this.state;return t&&n?e?e({error:t,info:n,resetError:this.resetError}):null:this.props.children}}},551687:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(292900).Z},520108:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(40142),r=n(910289),s=n(12091);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.Component{constructor(...e){super(...e),a(this,"state",{hasCompleted:[],hasDismissed:[]}),a(this,"view",(()=>{const{experience:e,isBackendExperience:t,targeting:n,viewExperience:i,viewExperienceObject:o}=this.props;e&&(t?o(e):n?i(e.placement_id,e.experience_id,n):i(e.placement_id,e.experience_id))})),a(this,"complete",(e=>{const{completeExperience:t,completeExperienceObject:n,experience:i,isBackendExperience:o,preventRemoval:r,targeting:s}=this.props,a=e||1;if(i&&!this.state.hasCompleted.includes(i.experience_id)){const{placement_id:e,experience_id:d}=i||{},l=r||2===a;(1===a||l)&&e&&d&&(o?n(i,l):s?t(e,d,l,s):t(e,d,l),this.setState((e=>({hasCompleted:[...e.hasCompleted,d]}))))}})),a(this,"dismiss",(()=>{const{dismissExperience:e,dismissExperienceObject:t,experience:n,isBackendExperience:i,preventRemoval:o,targeting:r}=this.props,{placement_id:s,experience_id:a}=n||{};n&&!this.state.hasDismissed.includes(a)&&(i?t(n):r?e(s,a,!!o,r):e(s,a,!!o),this.setState((e=>({hasDismissed:[...e.hasDismissed,a]}))))})),a(this,"shouldRenderExperience",(()=>{const{experience:e}=this.props;if(e){const{eligibleIds:t,eligibleTypes:n,predicate:i,transitionType:o}=this.props,{experience_id:r,type:s}=e;if(t&&t.includes(r))return!0;if(null==t||!t.length){if(i&&i(e))return!0;if(n&&n.includes(s))return!0;if(o&&o===s)return!0}}return!1}))}componentDidMount(){if(this.props.disableAutoView)return;const{experience:e}=this.props;e&&this.shouldRenderExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=e.experience,n=this.props.experience;n&&this.shouldRenderExperience()&&(t&&t.experience_id===n.experience_id||this.view())}render(){const{children:e,experience:t,disableAutoView:n}=this.props;return t&&this.shouldRenderExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...n?{view:this.view}:Object.freeze({})}):i.Children.only(e):null}}a(d,"defaultProps",{eligibleIds:[],eligibleTypes:[]});const l=(0,o.connect)((({experiences:e},t)=>({experience:t.experience||(t.placementId?e[t.placementId]:void 0)})),(e=>({completeExperience:(t,n,i,o)=>e((0,r.CK)(t,n,i,!1,{},o)),completeExperienceObject:(t,n)=>e((0,s.Tl)(t,n)),dismissExperience:(t,n,i,o)=>e((0,r.Qu)(t,n,i,void 0,o)),dismissExperienceObject:t=>e((0,s.CF)(t)),viewExperience:(t,n,i)=>e((0,r.UT)(t,n,!1,!1,void 0,i)),viewExperienceObject:t=>e((0,s.dy)(t))})))(d)},264221:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(855356),r=n(514319),s=n(883119),a=n(785893);class d extends i.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:n,zIndex:i}=this.props;return(0,a.jsx)(r.Z,{anchor:e,onTouch:t,onMouseEnter:n,zIndex:i})}renderFlyout(){const{anchor:e,tooltip:t,handleDismiss:n,handleComplete:i}=this.props;if(!t)return null;const{cancelButtonText:o,confirmButtonText:r,mainText:d,idealDirection:l="down"}=t,c=o&&n&&r&&i;return(0,a.jsx)(s.J2,{anchor:e,color:"blue",idealDirection:l,onDismiss:n,shouldFocus:!1,showCaret:!0,size:"flexible",children:(0,a.jsxs)(s.xu,{maxWidth:284,padding:3,width:"max-content",children:[(0,a.jsx)(s.xv,{color:"white",overflow:"breakWord",weight:"bold",children:d}),c?(0,a.jsxs)(s.xu,{marginTop:2,display:"flex",alignItems:"center",children:[(0,a.jsx)(s.xu,{column:6,marginEnd:1,children:(0,a.jsx)(s.zx,{fullWidth:!0,color:"transparentWhiteText",onClick:e=>n(e),size:"md",text:String(o)})}),(0,a.jsx)(s.xu,{column:6,children:(0,a.jsx)(s.zx,{fullWidth:!0,color:"white",size:"md",text:String(r),onClick:i})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var l=n(354783),c=n(85831),u=n(505343);function h({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:r,experience:h,isHidden:p,onCompleteClick:g,zIndex:m}){var f;const{completeExperience:b,dismissExperience:v,experiences:x,viewExperience:y}=(0,u.M)(),_=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(x).reduce(((e,t)=>(8===t.type&&(e[(0,c.A0)(t)]=t),e)),{}),passedExperience:h}),w=(null==_||null===(f=_.display_data)||void 0===f?void 0:f.delay)||0,[C,S]=(0,i.useState)(!!w);if((0,i.useEffect)((()=>{if(w>0&&C){const e=setTimeout((()=>{S(!1)}));return()=>clearTimeout(e)}return()=>{}}),[w,C]),(0,i.useEffect)((()=>{!C&&_&&y(_.placement_id,_.experience_id)}),[C,_]),!_||C||p)return i.Children.only(n);const j=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,o.Z)(l.Z,!0)(t)})(_),I=()=>{var e;null!==(e=_.display_data)&&void 0!==e&&e.complete_on_hover&&b(_.placement_id,_.experience_id)};return(0,a.jsxs)(s.xu,{position:"relative",height:null==r?void 0:r.height,display:null==r?void 0:r.display,children:[(0,a.jsx)(s.iP,{onMouseEnter:I,onTap:()=>{g&&g(),j.skipComplete||b(_.placement_id,_.experience_id)},children:i.Children.only(n)}),(0,a.jsx)(d,{anchor:t||null,handlePulsarCompleteOnHover:I,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),v(_.placement_id,_.experience_id)},pulserOnly:!!j.pulserOnly,tooltip:j.tooltip,tooltipOnly:!!j.tooltipOnly,zIndex:m})]})}},505343:(e,t,n)=>{n.d(t,{F:()=>h,M:()=>u});var i=n(667294),o=n(40142),r=n(708206),s=n(50351),a=n(762803),d=n(910289),l=n(785893);const{Provider:c,useHook:u}=(0,a.Z)("ExperienceContext");function h({children:e}){const[t,n]=(0,i.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const n={...e};return delete n[t.payload],n}return e}),{}),a=(0,o.useDispatch)(),u=(0,o.useSelector)((e=>e.experiences)),h=(0,i.useMemo)((()=>{const e=(0,r.bindActionCreators)({completeExperience:d.CK,dismissExperience:d.Qu,fetchAllExperiences:d.fO,fetchAllExperiencesMulti:s.NW,fetchExperienceForPlacements:d.pz,mountPlacement:d.N,triggerExperimentsForPlacement:d.kd,viewExperience:d.UT},a);return{...e,mountPlacement:(t,...i)=>{e.mountPlacement(t,...i),n({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{n({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[a,n]);return(0,l.jsx)(c,{value:{experiences:u,mountedPlacements:t,...h},children:e})}},169897:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(520108),r=n(514319),s=n(883119),a=n(785893);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.PureComponent{constructor(...e){super(...e),d(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),d(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:n,idealDirection:i}=this.props,o=n.slice(-3);return(0,a.jsx)(s.J2,{anchor:e,color:"white",idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,a.jsxs)(s.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,a.jsx)(s.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,a.jsx)(s.xv,{color:"darkGray",weight:"bold",children:t})}),(0,a.jsx)(s.xu,{display:"flex",marginEnd:-2,paddingX:2,children:o.map((e=>(0,a.jsx)(s.xu,{height:60,width:50,paddingX:1,children:(0,a.jsx)(s.zd,{rounding:2,height:60,children:(0,a.jsx)(s.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),c(this,"state",{paused:!1}),c(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,n){return t&&e.text.replace("{boardName}",t),n?n(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:n,boardTextOverride:d,flyoutSize:c,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:g,noClickToDismiss:m,onClickComplete:f,onClickDismiss:b,placementId:v,positionRelativeToAnchor:x,shouldTimeoutDismiss:y,showCaret:_,textAlign:w,textOverflow:C,textOverrideFn:S,textWeight:j,customizedComplete:I,pulsarZIndex:E}=this.props,T=t||(({children:e})=>g?(0,a.jsx)(s.mh,{children:e}):e),P="blue";return(0,a.jsx)(o.Z,{eligibleIds:n,placementId:v,eligibleTypes:[8],children:({complete:t,dismiss:n,experience:{display_data:o}})=>(this.setDefaultPulsarTooltip(o),o.has_pulsar||o.has_tooltip?(y&&o.disappearTime&&o.disappearTime>0&&(this.timer=setTimeout((()=>(n(),null)),o.disappearTime)),(0,a.jsxs)(i.Fragment,{children:[o.has_pulsar&&(0,a.jsx)(r.Z,{anchor:e,onTouch:()=>this.handlePulsarClick(o.has_tooltip,t),paused:this.state.paused,zIndex:E&&E.index()}),o.has_tooltip&&(!o.has_pulsar||this.state.paused)&&(o.thumbnail_urls?(0,a.jsx)(l,{anchor:e,dismiss:n,idealDirection:p||"down",text:o.text,thumbnails:o.thumbnail_urls}):(0,a.jsx)(T,{children:(0,a.jsx)(s.J2,{anchor:e,color:P,idealDirection:p||"down",onDismiss:m?()=>{}:n,positionRelativeToAnchor:!g&&x,shouldFocus:!1,showCaret:_,size:c,children:(0,a.jsxs)(s.xu,{column:12,padding:3,children:[(0,a.jsx)(s.xv,{align:"right"===w?"end":w,color:"white",overflow:C,size:u,weight:j||"bold",children:this.getText(o,d,S)}),o.sub_text&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xv,{color:"white",size:u,children:o.sub_text})}),(o.dismiss_button_text||o.complete_button_text)&&(0,a.jsxs)(s.xu,{display:"flex",alignItems:"center",marginTop:2,children:[o.dismiss_button_text&&(0,a.jsx)(s.xu,{marginEnd:1,column:6,children:(0,a.jsx)(s.zx,{fullWidth:h,color:P,onClick:()=>{b&&b(),n()},size:"md",text:o.dismiss_button_text})}),o.complete_button_text&&(0,a.jsx)(s.xu,{column:o.dismiss_button_text?6:12,children:I?(0,a.jsx)(s.iP,{fullHeight:!0,onTap:()=>{t(),f&&f()},rounding:2,children:(0,a.jsx)(s.xu,{display:"flex",color:"white",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,a.jsx)(s.xv,{color:"blue",weight:"bold",children:o.complete_button_text})})}):(0,a.jsx)(s.kC,{justifyContent:"center",children:(0,a.jsx)(s.zx,{fullWidth:h,color:"white",href:o.complete_button_cta_url,role:o.complete_button_cta_url?"link":"button",size:"md",target:o.complete_button_cta_url?"blank":null,text:o.complete_button_text,onClick:()=>{t(),f&&f()}})})})]})]})})}))]})):(t(),null))})}}c(u,"defaultProps",{fontSize:"lg",positionRelativeToAnchor:!0})},930909:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(520108),o=n(459123),r=n(785893);const s=({anchors:e,idealDirection:t,onCompleteByAnchor:n,placementId:s,positionRelativeToAnchor:a,touchToDismiss:d,useMasonryFlyout:l})=>(0,r.jsx)(i.Z,{placementId:s,predicate:t=>{const{display_data:n}=t;if(2===(null==n?void 0:n.component_type)){const{anchors_by_platform:t}=n;if(null!=t&&t.web){const{anchor:n,placement:i}=t.web;return i===s&&n in e}}return!1},children:({complete:i,dismiss:s,experience:c})=>(0,r.jsx)(o.Z,{anchors:e,complete:i,dismiss:s,displayData:c.display_data,idealDirection:t,onCompleteByAnchor:n,platform:"web",positionRelativeToAnchor:a,touchToDismiss:d,useMasonryFlyout:l})})},910289:(e,t,n)=>{n.d(t,{fO:()=>d,pz:()=>l,UT:()=>u,CK:()=>h,Qu:()=>p,d9:()=>g,kd:()=>m,YX:()=>f,N:()=>b});var i=n(311866),o=n(85831),r=n(731164),s=n(50351);let a;const d=(e,t)=>n=>{const o=t?{extra_context:e,targeting:t}:{extra_context:e};return i.ZP.create("UserExperiencePlatformResource",o).callGet().then((e=>e.resource_response?n((0,s.OD)(e.resource_response.data)):void 0))},l=(e,t,n,r)=>(d,l)=>{if(t)return Promise.resolve();if(r&&(a=r),1===e.length){const t=e[0],i=l().experiences[t],r=(null==i?void 0:i.extraContext)||null;if(JSON.stringify(r)===JSON.stringify(n)||(0,o.E3)(i)&&!(n&&Object.keys(n).length>0))return Promise.resolve()}return i.ZP.create("UserExperienceResource",{placement_ids:e,extra_context:n||null,targeting:r}).callGet().then((e=>e.resource_response?d((0,s.cL)(e.resource_response.data)):void 0))},c=(e,t)=>(n,o,r,l=!1,c,u)=>(h,p)=>{const{experiences:g,experiencesMulti:m}=p();let f=null,b=!0;var v;l||(b=g[n]&&g[n].experience_id===o,f=b?g[n]:Array.isArray(m[n])&&(null===(v=m[n])||void 0===v?void 0:v.find((e=>e.experience_id===o))));if(f&&f.experience_id===o||l&&n&&o){const l=i.ZP.create(e,{placed_experience_id:`${n}%3A${o}`,extra_context:null!=c?c:{},targeting:u}),p=b?s.Yb:s.xW;switch(t){case"dismissed":return l.callDelete().then((()=>{h(p(n,o,t)),h(d(void 0,a))}));case"completed":return l.callUpdate().then((()=>{r||(h(p(n,o,t)),h(d(void 0,a)))}));case"viewed":return h(p(n,o,t)),l.callUpdate().then((()=>{1000162===n&&h(d())}));case"completedWithoutHomefeed":return l.callUpdate().then((()=>{r||h(p(n,o,t))}));default:return Promise.resolve()}}return Promise.resolve()},u=c("UserExperienceViewedResource","viewed"),h=c("UserExperienceCompletedResource","completed"),p=c("UserExperienceResource","dismissed"),g=c("UserExperienceCompletedResource","completedWithoutHomefeed"),m=(e,t)=>(n,o)=>{const{experiences:s}=o(),a=s[e];a&&a.triggerable_placed_exps&&a.triggerable_placed_exps.length&&a.triggerable_placed_exps.forEach((n=>{const[,o]=n.split(":");let s=t;a.metadata&&a.metadata[o]&&(s=Object.assign({},t,a.metadata[o])),i.ZP.create("UserExperienceTriggerResource",{placed_experience_id:n.replace(":","%3A"),extra_context:s}).callUpdate().then((()=>{((e,t,n={})=>{r.Z.increment(`${e}.${t}`,1,n)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:o})}))}))},f=e=>(t,n)=>{t(m(e));const{experiences:i}=n();return i[e]},b=(e,t,n)=>i=>{n&&(a=n),i(m(e,t)),t&&Object.keys(t).length>0&&i(l([e],!1,t,n))}},12091:(e,t,n)=>{n.d(t,{Tl:()=>s,CF:()=>a,dy:()=>d});var i=n(311866),o=n(910289);const r=(e,t)=>(n,r)=>s=>{if(n&&n.id){const a=i.ZP.create(e,{placed_experience_id:n.id,extra_context:{}});switch(t){case"dismissed":a.callDelete().then((()=>{s((0,o.fO)())}));break;case"completed":a.callUpdate().then((()=>{r||s((0,o.fO)())}));break;case"viewed":a.callUpdate()}}},s=r("UserExperienceCompletedResource","completed"),a=r("UserExperienceResource","dismissed"),d=r("UserExperienceViewedResource","viewed")},85831:(e,t,n)=>{function i(e){return!!e&&0!==e.type}n.d(t,{E3:()=>i,MQ:()=>o,A0:()=>r});const o=(e,t,n)=>{const o=e[n];return t[n]&&i(o)?o:null};function r(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},944163:(e,t,n)=>{n.d(t,{$S:()=>i,V$:()=>o,mR:()=>r,_4:()=>s,iY:()=>a});const i="REFRESH_ALL_EXPERIENCES_MULTI",o="UPDATE_EXPERIENCE_MULTI",r="FETCH_EXPERIENCES",s="REFRESH_ALL_EXPERIENCES",a="UPDATE_EXPERIENCE"},50351:(e,t,n)=>{n.d(t,{xW:()=>r,NW:()=>s,Yb:()=>a,OD:()=>d,cL:()=>l});var i=n(311866),o=n(944163);const r=(e,t,n)=>({type:o.V$,payload:{placementId:e,experienceId:t,status:n}}),s=e=>t=>i.ZP.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((n=e.resource_response.data,{type:o.$S,payload:{experiencesMulti:n}})):void 0;var n})),a=(e,t,n)=>({type:o.iY,payload:{placementId:e,experienceId:t,status:n}}),d=e=>({type:o._4,payload:{experiences:e}}),l=e=>({type:o.mR,payload:{experiences:e}})},514319:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(883119),r=n(785893);function s({anchor:e,children:t,zIndex:n}){const s=(0,i.useRef)(null),[a,d]=(0,i.useState)(0),[l,c]=(0,i.useState)(0),{height:u,width:h}=e.getBoundingClientRect();return(0,i.useEffect)((()=>{const{current:t}=s;if(e&&t){const{height:e,width:n}=t.getBoundingClientRect(),{horizontalOffset:i,verticalOffset:o}=((e,t,n,i)=>({horizontalOffset:-(i/2-t/2),verticalOffset:-(n/2-e/2)}))(u,h,e,n);d(i),c(o)}}),[u,h,s.current]),(0,r.jsx)(o.xu,{position:"absolute",zIndex:n?new o.Ry(n):void 0,dangerouslySetInlineStyle:{__style:{left:a,top:l}},ref:s,children:t})}const a=function(e){const{anchor:t,onTouch:n,onMouseEnter:i,paused:a,size:d,zIndex:l}=e;return t?(0,r.jsx)(s,{anchor:t,zIndex:l,children:(0,r.jsx)(o.iP,{fullWidth:!1,onTap:({event:e})=>n(e),onMouseEnter:i,rounding:"circle",children:(0,r.jsx)(o.o3,{paused:a,size:d})})}):null}},459123:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(514319),r=n(883119),s=n(785893);const a=new r.Ry(669),d={1:"up",2:"right",3:"down",4:"left"},l=({anchors:e={},complete:t,dismiss:n,displayData:l,idealDirection:c,onCompleteByAnchor:u={},platform:h,positionRelativeToAnchor:p=!0,touchToDismiss:g=!0,useMasonryFlyout:m=!1})=>{var f;const{anchors_by_platform:b={},button_text:v,button_uri:x,display_type:y,flyout_direction:_,scroll_to_dismiss:w,scroll_to_dismiss_delay_in_seconds:C=0,text:S}=l||{},j=null===(f=b[h])||void 0===f?void 0:f.anchor,I=e[j],E=(0,i.useCallback)((()=>{w&&(window.removeEventListener("scroll",E),window.removeEventListener("touchmove",E)),g&&I&&I.removeEventListener("click",E),setTimeout((()=>n()),1e3*C)}),[I]);if((0,i.useEffect)((()=>{I&&(w&&(window.addEventListener("scroll",E),window.addEventListener("touchmove",E)),g&&I.addEventListener("click",E))}),[I]),!I)return null;const{FLYOUT:T,PULSAR:P}={FLYOUT:1,PULSAR:2},D=({children:e})=>{if(m)return(0,s.jsx)(r.mh,{zIndex:a,children:e});if(y===P){const t={};if(p)t.top=I.offsetTop,t.left=I.offsetLeft,t.width=I.offsetWidth,t.height=I.offsetHeight;else{const e=I.getBoundingClientRect();t.top=e.top+window.pageYOffset,t.left=e.left+window.pageXOffset,t.width=e.width,t.height=e.height}return(0,s.jsx)(r.xu,{position:"absolute",top:!0,left:!0,zIndex:a,dangerouslySetInlineStyle:{__style:t},children:e})}return(0,s.jsx)(r.xu,{zIndex:a,children:e})},k=d[_],O=x&&(x.startsWith("https://")||x.startsWith("http://")),R=(u||{})[j],B=()=>{w&&(window.removeEventListener("scroll",E),window.removeEventListener("touchmove",E)),g&&I.removeEventListener("click",E),t()};return(0,s.jsxs)(i.Fragment,{children:[y===P&&(0,s.jsx)(D,{children:(0,s.jsx)(o.Z,{anchor:I,onTouch:()=>{B(),R?R():I instanceof HTMLElement&&I.click()},zIndex:670})}),y===T&&(0,s.jsx)(D,{children:(0,s.jsx)(r.J2,{anchor:I,color:"blue",idealDirection:k||c||"down",onDismiss:E,positionRelativeToAnchor:!m&&p,shouldFocus:!1,showCaret:!0,size:"md",children:(0,s.jsxs)(r.xu,{padding:4,width:"220px",children:[(0,s.jsx)(r.xv,{align:"center",color:"white",weight:"bold",children:S}),v?(0,s.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:4,children:(0,s.jsx)(r.xu,{column:8,children:x?(0,s.jsx)(r.zx,{fullWidth:!0,color:"white",href:x,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),B()},role:"link",size:"md",target:O?"blank":null,text:v}):(0,s.jsx)(r.zx,{fullWidth:!0,color:"white",onClick:B,size:"md",text:v})})}):null]})})})]})}},451190:(e,t,n)=>{n.d(t,{b:()=>d,Z:()=>l});var i=n(667294),o=n(241933),r=n(51610),s=n(883119),a=n(785893);const d=new s.Ry(1e3);function l({_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:n,allowClickAndDrag:l,allowMediaPlay:c,allowScroll:u,children:h,closeOnOutsideClick:p,footer:g,heading:m,onDismiss:f,role:b,size:v,subHeading:x}){(0,i.useEffect)((()=>(o.Z.pause(),function(){o.Z.resume()})),[]);return(0,a.jsx)(s.mh,{zIndex:d,children:(0,a.jsx)(r.Z,{allowClickAndDrag:l,allowEsc:!0,allowMediaPlay:c,allowScroll:u,children:(0,a.jsx)(s.u_,{_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:n,closeOnOutsideClick:p,heading:m,footer:g,onDismiss:()=>{o.Z.resume(),f()},role:b,size:v,subHeading:x,children:h})})})}},475896:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(302199),o=n(387987),r=n(785893);const s=({currency:e,maximumFractionDigits:t,minimumFractionDigits:n,shortform:s,shortformMaximumFractionDigits:a,formatStyle:d,uplimit:l,value:c})=>{const u=(0,i.Z)();return(0,r.jsx)(o.LC,{children:i=>u(i.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:n,shortform:s,shortform_maximum_fraction_digits:a,style:d,uplimit:l})})}},658726:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(946753),r=n(980767);function s(){const e=(0,i.ZP)();return function(t,n){const i=new Date(t),s=new Date-i,a=Math.floor(s/r.FS),d=Math.floor(s/r.UK),l=Math.floor(s/r.F4),c=Math.floor(s/r.VL),u=Math.floor(s/r.N1),h=e.ngettext("{{ minutes }} minute ago","{{ minutes }} minutes ago",a," - "," -- "),p=e.ngettext("{{ hours }} hour ago","{{ hours }} hours ago",d," - "," -- "),g=e.ngettext("{{ days }} day ago","{{ days }} days ago",l," - "," -- "),m=e.ngettext("{{ weeks }} week ago","{{ weeks }} weeks ago",c," - "," -- "),f=e.ngettext("{{ years }} year ago","{{ years }} years ago",u," - "," -- "),b=e.ngettext("{{ minutes }}m","{{ minutes }}m",a,"minutes ago abbreviated","minutes ago abbreviated"),v=e.ngettext("{{ hours }}h","{{ hours }}h",d,"hours ago abbreviated","hours ago abbreviated"),x=e.ngettext("{{ days }}d","{{ days }}d",l,"days ago abbreviated","days ago abbreviated"),y=e.ngettext("{{ weeks }}w","{{ weeks }}w",c,"weeks ago abbreviated","weeks ago abbreviated"),_=e.ngettext("{{ years }}y","{{ years }}y",u,"years ago abbreviated","years ago abbreviated");return u>0?(0,o.nk)(n?_:f,{years:u}).join(""):c>0?(0,o.nk)(n?y:m,{weeks:c}).join(""):l>0?(0,o.nk)(n?x:g,{days:l}).join(""):d>0?(0,o.nk)(n?v:p,{hours:d}).join(""):a>0?(0,o.nk)(n?b:h,{minutes:a}).join(""):e._("Just now"," - "," -- ")}}},174523:(e,t,n)=>{n.d(t,{oz:()=>r,q6:()=>o,ZP:()=>a});var i=n(762803);const{Provider:o,Consumer:r,useHook:s}=(0,i.Z)("i18n"),a=s},302199:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(754999),o=n(174523);const r=(e,t)=>{const n=t||0,i=10**n,o=+(n?e*i:e).toFixed(8),r=Math.floor(o),s=o-r,a=s>.5-1e-8&&s<.5+1e-8?r%2==0?r:r+1:Math.round(o);return n?a/i:a},s=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function a(){const e=(0,o.ZP)();return(t,n,o)=>{let a=0,d=0;const l=o&&o.style||void 0,c=o&&o.shortform||!1,u=o&&o.uplimit||void 0,h=o&&o.currency||void 0,p=!!u&&n>=u,g=u&&p?u:n;if("currency"===l){const{minimumFractionDigits:e,maximumFractionDigits:n}=((e,t)=>{if(t){const{minimumFractionDigits:n,maximumFractionDigits:i}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==n&&void 0!==i)return{minimumFractionDigits:n,maximumFractionDigits:i}}return{minimumFractionDigits:2,maximumFractionDigits:2}})(t,h);a=void 0===o||void 0===o.maximum_fraction_digits?n:o.maximum_fraction_digits,d=void 0===o||void 0===o.minimum_fraction_digits?e:o.minimum_fraction_digits}else a=void 0===o||void 0===o.maximum_fraction_digits?0:o.maximum_fraction_digits,d=void 0===o||void 0===o.minimum_fraction_digits?0:o.minimum_fraction_digits;if(c&&g>999&&(a=void 0===o||void 0===o.shortform_maximum_fraction_digits?2:o.shortform_maximum_fraction_digits,d=0),a<d)return String(g);let m=g,f="";const b=[{"100M":{value:1e8,localeKey:e._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:e._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],v=[{b:{value:1e9,localeKey:e._("B","Abbreviation for one billion.","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:e._("M","Abbreviation for one million.","Abbreviation for one million.")}},{k:{value:1e3,localeKey:e._("k","Abbreviation for one thousand.","Abbreviation for one thousand.")}}],x=/^zh|ja|ko/.test(t);if(c&&g>999){const e=x?b:v;for(let t=0;t<e.length;t+=1){const n=Object.keys(e[t])[0],i=e[t][n].value;if(g>=i){m=r(g/i*Math.pow(10,a))/Math.pow(10,a),f=e[t][n].localeKey;break}}}if(null==m)return"";const y=m.toLocaleString([s(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:n,currency:i})=>{const o={maximumFractionDigits:e,minimumFractionDigits:t};return n?{...o,style:n,..."currency"===n?{currency:i,currencyDisplay:"symbol"}:{}}:o})({maximumFractionDigits:a,minimumFractionDigits:d,currency:h,style:l}));return(0,i.Z)(e._("{{formattedNumber}}{{numberSuffix}}","i18n.usePrettyNumberFormat.prettyNumberFormat","String used to concatenate formatted number and localized number suffix"),{formattedNumber:y,numberSuffix:f})+(p?"+":"")}}},946753:(e,t,n)=>{function i(e,t,n){return e.split(n).map((e=>{if(e.match(n)){const n=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}return e}))}n.d(t,{nk:()=>r,Wc:()=>s,bF:()=>d});const o=/(\{\{\s*\w+\s*\}\})/g;function r(e,t){return i(e,t,o)}function s(e,t){return i(e,t,o).join("")}const a=/(\{\s*\w+\s*\})/g;function d(e,t){return i(e,t,a)}},304194:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(311866);const o=e=>i.ZP.create("InviteAttributionResource",{invite_code:e}).callCreate();var r=n(221469);const s=(e=(e=>{}))=>{const t=(0,r.mB)(window.location.search),n=t.invite_code;n?o(n):e(t)}},885106:(e,t,n)=>{function i(e){return e&&e[1000069]&&500417===e[1000069].experience_id}n.d(t,{Z:()=>i})},593482:(e,t,n)=>{n.d(t,{Z:()=>i});function i(e,t,n=28){if(!(e||{}).resurrection_info&&!(t||{}).resurrectionInfo)return!1;let i;i=t?((t||{}).resurrectionInfo||{}).resurrectionDate:((e||{}).resurrection_info||{}).resurrection_dt;const o=new Date,r=i?new Date(i):o;return r.setDate(r.getDate()+n),(new Date).getTime()<r.getTime()}},382745:(e,t,n)=>{n.d(t,{wy:()=>T,Qx:()=>ae,Fw:()=>G,ey:()=>W,bo:()=>A,AX:()=>h,Fy:()=>u,XE:()=>c,am:()=>s,pD:()=>p,OJ:()=>d,LO:()=>se,Gl:()=>J,WN:()=>K,h3:()=>Q,PY:()=>v,Ni:()=>b,pV:()=>P,L6:()=>E,b0:()=>f,jC:()=>L,O7:()=>ee,LM:()=>M,OK:()=>j,mP:()=>x,C$:()=>y,J3:()=>k,Fr:()=>H,Xn:()=>_,l4:()=>I,b_:()=>Y,J:()=>a,dZ:()=>l,re:()=>C,RU:()=>te,Ui:()=>g,KY:()=>m,fY:()=>$,uM:()=>U,x7:()=>V,s2:()=>F,HV:()=>z,cD:()=>Z,Pu:()=>X,En:()=>D,ej:()=>oe,gf:()=>S,mY:()=>ne,kY:()=>re,cY:()=>q,vF:()=>B,$Y:()=>R,Zz:()=>w,$V:()=>O,j8:()=>N,YW:()=>ie});const i=new RegExp(/^\/(?!(?:pin|categories|report|search|password|terms|discover|help|email|topics|explore|pw|login|signup|about|business|source|ideas|today|tv))[\w\d\-]+\/(?!(?:following|followers|_tools|_created|_saved|tried))[\w\d\-]+(?=\/|$)/),o=["/BingSiteAuth.xml","/about","/add-account","/ads","/age_verification","/all","/apple-app-site-association","/apple-app-site-association.p7m","/bot.html","/browserbutton","/buy-it","/careers","/categories","/close-account","/content-claiming","/convert-business","/convert-personal","/create-business","/create-linked-business","/create-personal","/csrf_error","/ct.html","/deactivate-account","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-pin-builder","/idea-pin-invite","/ideas","/inbox","/invited","/jobs","/live-session","/login","/login_redirect","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/pin-builder","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/recently-viewed","/report","/robots.txt","/safe-redirect","/search","/settings","/signup","/socialmanager","/story-pin-builder","/story-pin-invite","/story_feed","/story_pins","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/tv","/unauth-profile","/unlink","/upload-image","/upload-profile-image","/verified","/verify","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];var r=n(855168);const s=e=>i.test(e.pathname),a=(e,t)=>{const{pathname:n}=e;return s(e)&&n.match(t||"?")},d=e=>{const{pathname:t}=e;return!!(0,r.LX)(t,{path:"/:username/:boardId/:boardSectionId",exact:!0})&&!t.match(/^\/.+\/.+\/(_tools)/i)},l=(e,t)=>{const{pathname:n}=e;return d(e)&&n.match(t||"?")},c=e=>!!(0,r.LX)(e.pathname,{path:"/board/:id/edit",exact:!0}),u=e=>!!(0,r.LX)(e.pathname,{path:"/board/:id/edit/collaborators",exact:!0}),h=e=>!!(0,r.LX)(e.pathname,{path:"/board/:id/edit/add_collaborators",exact:!0}),p=e=>!!(0,r.LX)(e.pathname,{path:"/boardsection/:id/edit",exact:!0}),g=e=>!!(0,r.LX)(e.pathname,{path:"/pin/:id/comments",exact:!0}),m=e=>!!(0,r.LX)(e.pathname,{path:"/pin/:id/edit",exact:!0}),f=e=>!!(0,r.LX)(e.pathname,{path:"/conversation/:id",exact:!0}),b=e=>e.pathname.startsWith("/business/"),v=e=>e.pathname.startsWith("/business/invite/"),x=e=>!!(0,r.LX)(e.pathname,{path:"/pin/:id/visual-search/",exact:!0}),y=e=>"/"===e.pathname,_=e=>e.pathname.startsWith("/login"),w=e=>!!(0,r.LX)(e.pathname,{path:"/today",exact:!0}),C=e=>e.pathname.startsWith("/password/reset")||!!(0,r.LX)(e.pathname,{path:"/pw/:username",exact:!0}),S=e=>e.pathname.startsWith("/signup"),j=e=>e.pathname.startsWith("/email/subscription"),I=e=>e.pathname.startsWith("/notifications/"),E=e=>!!(0,r.LX)(e.pathname,{path:"/pin/:id",exact:!0}),T=e=>E(e)&&void 0===e.state,P=e=>e.pathname.startsWith("/pin_redirect"),D=e=>e.pathname.startsWith("/search"),k=e=>e.pathname.startsWith("/ideas"),O=e=>e.pathname.startsWith("/topics"),R=e=>e.pathname.startsWith("/today/article/")||e.pathname.startsWith("/today/best/")||e.pathname.startsWith("/today/trending/"),B=e=>e.pathname.startsWith("/today/popular/"),A=e=>w(e)||R(e)||B(e),M=e=>/^\/discover\/article\/\S+\/?/i.test(e.pathname),L=e=>e.pathname.startsWith("/pin/create/"),Z=e=>!!(0,r.LX)(e.pathname,{path:"/:username/",exact:!0})&&!o.includes(e.pathname.replace(/\/$/,"")),N=e=>e.pathname.startsWith("/unauth-profile"),F=e=>!!e.pathname.match(/^\/tv\/.*/i)||!!e.pathname.match(/^\/live-session\/.*/i),U=e=>e.pathname.startsWith("/pin/"),H=e=>"#imgViewer"===e.hash,z=e=>e.pathname.startsWith("/places/recommender"),W=e=>new RegExp("invite_code").test(e.search),$=e=>!!(0,r.LX)(e.pathname,{path:"/pin/:id",exact:!1})&&(e.pathname.includes("/sent/")||e.pathname.includes("/feedback/")),G=e=>W(e)&&(($(e)?"pin":s(e)&&"board")||Z(e)&&"profile")||null,V=e=>e.pathname.includes("/repin/x"),q=e=>e.pathname.startsWith("/_/storyboard"),Y=e=>e.pathname.startsWith("/oauth"),X=e=>e.pathname.includes("/scheduled-pin/"),J=e=>e.pathname.startsWith("/business/convert"),K=e=>e.pathname.startsWith("/business/create"),Q=e=>e.pathname.startsWith("/business/hub"),ee=e=>e.pathname.startsWith("/pin-editor"),te=e=>e.pathname.startsWith("/pin-builder"),ne=e=>e.pathname.startsWith("/story-pin-builder")||e.pathname.startsWith("/idea-pin-builder"),ie=e=>e.pathname.startsWith("/advertiser/quick-promote"),oe=e=>e.pathname.startsWith("/settings"),re=e=>e.pathname.startsWith("/story-pin-invite")||e.pathname.startsWith("/idea-pin-invite"),se=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/business-access/")&&e.pathname.includes("/dashboard/"),ae=e=>{var t;return(null===(t=e.match(/\amp(.*)/))||void 0===t?void 0:t[1])||""}},855356:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(968630),o=n.n(i);function r(e,t=!1){return n=>{if(!o()(n))return t&&Array.isArray(n)?n.map(r(e,t)):n;const i={};return Object.keys(n).forEach((s=>{const a=e(n[s],s);o()(n[s])||t&&Array.isArray(n[s])?i[a]=r(e,t)(n[s]):i[a]=n[s]})),i}}function s(e,t=!1){const n=(t,n)=>e(n);return e=>r(n,t)(e)}},239540:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>s});const o=new class{constructor(){i(this,"onResumeListeners",[]),i(this,"onPauseListeners",[]),i(this,"inExp",!1)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter((t=>t!==e))}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter((t=>t!==e))}},r=e=>{if(e.isHidden){const{reason:t}=e;o.onPauseListeners.forEach((e=>e(t)))}else o.onResumeListeners.forEach((e=>e()))};setTimeout((()=>{window.addEventListener("beforeunload",(()=>r({isHidden:!0,reason:"beforeunload"}))),window.addEventListener("focus",(()=>r({isHidden:!1}))),window.addEventListener("blur",(()=>r({isHidden:!0,reason:"blur"}))),window.addEventListener("pageshow",(()=>r({isHidden:!1}))),window.addEventListener("pagehide",(()=>r({isHidden:!0,reason:"pagehide"}))),void 0!==document.hidden?document.addEventListener("visibilitychange",(()=>r(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",(()=>r(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1)}),0);const s=o},445443:(e,t,n)=>{n.d(t,{Z:()=>i});const i=function(e){return function(t){return null!=t?e(t):null}}},493858:(e,t,n)=>{n.d(t,{iR:()=>i,_Q:()=>o,Js:()=>r,VX:()=>s,jL:()=>a,hy:()=>d,_J:()=>l,sV:()=>c,sY:()=>u,cL:()=>h,rM:()=>p,Zt:()=>g,hb:()=>m});const i=e=>!!e&&!!e.video_list,o=e=>!!e.promoted_is_lead_ad,r=(e,t)=>{let n=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(n=t.full_name),n},s=e=>{var t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&e.rich_metadata.products.length>0||!1},a=e=>!!e.promoter&&!e.is_downstream_promotion,d=({story_pin_data_id:e})=>!!e,l=e=>!!e.video_status&&5!==e.video_status,c=e=>["email","messages","deep_linking"].includes(e),u=e=>!!e.embed&&"gif"===e.embed.type,h=e=>!(!e.embed||!e.embed.src||u(e)||(e=>!!e.embed&&"pinstory"===e.embed.subtype)(e)),p=({mobile_link:e,tracked_link:t,link:n})=>!e&&!t&&!n,g=e=>{var t,n,i;return e?e.mobile_link||e.tracked_link||e.link||(null!==(t=null===(n=(null!==(i=e.images)&&void 0!==i?i:{}).orig)||void 0===n?void 0:n.url)&&void 0!==t?t:""):null},m=e=>{const t="image";return e?d(e)?"storyPin":i(e.videos)?"video":t:t}},712997:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(445443).Z)((e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null))},912397:(e,t,n)=>{n.d(t,{h5:()=>i,n$:()=>o,W7:()=>r,hC:()=>s,vI:()=>a,YC:()=>d,s7:()=>l,a7:()=>c,JT:()=>u,a2:()=>h,X6:()=>p,PF:()=>g,I6:()=>m,oo:()=>f,vq:()=>b,Ib:()=>v,Tr:()=>x,lA:()=>y});const i="MULTIPLE_ACCOUNTS",o="MULTIPLE_ACCOUNTS_GROUP",r="account_switcher_flyout",s="account_switcher_modal",a="vmp_account_switcher_modal",d="account_recovery",l="closeup",c="google_one_tap_modal",u="inspired_banner",h="hybrid_clickthrough",p="hybrid_banner",g="pin_image",m="response_flyout",f="unauth_header",b="facebook",v="twitter",x="google",y="microsoft"},384832:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>`//connect.facebook.net/${(e=>{const t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}})(e)}/sdk.js`},266750:(e,t,n)=>{n.d(t,{X:()=>i});const i="favorited"},21755:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(551687),r=n(181307),s=n(785893);const a=(0,i.memo)((({activate:e=!0,isEligible:t=!0,name:n,group:a,children:d})=>{const l=(0,r.tc)(n);(0,i.useEffect)((()=>{e&&t&&l&&l()}),[]);const c=a,u=`Experiment(${n}:${c})`,h=t&&c&&(c.startsWith("enabled")||c.startsWith("employee"))||!1,p={group:t?c:"",anyEnabled:h,customActivate:t&&!e?l:null};return(0,s.jsx)(o.Z,{name:u,children:d(p)})}))},655414:(e,t,n)=>{n.d(t,{of:()=>h,yz:()=>p,l5:()=>g,xC:()=>m,kf:()=>f});var i=n(667294),o=n(731164),r=n(500953),s=n(493249),a=n(889190),d=n(762803),l=n(785893);const{Provider:c,useMaybeHook:u}=(0,d.Z)("PwaContext"),h=({children:e,initialContext:t})=>{const[n,s]=(0,i.useState)(null),d=t||{pwaType:"unknown",twaType:null},u=d.pwaType;(0,r.Z)((()=>{const e=(0,a.FB)(window)||"unknown";s(e),u!==e&&o.Z.increment("pwa.type_mismatch",1,{serverPwaType:u,clientPwaType:e,conflict:"unknown"!==u&&"unknown"!==e})}));const h="unknown"===u&&n?n:u,p=d.twaType;return(0,l.jsx)(c,{value:{pwaType:h,twaType:p},children:e})},p=()=>{var e;const t=u();return null!==(e=null==t?void 0:t.pwaType)&&void 0!==e?e:"unknown"},g=()=>{var e;const t=u();return null!==(e=null==t?void 0:t.twaType)&&void 0!==e?e:null},m=()=>"android-twa"===p(),f=()=>{const e=p(),t=(0,s.Z)();return"unknown"===e&&t?null:"windows"===e}},778170:(e,t,n)=>{n.d(t,{cA:()=>O,fM:()=>R,N5:()=>B});var i=n(667294),o=n(68348);const r=e=>{const{deviceType:t,isBot:n,isSocialBot:i}=e;return`coreWebVitalsLite.v1.${(i?"socialBot":n&&"bot")||"nonbot"}.${t}`};var s=n(731164),a=n(256721),d=n(182513),l=n(482131);const c=(0,d.X)("LayoutShiftDebugger"),u=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&u(e.parentNode)||null,h=e=>Math.round(1e3*e);let p=[];const g=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:n})=>{const i=(0,a.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e});let o=0;const d=e=>{o=e.timeStamp};window.addEventListener("scroll",d),window.addEventListener("beforeunload",(()=>{window.removeEventListener("scroll",d)}));const g=`${r(e)}.CLS`,m=()=>(e=>{let t=Object.freeze({}),n=0;p.forEach((({value:e,shift:{sources:i},route:o,hadRecentNavigation:r,hadRecentScroll:s})=>{if(n+=e,!i||!i.length)return;const a=e/i.length;i.forEach((({node:e})=>{const n=e?u(e)||"ROOT":"NODE_REMOVED",i={route:o,boundaryId:n,hadRecentNavigation:r,hadRecentScroll:s},d=JSON.stringify(i);t={...t,[d]:{score:((t[d]||{}).score||0)+a,tags:i}}}))})),Object.keys(t).forEach((n=>{const{score:i,tags:o}=t[n];s.Z.count(`${e}.shifts`,h(i),1,{...o})})),c("Debug CLS boundaries",n,t,p),p=[]})(g);let f,b,v=0,x=0,y=0;(0,l.kz)((({entries:e,value:i})=>{if(y=i||0,e.length){f=t(),b=n();const r=e[0].startTime,s=v!==r,a=s?e:e.slice(x);s&&(v=r),p=p.concat(a.map((e=>({value:i,shift:e,route:f,hadRecentNavigation:b>0&&b+500>e.startTime,hadRecentScroll:o>0&&o+500>e.startTime})))),x=e.length}}),!0);const _=setInterval((()=>{if(p.length){m();const t=(e=y)<=.1?"good":e<=.25?"adequate":"poor";s.Z.count(`${g}.${t}`,1,1),i.stop(h(y))}var e}),1e3);window.addEventListener("beforeunload",(()=>{clearInterval(_),0===y&&i.abort("no_shifts_detected")}))};var m=n(265355);var f=n(641239);const b={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid"},board:{LCP:"board_lcp",FID:"board_fid"}},v=["CA","GB","DE","FR","AU","JP","BR","MX"],x=({surface:e,isAuthenticated:t})=>{if(t)return[];switch(e){case"pin_closeup":return["mweb_pin_page_ssr_lite"];default:return[]}},y=({pwtStaticContext:e,surface:t})=>{const n="pin_closeup"===t||"board"===t?(({pwtStaticContext:e,surface:t})=>{const n=(0,a.Jx)({annotateExperiments:x({surface:t,isAuthenticated:e.isAuthenticated}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:b[t].LCP,pwtStaticContext:e}),i=(0,a.Jx)({name:b[t].FID,pwtStaticContext:e});return(e,t)=>{"LCP"===e?n.stop(t):"FID"===e&&i.stop(t)}})({pwtStaticContext:e,surface:t}):null,{isAuthenticated:i,isBot:o,isSocialBot:d,deviceType:c,locale:u}=e,h=u.split("-")[1],p={},g=(a,l)=>{if(!p[a]){p[a]=!0;const u=r(e);if("LCPCount"===a){const e=`${u}.${t}.${a}`;s.Z.count(`${e}.sum`,l,1),s.Z.increment(`${e}.size`,1)}else s.Z.timing(`${u}.${t}.${a}`,l,1),!i&&v.includes(h)&&(({botType:e,deviceType:t,isChrome:n,region:i})=>{const o=`pwtlogger.${e}.${t}`,r=["all",...i?[i.toLowerCase()]:[]],s=["all",...n?["chrome"]:[]],a=[];return r.forEach((e=>{s.forEach((t=>{a.push(`${o}.region_${e}.browser_${t}`)}))})),a})({botType:(d?"socialBot":o&&"bot")||"nonbot",deviceType:c,isChrome:!0,region:(0,m.Z)(h)}).forEach((e=>{s.Z.timing(`${e}.tags.growthSEO.${t}_${a}`,l,1,{country:h})})),n&&n(a,l)}};(0,l.Tx)((({value:e})=>g("FID",(e=>Number(e.toFixed(2)))(e)))),(0,l.Tb)((({value:e})=>{g("LCPCount",(0,f.Kj)()),g("LCP",(e=>10*Math.round(e/10))(e))})),(0,l.Y)((({value:e})=>g("FCP",e)))};var _=n(939606);let w=null;const C=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/topics/:interest":return"topic";default:return null}};var S=n(759798),j=n(139585),I=n(840059),E=n(133769),T=n(855168),P=n(785893);const D=(0,i.createContext)(null),k=(0,i.createContext)(null);function O({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:r,staticContext:s}){const d=(0,i.useRef)(null),l=(0,i.useRef)(null),c=(0,i.useRef)(t),u=(0,i.useRef)(!0),{path:h}=(0,T.$B)(),p=(0,i.useRef)(h),m=!s.isCachedRender&&(0,o.Z)(s.deviceType);if((0,i.useEffect)((()=>{p.current=h}),[h]),(0,i.useEffect)((()=>{if((0,E.X_)({size:n||1e3}),(0,f.UQ)(),(0,_.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach((e=>{window.performance[e]||(0,_.A9)(`not_supported.window.performance.${e}`)})):(0,_.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,_.A9)("not_supported.window.PerformanceObserer"),(0,S.v)()||(0,_.A9)("not_supported.grid_profiler"),u.current=!1,m&&!I.is){if(((e,t)=>{let n,i=0,o=0,r=null,s=null,d=null,l=null,c=[];const u=()=>{o+=1,d=window.requestAnimationFrame(u)},h=()=>{if(l){const n=c.some((e=>null!==r&&r-e>0&&r-e<=500)),o=t(),{isAuthenticated:d}=e;if(n){const t=(0,a.Jx)({name:"scroll_session",pwtStaticContext:e});if(!t)return;const n={surface:o,isAuthenticated:d};if(null===r||null===s||0===i)if(null===r&&null===s)t.error("no_duration",n);else if(null==r)w=s,t.error("no_start",n);else if(null==s){let e;e=w&&r-w<750?"no_end.outside_window":"no_end.single_event",t.error(e,n)}else t.error("no_frames",n);else{w=s;const e=s-r,a=e/i;0===a?t.error("zero_value",n):a<0?t.error("negative_value",n):(t.addBinaryAnnotation("surface",o,"STRING"),t.addBinaryAnnotation("isAuthenticated",d,"BOOL"),t.addBinaryAnnotation("duration_ms",e,"I32"),t.addBinaryAnnotation("total_frames_rendered",i,"I16"),t.stop(a))}}else(0,_.A9)("WARN.scroll_session.not_user",{tags:{isAuthenticated:d,surface:o}})}window.cancelAnimationFrame(d),i=0,o=0,c=[],s=null,r=null,l=null},p=({timeStamp:e})=>{n&&clearTimeout(n),n=setTimeout(h,500),null===l?(l=100*Math.random()<10,l&&(d=window.requestAnimationFrame(u),r=e)):l&&(s=e,i+=o,o=0)},g=({timeStamp:e})=>{c.push(e)};["wheel","pointerdown","keydown"].forEach((e=>{window.addEventListener(e,g,{passive:!0,capture:!0})})),window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("pagehide",(()=>{window.removeEventListener("scroll",p),["wheel","pointerdown","keydown"].forEach((e=>{window.removeEventListener(e,g)}))}))})(s,(()=>C(p.current)?C(p.current)||"UNKNOWN_SURFACE":p.current||"UNKNOWN_SURFACE")),"Chrome"===s.browserName){g({staticContext:s,getCurrentRoute:()=>p.current,getLastNavigationTime:()=>l.current||0});const e=C(p.current);e&&y({pwtStaticContext:s,surface:e})}}}),[]),c.current!==t){c.current=t,l.current=null!==(b=window.performance)&&void 0!==b&&b.now?window.performance.now():null;const{current:e}=l;if(!u.current){const t=!d.current;(0,_.A9)("routeStart",{tags:{action:r}}),(0,E.Eg)(t),(0,f.Ux)(t),(0,f.on)(),(0,j.tl)();const{customBufferSize:n,defaultBufferSize:i}=(0,E.LH)();e&&((0,_.A9)("routeStart.customBufferSize",{count:n}),(0,_.A9)("routeStart.defaultBufferSize",{count:i}),d.current={time:e,action:r})}}var b;return(0,P.jsx)(D.Provider,{value:m?s:null,children:(0,P.jsx)(k.Provider,{value:d.current,children:e})})}const R=()=>(0,i.useContext)(k),B=()=>(0,i.useContext)(D)},226806:(e,t,n)=>{n.d(t,{gD:()=>o,Sb:()=>r,EV:()=>s});var i=n(762803);const{Consumer:o,Provider:r,useMaybeHook:s}=(0,i.Z)("pwtSurfaceContext")},68348:(e,t,n)=>{n.d(t,{Z:()=>s});const i=()=>{var e;return!(null===(e=window.performance)||void 0===e||!e.timing)};var o=n(974780),r=n(759798);function s(e){return!("desktop"===e&&!i())&&(!!o.Z&&(0,r.v)())}},409352:(e,t,n)=>{n.d(t,{Rp:()=>l,KJ:()=>c});const i={id:14,name:"own_profile"},o={id:15,name:"other_profile"},r={initial_app_load:{unauth:{board:{id:114,name:"board_page_interactive"},pin_closeup:{id:113,name:"pin_page_interactive"},other_profile:{id:115,name:"user_page_interactive"},topic:{id:119,name:"topic_page_interactive"},sterling_signup:{id:201,name:"sterling_signup_main_pageload"},sterling_login:{id:202,name:"sterling_login_main_pageload"}},auth:{bizhub:{id:607,name:"bizhub_pinteractive"},homefeed:{id:19,name:"home_feed_pinteractive"},sterling_reporting_details:{id:218,name:"sterling_reporting_details_pageload"},sterling_reporting_overview:{id:219,name:"sterling_reporting_overview_pageload"},sterling_ads_create:{id:221,name:"sterling_adscreate_main_pageload"},sterling_ads_duplicate:{id:206,name:"sterling_adsduplication_main_pageload"},sterling_ads_edit:{id:204,name:"sterling_adsedit_main_pageload"},sterling_billing_profile:{id:203,name:"sterling_billingprofile_main_pageload"},sterling_bulk_editor:{id:205,name:"sterling_bulkeditor_main_pageload"},sterling_pin_builder:{id:222,name:"sterling_adscreate_pinbuilder_pageload"},sterling_recommendations:{id:223,name:"sterling_recommendations_pageload"}}},client_route_push:{unauth:{},auth:{bizhub:{id:608,name:"bizhub_page_render"},homefeed:{id:2,name:"home_feed_render"},search:{id:3,name:"search_feed_render"},pin_closeup:{id:13,name:"pin_closeup_details"},own_profile:i,other_profile:o}},client_route_replace:{unauth:{},auth:{own_profile:i,other_profile:o}}},s={client_route_push:{auth:{pin_closeup:{story_pin:{id:700,name:"story_pin_closeup"}}}}},a={board_picker:16,grid_bottom_spinner:12,facebook_autologin:500,google_autologin:501,story_pin_step:701},d=e=>{var t,n;const{navigationType:i,isAuthenticated:o,segment:a,surface:d}=e,l=o?"auth":"unauth",c=null===(t=s[i])||void 0===t||null===(n=t[l])||void 0===n?void 0:n[d];return a&&c&&c[a]||r[i][l][d]},l=e=>{if("stopwatch"===e.type)return a[e.name]||null;const t=d(e);return t?t.id:null},c=e=>{if("stopwatch"===e.type)return e.name;const{navigationType:t,isAuthenticated:n,segment:i,surface:o}=e,r=n?"auth":"unauth",s=d(e);return s?s.name:`${t}_${r}_${o}${i?"_"+i:""}`}},182513:(e,t,n)=>{n.d(t,{v:()=>o,X:()=>r});var i=n(840059);const o=(e,t)=>{i.DQ&&(e.style.outline=`10px solid ${t}`,e.style.outlineOffset="-30px")},r=e=>(t,...n)=>{i.DQ&&console.log("string"==typeof t?`[PWT:${e}] ${t}`:t,...n)}},255038:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(759798),o=n(667294),r=n(226806),s=n(139585);function a({children:e,isAtEndOfFeed:t,pinData:n,itemCount:a,includeBackgroundImages:d=!1,includeVideos:l=!1}){return(0,i.Z)({pinData:n,isAtEndOfFeed:t,includeBackgroundImages:d,includeVideos:l}),function(e){const t=(0,r.EV)(),n=(0,o.useRef)(null);(0,o.useEffect)((()=>{e!==n.current&&(n.current=e,t&&(0,s.ZP)(s.at))}),[!!t,e])}(a),e}},35136:(e,t,n)=>{n.d(t,{VZ:()=>r,rZ:()=>s,LM:()=>d,F9:()=>c,cQ:()=>u});var i=n(939606),o=n(366574);const r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,s=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,a=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;const t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},d=()=>document.querySelector?document.querySelectorAll(o.wc).length:((0,i.H)("missing_document_query_selector"),0),l=(e,t)=>{const n=s(e);if(!n)return(0,i.H)("missing_client_rect"),!1;if(n.width<100&&n.height<100){if(e instanceof HTMLImageElement)return!1;const t=a(e);if(null!=t&&t.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:n,pageYOffset:i})=>{const o=e+i;if(o>=n)return!1;const r=Math.min(t,n-o);return r>.5*t||r>.2*n})(n,t)},c=()=>{const e=(()=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),null;const e=document.querySelectorAll(o.wc);return e[e.length-1]||null})();if(!e)return!1;const t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},u=(e,t)=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),[];const n={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},r=[o.Wf,...e?[o.fF]:[],...t?[o.$N]:[]].join(",");return[...document.querySelectorAll(r)].reduce(((e,i)=>{if((i instanceof HTMLImageElement||i instanceof HTMLDivElement||i instanceof HTMLVideoElement&&t)&&l(i,n)){const t=a(i);if(t){const n=(t||"").replace(/.*\//,"");return e.concat([{element:i,fileName:n}])}}return e}),[])}},366574:(e,t,n)=>{n.d(t,{Kb:()=>i,wc:()=>r,Wf:()=>s,fF:()=>a,$N:()=>d});const i="pwt-grid-item",o=['div[data-grid-item="true"]',"div.Masonry div.Collection-Item","div.Grid__Item",`div[data-test-id="${i}"]`],r=o.join(","),s=o.map((e=>`${e} img`)).join(","),a=o.map((e=>`${e} div[style*=background-image]`)).join(","),d=o.map((e=>`${e} video`)).join(",")},759798:(e,t,n)=>{n.d(t,{v:()=>p,Z:()=>g});var i=n(667294),o=n(139585),r=n(8089),s=n(409352),a=n(133769),d=n(939606),l=n(226806),c=n(35136),u=n(182513);const h=(0,u.X)("GridProfiler"),p=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,c.VZ)();function g({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:n,includeVideos:p=!1}){const g=(0,l.EV)(),m=null==g?void 0:g.id,f=null==g?void 0:g.setVisuallyCompleteResult,[b,v]=(0,i.useState)({status:"DISABLED"});(0,i.useEffect)((()=>{v(f?{status:"LAYOUT",failedCount:0,numOfItemsChecked:0}:{status:"DISABLED"})}),[m,f]),(0,i.useEffect)((()=>{if("DISABLED"!==b.status&&(0,o.ZP)(`GridVisuallyCompleteProfiler_${b.status}`),h("new status",b),"LAYOUT"===b.status){const e=((e,t)=>{const n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)})("scroll",(()=>{(0,o.ZP)("scrollDuringLayout")}));return()=>{e()}}return()=>{}}),[b.status]),(0,r.Z)((()=>{if(!g||!f)return;const{abort:i,metricId:o}=g;switch(b.status){case"LAYOUT":{const t=((e,t)=>{if(!t){const t=(0,c.LM)();if(t===e)return h("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,c.F9)())return h("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}})(b.numOfItemsChecked,e);t.complete?v({status:"TIMING",failedCount:0,pinElements:(0,c.cQ)(n,p)}):500*b.failedCount>6e4?((0,d.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.maxLayoutAttempt`),i("visuallyComplete_layoutTimeout"),v({status:"DISABLED"})):v({...b,failedCount:b.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{const e=(0,a.Cg)(),n=b.pinElements.length,r=[];let l=0,c=0,p=0;if(b.pinElements.forEach((({element:t,fileName:n})=>{const i=e.find((e=>e.name.endsWith(n)));i?i.responseEnd?(r.push(i),(0,u.v)(t,"green")):(p+=1,(0,u.v)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,(0,u.v)(t,"red")):(l+=1,(0,u.v)(t,"greenyellow"))})),l||p)100*b.failedCount>6e4?((0,d.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:n,incompleteCount:l,noTimingCount:c,noTimingResponseEndCount:p}}),i("visuallyComplete_timingTimeout"),v({status:"DISABLED"})):v({...b,failedCount:b.failedCount+1});else{if(h(`All ${r.length} images are fetched`),t&&t.length){const e=((e,t)=>{let n=0,i=0,o=0,r=0,s=0;return e=e.filter((e=>"pin"===e.type)),t.forEach(((t,a)=>{var d,l,c,u,h,p;const g=t.fileName.split(".")[0];let m;m=e[a],g!==(null===(d=m)||void 0===d?void 0:d.image_signature)&&(m=e.find((e=>g===(null==e?void 0:e.image_signature)))),void 0===m?s+=1:m.is_promoted||"PROMOTED_PIN"===(null===(l=m.recommendation_reason)||void 0===l?void 0:l.reason)||null!==(c=m)&&void 0!==c&&null!==(u=c.promoter)&&void 0!==u&&u.length?o+=1:null!==m.story_pin_data_id&&void 0!==m.story_pin_data_id?n+=1:null!==(h=m)&&void 0!==h&&null!==(p=h.videos)&&void 0!==p&&p.video_list?i+=1:r+=1})),{storyPinCount:n,videoCount:i,adCount:o,imageCount:r,unknownCount:s}})(t,b.pinElements);Object.entries(e).forEach((([e,t])=>{g.addBinaryAnnotation(e,t,"I16")})),(0,d.A9)(`${(0,s.KJ)(o)}.pinTypes`,{tags:e})}f({imageTimings:r}),v({status:"DISABLED"}),(0,d.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.complete`,{tags:{totalImageCount:n,noTimingCount:c}})}break}}}),(e=>("LAYOUT"===e.status?500:"TIMING"===e.status&&100)||null)(b))}},939606:(e,t,n)=>{n.d(t,{DG:()=>l,iF:()=>c,A9:()=>u,H:()=>h,S$:()=>p});var i=n(731164),o=n(182513),r=n(840059);const s=(0,o.X)("logPwtStats");let a=null,d=!0;const l=e=>{a=e},c=e=>{a&&(a.historyAction=e)},u=(e,t={sampleRate:1},n=!0)=>{const o=r.DQ?1:t.sampleRate;if(!a)return s("pwt.metrics_quality.no_context"),void i.Z.increment("pwt.metrics_quality.no_context",o,{eventName:e});const{browserName:d,browserVersion:l,deviceType:c,isBot:u,isSocialBot:h}=a,p=`pwt.${(h?"socialBot":u&&"bot")||"nonbot"}.metrics_quality.${c}.${e}`,g={...t.tags||{},browserName:d,browserVersion:(null==l?void 0:l.split(".")[0])||"0"},m=t.count;n&&(s(`${p}: ${"number"==typeof m?m:1}`),t.tags&&s(Object.entries(t.tags))),r.is||i.Z.count(p,"number"==typeof m?m:1,o,g)},h=(e,t)=>u(`ERROR.${null!=t&&t.action?t.action+".":""}${e}`,{tags:t}),p=({appLoadName:e,clientNavName:t},n)=>{if(a){const i="APP_VOLUME.";d?(u(i.concat(e),{tags:{browserSupportsPwtProfiler:!!n}}),d=!1):"PUSH"===a.historyAction&&u(i.concat(t),{tags:{browserSupportsPwtProfiler:!!n}})}else i.Z.increment("pwt.metrics_quality.no_context",1,{eventName:e.concat(`.${t}`)})}},139585:(e,t,n)=>{n.d(t,{at:()=>o,gQ:()=>a,Ao:()=>d,BA:()=>l,tl:()=>c,ZP:()=>u});var i=n(974780);const o="masonryPagination";let r={};const s=e=>`📌 ${e}`,a=()=>{const e={};return Object.keys(r).forEach((t=>{(r[t]||[]).slice(0,3).forEach(((n,i)=>{e[i?`${t}_${i+1}`:t]=n}))})),e},d=(e,t)=>(r[e]||[]).filter((e=>e<t)).length,l=(e,t)=>d(e,t)>0,c=()=>{i.Z&&Object.keys(r).forEach((e=>((e,t)=>{const n=s(t);e.clearMarks(n),e.clearMeasures(n)})(i.Z,e))),r={}},u=e=>{i.Z&&(r[e]=(r[e]||[]).concat([i.Z.now()]),((e,t)=>{const n=s(t);e.mark(n),e.measure(n)})(i.Z,e))}},701812:(e,t,n)=>{n.d(t,{jy:()=>o,cC:()=>r,sk:()=>s,qr:()=>a});const i=e=>"number"==typeof e?Math.round(e):e,o=e=>({type:"I16",value:i(e)}),r=e=>({type:"I32",value:i(e)}),s=e=>({type:"STRING",value:e}),a=e=>({type:"BOOL",value:e})},576618:(e,t,n)=>{n.d(t,{D3:()=>r,rX:()=>s,jh:()=>a,Hd:()=>d});var i=n(344120),o=n(641239);const r=e=>({...(0,i.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),s=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=(0,o.v2)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},a=(e,t)=>Object.keys(t).reduce(((n,i)=>({...n,[`${e}${i}`]:t[i]})),{}),d=(e,t)=>Object.keys(e).reduce(((n,i)=>t.includes(i)?{...n,[i]:e[i]}:n),Object.freeze({}))},26382:(e,t,n)=>{n.d(t,{ng:()=>b,rA:()=>x});var i=n(894216),o=n(409352),r=n(133769),s=n(641239),a=n(139585),d=n(701812);const l=(e,t)=>(e||[]).reduce(((e,n)=>({...e,[`experiment.${n}`]:(0,d.sk)(t(n))})),{}),c=(e,t)=>"number"==typeof t?e(t):null,u=e=>e.reduce(((e,t)=>e+t),0),h=(e,t)=>Object.keys(t).reduce(((n,i)=>({...n,[`${e}${i}`]:t[i]})),{}),p=e=>{if(!e.length)return{};const t=e.map((({startTime:e,requestStart:t,responseStart:n,responseEnd:i})=>{const o=t||e;return{startTime:e,requestStart:o,responseStart:n||o,responseEnd:i}})),n=u(t.map((e=>e.requestStart-e.startTime))),i=u(t.map((e=>e.responseStart-e.requestStart))),o=u(t.map((e=>e.responseEnd-e.responseStart))),r=n+i+o,s=u(e.map((e=>e.decodedBodySize||0)));return{decodedBodySize:(0,d.cC)((a=s,Number(Number(a/1024).toFixed(3)))),"duration.all":(0,d.cC)(r),"duration.requestStartToResponseStart":(0,d.cC)(i),"duration.responseStartToResponseEnd":(0,d.cC)(o),"duration.startToRequestStart":(0,d.cC)(n)};var a},g=e=>{const t=e.filter((e=>!!e.responseEnd));return{...e.length?{...p(t),"count.completed":(0,d.cC)(t.length)}:{},"count.all":(0,d.cC)(e.length)}},m=e=>{const t=["timeSecond1","timeSecond2","timeSecond3"],n={timeSecond1:{start:0,end:0,count:0},timeSecond2:{start:0,end:0,count:0},timeSecond3:{start:0,end:0,count:0}},i={script_deferred:[],external:[],visually_complete:[],script:[],css:[],video:[],image:[],xmlhttprequest:[],other:[]};if(e.length){const{requestStart:o,startTime:r}=e[0].timing,s=o||r;n.timeSecond1.start=s,n.timeSecond1.end=s+1e3,n.timeSecond2.start=s+1e3,n.timeSecond2.end=s+2e3,n.timeSecond3.start=s+2e3,n.timeSecond3.end=s+3e3,e.forEach((e=>{const{timing:o}=e;i[e.category]=i[e.category].concat([o]),e.isDeferred&&(i.script_deferred=i.script_deferred.concat([o])),e.isExternal&&(i.external=i.external.concat([o])),e.isVisuallyCompleteRequired&&(i.visually_complete=i.visually_complete.concat([o]));const{requestStart:r,startTime:s,responseEnd:a}=o,d=r||s;t.forEach((e=>{const{start:t,end:i}=n[e];(d>=t&&d<i||d<t&&a>t)&&(n[e].count+=1)}))}))}const o={...h("concurrentRequests.",Object.keys(n).reduce(((e,t)=>e={...e,[t]:(0,d.cC)(n[t].count)}),{}))};return{...Object.keys(i).reduce(((e,t)=>({...e,...h(`resource.${t}.`,g(i[t]))})),o)}},f=(e,t,n)=>{const{devicePixelRatio:s,navigator:a,innerWidth:l,innerHeight:u,performance:h}=window,{deviceMemory:p,hardwareConcurrency:g,platform:m,userAgent:f,connection:b}=a,{memory:v}=h,{appType:x,appVersion:y,browserName:_,browserVersion:w,deviceType:C,isAppShell:S,isAuthenticated:j,isBot:I,isSocialBot:E,locale:T,osName:P,stageName:D}=t,k="desktop"===C?x||5:x||6;let O;const{navigationType:R}=e;let B=null;if("initial_app_load"===R){var A;O=1;const e=null===(A=(0,i.Z)("navigation")[0])||void 0===A?void 0:A.transferSize;B=e?parseFloat((.001*e).toFixed(1)):null}else O=4;return{"app.type":(0,d.jy)(k),"app.version":(0,d.sk)(y),"browser.name":(0,d.sk)(_),"browser.version":(0,d.sk)(w),"cpu.speed":(0,d.jy)(g),"device.memory":(0,d.jy)(p),"device.type":(0,d.jy)(0),"device.typeName":(0,d.sk)(C),"device.version":(0,d.sk)("unknown"),"pwt.cause":(0,d.jy)(O),"net.effectiveType":(0,d.sk)((null==b?void 0:b.effectiveType)||null),"net.downlink":(0,d.cC)(c((e=>10*Math.round(e/10)),null==b?void 0:b.downlink)),"net.downlinkMax":(0,d.cC)(c((e=>10*Math.round(e/10)),null==b?void 0:b.downlinkMax)),"net.rtt":(0,d.cC)(c((e=>10*Math.round(e/10)),null==b?void 0:b.rtt)),"net.speed":(0,d.cC)((0,r.Hv)(n,!1)),"pwt.result":(0,d.jy)(1),"view.type":(0,d.cC)(0),"viewport.height":(0,d.cC)(u||0),"viewport.width":(0,d.cC)(l||0),devicePixelRatio:(0,d.cC)(s||0),isAppShell:(0,d.qr)(S),isAuthenticated:(0,d.qr)(j),isBot:(0,d.qr)(I),isSocialBot:(0,d.qr)(E),locale:(0,d.sk)(T),osName:(0,d.sk)(P),...null!==B&&{htmlResponseSize:(0,d.cC)(B)},platform:(0,d.sk)(m||null),profilerVersion:(0,d.sk)("3"),pwtActionName:(0,d.jy)((0,o.Rp)(e)),stageName:(0,d.sk)(D),userAgent:(0,d.sk)(f),usedJSHeapSize:(0,d.cC)((null==v?void 0:v.usedJSHeapSize)||0),totalJSHeapSize:(0,d.cC)((null==v?void 0:v.totalJSHeapSize)||0),jsHeapSizeLimit:(0,d.cC)((null==v?void 0:v.jsHeapSizeLimit)||0)}},b=({annotateExperiments:e,metricId:t,pwtStaticContext:n,binaryAnnotations:i={},performanceResourceTimings:o=[]})=>({...l(e,n.getExperimentGroup),...f(t,n,o),...i,stopwatchVersion:(0,d.jy)(1)}),v=(e,t)=>{var n;const{navigator:i}=window,{serviceWorker:o}=i,{surface:r,navigationType:l,isAuthenticated:c}=e,{cumulativeLayoutShiftScore:h,longTaskDurations:p}=(0,s.v2)();return{...p.length?{"longTask.count":(0,d.cC)(p.length),"longTask.maxDuration":(0,d.cC)(Math.max(...p)),"longTask.totalDuration":(0,d.cC)(u(p))}:{},cumulativeLayoutShiftScore:(0,d.cC)(100*h),"masonry.paginationMarkCount":(0,d.cC)((0,a.Ao)(a.at,t)),"metricId.isAuthenticated":(0,d.qr)(c),"metricId.navigationType":(0,d.sk)(l),"metricId.surface":(0,d.sk)(r),resourceBufferClearedCount:(0,d.jy)((0,a.Ao)("resourceBufferCleared",t)),scrollDuringLayout:(0,d.qr)((0,a.BA)("scrollDuringLayout",t)),serviceWorker:(0,d.qr)(o?!!o.controller:null),serviceWorkerState:(0,d.sk)((null==o||null===(n=o.controller)||void 0===n?void 0:n.state)||null)}},x=({annotateExperiments:e,binaryAnnotations:t={},entries:n,metricId:i,performanceResources:o,pwtEndTime:r,pwtStaticContext:s})=>({...t,...m(o),...l(e,s.getExperimentGroup),...f(i,s,n),...v(i,r)})},954321:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(974780);const o=()=>{const[e]=i.Z?i.Z.getEntriesByType("navigation"):[];return e}},940094:(e,t,n)=>{n.d(t,{i:()=>i,p:()=>s});const i=({name:e,initiatorType:t})=>{switch(t){case"xmlhttprequest":return"xmlhttprequest";case"img":return"image";case"video":return"video";default:{const t=e.split("."),n=(t.length>1&&t.pop()||"").toLowerCase();return["js","mjs"].includes(n)?"script":"css"===n?"css":["mp4","m4v","mov","ts","m3u8"].includes(n)?"video":["bmp","gif","jpg","jpeg","png","tiff","webp","svg"].includes(n)?"image":"other"}}},o=e=>{const t=e.replace(new RegExp(`^${window.location.origin||""}`),""),n=document&&document.querySelector(`head > script[src='${t}']`);return!!n&&n.hasAttribute("defer")},r=e=>["pinimg","pinterest","pinterdev"].every((t=>!e.includes(`${t}`))),s=(e,t)=>{const n=i(e),{name:s}=e;return{category:n,isDeferred:"script"===n&&o(s),isExternal:r(s),isVisuallyCompleteRequired:"image"===n&&t.includes(s),timing:e}}},299962:(e,t,n)=>{n.d(t,{Z:()=>x});let i=null;const o=(e,t)=>(i=i||{results:[],context:t},i.results.push(e),i);var r=n(660906),s=n(840059),a=n(182513),d=n(409352),l=n(939606),c=n(954321),u=n(590606);const h=(e,t)=>Object.keys(e).reduce(((n,i)=>{const o=e[i];return o&&(n[i]={timestamp:t+o}),n}),{}),p=({span:e,timeOrigin:t})=>{return{id:e.id,parent_id:e.parentId||null,result:1,name:e.name,timestamp:t+e.startTime,duration:e.endTime-e.startTime,annotations:h(e.annotationMap,t),binary_annotations:(n=e.binaryAnnotationMap,Object.keys(n).reduce(((e,t)=>{const i=n[t];if(!i)return e;const{value:o,type:r}=i;return null==o?e:e.concat({name:t,value:o,annotation_type:r})}),[]))};var n},g=(e,{startTime:t,endTime:n,annotationMap:i,binaryAnnotationMap:o,parentId:r,traceId:s})=>({name:`pwt/${e}`,startTime:t,endTime:n,annotationMap:i,binaryAnnotationMap:o,parentId:r,id:s}),m=({annotations:e})=>e.reduce(((e,{key:t,timestamp:n})=>({...e,[`server_${t}`]:{timestamp:n}})),{}),f=(e,t)=>({...e,annotations:{...m(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),b=({traceId:e,actionName:t,result:n,timeOrigin:i,serverDataToJoin:o})=>{let r=p({span:g(t,n),timeOrigin:i}),s=null;return o&&(r=f(r,o),s=((e,t,n)=>{const i=(0,c.Z)();return(null==i?void 0:i.responseEnd)?f(p({span:{name:"html",startTime:0,endTime:(null==i?void 0:i.responseEnd)||1,annotationMap:{},binaryAnnotationMap:{},id:e.server_span_id||(0,u.Z)(),parentId:t},timeOrigin:n}),e):null})(o,e,i)),{trace_id:e,spans:[r,...s?[s]:[],...n.spans.map((e=>p({span:e,timeOrigin:i})))]}},v=(0,a.X)("reportResult");function x({metricId:e,pwtStaticContext:t,result:n,isAuth:i}){const{serverData:a}=t,c=(0,d.KJ)(e),u=`${n.type}.${c}`,h=`${n.type}.sampled.${c}`,p=void 0!==i&&{tags:{isAuth:i}}||void 0;if((0,l.A9)(n.reason?u.concat(`.${n.reason}`):u,p),(0,l.A9)(n.reason?h.concat(`.${n.reason}`):h,{...p,sampleRate:.1}),"COMPLETE"!==n.type)return void v(`Abort metric ${c}`,n);const g=null!==(m=window.performance)&&void 0!==m&&m.now?Date.now()-window.performance.now():"unknown";var m,f;if("unknown"===g)return v(`Unable to convert to absolute times for ${c} due to missing time origin`),void(0,l.A9)(`missingTimeOrigin.${c}`,p);if(s.is&&(window.PWT_LAB_DATA=o(n,t)),n.spans.length&&(n.spans=n.spans.map((e=>(e.parentId||e.id===n.traceId||"network_resources"===e.name||(e.parentId=n.traceId),e)))),!s.is){const i=e.navigationType&&"initial_app_load"===e.navigationType,o=n.traceId,d=b({traceId:o,actionName:c,result:n,timeOrigin:g,serverDataToJoin:i&&a||null});(0,r.Z)({type:"POST",url:"/_/_/trace/trace/",data:{report_data:JSON.stringify(d),report_context:JSON.stringify((f=t,{debugTrace:s.eD,locale:f.locale,stageName:f.stageName,userId:f.isAuthenticated?f.userId:null}))}}),v(`PinTrace ${c} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${o.toString(16)}`,{duration:n.endTime-n.startTime,result:n,pwtStaticContext:t})}}},344120:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},842310:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(590606),o=n(344120),r=n(701812);const s=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function a(e,t){const{category:n,timing:a,isDeferred:d,isExternal:l,isVisuallyCompleteRequired:c}=e;return a.responseEnd&&("image"!==n||c)?{name:s(e),id:(0,i.Z)(),parentId:t,startTime:a.startTime,endTime:a.responseEnd,annotationMap:(0,o.Z)(a),binaryAnnotationMap:{category:(0,r.sk)(n),decodedBodySize:(0,r.cC)(a.decodedBodySize||0),initiatorType:(0,r.sk)(a.initiatorType),isDeferred:(0,r.qr)(d),isExternal:(0,r.qr)(l),name:(0,r.sk)(a.name),nextHopProtocol:(0,r.sk)(a.nextHopProtocol),transferSize:(0,r.cC)(a.transferSize||0)}}:null}},670473:(e,t,n)=>{n.d(t,{ad:()=>a,MH:()=>d,iN:()=>l});var i=n(840059),o=n(169039);const{Provider:r,useHook:s}=(0,o.Z)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.DQ?1:.1}),a=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},d=r,l=s},169039:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),o=n(762803),r=n(778170),s=n(46509),a=n(954321),d=n(403369),l=n(590606),c=n(299962),u=n(842310),h=n(974780),p=n(182513),g=n(940094),m=n(26382),f=n(576618),b=n(939606);const v=(0,p.X)("PwtStopwatch"),x=(e,t)=>{if(h.Z){if("start"===t.type&&!e.isTiming){const{name:n,startTime:i,navigationType:o}=t;return(0,b.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:h.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:o},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const n=t.name||e.name;return v("ignoring action - stopwatch is not actively timing",t),(0,b.A9)(`WARN.${n}.noTiming.${t.type}`),e}v("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const n=h.Z.now();return v(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return v(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:n,type:i}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const o=e.binaryAnnotations[t.name].value||0;return v(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(o)}\n          operand: ${String(n)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(o,n):o,type:i}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}}}if("addSubspan"===t.type){v(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&v(`WARNING: adding duplicate subspan name {${t.name}}`);const n=t.id||(0,l.Z)();-1!==e.spans.findIndex((e=>e.id===n))&&v(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:v(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var n;v(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&v(`WARNING: starting duplicate subspan name {${t.name}}`);const i=t.id||(0,l.Z)();-1!==e.spans.findIndex((e=>e.id===i))&&v(`WARNING: starting duplicate subspan id {${t.name}: ${i}}`);const o=t.parentName?null===(n=e.spans.find((e=>e.name===t.parentName)))||void 0===n?void 0:n.id:null;return{...e,spans:[...e.spans,{name:t.name,id:i,parentId:t.parentId||o,startTime:h.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(v(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,n)=>(n.name===t.name&&e.push(n),e)),[]).length>1&&(0,b.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}const n=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return n>-1?(e.spans[n].endTime=h.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,b.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.reduce(((e,n)=>(n.name===t.currentName&&e.push(n),e)),[]).length>1&&(0,b.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});const n=e.spans.findIndex((e=>e.name===t.currentName));return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(v(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,b.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){const{startTime:n,metricId:i,pwtStaticContext:o,annotations:r,binaryAnnotations:d,isSampled:p,spans:b,traceId:x}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){const p=t.stopTime||h.Z.now(),y=[...b.map((t=>{t.endTime===1/0&&(t.endTime=p);const n=e.spanNameUpdates.findIndex((e=>t.name===e.currentName));return n>-1&&(v(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter((e=>e.newName!==t.name))),t}))];if(t.manualAndResourceSpans||0===b.length){const e=(0,l.Z)();y.push({name:"network_resources",id:e,startTime:n,endTime:p,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((t=>(0,u.Z)((0,g.p)(t,[]),e))).filter(Boolean))}const _="initial_app_load"===i.navigationType&&(0,a.Z)(),w={type:"COMPLETE",traceId:x,startTime:n,endTime:p,spans:y,annotationMap:{...(0,s.Z)(r),...(0,f.jh)("browser_",_?(0,f.D3)(_):{})},binaryAnnotationMap:(0,m.ng)({metricId:i,pwtStaticContext:o,binaryAnnotations:d,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,c.Z)({metricId:i,pwtStaticContext:o,result:w})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,l.Z)(),spanNameUpdates:[]}}if("error"===t.type){const{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,b.H)(n),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,l.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:n,pwtStaticContext:i}=e,o=t.reason||"";return(0,c.Z)({metricId:n,pwtStaticContext:i,result:{type:"ABORT",reason:o}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,l.Z)(),spanNameUpdates:[]}}}return e},y=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:o=!1})=>{const s=(0,r.N5)(),a=(0,i.useRef)([]),c=(0,i.useRef)(null),[u,h]=(0,i.useReducer)(x,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,l.Z)(),spanNameUpdates:[]});return s?{isTiming:u.isTiming,start:i=>{if(window.PerformanceObserver){const e=1e3;a.current=[],c.current=(0,d.Z)({entryTypes:["resource"]},(t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))}))}const o={type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:s,isSampled:!t||Math.random()<t};return h(o)},stop:e=>h({type:"stop",stopTime:e,stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,manualAndResourceSpans:o}),error:e=>{h({type:"error",stopwatchPerformanceObserver:c.current,error:e})},abort:e=>h({type:"abort",stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t,n=!1)=>h({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,o=!1)=>h({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:o}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:o=!1})=>h({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:o}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:o={},parentId:r=null,id:s=null,bypassIsTimingCheck:a=!1})=>h({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:o,parentId:r,id:s,bypassIsTimingCheck:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:o=null,id:r=null,bypassIsTimingCheck:s=!1})=>h({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:o,id:r,bypassIsTimingCheck:s}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o,bypassIsTimingCheck:r=!1})=>h({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o,bypassIsTimingCheck:r}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>h({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>u.spans.filter((n=>n[e]===t)),getTraceId:()=>u.traceId}:null};var _=n(785893);const w=({name:e,v2LoggerMetricName:t,sampleRate:n,abortOnUnloadOrClientNavigation:s=!0,navigationType:a,manualAndResourceSpans:d=!1})=>{const{Provider:l,useMaybeHook:c}=(0,o.Z)(`Stopwatch_${e}`);return{Provider:function({children:t}){const o=y({name:e,sampleRate:n,navigationType:a,manualAndResourceSpans:d}),c=(0,r.fM)(),u=c?c.time:0,h=(0,i.useRef)(!1),p=null==o?void 0:o.isTiming,g=t=>{h.current?(h.current=!1,null==o||o.abort(t)):(0,b.A9)(`WARN.${e}.noTiming.abort`)};return(0,i.useEffect)((()=>()=>{s&&g("unloadOrClientNavigation")}),[u]),(0,_.jsx)(l,{value:{isTiming:p,abort:g,addAnnotation:(e,t)=>{null==o||o.annotate(e,t)},addBinaryAnnotation:(e,t,n,i)=>{null==o||o.binaryAnnotate(e,t,n,i)},binaryAnnotationOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:r})=>{null==o||o.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:r})},addSubspan:({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:s,id:a,bypassIsTimingCheck:d})=>{null==o||o.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:s,id:a,bypassIsTimingCheck:d})},subspanStart:({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:r,id:s,bypassIsTimingCheck:a})=>{null==o||o.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:r,id:s,bypassIsTimingCheck:a})},subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:r,bypassIsTimingCheck:s})=>{null==o||o.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:r,bypassIsTimingCheck:s})},getSpans:(e,t)=>o?o.getSpans(e,t):[],getTraceId:()=>o?o.getTraceId():0,updateSubspanName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{null==o||o.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},error:t=>{h.current?(h.current=!1,null==o||o.error(t)):(0,b.A9)(`WARN.${e}.noTiming.error`)},start:e=>{h.current&&(null==o||o.abort("duplicated_init_stopwatch_action")),h.current=!0,null==o||o.start(e)},stop:t=>{h.current?(h.current=!1,null==o||o.stop(t)):(0,b.A9)(`WARN.${e}.noTiming.stop`)}},children:t})},useHook:c}}},256721:(e,t,n)=>{n.d(t,{ku:()=>j,Jx:()=>w,PY:()=>S});var i=n(954321),o=n(641239);const r=()=>(0,o.PJ)().reduce(((e,{identifier:t,loadTime:n,renderTime:i})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:n,[`${t}_dupe_renderTime`]:i}:e:{...e,[`${t}_loadTime`]:n,[`${t}_renderTime`]:i}),Object.freeze({}));var s=n(344120),a=n(576618),d=n(133769),l=n(715930);const c=e=>{switch(e){case"pin_closeup":{const e=(0,l.Z)();return(e=>{const t=(0,d.y0)();return e.reduce(((e,{name:n,match:i})=>t.filter((e=>i(e))).slice(0,2).reduce(((e,t,i)=>({...e,...(0,a.jh)(`${n}${i?"_dupe1":""}_`,(0,s.Z)(t))})),e)),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}default:return{}}};var u=n(403369),h=n(590606),p=n(299962),g=n(842310),m=n(182513),f=n(139585),b=n(940094),v=n(26382),x=n(939606);const y=(0,m.X)("LightStopwatch"),_={},w=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:o,pwtStaticContext:s})=>{const d=(()=>{let e=[],t=null;if(window.PerformanceObserver){const n=1e3;t=(0,u.Z)({entryTypes:["resource"]},(t=>{e=e.concat(t.getEntries()),e.length>n&&(e=e.slice(-n))}))}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})();let l=!0,m={};(0,x.A9)(`TIMING.${o}`,{tags:{isAuth:s.isAuthenticated}});const w={type:"stopwatch",name:o,navigationType:"initial_app_load"},C={abort:e=>{l?(l=!1,(0,p.Z)({metricId:w,pwtStaticContext:s,result:{type:"ABORT",reason:e}})):(0,x.H)("duplicate_abort_action",{action:o})},error:(e,t)=>{const n={...t,action:o};l?(e&&(0,x.H)(e,n),d&&d.disconnect(),l=!1):(0,x.H)("duplicate_error_action",n)},stop:u=>{if(!l)return void(0,x.H)("duplicate_stop_action",{action:o});l=!1,d.disconnect();const y=(0,h.Z)(),_=(0,i.Z)(),C=d.get(),S={type:"COMPLETE",traceId:(0,h.Z)(),startTime:0,endTime:u,spans:[{name:"network_resources",id:y,startTime:0,endTime:u,annotationMap:{},binaryAnnotationMap:{},parentId:null},...C.map((e=>(0,g.Z)((0,b.p)(e,[]),y))).filter(Boolean)],annotationMap:{...(0,a.jh)("resource_",n?c(n):{}),...(0,a.jh)("element_",r()),...(0,a.jh)("mark_",t&&t.length?(0,a.Hd)((0,f.gQ)(),t):{}),...(0,a.jh)("browser_",_?(0,a.D3)(_):{})},binaryAnnotationMap:(0,v.ng)({annotateExperiments:e,metricId:w,pwtStaticContext:s,performanceResourceTimings:C,binaryAnnotations:m})};(0,p.Z)({metricId:w,pwtStaticContext:s,result:S,isAuth:s.isAuthenticated})},addBinaryAnnotation:(e,t,n)=>{y(`adding binary annotation {${e}: ${String(t)}}`),m={...m,[e]:{value:t,type:n}}}};return _[o]=C,C},C=e=>_[e],S=e=>!!C(e),j=({stopwatchName:e,binaryAnnotationName:t,value:n,annotationType:i})=>{const o=C(e);o&&o.addBinaryAnnotation(t,n,i)}},46509:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>{let t={};e.forEach((({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}}));let n=Object.freeze({});return Object.keys(t).forEach((e=>{(t[e]||[]).forEach(((t,i)=>{const o=i?`${e}_${i+1}`:e;n={...n,[o]:t}}))})),n}},641239:(e,t,n)=>{n.d(t,{on:()=>s,PJ:()=>d,Ux:()=>l,v2:()=>c,Kj:()=>h,UQ:()=>p});var i=n(161133),o=n(403369);const r={cumulativeLayoutShiftScore:0,firstInputDelay:null,longTaskDurations:[],largestContentfulPaint:null,elementTimings:[]},s=()=>{r.longTaskDurations=[]},a=(0,i.Z)((()=>r.elementTimings)),d=()=>a.get(),l=e=>{e&&a.save(),r.elementTimings=[]},c=()=>r;let u=0;const h=()=>u,p=()=>{(0,o.Z)({type:"element",buffered:!0},(e=>{r.elementTimings=r.elementTimings.concat(e.getEntries().reduce(((e,{identifier:t,loadTime:n,renderTime:i})=>e.concat("string"==typeof t&&"number"==typeof n&&"number"==typeof i?[{identifier:t,loadTime:n,renderTime:i}]:[])),[]))})),(0,o.Z)({entryTypes:["longtask"]},(e=>{e.getEntries().map((e=>r.longTaskDurations.push(e.duration)))}),(()=>s())),(0,o.Z)({type:"first-input",buffered:!0},((e,t)=>{const n=e.getEntries()[0];n&&n.startTime&&n.processingStart&&(r.firstInputDelay={startTime:n.startTime,endTime:n.processingStart}),t.disconnect()}),(()=>{r.firstInputDelay=null})),(0,o.Z)({type:"largest-contentful-paint",buffered:!0},(e=>{const t=e.getEntries(),n=t.length,i=t[n-1];i&&(u=n,r.largestContentfulPaint=i.renderTime||i.loadTime||null)})),(0,o.Z)({type:"layout-shift",buffered:!0},(e=>{e.getEntries().forEach((e=>{e.hadRecentInput||(r.cumulativeLayoutShiftScore+=e.value)}))}))}},265355:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},161133:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>{let t=null;return{get:()=>t||e(),save:()=>{t=e()}}}},403369:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(e,t,n)=>{if(!window.PerformanceObserver)return null;try{const i=new window.PerformanceObserver(t);return i.observe(e),window.addEventListener("beforeunload",(()=>{i.disconnect()})),n&&window.addEventListener("popstate",(()=>{n()})),i}catch(i){return null}}},715930:(e,t,n)=>{n.d(t,{f:()=>i,Z:()=>o});const i="closeupImage",o=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},590606:(e,t,n)=>{function i(){let e="";for(let t=0;t<15;t+=1){e+="0123456789"[Math.floor(10*Math.random())]}return Number(e)}n.d(t,{Z:()=>i})},133769:(e,t,n)=>{n.d(t,{X_:()=>h,Cg:()=>m,y0:()=>f,Eg:()=>b,LH:()=>v,Hv:()=>x,MM:()=>y});var i=n(161133),o=n(403369),r=n(139585),s=n(894216),a=n(840059),d=n(940094),l=n(939606);let c;function u(){window.performance&&window.performance.clearResourceTimings&&((0,r.ZP)("resourceBufferCleared"),a.DQ&&console.info("Warning: Clearing resource timings in default buffer."),(0,l.A9)("resourceBufferSize",{count:(0,s.Z)("resource").length}),window.performance.clearResourceTimings())}const h=({size:e})=>{if(window.performance){window.PerformanceObserver?(c=(0,s.Z)("resource"),(0,o.Z)({entryTypes:["resource"]},(t=>{c=(c||[]).concat(t.getEntries()),c.length>e&&(c=c.slice(-e))}))):(window.addEventListener("popstate",(()=>{(0,s.Z)("resource").length>e&&u()})),window.performance.setResourceTimingBufferSize&&window.performance.setResourceTimingBufferSize(e));try{window.performance.onresourcetimingbufferfull=()=>{c||u()}}catch(t){}}},p=()=>c||(0,s.Z)("resource"),g=(0,i.Z)(p),m=p,f=()=>g.get(),b=e=>{e&&g.save(),c&&((0,l.A9)("customBufferSize",{count:c.length}),c=[]),u()},v=()=>({customBufferSize:c?c.length:0,defaultBufferSize:(0,s.Z)("resource").length}),x=(e,t=!0)=>{let n=0,i=0;const o=(r=e.filter((e=>t?!("image"!==(0,d.i)(e)||(e.responseEnd||(n+=1),e.transferSize||(i+=1),!e.responseEnd||!e.transferSize)):!!e.responseEnd&&!!e.transferSize)).map((e=>8*(e.transferSize||0)/((e.responseEnd-e.responseStart)/1e3)/1e3))).length?r.reduce(((e,t)=>e+t),0)/r.length:null;var r;return t&&(n>0&&(0,l.A9)("images.downloadSpeed.noResponseEnd",{tags:{count:n}},!1),i>0&&(0,l.A9)("images.downloadSpeed.transferSize",{tags:{count:i}},!1)),o},y=e=>{if(!e)return"unknown";const t=Math.floor(e/1e3);return t<1?"0-1":t<5?"1-5":t<10?"5-10":t<20?"10-20":t<40?"20-40":t<80?"40-80":"80_or_above"}},894216:(e,t,n)=>{function i(e){var t,n;return(null===(t=window)||void 0===t||null===(n=t.performance)||void 0===n?void 0:n.getEntriesByType)&&window.performance.getEntriesByType(e)||[]}n.d(t,{Z:()=>i})},974780:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(o=window.performance)&&o.clearMarks&&o.clearMeasures&&o.clearResourceTimings&&o.getEntries&&o.getEntriesByName&&o.getEntriesByType&&o.mark&&o.measure&&o.now&&o.setResourceTimingBufferSize?o:null;var o},139848:(e,t,n)=>{n.d(t,{Z:()=>r});const i=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),o=e=>!i.has(e)&&!e.startsWith("__track__"),r=e=>e?Object.keys("object"==typeof e&&e||{}).filter((e=>"string"==typeof e)).filter(o).sort().map((t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`)).join(","):""},387987:(e,t,n)=>{n.d(t,{P2:()=>s,Mf:()=>a,LC:()=>d,fH:()=>l,B:()=>c});var i=n(667294),o=n(785893);const r=(0,i.createContext)(),s=r.Provider;function a(e){function t(t){const n=(0,i.useContext)(r);if(!n)throw new Error("withRequestContext must be used within a RequestContextProvider");return(0,o.jsx)(e,{...t,requestContext:n})}return t.displayName=`withRequestContext(${String(e.displayName||e.name)})`,t}const d=({children:e})=>{const t=(0,i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)},l=({children:e})=>{const t=(0,i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)};function c(){const e=(0,i.useContext)(r);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e}},886550:(e,t,n)=>{n.d(t,{UZ:()=>l,Z8:()=>c});var i=n(667294),o=(n(40142),n(311866)),r=n(762803),s=n(785893);const{Provider:a,useHook:d}=(0,r.Z)("ResourceContext");function l({children:e}){const[t,n]=(0,i.useReducer)(((e,t)=>{var n;switch(t.type){case"addListener":const i=[...null!==(n=e[t.payload.name])&&void 0!==n?n:[],t.payload.handler];return{...e,[t.payload.name]:i};case"removeListener":if(!e[t.payload.name])return e;const o=e[t.payload.name].filter((e=>e!==t.payload.handler));return{...e,[t.payload.name]:o};default:return e}}),{});o.ZP.fetchCompleteCallback=({resource:e,options:n,response:i,normalizedResponse:o,refresh:r,resourceSchema:s})=>{t[e]&&t[e].forEach((t=>t({isRefresh:r,normalizedResponse:o,options:n,schema:s,resource:e,response:i})))};const r=(0,i.useMemo)((()=>({listenerDispatch:n})),[]);return(0,s.jsx)(a,{value:r,children:e})}function c(e,t){const{listenerDispatch:n}=d();(0,i.useEffect)((()=>(n({type:"addListener",payload:{name:e,handler:t}}),()=>{n({type:"removeListener",payload:{name:e,handler:t}})})))}},357846:(e,t,n)=>{n.d(t,{U2:()=>d,bi:()=>l,v_:()=>c});var i=n(139848),o=n(311866),r=n(301314),s=n(678929);function a({fetchOptions:e,resource:t,retry:n}){return(d,l)=>{var c,u,h;const{bookmark:p,headers:g,options:m,refresh:f,schema:b}=e,v=(0,i.Z)(m);if(null!==(c=l().resources)&&void 0!==c&&null!==(u=c[t])&&void 0!==u&&null!==(h=u[v])&&void 0!==h&&h.fetching&&!n)return Promise.resolve();const x=n?n.bookmark:p,y=x?{...m,bookmarks:[x]}:m;return d((0,r.LQ)(t,m,!0)),o.ZP.create(t,y).callGet(void 0,g).then((i=>{var l,c,u;const h=null===(l=i.resource_response)||void 0===l?void 0:l.data,[g]=i.bookmarks||[];if(Array.isArray(h)&&0===h.length&&g&&g!==s.q){const i=n?n.count:0;if(!(i>=s.s))return d(a({resource:t,fetchOptions:e,retry:{count:i+1,bookmark:g}}))}null===(c=o.ZP.customDataManipulations)||void 0===c||c.call(o.ZP,t,h,m);const{normalizedResponse:v,resourceSchema:x}=(null===(u=o.ZP.normalizeResponse)||void 0===u?void 0:u.call(o.ZP,{data:h,opts:{bookmark:p,options:m,schema:b},resource:t}))||{normalizedResponse:null,resourceSchema:void 0};return p?d((0,r.Dm)(t,m,i,v,x)):(d((0,r.Sr)(t,m,i,v,f,x)),o.ZP.fetchCompleteCallback&&o.ZP.fetchCompleteCallback({resource:t,options:m,response:i,normalizedResponse:v,refresh:f,resourceSchema:x})),Promise.resolve()}),(e=>{d((0,r.Tl)(t,m,e))}))}}const d=(e,{bookmark:t,headers:n,options:i,schema:o})=>a({resource:e,fetchOptions:{bookmark:t,headers:n,options:i,refresh:!1,schema:o}}),l=(e,{headers:t,options:n,schema:i})=>a({resource:e,fetchOptions:{headers:t,options:n,refresh:!0,schema:i}});function c(e,t,n){return i=>{const{options:s}=t;return o.ZP.create(e,s).callCreate().then((t=>{var o;if(null!==(o=t.resource_response)&&void 0!==o&&o.data){const o=t.resource_response.data,a=(null==n?void 0:n(o))||null;i((0,r.XM)(e,s,t,a))}return t}),(t=>(i((0,r.Tl)(e,s,t)),t)))}}},678929:(e,t,n)=>{n.d(t,{q:()=>i,s:()=>o});const i="-end-",o=10},451104:(e,t,n)=>{n.d(t,{AF:()=>i,KK:()=>o,cR:()=>r,zP:()=>s,aW:()=>a,se:()=>d});const i="CREATE_COMPLETE",o="FETCHING",r="FETCH_ERROR",s="FETCH_COMPLETE",a="FETCH_MORE_COMPLETE",d="RESOURCE_INVALIDATE"},301314:(e,t,n)=>{n.d(t,{XM:()=>o,LQ:()=>r,Tl:()=>s,Sr:()=>a,Dm:()=>d,jB:()=>l});var i=n(451104);function o(e,t,n,o){return{type:i.AF,payload:{resource:e,options:t,response:n,normalizedResponse:o}}}function r(e,t,n){return{type:i.KK,payload:{resource:e,options:t,isFetching:n}}}const s=(e,t,n)=>({type:i.cR,payload:{resource:e,options:t,error:n}});function a(e,t,n,o,r,s){return{type:i.zP,payload:{isRefresh:r,normalizedResponse:o,options:t,resource:e,response:n,schema:s}}}function d(e,t,n,o,r){return{type:i.aW,payload:{resource:e,options:t,response:n,normalizedResponse:o,schema:r}}}function l(e,t={}){return{type:i.se,payload:{resource:e,options:t}}}},535718:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(40142),r=n(139848),s=n(678929),a=n(855168),d=n(387987),l=n(357846);const c={};function u({enabledRouteRefresh:e,dangerouslyDisableFetch:t,headers:n,name:u,noCache:h,options:p,schema:g}){const m=(0,o.useDispatch)(),f=(0,r.Z)(p),b=(0,i.useRef)(),v=(0,a.k6)(),x=v&&"POP"!==v.action,y=e=>(e[u]||c)[f]||c,_=(0,o.useSelector)((({resources:e})=>y(e).nextBookmark)),w=(0,o.useSelector)((({resources:e})=>y(e).data)),C=(0,o.useSelector)((({resources:e})=>y(e).auxData)),S=(0,o.useSelector)((({resources:e})=>y(e).error)),j=(0,o.useSelector)((({resources:e})=>Boolean(y(e).fetching))),I=Boolean(S)||void 0!==w,E=I&&!j&&_===s.q,T=Boolean(I&&e&&x&&!t),[P,D]=(0,i.useState)(T),k=(0,i.useCallback)((e=>m((0,l.U2)(u,{options:p,schema:g,bookmark:e,headers:n}))),[m,u,f,g,n]),O=()=>m((0,l.bi)(u,{options:p,schema:g,headers:n})),{isBot:R}=(0,d.B)();(0,i.useEffect)((()=>{if(!t&&b.current!==f){const e=void 0===b.current;b.current=f,!I&&!j||e&&S&&(({httpStatus:e})=>!e||e>=500)(S)?k():(!R&&h||T)&&O()}}));const B=(0,i.useCallback)((()=>{t||(O(),D(!0))}),[t,l.bi,u,f,n,D]),A=(0,i.useCallback)((()=>{!_||E||j||t||k(_)}),[t,k,_,E,j]),M=(0,i.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:A,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:B}),L={auxData:C,data:w,error:S,fetchMore:A,isAtEnd:E,isFetching:j,isLoaded:I,isRefreshing:P,nextBookmark:_,refresh:B};return(0,o.shallowEqual)(L,M.current)||(!P||!M.current.data&&T||(0,o.shallowEqual)(L.data,M.current.data)||(L.isRefreshing=!1,D(!1)),M.current=L),M.current}},620813:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(785893);function r({children:e,fallback:t,dangerouslyServerRenderForGraphQL:n=!1}){const r=t||null;return(0,o.jsx)(i.Suspense,{fallback:r,children:e})}},689859:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(620813).Z},658551:(e,t,n)=>{n.d(t,{Jg:()=>r,ZP:()=>s,c5:()=>a});var i=n(731164);const o=.01,r=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2,GSI:3});function s(e){return new Promise(((t,n)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const i=document.createElement("script");i.src=e,i.async=!0,i.addEventListener("load",t),i.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(i)}))}function a(e,t=r.OTHER,n=!1){const s=n?"web":"mweb";return new Promise(((n,a)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if(t===r.GPLUS_ONE)if(window.gapi)n();else{const t=setInterval((()=>{window.gapi||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.gplus_one.tries_${e}`,o))}),100)}else if(t===r.FACEBOOK)if(window.FB)n();else{const t=setInterval((()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.facebook.tries_${e}`,o))}),100)}else if(t===r.GSI)if(window.google)n();else{const t=setInterval((()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.gsi.tries_${e}`,o))}),100)}else n()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",n),t.addEventListener("error",a),document.getElementsByTagName("head")[0].appendChild(t)}}))}},203620:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(68006);function r({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:r,resourceOptions:s,value:a}){const d=(0,o.Z)({allowSearchOnMount:e,resourceName:r,resourceOptions:s,value:a});return(0,i.useEffect)((()=>{null!=d&&d.length&&n(d)}),[d]),t||null}},660310:(e,t,n)=>{n.d(t,{R3:()=>r,NO:()=>s,Jc:()=>a,th:()=>d,ge:()=>c});var i=n(238402);const o=["and","that","but","or","as","if","when","than","because","while","where","after","so","though","since","until","whether","before","although","nor","like","once","unless","now","except","the","a","an","san","for","in","with"],r={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function s(e){return(e||"").trim().replace(/\s+/g," ")}function a({type:e,term:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case r.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case r.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case r.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case r.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function d({queryStates:e}){return 0===e.length?"":"&"+(0,i.Z)({term_meta:e.map((e=>a(e)))})}function l(e){if(e){const t=e.trim().split(/\s+/);return t.find((e=>o.includes(e.toLowerCase())))?[e]:t}return[]}function c({type:e,query:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return l(t).map((t=>({index:n,term:t,type:e})));case r.AUTO_COMPLETE_RECENT_SEARCH:case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:case r.AUTO_COMPLETE_TRENDING:case r.AUTO_COMPLETE_DEFAULT:return l(t).map((t=>({term:t,type:e,index:n})));default:return[]}}},68006:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294);const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const s=r;var a=n(311866);function d({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},i=a.ZP.create(e,n),o=new s,r=()=>{i.abort()};return async function(e,t){const n=o.get(`${t}-${e}`);if(n){const t=n.items;if(t&&t.length){r();return{hint:n.hint,items:t,term:e}}}return e.length>=0?(async(e,t)=>{var n;if(i.isCalling()){var s,a;const n=null===(s=i.options)||void 0===s?void 0:s.term,o=null===(a=i.options)||void 0===a?void 0:a.pin_scope;if(e===n&&t===o)return;r()}const{bookmarks:d,...l}=i.options||{};i.options={...l,term:e,pin_scope:t};const c=null===(n=(await i.callGet({showError:!1})).resource_response)||void 0===n?void 0:n.data,u=null==c?void 0:c.items,h=(null==c?void 0:c.hint)||{},p={hint:h,items:u};return o.set(`${t}-${e}`,p),{term:e,items:u,hint:h}})(e,t):{hint:{},items:[],term:e}}}function l({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const r=(0,i.useRef)(!1),s=(0,i.useRef)({}),[a,l]=(0,i.useState)([]),c=function({resourceName:e,resourceOptions:t}){const n=(0,i.useRef)();return n.current||(n.current=d({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n}),u=n.pin_scope||"pins",h=`${u}-${o}`;return(0,i.useEffect)((()=>{(async()=>{if(null!=o&&(e||r.current))if(h in s.current)l(s.current[h]);else try{const e=await c(o,u);if(e){const{items:t}=e;s.current[h]=t,l(t)}}catch(t){if("Resource call aborted"===t)return;throw t}r.current||(r.current=!0)})()}),[o,u,h]),a}},281996:(e,t,n)=>{n.d(t,{lw:()=>i,_R:()=>o,wF:()=>r,Hd:()=>s});const i={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins"},o=e=>{switch(e){case i.PINS:return 43;case i.PINS_MINE:return 107;case i.PINS_BUYABLE:return 254;case i.PINS_VIDEO:return 3306;case i.BOARDS:return 44;case i.USERS:return 45;default:return null}},r=e=>{switch(e){case i.PINS:return 60;case i.PINS_MINE:return 63;case i.PINS_BUYABLE:return 3800;case i.PINS_VIDEO:return 64;case i.BOARDS:return 61;case i.USERS:return 62;default:return null}},s=e=>{switch(e){case i.USERS:return 1000392;case i.PINS_BUYABLE:return 1000391;case i.PINS:default:return 29}}},906959:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(238402);function o({storyCategory:e,query:t,referringSource:n,bubbleId:o,storyId:r}){const s=[0,24,21,26].includes(e),a=(0,i.Z)({q:t,rs:n||void 0,b_id:o,source_id:r});return s?`/discover/article/${o}`:"/search/pins/"+(a?"?"+a:"")}},945746:(e,t,n)=>{function i({appliedProductFilters:e,autoCorrectionDisabled:t,filters:n,query:i,scope:o,selectedPinImgSig:r,user:s}){const a=[o,n,e,s,r,i].map((e=>null!=e?e:"")).join(":");return t?"auto-correction-disabled:"+a:a}function o({autoCorrectionDisabled:e=!1,appliedProductFilters:t=null,bubbleId:n=null,filters:i=null,query:o=null,rs:r="direct_navigation",scope:s="pins",selectedPinImgSig:a=null,sourceId:d=null,user:l}){return{article:n,appliedProductFilters:t,auto_correction_disabled:e,corpus:a?"personalize":null,customized_rerank_type:a?"manas_graph_sage_only_wand_rewrite":null,filters:i,query:o,query_pin_sigs:a,redux_normalize_feed:!0,rs:r,scope:s,source_id:d,user:l}}function r(e){const{autoCorrectionDisabled:t,appliedProductFilters:n,filters:i,selectedPinImgSig:r,query:s,rs:a,scope:d,bubbleId:l,user:c}=e;return{name:"BaseSearchResource",options:o({autoCorrectionDisabled:!!t,appliedProductFilters:n,filters:i,query:s,rs:a,scope:d,selectedPinImgSig:r,bubbleId:l,user:c})}}n.d(t,{Tb:()=>i,dM:()=>o,Ht:()=>r})},652382:(e,t,n)=>{n.d(t,{qn:()=>i,L_:()=>o,Nh:()=>r});const i=(e,t)=>{if("undefined"==typeof window)return t;try{return window.sessionStorage.getItem(e)}catch(n){return window.console.error("Cannot access sessionStorage."),t}},o=e=>{if("undefined"!=typeof window)try{window.sessionStorage.removeItem(e)}catch(t){window.console.error("Cannot access sessionStorage.")}},r=(e,t)=>{if("undefined"!=typeof window)try{window.sessionStorage.setItem(e,t)}catch(n){window.console.error("Cannot access sessionStorage.")}}},81260:(e,t,n)=>{n.d(t,{RR:()=>i,YB:()=>o,yR:()=>r,YL:()=>s,pE:()=>a,h8:()=>d,Cc:()=>l});const i="0.8.0",o=9/16,r=8,s=10;function a(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const d={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},l={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},480055:(e,t,n)=>{n.d(t,{J:()=>i,Z:()=>o});const i=-1;function o(e){switch(e){case 0:return"shopping-bag";case 1:return"tag";default:return"search"}}},361509:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{n:()=>o,B:()=>r});const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(null==e||!e.match(n)||null==t||!t.match(n))return null;const i=null==e?void 0:e.split("."),o=null==t?void 0:t.split("."),r=Math.max((null!=i?i:"").length,(null!=o?o:"").length);for(let d=0;d<r;d+=1){var s,a;const e=d<(null!==(s=null==i?void 0:i.length)&&void 0!==s?s:0)?parseInt(null==i?void 0:i[d],10):0,t=d<(null!==(a=null==o?void 0:o.length)&&void 0!==a?a:0)?parseInt(null==o?void 0:o[d],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class r{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval((()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)}),500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},730060:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},754999:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(925265),o=n(730060);const r=(e,t)=>{const n={};return Object.keys(t).forEach((e=>{n[e]=t[e]?(0,o.Z)(t[e].toString()):""})),(0,i.Z)(e,n)}},354783:(e,t,n)=>{function i(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}n.d(t,{Z:()=>i})},387610:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(102156),r=n(182389),s=n(932747),a=n(387987),d=n(702926),l=n(762803);const{Provider:c,useMaybeHook:u}=(0,l.Z)("timeSpentContext");var h=n(785893);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.Component{constructor(e){super(e),p(this,"componentWillUnmount",(()=>{this.unregisterComponent()})),p(this,"getContext",(()=>{const{clientTrackingParams:e,component:t,element:n,objectId:i,timeSpentContext:o,view:r,viewParameter:s}=this.props;return{view:r||o&&o.view,viewParameter:s||o&&o.viewParameter,component:t||o&&o.component,element:n,objectId:i||o&&o.objectId,clientTrackingParams:e||o&&o.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}})),p(this,"getLoggerContext",(()=>{const e={...this.getContext()};return delete e.getParentUuid,e})),p(this,"getParentId",(()=>{const{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){const t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0})),p(this,"getUuid",(()=>this.state.timedPair?this.state.timedPair.uuid:void 0)),p(this,"getTimedPair",(()=>this.state.timedPair)),p(this,"setTimedPair",(e=>this.setState({timedPair:e}))),p(this,"isRegistered",!1),p(this,"registerComponent",(()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0})),p(this,"unregisterComponent",(()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)})),p(this,"handleVisibilityChange",(e=>{const{intersectionRatio:t}=e[0],{bottom:n,left:i,right:o,top:r}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===n&&0===i&&0===o&&0===r?this.unregisterComponent():this.registerComponent())})),this.state={timedPair:new s.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,r.Z)(e.auxData,this.props.auxData)&&(0,r.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){const{children:e}=this.props;return(0,h.jsx)(c,{value:this.getContext(),children:(0,h.jsx)(o.Z,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChange,children:i.Children.only(e)})})}}function m(e){var t;const n=u(),i=(0,d.w)(),{requestIdentifier:o=""}=(0,a.B)(),r={app_instance_id:o.slice(0,8),...null!==(t=e.auxData)&&void 0!==t?t:{}};return i?(0,h.jsx)(g,{...e,auxData:r,timeSpentContext:n,timeSpentManager:i,children:e.children}):e.children}m.displayName="TimeSpent";const f=m},702926:(e,t,n)=>{n.d(t,{j:()=>o,w:()=>r});var i=n(762803);const{Provider:o,useMaybeHook:r}=(0,i.Z)("TimeSpentManagerContext")},932747:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(172045),o=n(17314);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now();const a=class{constructor(e){r(this,"start",(()=>(this.startTime=s(),this.startTime))),r(this,"end",(()=>(this.endTime=s(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration)));try{this.uuid=(0,i.Z)()}catch(t){this.uuid=(0,o.Z)()}e&&Object.assign(this,e)}}},280313:(e,t,n)=>{n.d(t,{Yq:()=>i,T7:()=>o,Yj:()=>a,pe:()=>d,xt:()=>l,E5:()=>c});n(883119);const i=(e,t=0)=>({num_days:3,referrer:t,...e?{}:{redux_normalize_feed:!0}});function o(e,t,n){const i=function(e){return 0===e||2===e?"trending":1===e?"best":"article"}(e),o=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(t);return`/today/${i}/${encodeURIComponent(o)}/${n}/`}const r={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},s={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},a=(e,t)=>{const n=s[e];return!(null===n||n!==t&&!t.startsWith(n))},d=e=>r[e],l=(e,t,n)=>e||(t||n||""),c=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner))},641483:(e,t,n)=>{n.d(t,{yl:()=>m,E8:()=>I,an:()=>w,qJ:()=>b,hD:()=>f,dy:()=>j,De:()=>C,NC:()=>_,LW:()=>S,My:()=>y,tj:()=>v,hL:()=>x});var i=n(85038),o=n(311866),r=n(221469),s=n(858875);const a="unauthHistories",d="trackHistoryClickInternalUrl";var l=n(652382),c=n(382745);const u=["board","pin","topic","clickthrough"];let h=5e3,p=[];let g;function m(e){p.length&&(o.ZP.create("UserRegisterTrackActionResource",{actions:p}).callUpdate({showError:!1,async:!e}),p=[],g=null)}function f(e){h=e}const b=e=>{!function(e){const t=(0,l.qn)(d);if((0,l.L_)(d),t)return;let n=(0,l.qn)(a);if(n=n?n.split(","):[],n.length){const t=`${e}.${n.reduce(((e,t)=>e+"-"+t))}`;p.push({name:t,aux_data:{}})}(0,l.L_)(a)}(e),p.length&&m(!0)};function v(e,t){let n="undefined"!=typeof window&&window.encodeURIComponent&&encodeURIComponent(e)||e;t||(t={}),-1!==n.indexOf("%")&&(t.invalid_action&&(t.invalid_action_original=t.invalid_action),t.invalid_action=n,n="track_register_action.web.invalid_action.with_percent"),p.push({name:n,aux_data:t}),g||(g=setTimeout((()=>m()),h)),function(e,t){if("undefined"!=typeof window)try{const n=new URL(window.location.href).searchParams.get("consoleTra");if(window.PINTEREST_DEV_LOG||n){const n=window.PINTEREST_DEV_REGEX||"";n&&!(e||"").match(n)||("object"==typeof t&&Object.keys(t).length?console.log(e+": %O",t):console.log(e))}}catch(n){}}(e,t)}function x(e,t){v(e,{tags:{...t}})}function y(e){v(e,{tags:{}})}function _(e,t=!1){if("undefined"==typeof window)return;let n=(0,l.qn)(a);n=n?n.split(","):[],n.push(e),(0,l.Nh)(a,n.join()),y(`lex.${e}`),t&&(0,l.Nh)(d,!0)}const w=()=>{const e=(0,r.mB)(window.location.search);if("31"===e.utm_source)return"email";if(e.utm_pai)return"paid";const t=i.U2(s.tg)||document.referrer;return t?t.includes("/t.co/")?"twitter":t.includes("cdn.ampproject.org")?"amp":t.includes("google.")?"google":t.includes("bing.")?"bing":t.includes("facebook.")?"facebook":"other":"direct"},C=e=>{e.action&&e.event?(e.type=e.type||"other",e.trigger=e.trigger||"other",e.referrer=w(),x("pinner_conversion",e)):x("pinner_conversion.missing_tags")},S=e=>{const t=e.page_location?(n=e.page_location,(0,c.L6)(n)?"pin":(0,c.am)(n)?"board":(0,c.Xn)(n)?"login":(0,c.C$)(n)?"home":(0,c.cD)(n)?"profile":(0,c.J3)(n)?"ideas":(0,c.$Y)(n)?"article":"other"):e.page||"other";var n;const i=e.item||"none",o=e.within||"none";x(`logged_out_product.interaction.${t}.${e.action}`,{item:i,within:o}),"visit"!==e.action&&x(`logged_out_product.interaction.all.${e.action}`,{item:i,within:o})},j=e=>{x(`pinner_conversion.autologin.${e.provider}.${e.event}`)},I=e=>u.includes(e)?u[u.indexOf(e)]:"other"},807824:(e,t,n)=>{function i(e,t){if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const i=n.exec(t);if(i&&i.length){e=i[0]+e}}return e}n.d(t,{Z:()=>i})},920228:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294);let o=null,r=!1,s=0;const a=()=>{o&&clearTimeout(o),r=!0,o=setTimeout((()=>{r=!1}),100)},d=()=>{const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null);(0,i.useEffect)((()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{n.current&&clearTimeout(n.current),s-=1,s||window.removeEventListener("scroll",a)})),[]);const o=e=>{n.current&&clearTimeout(n.current),n.current=e&&r?setTimeout((()=>o(!0)),100):setTimeout((()=>{t(e)}),32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},8742:(e,t,n)=>{n.d(t,{q:()=>r,Z:()=>s});var i=n(667294);const o=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1);return{active:e,focused:n,hovered:r,onBlur:()=>{o(!1),t(!1)},onFocus:()=>o(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),t(!1)},onMouseUp:()=>t(!1)}};function r({children:e}){return e(o())}const s=o},8089:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);const o=(e,t)=>{const n=(0,i.useRef)((()=>{}));(0,i.useEffect)((()=>{n.current=e}),[e]),(0,i.useEffect)((()=>{if(null===t)return()=>{};const e=setInterval((()=>n.current()),t);return()=>clearInterval(e)}),[t])}},493249:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(285887),o=n(483515);const r=()=>{const e=(0,i.Z)(),t=(0,o.Z)();return e&&!t}},285887:(e,t,n)=>{n.d(t,{G:()=>a,Z:()=>d});var i=n(667294),o=n(855168),r=n(785893);const s=(0,i.createContext)(!0);function a({children:e}){const t=(0,o.TH)(),[n,a]=(0,i.useState)(!0),d=(0,i.useRef)(t);return(0,i.useEffect)((()=>{d.current!==t&&(d.current=t,a(!1))}),[t]),(0,r.jsx)(s.Provider,{value:n,children:e})}function d(){return(0,i.useContext)(s)}},34411:(e,t,n)=>{n.d(t,{$:()=>o,Z:()=>s});var i=n(762803);const{Provider:o,useHook:r}=(0,i.Z)("viewer"),s=r},997993:(e,t,n)=>{n.d(t,{aH:()=>r,CU:()=>s,GT:()=>a,VG:()=>d,N6:()=>l,ZA:()=>c,Bh:()=>u,qA:()=>h,VC:()=>p,Jx:()=>g,Zt:()=>m,Gy:()=>f,MZ:()=>b,sG:()=>v,G$:()=>x,nw:()=>y,oR:()=>_,xk:()=>w,J_:()=>C,qp:()=>S,vd:()=>j,FU:()=>I,a3:()=>E});var i=n(542756);const o=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach(((e,i)=>{const o=t[e];o&&(n[i]=o)})),n.join("")};function r(e){return function(t,n){const i=[];t&&/\S/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}const s=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function a(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(s)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function d(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function l(e){return function(t,n){const i=[];t&&(Number.isNaN(parseInt(t))&&i.push(e.invalidAgeString),t<10&&i.push(e.ageTooShortString),t<=0||t>=300?i.push(e.invalidAgeString):e.checkUnderAgeWithString&&t<12&&i.push(e.checkUnderAgeWithString));const o={errors:i,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){const i=[];t&&(t<10&&i.push(e.ageTooShortString),t<=0||t>=300?i.push(e.invalidAgeString):e.checkUnderAgeWithString&&t<13&&i.push(e.checkUnderAgeWithString));const o={errors:i,warnings:[]};return n&&n(o),o}}function u(e){return function(t,n){const i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],r=!1!==e.checkLength&&i.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!r||o.push(e.message);const s={errors:o,warnings:[]};return n&&n(s),s}}function h(e){return function(t,n){const i=/^\d+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(i)&&r.push(e.message));const s={errors:r,warnings:[]};return n&&n(s),s}}function p(e){return function(t,n){const i=/^[\d\ -]+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(i)&&r.push(e.message));const s={errors:r,warnings:[]};return n&&n(s),s}}function g(e){return function(t,n){const i=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function m(e){return function(t,n){const o=[];if(t)try{const n=(0,i.Z)(t);n&&n.protocol&&("http"!==n.protocol||"localhost"===n.hostname)||o.push(e.message)}catch(s){o.push(e.message)}const r={errors:o,warnings:[]};return n&&n(r),r}}function f(e){return function(t,n){const i=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?i.push(e.minErrorString):e.max&&o>e.max&&i.push(e.maxErrorString);const r={errors:i,warnings:[]};return n&&n(r),r}}function b(e){return function(t,n){const i=!e.checkExclusion,o=e.substrings,r=[];(i&&!o.some((e=>t.includes(e)))||!i&&o.some((e=>t.includes(e))))&&r.push(e.message);const s={errors:r,warnings:[]};return n&&n(s),s}}function v(e){return function(t,n){const i=[];t!==(e&&e.targetValue)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function x(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<=e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function y(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function _(e){return function(t,n){const i=[];/^[\040-\176]*$/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function w(e){return function(t,n){let i=2;if(e.hasFractionalCents)i=3;else if(e.currencyCode){const{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();i=t}const o=new RegExp(i?`^\\d*(\\.\\d{1,${i}})?$`:"^\\d*$"),r=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(o)&&(t=t&&t.trim(),r.push(e.message));const s={errors:r,warnings:[]};return n&&n(s),s}}function C(e){return function(t,n){t=t&&t.trim();const i=[],o=new Date(t);t&&!o.getTime()&&i.push(e.message);const r={errors:i,warnings:[]};return n&&n(r),r}}function S(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function j(e){return function(t,n){const i=[];e.pattern.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function I(e,t){const n=e.map((e=>e(t).errors));return[].concat(...n)}function E(e,t){let n="";return t.some((t=>{const i=t(e);return i.errors.length>0&&(n=i.errors[0],!0)})),n}},965667:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(672007),o=n(883119),r=n(785893);const s=new o.Ry(1e3);function a({anchor:e,children:t,color:n,idealDirection:a,onDismiss:d,positionRelativeToAnchor:l,showCaret:c,shouldFocus:u,size:h}){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(o.xu,{zIndex:s,children:(0,r.jsx)(o.J2,{anchor:e,color:n,idealDirection:a,onDismiss:d,positionRelativeToAnchor:l,showCaret:c,shouldFocus:u,size:h,children:t})})})}},672007:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(500953),o=n(296655);function r({children:e}){const{setAppFocusState:t}=(0,o.I)();return(0,i.Z)((()=>(t(!1),()=>{t(!0)}))),e}},154436:(e,t,n)=>{function i(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,{Z:()=>i})},355991:(e,t,n)=>{n.d(t,{e:()=>i,c:()=>o});const i=e=>{if("undefined"==typeof window)return"";let t=0;const n=document.querySelector('[data-test-id="header"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:n}=e.getBoundingClientRect();t+=n}break;case"SearchItem":const n=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}const i=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const o=document.querySelector('[data-root-margin="search-one-bar"]');if(null!==o){const{height:e}=o.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"},o=e=>e&&e.length>5&&"1"===e.substr(e.length-5,1)?e.substr(0,e.length-5)+"0"+e.substr(e.length-4):e},296655:(e,t,n)=>{n.d(t,{g:()=>p,I:()=>h});var i=n(667294),o=n(239540),r=n(150361),s=n.n(r);const a={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},d=(e=a,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){const{payload:n}=t,{pinId:i,isPromoted:o,currentTime:r}=n,{videosAutoplaying:a}=e,{promotedVideosAutoplaying:d,organicVideosAutoplaying:l}=a,c=s()(d),u=s()(l);return o?c[i]={pinId:i,currentTime:r,paused:!1}:u[i]={pinId:i,currentTime:r,paused:!1},{...e,videosAutoplaying:{promotedVideosAutoplaying:c,organicVideosAutoplaying:u}}}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){const{payload:n}=t,{pinId:i,isPromoted:o,currentTime:r}=n,{videosAutoplaying:a}=e,{promotedVideosAutoplaying:d,organicVideosAutoplaying:l}=a,c=s()(d),u=s()(l);return o?c[i]={...c[i],paused:!0,currentTime:r}:u[i]={...u[i],paused:!0,currentTime:r},{...e,videosAutoplaying:{promotedVideosAutoplaying:c,organicVideosAutoplaying:u}}}return"SET_APP_FOCUS_STATE"===t.type?{...e,appInFocus:t.payload}:"SET_VIEWPORT_SIZE"===t.type?{...e,viewportSize:t.payload}:"SET_FOOTER_VISIBILITY_STATE"===t.type?{...e,footerPlusButtonVisible:t.payload}:e};var l=n(762803),c=n(785893);const{Provider:u,useHook:h}=(0,l.Z)("AppUI");function p({children:e}){const[t,n]=(0,i.useReducer)(d,a),r=(0,i.useMemo)((()=>({pauseAutoplay:e=>n({type:"PAUSE_CURRENT_VIDEO",payload:e}),setAppFocusState:e=>n({type:"SET_APP_FOCUS_STATE",payload:e}),setCurrentVideo:e=>n({type:"SET_CURRENT_VIDEO",payload:e}),setFooterPlusButtonVisible:e=>n({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),setIsAutoplay:e=>n({type:"SET_IS_AUTOPLAY",payload:e}),setViewportSize:e=>n({type:"SET_VIEWPORT_SIZE",payload:e}),toggleTypeaheadOverlay:e=>n({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e})})),[]);return(0,i.useEffect)((()=>{o.Z.onSessionResume((()=>{r.setAppFocusState(!0)})).onSessionPause((()=>{r.setAppFocusState(!1)}))}),[r]),(0,c.jsx)(u,{value:{...r,appUI:t},children:e})}},192830:(e,t,n)=>{n.d(t,{i5:()=>y,sX:()=>w,Z5:()=>x,NG:()=>_,MT:()=>C});var i=n(667294),o=n(311866),r=n(149674),s=n(682492),a=n.n(s);const d=(e,t)=>e.data[t]&&e.data[t].messages||[];function l(e,t){const n={};return e.filter((e=>!!e)).reduce(((e,i)=>{const o=t(i);return n[o]?(a()(n[o],i),e):(n[o]=i,e.concat([i]))}),[])}function c(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function u(e,t,n){let i=d(e,t).concat(n);return i=l(i,(e=>e.id)),c(i)}const h={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,showConversationsDropdown:!1,ui:{},unread:0};function p(e=h,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:n}=t.payload;return{...e,data:{...e.data,[n]:{...e[n]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const n={...e,data:{...e.data}},{id:i}=t.payload;return delete n.data[i],n}if("FETCH_COMPLETE"===t.type){const{options:n,resource:i,response:o}=t.payload,r=o.resource_response.data;if("ConversationMessagesResource"===i){const t=r||[],i=(null==n?void 0:n.conversation_id)||"",o=u(e,i,t),s=o[o.length-1];return{...e,data:{...e.data,[i]:{...e.data[i],id:i,messages:o,unread:0,last_message:s}}}}if("ConversationsResource"===i){const t=r||[],n={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:i,name:o,board:r,emails:s,unread:a,users:d,last_message:l}=e,c=u(n,t,[l]);n.data[t]={...n.data[t],id:t,created_at:i,name:o,board:r,emails:s||[],unread:a||0,users:d||[],last_message:l,messages:c}})),n}if("ConversationResource"===i){const t=r||{},{id:n}=t,i={...e,data:{...e.data}};return n&&(i.data[n]={...i.data[n],...t}),i}if("NewsHubBadgeResource"===i){if(r){const t=r.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:n,message:i}=t.payload;if(e.data[n]){const t=u(e,n,[i]);return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:t,last_message:i}}}}return e}if("MESSAGE_SEND_PENDING_CLEAR"===t.type){const{id:n,messageId:i,newMessageId:o}=t.payload;if(e.data[n]){const t=d(e,n).find((e=>e.id===i));if(t){const r={...t,id:o};let s=d(e,n).filter((e=>e.id!==i)).concat([r]);return s=l(s,(e=>e.id)),s=c(s),{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:s}}}}}return e}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload}}return e}var g=n(762803),m=n(886550),f=n(785893);const b=(()=>{let e=0;return()=>e++})(),{Provider:v,useHook:x}=(0,g.Z)("Conversations");function y({children:e}){const[t,n]=(0,i.useReducer)(p,h),r=(0,i.useCallback)((e=>n({type:"FETCH_COMPLETE",payload:e})),[]);(0,m.Z8)("ConversationMessagesResource",r),(0,m.Z8)("ConversationsResource",r),(0,m.Z8)("ConversationResource",r),(0,m.Z8)("NewsHubBadgeResource",r);const s=(0,i.useMemo)((()=>({conversationOpen:(e,t=!1,i="")=>n({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:i}}),conversationClose:(e,t="",i=!1)=>n({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:i}}),conversationCreate:e=>n({type:"CONVERSATION_CREATE",payload:e}),conversationDelete:e=>n({type:"CONVERSATION_DELETE",payload:{id:e}}),conversationGet:(e,t,i)=>{o.ZP.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;n({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";i(t)}))},dropdownClose:()=>{n({type:"CLOSE_DROPDOWN"})},dropdownOpen:()=>{n({type:"OPEN_DROPDOWN"})},pendingMessageSend:(e,t)=>n({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}),pendingMessageClear:(e,t,i)=>n({type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:i}}),updateNewsHubCount:e=>n({type:"UPDATE_NEWSHUB_COUNT",payload:e}),updateUnreadCount:e=>n({type:"UPDATE_UNREAD_COUNT",payload:e})})),[]);return(0,f.jsx)(v,{value:{...s,conversations:t},children:e})}function _(){const{conversations:e,conversationCreate:t,pendingMessageSend:n,pendingMessageClear:i}=x(),{pins:s}=(0,r.Wb)();return(r,a,d,l)=>new Promise(((c,u)=>{const{text:h,pinId:p,boardId:g,userId:m,didItId:f}=a;function v(){const e=o.ZP.create("ConversationMessagesResource",{conversation_id:r,text:h,pin:p,board:g,user:m,user_did_it_data:f,source:d}),t=`${b()}`;n(r,{text:h,sender:l,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:p?s[p]:null,type:"message",user_did_it_data:null,user:null}),e.callCreate().then((e=>{i(r,t,e.resource_response.data.id),c()})).catch(u)}e.data[r]?v():o.ZP.create("ConversationResource",{conversation_id:r}).callGet().then((e=>{const n=e&&e.resource_response&&e.resource_response.data;t(n),v()}))}))}function w(e){const{conversations:t}=x();return t.data[e]}function C(e){const{conversations:t}=x();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}},956324:(e,t,n)=>{n.d(t,{HW:()=>s,i3:()=>h,YW:()=>u,o2:()=>c});var i=n(667294),o=n(762803),r=n(785893);const s=660,a={educationId:null,paddingRight:0,zIndex:s};function d(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:n}=t.payload;return{...e,educationId:n};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:i}=t.payload;return{...e,paddingRight:i};case"FOOTER_SET_Z_INDEX":const{zIndex:o}=t.payload;return{...e,zIndex:o};default:return e}}const{Provider:l,Consumer:c,useHook:u}=(0,o.Z)("footerContext");function h({children:e}){const[t,n]=(0,i.useReducer)(d,a);return(0,r.jsx)(l,{value:{...t,setEducationId:e=>n({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),setPaddingRight:e=>n({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),setZIndex:e=>n({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})},children:e})}},149674:(e,t,n)=>{n.d(t,{jx:()=>o,Wb:()=>r,tk:()=>s});var i=n(762803);const{Provider:o,useHook:r}=(0,i.Z)("Pins");function s(){const{pins:e}=r();return t=>e[t]}},159617:(e,t,n)=>{n.d(t,{hu:()=>i,cI:()=>o,L1:()=>r,WZ:()=>s,fe:()=>a,Rz:()=>d});const i=64,o=80,r=22,s="HeaderContent",a=671,d={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},463111:(e,t,n)=>{n.d(t,{l:()=>h,E:()=>u});var i=n(667294),o=n(181307),r=n(762803);function s(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var n;const i=t.payload.response.resource_response.data||[],{term:r=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[r]:e[r]?[...e[r],...i]:i}}if("ShareSuggestionsTypeaheadResource"===o.resource){var i;const n=(t.payload.response.resource_response.data||{}).items||[],{term:r=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[r]:e[r]?[...e[r],...n]:n}}}return e}function a(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var n;const i=t.payload.response.resource_response.data||[],{term:r=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[r]:i}}if("ShareSuggestionsTypeaheadResource"===o.resource){var i;const n=(t.payload.response.resource_response.data||{}).items||[],{term:r=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[r]:n}}}return e}var d=n(886550),l=n(785893);const{Provider:c,useHook:u}=(0,r.Z)("ShareSuggestions");function h({children:e}){const{anyEnabled:t}=(0,o.aq)("share_suggestions_reducer"),n=t?a:s,[r,u]=(0,i.useReducer)(n,{}),h=e=>{u({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};return(0,d.Z8)("ShareSuggestionsResource",h),(0,d.Z8)("ShareSuggestionsTypeaheadResource",h),(0,l.jsx)(c,{value:{shareSuggestions:r},children:e})}},607023:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(85038),r=n(731164),s=n(311866),a=n(858875);function d(e,t){o.t8(a.L9,"allowed",8760),t&&t(),r.Z.increment("auth.web.notifications.allowed",1);let n=e.subscriptionId;if(!n){const t=e.endpoint.split("/");n=t[t.length-1]}return s.ZP.create("WebPushDeviceResource",{}).callGet({showError:!1}).then((t=>{var i,o;const r=null!==(i=null===(o=t.resource_response)||void 0===o?void 0:o.data)&&void 0!==i?i:{};if(!(n in r)){const t={registration_id:n,subscription_endpoint:e.endpoint};return s.ZP.create("WebPushDeviceResource",t).callCreate()}}))}var l=n(34411);function c(e,t){var n;if(r.Z.increment("auth.web.notifications.viewed",1),"undefined"!=typeof navigator&&"serviceWorker"in navigator)return null===(n=navigator.serviceWorker)||void 0===n?void 0:n.ready.then((n=>{var i;null==n||null===(i=n.pushManager)||void 0===i||i.subscribe({userVisibleOnly:!0}).then((t=>d(t,e)),(n=>{"Notification"in window&&"denied"!==Notification.permission?(o.t8(a.L9,"dismissed",8760),t&&t(),r.Z.increment("auth.web.notifications.dismissed",1)):(o.t8(a.L9,"denied",8760),e&&e(),r.Z.increment("auth.web.notifications.denied",1))}))})).catch((()=>{}))}function u(){const{isAuth:e,isLimitedLogin:t}=(0,l.Z)();return(0,i.useEffect)((()=>{"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then((()=>{var n;t&&o.t8(a.L9,"denied",8760),e||o.t8(a.L9,"denied",8760),"showNotification"in ServiceWorkerRegistration.prototype||o.t8(a.L9,"denied",8760),"Notification"in window&&"denied"!==Notification.permission||o.t8(a.L9,"denied",8760),"PushManager"in window||o.t8(a.L9,"denied",8760),null===(n=navigator.serviceWorker)||void 0===n||n.ready.then((e=>e.pushManager.getSubscription())).then((e=>{if(e)return d(e);throw o.t8(a.L9,"none",8760),new Error})).catch((e=>{}))})).catch((()=>{}))}),[e,t]),c}},559335:(e,t,n)=>{n.d(t,{W:()=>s,Z:()=>a});var i=n(883119),o=n(785893);const r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,o.jsx)(i.xu,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:r,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:n,size:r,submitting:a,text:d}){return(0,o.jsxs)(i.xu,{display:"flex",position:"relative",children:[a&&(0,o.jsx)(s,{}),(0,o.jsx)(i.zx,{color:"red",disabled:e||a,name:t,onClick:n,size:r,type:"submit",text:d})]})}},915192:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(773559),r=n(174523),s=n(883119),a=n(785893);const d={xs:12,sm:16,md:20,lg:24};function l({children:e}){const t=(0,r.ZP)();return(0,a.jsx)(s.u,{link:(0,a.jsx)(s.rU,{href:o.Z.settings.HELP_SHOPPING_WITH_PINTEREST,target:"blank",children:(0,a.jsx)(s.xv,{color:"white",size:"sm",weight:"bold",children:t._("Learn more","verifiedBadge.tooltip.link","Learn more about Pinterest's Merchant Guidelines")})}),text:t._("This retailer meets Pinterest's Merchant Guidelines","merchantVerification.badge.tooltip","Badge indicating that a merchant or user is verified"),children:e})}function c({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:n,showText:o,size:c}){const u=(0,r.ZP)(),h=(0,a.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(s.JO,{accessibilityLabel:u._("Merchant verification badge icon","merchantVerification.badge.icon","Badge indicating that a merchant or user is verified"),color:"blue",icon:"workflow-status-ok",inline:!0,size:d[c]}),o&&(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{color:"blue",inline:!0,weight:"bold",children:u._("Verified merchant","creator.header.verifiedMerchant","this merchant is a verified merchant")})})]});return(0,a.jsxs)(i.Fragment,{children:[n&&!t&&(0,a.jsx)(l,{children:h}),n&&t&&h,e&&!n&&(0,a.jsx)(s.JO,{accessibilityLabel:u._("Domain verification icon","domainVerification.badge.icon","Badge indicating that a merchant or user is verified"),color:"red",icon:"check-circle",size:d[c]})]})}},56221:(e,t,n)=>{n.d(t,{Z:()=>C});var i=n(667294),o=n(151101),r=n(759746),s=n(304385),a=n(906959),d=n(303975),l=n(451190),c=n(311866),u=n(881220),h=n(382064),p=n(174523),g=n(880841),m=n(883119),f=n(785893);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends i.PureComponent{constructor(...e){var t;super(...e),t=this,b(this,"state",{showModal:!1,reportType:null}),b(this,"handleDismiss",(()=>this.setState({showModal:!1}))),b(this,"handleClick",(()=>{const{reportType:e}=this.state;"image"===e?this.reportSuggestionImage():this.reportSuggestionText()})),b(this,"reportSuggestionImage",(async function(){const{imgSignature:e,reportImage:n}=t.props;t.setState({showModal:!1});n((await c.ZP.create("GetPinFromSignature",{imgSignature:e}).callGet()).resource_response.data.id)})),b(this,"reportSuggestionText",(()=>{const{handleReport:e,toastManagerContext:t}=this.props;e&&(e(),t.showToast((({onHide:e})=>(0,f.jsx)(u.ZP,{onHide:e,text:this.props.i18n._("Thanks for your report! This will be reviewed by our Trust and Safety Team","ReportingFlag.Toast.text","Toast after reporting a search suggestion")}))),this.handleDismiss())})),b(this,"showModal",(({event:e})=>{e.stopPropagation(),e.preventDefault(),this.setState({showModal:!0})}))}render(){const{showModal:e}=this.state;return(0,f.jsxs)(i.Fragment,{children:[this.props.isVisible&&(0,f.jsx)(d.Z,{onClick:this.showModal,backgroundHaloSize:24}),e&&(0,f.jsx)(l.Z,{accessibilityModalLabel:this.props.i18n._("Report search term","ReportingFlag.Modal.accessibilityModalLabel","accessible label for report suggestion modal"),heading:this.props.i18n._("Report search term","ReportingFlag.Modal.heading","Heading for report suggestion modal"),onDismiss:this.handleDismiss,size:"sm",children:(0,f.jsxs)(m.xu,{children:[(0,f.jsx)(m.xu,{padding:5,children:(0,f.jsx)(m.xv,{children:this.props.i18n._("When you flag this, our Trust and Safety team will review it. If it doesn't meet our Community Guidelines, it will be blocked.","ReportingFlag.Box.Text.report","What will happen when you report a suggestion")})}),(0,f.jsxs)(m.xu,{role:"list",display:"flex",direction:"column",marginBottom:4,paddingX:5,children:[(0,f.jsxs)(m.xu,{alignItems:"center",paddingY:1,display:"flex",direction:"row",children:[(0,f.jsx)(m.EU,{checked:"text"===this.state.reportType,id:"textType",onChange:()=>this.setState({reportType:"text"}),value:"Report search text"}),(0,f.jsx)(m.xu,{flex:"grow",children:(0,f.jsx)(m.__,{htmlFor:"textType",children:(0,f.jsx)(m.xu,{paddingX:2,children:(0,f.jsx)(m.xv,{children:"Report search text"})})})})]}),(0,f.jsxs)(m.xu,{alignItems:"center",paddingY:1,display:"flex",direction:"row",children:[(0,f.jsx)(m.EU,{checked:"image"===this.state.reportType,id:"imageType",onChange:()=>this.setState({reportType:"image"}),value:"Report search image"}),(0,f.jsx)(m.xu,{flex:"grow",children:(0,f.jsx)(m.__,{htmlFor:"imageType",children:(0,f.jsx)(m.xu,{paddingX:2,children:(0,f.jsx)(m.xv,{children:"Report search image"})})})})]})]}),(0,f.jsx)(m.iz,{}),(0,f.jsxs)(m.xu,{display:"flex",justifyContent:"end",padding:2,children:[(0,f.jsx)(m.xu,{margin:2,children:(0,f.jsx)(m.zx,{fullWidth:!0,onClick:this.handleDismiss,text:this.props.i18n._("Cancel","ReportingFlag.Box.Button.text.cancel","Text for cancel button when reporting search suggestion")})}),(0,f.jsx)(m.xu,{margin:2,children:(0,f.jsx)(m.zx,{fullWidth:!0,color:"red",onClick:this.handleClick,text:this.props.i18n._("Report","ReportingFlag.Box.Button.text.report","Button label to report search suggestion"),disabled:!this.state.reportType})})]})]})})]})}}function x(e){const t=(0,p.ZP)(),{reportImage:n}=(0,h.f)();return(0,f.jsx)(v,{...e,i18n:t,reportImage:n,toastManagerContext:(0,g.F9)()})}var y=n(754999),_=n(34411),w=n(480055);function C({bubble:e,height:t,storyId:n,width:d,onClick:l,referringSource:c,contextLogData:u,viewType:h,viewParameter:g,slotIndex:b,handleReport:v,showFlag:C,imgSignature:S,onMouseEnter:j,onMouseLeave:I,isHovered:E,disableTabIndex:T}){const P=(0,p.ZP)(),D=(0,_.Z)(),{id:k,action:O,cover_images:R,dominant_colors:B,identifier_icon_type:A,title:M,story_category:L,curator:Z}=e,N=R&&R[0]?R[0]["280x280"]||R[0]["236x"]:void 0,F=(0,y.Z)(M&&M.format||"",M&&M.args||{}),U=B&&B.length?B[0]:"gray",H=(null==O?void 0:O.url)||(0,a.Z)({storyCategory:L,query:F,referringSource:c,bubbleId:k,storyId:n});return(0,f.jsx)(s.Z,{impressionAuxFields:{storyCategory:L,storyIdStr:n},impressionType:"Article",loggingId:k,viewType:h,viewParameter:g,slotIndex:b,contextLogData:{story_id:n,...u},children:(0,f.jsx)(r.Z,{backgroundColor:U,coverImage:N,height:t,id:k,isHovered:E,onClick:l,onMouseEnter:j,onMouseLeave:I,url:H,width:d,disableTabIndex:T,children:({isHovered:e})=>(0,f.jsxs)(i.Fragment,{children:[Z&&26!==L&&(0,f.jsx)(m.xu,{position:"absolute",top:!0,left:!0,padding:2,children:(0,f.jsx)(o.Z,{outline:!0,size:"xs",src:Z.image_small_url,name:Z.full_name})}),A&&A!==w.J&&(0,f.jsx)(m.xu,{alignItems:"center",color:"white",display:"flex",height:24,justifyContent:"center",left:!0,margin:2,opacity:.8,position:"absolute",rounding:"circle",top:!0,width:24,children:(0,f.jsx)(m.JO,{icon:(0,w.Z)(A),accessibilityLabel:P._("Shopping icon","bubble.shoppingIcon.label","Accessibility label for bubble shopping Icon"),color:"darkGray",size:12})}),(0,f.jsx)(m.xu,{display:"flex",height:t,width:d||"100%",position:"absolute",top:!0,padding:3,alignItems:26===L?"end":"center",justifyContent:"center",children:(0,f.jsxs)(m.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[t>200?(0,f.jsx)(m.X6,{size:"md",align:"center",color:"white",children:F}):(0,f.jsx)(m.xv,{align:"center",color:"white",weight:"bold",children:F}),Z&&26===L&&(0,f.jsxs)(m.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginTop:4,children:[(0,f.jsx)(m.xu,{marginEnd:2,children:(0,f.jsx)(o.Z,{outline:!0,size:"xs",src:Z.image_small_url,name:Z.full_name})}),(0,f.jsx)(m.xv,{size:"sm",color:"white",children:Z.full_name})]})]})}),D.isAuth&&D.isEmployee&&C?(0,f.jsx)(m.xu,{position:"absolute",bottom:!0,right:!0,marginBottom:1,children:(0,f.jsx)(x,{handleReport:v,viewType:h,viewParameter:g,imgSignature:S||"",isVisible:e})}):null]})})})}},759746:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(883119),r=n(785893);const s={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"}};function a({backgroundColor:e,children:t,coverImage:n,height:a,id:d,isHovered:l,onMouseEnter:c,onMouseLeave:u,onClick:h,url:p,width:g,disableTabIndex:m}){var f,b;const[v,x]=(0,i.useState)(!1),y=()=>{c?c():x(!0)},_=()=>{u?u():x(!1)},w=l||v;return(0,r.jsx)(o.iP,{role:"link",href:p,onBlur:_,onMouseLeave:_,onFocus:y,onMouseEnter:y,onTap:()=>{null==h||h(d)},rounding:4,tabIndex:m?-1:void 0,children:(0,r.jsx)(o.zd,{rounding:4,width:g||"100%",height:a,children:null!=n&&n.url?(0,r.jsxs)(o.Ee,{alt:"",color:e,fit:"cover",naturalHeight:null!==(f=n.height)&&void 0!==f?f:1,naturalWidth:null!==(b=n.width)&&void 0!==b?b:1,role:"presentation",src:n.url,children:[(0,r.jsx)(o.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:w?s.hoverOverlay:s.bubbleOverlay}}),"function"==typeof t?t({isHovered:w}):t]}):(0,r.jsx)(o.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:e}}})})})}},303975:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294);const o={backgroundColor:"transparent"},r={backgroundColor:"rgba(216, 216, 216, 0.37)"},s={borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},a={outline:"0"};var d=n(883119),l=n(785893);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),c(this,"state",{hovered:!1}),c(this,"handleMouseEnter",(()=>this.setState({hovered:!0}))),c(this,"handleMouseLeave",(()=>this.setState({hovered:!1})))}render(){const{backgroundHaloSize:e,onClick:t}=this.props,n={height:e,width:e},i={border:0,display:"block",background:"transparent",cursor:"pointer",...a},c={...s,...o,...this.state.hovered?r:{}};return(0,l.jsx)("button",{type:"button",style:i,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:e=>t&&t({event:e}),children:(0,l.jsx)("div",{style:{...n,...c},children:(0,l.jsx)(d.xu,{rounding:"circle",children:(0,l.jsx)(d.JO,{accessibilityLabel:"",icon:"flag",size:e/2,color:"lightGray"})})})})}}const h=u},382064:(e,t,n)=>{n.d(t,{X:()=>c,f:()=>l});var i=n(667294);function o(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var r=n(762803),s=n(493858),a=n(785893);const{Provider:d,useHook:l}=(0,r.Z)("ReportData");function c({children:e}){const[t,n]=(0,i.useReducer)(o,null),r=(0,i.useMemo)((()=>({dismiss:()=>n({type:"REPORT_CONTENT_DISMISS"}),reportComment:(e,t,i)=>n({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"aggregatedComment"}}),reportImage:(e,t,i)=>n({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:i,type:"pin"}}),reportPin:(e,t,i)=>{const{id:o,videos:r}=e,a=(0,s.VX)(e),d=(0,s.jL)(e);let l;if((0,s.iR)(r)&&r){const{video_list:e={}}=r,t=e[Object.keys(e)[0]];l=t&&t.duration}n({type:"REPORT_CONTENT_SHOW",payload:{id:o,isProduct:a,isPromoted:d,videoDuration:l,viewParameter:t,viewType:i,type:"pin"}})}})),[n]);return(0,a.jsx)(d,{value:{reportData:t,...r},children:e})}},737989:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(40142),o=n(395308),r=n(619581),s=n(174523),a=n(869950),d=n(691951),l=n(221469),c=n(883119),u=n(855168),h=n(785893);function p({boardResource:{data:e,refresh:t}}){const n=(0,s.ZP)(),p=null==e?void 0:e.id,g=(0,i.useSelector)((e=>p&&(e.boards.content||{})[p]))||null,{search:m,state:f}=(0,u.TH)();if((0,r.Z)(),!g)return(0,h.jsx)(c.$j,{accessibilityLabel:n._("Loading Board page","ExperimentalBoardPageContainer.Spinner","Accessibility label on loading spinner"),show:!0});const b=null==f?void 0:f.newBoard,v=(0,a.Uz)(null==e?void 0:e.sensitivity),x=b&&!v&&null!=e&&e.should_show_more_ideas?d.s.jumpstartBoard:null,y=(0,l.mB)(m);return(0,h.jsx)(o.Z,{board:g,initialModalType:x,refreshBoardData:t,showPulsar:Boolean(y.showPulsar)})}var g=n(602033),m=n(34411),f=n(250311);function b(){const e=(0,m.Z)(),{username:t}=(0,u.UO)(),n=e.isAuth&&e.username===t;(0,f.Q)({view_type:5,view_parameter:n?3069:3070});const i=(0,g.Z)({name:"BoardResource",getOptions:({routeData:{params:{slug:e,username:t}}})=>({username:t,slug:unescape(e||""),field_set_key:"detailed"})});return(0,h.jsx)(p,{boardResource:i})}},372833:(e,t,n)=>{n.d(t,{B:()=>s,Z:()=>a});var i=n(858875),o=n(704170);const r=[];function s(e){let t;try{t=JSON.stringify({errorObj:e})}catch(d){t=JSON.stringify({errorObj:{message:e.message,name:"logToServer stringify exception"}})}const n=(s={report_context:JSON.stringify({current_url:window.location.href,client_version:"ab58a2c"}),report_data:t},Object.keys(s).map((e=>e+"="+encodeURIComponent(s[e]))).join("&"));var s;const a=window.btoa(n);if(-1===r.indexOf(a)){const e=new XMLHttpRequest;e.open("post","/_/_/report/error/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded");const t=(0,o.H)();t&&e.setRequestHeader("X-Pinterest-PWS-Handler",t),e.setRequestHeader("X-CSRFToken",function(e){const t=("; "+document.cookie).split("; "+e.name+"=");return 2===t.length?t.pop().split(";").shift():""}(i.fS)),e.send(n),r.push(a)}r.length>100&&r.shift()}function a(){window.addEventListener("error",(e=>{const t=e.error||{};s({name:t.name,message:t.message||e.message,stack:t.stack,filename:e.filename,line:e.lineno,column:e.colno})})),window.addEventListener("unhandledrejection",(e=>{var t,n,i,o,r;if(!((null==e?void 0:e.reason)instanceof Error))return;const{reason:a}=e,d="string"==typeof(null==a?void 0:a.message)?a.message:String(a);s({name:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"unhandledrejection",message:d,message_detail:null==a?void 0:a.message_detail,original_message:null==a?void 0:a.original_message,stack:null==a?void 0:a.stack,filename:null==a?void 0:a.fileName,line:null!==(n=null!==(i=null==a?void 0:a.lineno)&&void 0!==i?i:null==a?void 0:a.line)&&void 0!==n?n:null==a?void 0:a.lineNumber,column:null!==(o=null!==(r=null==a?void 0:a.column)&&void 0!==r?r:null==a?void 0:a.colno)&&void 0!==o?o:null==a?void 0:a.columnNumber})}))}}},e=>{e.O(0,[11450],(()=>{[76030,21632,92982,91871,18764,56103,48035,5035,57382,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[76030,21632,92982,91871,18764,56103,48035,5035,57382,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[76030,21632,92982,91871,18764,56103,48035,5035,57382,43473,22347,22538,1593].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,73559,20645,12506,99336,29786,9136,48455,68648,35247,25643,35844],(()=>(t(227608),t(733237),t(617911))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/[username]/[slug]-authdesktop-407c6c7f4eee0775.mjs.map